{"format_version":"1.2","terraform_version":"1.14.2","variables":{"days_until_black_friday":{"value":7},"enable_api_access":{"value":true},"enable_memory_optimization_demo":{"value":true},"enable_message_size_breach_demo":{"value":true},"example_env":{"value":"terraform-example"},"memory_optimization_container_count":{"value":3},"memory_optimization_container_memory":{"value":2048},"message_size_breach_batch_size":{"value":10},"message_size_breach_lambda_memory":{"value":1024},"message_size_breach_lambda_timeout":{"value":180},"message_size_breach_max_size":{"value":25600},"message_size_breach_retention_days":{"value":14}},"planned_values":{"outputs":{"api_server_instance_id":{"sensitive":false,"type":"string","value":"i-0d1d4384862781a22"},"api_server_url":{"sensitive":false,"type":"string","value":"http://api-51c748b4-alb-1999780759.eu-west-2.elb.amazonaws.com"},"shared_sg_api_server_id":{"sensitive":false,"type":"string","value":"i-0e205109677d47e83"},"shared_sg_manual_instance_command":{"sensitive":false,"type":"string","value":"aws ec2 run-instances --image-id ami-02a95139d1d364420 --instance-type t3.nano --subnet-id subnet-0a1b287732e8ad0b7 --security-group-ids sg-0437857de45b640ce --tag-specifications 'ResourceType=instance,Tags=[{Key=Name,Value=data-processor},{Key=Team,Value=data-engineering},{Key=CreatedBy,Value=console}]' --region eu-west-2"},"shared_sg_security_group_id":{"sensitive":false,"type":"string","value":"sg-0437857de45b640ce"}},"root_module":{"resources":[{"address":"aws_dynamodb_table.terraform-example-lock-table","mode":"managed","type":"aws_dynamodb_table","name":"terraform-example-lock-table","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:dynamodb:eu-west-2:540044833068:table/overmind-tf-example-state","attribute":[{"name":"LockID","type":"S"}],"billing_mode":"PAY_PER_REQUEST","deletion_protection_enabled":false,"global_secondary_index":[],"hash_key":"LockID","id":"overmind-tf-example-state","import_table":[],"local_secondary_index":[],"name":"overmind-tf-example-state","on_demand_throughput":[],"point_in_time_recovery":[{"enabled":false,"recovery_period_in_days":0}],"range_key":null,"read_capacity":0,"replica":[],"restore_date_time":null,"restore_source_name":null,"restore_source_table_arn":null,"restore_to_latest_time":null,"server_side_encryption":[],"stream_arn":"","stream_enabled":false,"stream_label":"","stream_view_type":"","table_class":"STANDARD","tags":{},"tags_all":{},"timeouts":null,"ttl":[{"attribute_name":"","enabled":false}],"write_capacity":0},"sensitive_values":{"attribute":[{}],"global_secondary_index":[],"import_table":[],"local_secondary_index":[],"on_demand_throughput":[],"point_in_time_recovery":[{}],"replica":[],"server_side_encryption":[],"tags":{},"tags_all":{},"ttl":[{}]}},{"address":"aws_iam_openid_connect_provider.env0[0]","mode":"managed","type":"aws_iam_openid_connect_provider","name":"env0","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::540044833068:oidc-provider/login.app.env0.com/","client_id_list":["hoMiq9PdkRh9LUvVpH4wIErWg50VSG1b"],"id":"arn:aws:iam::540044833068:oidc-provider/login.app.env0.com/","tags":{},"tags_all":{},"thumbprint_list":["06b25927c42a721631c1efd9431e648fa62e1e39"],"url":"login.app.env0.com/"},"sensitive_values":{"client_id_list":[false],"tags":{},"tags_all":{},"thumbprint_list":[false]}},{"address":"aws_iam_openid_connect_provider.github[0]","mode":"managed","type":"aws_iam_openid_connect_provider","name":"github","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::540044833068:oidc-provider/token.actions.githubusercontent.com","client_id_list":["sts.amazonaws.com"],"id":"arn:aws:iam::540044833068:oidc-provider/token.actions.githubusercontent.com","tags":{},"tags_all":{},"thumbprint_list":["6938fd4d98bab03faadb97b34396831e3780aea1"],"url":"token.actions.githubusercontent.com"},"sensitive_values":{"client_id_list":[false],"tags":{},"tags_all":{},"thumbprint_list":[false]}},{"address":"aws_iam_openid_connect_provider.tfc_provider[0]","mode":"managed","type":"aws_iam_openid_connect_provider","name":"tfc_provider","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::540044833068:oidc-provider/app.terraform.io","client_id_list":["aws.workload.identity"],"id":"arn:aws:iam::540044833068:oidc-provider/app.terraform.io","tags":{},"tags_all":{},"thumbprint_list":["06b25927c42a721631c1efd9431e648fa62e1e39"],"url":"app.terraform.io"},"sensitive_values":{"client_id_list":[false],"tags":{},"tags_all":{},"thumbprint_list":[false]}},{"address":"aws_iam_policy.state_access","mode":"managed","type":"aws_iam_policy","name":"state_access","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::540044833068:policy/TerraformStateAccess-terraform-example","attachment_count":1,"description":"Allows access to everything terraform needs (state, lock, deploy role) to deploy","id":"arn:aws:iam::540044833068:policy/TerraformStateAccess-terraform-example","name":"TerraformStateAccess-terraform-example","name_prefix":"","path":"/","policy":"{\"Statement\":[{\"Action\":[\"sts:AssumeRole\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:iam::540044833068:role/terraform-example\",\"Sid\":\"Deploy\"},{\"Action\":[\"s3:ListBucket\",\"s3:GetEncryptionConfiguration\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::replaceme-with-a-unique-bucket-name\",\"Sid\":\"TFStateList\"},{\"Action\":[\"s3:PutObject\",\"s3:GetObject\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::replaceme-with-a-unique-bucket-name/*\",\"Sid\":\"TFStateAccess\"},{\"Action\":[\"dynamodb:PutItem\",\"dynamodb:DeleteItem\",\"dynamodb:GetItem\",\"dynamodb:Query\",\"dynamodb:UpdateItem\"],\"Condition\":{\"ForAllValues:StringEquals\":{\"dynamodb:LeadingKeys\":[\"replaceme-with-a-unique-bucket-name/env:/terraform-example/terraform-example.tfstate\",\"replaceme-with-a-unique-bucket-name/env:/terraform-example/terraform-example.tfstate-md5\"]}},\"Effect\":\"Allow\",\"Resource\":\"arn:aws:dynamodb:*:*:table/overmind-tf-example-state\",\"Sid\":\"TFLock\"}],\"Version\":\"2012-10-17\"}","policy_id":"ANPAX3PJOGEWCPJ4F4MT7","tags":{},"tags_all":{}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"aws_iam_role.deploy_role","mode":"managed","type":"aws_iam_role","name":"deploy_role","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::540044833068:role/terraform-example","assume_role_policy":"{\"Statement\":[{\"Action\":[\"sts:AssumeRoleWithWebIdentity\"],\"Condition\":{\"StringEquals\":{\"token.actions.githubusercontent.com:aud\":\"sts.amazonaws.com\"},\"StringLike\":{\"token.actions.githubusercontent.com:sub\":\"repo:overmindtech/terraform-example:*\"}},\"Effect\":\"Allow\",\"Principal\":{\"Federated\":\"arn:aws:iam::540044833068:oidc-provider/token.actions.githubusercontent.com\"},\"Sid\":\"AllowGithubOIDC\"},{\"Action\":[\"sts:AssumeRoleWithWebIdentity\"],\"Condition\":{\"StringEquals\":{\"app.terraform.io:aud\":\"aws.workload.identity\"},\"StringLike\":{\"app.terraform.io:sub\":\"organization:Overmind:project:Example:workspace:terraform-example:run_phase:*\"}},\"Effect\":\"Allow\",\"Principal\":{\"Federated\":\"arn:aws:iam::540044833068:oidc-provider/app.terraform.io\"},\"Sid\":\"AllowTerraformOIDC\"},{\"Action\":[\"sts:AssumeRoleWithWebIdentity\",\"sts:TagSession\"],\"Condition\":{\"StringEquals\":{\"login.app.env0.com/:aud\":\"hoMiq9PdkRh9LUvVpH4wIErWg50VSG1b\",\"login.app.env0.com/:sub\":\"auth0|691b8530eba074a8989d8726\"}},\"Effect\":\"Allow\",\"Principal\":{\"Federated\":\"arn:aws:iam::540044833068:oidc-provider/login.app.env0.com/\"},\"Sid\":\"AllowEnv0OIDC\"},{\"Action\":[\"sts:AssumeRole\"],\"Condition\":{\"StringLike\":{\"sts:ExternalId\":\"overmind-demo@*\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"324880187172\"},\"Sid\":\"AllowSpacelift\"}],\"Version\":\"2012-10-17\"}","create_date":"2025-11-17T23:20:28Z","description":"This is the role used by terraform running on github actions or Terraform Cloud to deploy.","force_detach_policies":false,"id":"terraform-example","inline_policy":[{"name":"AllowPublicECR","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"ecr-public:GetAuthorizationToken\",\"sts:GetServiceBearerToken\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}"}],"managed_policy_arns":["arn:aws:iam::540044833068:policy/TerraformStateAccess-terraform-example","arn:aws:iam::aws:policy/AdministratorAccess"],"max_session_duration":3600,"name":"terraform-example","name_prefix":"","path":"/","permissions_boundary":"","tags":{},"tags_all":{},"unique_id":"AROAX3PJOGEWIPNS5Y4JH"},"sensitive_values":{"inline_policy":[{}],"managed_policy_arns":[false,false],"tags":{},"tags_all":{}}},{"address":"aws_s3_bucket.terraform-example-state-bucket","mode":"managed","type":"aws_s3_bucket","name":"terraform-example-state-bucket","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"acceleration_status":"","acl":null,"arn":"arn:aws:s3:::replaceme-with-a-unique-bucket-name","bucket":"replaceme-with-a-unique-bucket-name","bucket_domain_name":"replaceme-with-a-unique-bucket-name.s3.amazonaws.com","bucket_prefix":"","bucket_regional_domain_name":"replaceme-with-a-unique-bucket-name.s3.eu-west-2.amazonaws.com","cors_rule":[],"force_destroy":false,"grant":[{"id":"05d918fa182ad8f3fa915436354b8657e3c2c59b326ecbfc43e6c00451268d0a","permissions":["FULL_CONTROL"],"type":"CanonicalUser","uri":""}],"hosted_zone_id":"Z3GKZC51ZF0DB4","id":"replaceme-with-a-unique-bucket-name","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"object_lock_enabled":false,"policy":"","region":"eu-west-2","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"","sse_algorithm":"AES256"}],"bucket_key_enabled":false}]}],"tags":{},"tags_all":{},"timeouts":null,"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"sensitive_values":{"cors_rule":[],"grant":[{"permissions":[false]}],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}],"tags":{},"tags_all":{},"versioning":[{}],"website":[]}}],"child_modules":[{"resources":[{"address":"module.api_access[0].aws_cloudwatch_metric_alarm.api_health","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"api_health","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"actions_enabled":true,"alarm_actions":["arn:aws:sns:eu-west-2:540044833068:production-api-alerts"],"alarm_description":"Production API health check failing - pages on-call team","alarm_name":"production-api-health-check-failed","arn":"arn:aws:cloudwatch:eu-west-2:540044833068:alarm:production-api-health-check-failed","comparison_operator":"LessThanThreshold","datapoints_to_alarm":0,"dimensions":{"HealthCheckId":"2161fd41-d21d-4021-8337-13a621cec290"},"evaluate_low_sample_count_percentiles":"","evaluation_periods":2,"extended_statistic":"","id":"production-api-health-check-failed","insufficient_data_actions":[],"metric_name":"HealthCheckStatus","metric_query":[],"namespace":"AWS/Route53","ok_actions":["arn:aws:sns:eu-west-2:540044833068:production-api-alerts"],"period":60,"statistic":"Minimum","tags":{"Environment":"production","Service":"core-api","Severity":"critical"},"tags_all":{"Environment":"production","Service":"core-api","Severity":"critical"},"threshold":1,"threshold_metric_id":"","treat_missing_data":"missing","unit":""},"sensitive_values":{"alarm_actions":[false],"dimensions":{},"insufficient_data_actions":[],"metric_query":[],"ok_actions":[false],"tags":{},"tags_all":{}}},{"address":"module.api_access[0].aws_eip.api_server","mode":"managed","type":"aws_eip","name":"api_server","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"address":null,"allocation_id":"eipalloc-0dba2be7032e76458","arn":"arn:aws:ec2:eu-west-2:540044833068:elastic-ip/eipalloc-0dba2be7032e76458","associate_with_private_ip":null,"association_id":"eipassoc-065e352e6eb2f0fc4","carrier_ip":"","customer_owned_ip":"","customer_owned_ipv4_pool":"","domain":"vpc","id":"eipalloc-0dba2be7032e76458","instance":"i-0355d048569c5d522","ipam_pool_id":null,"network_border_group":"eu-west-2","network_interface":"eni-08b9e3b07fe6ddd2b","private_dns":"ip-10-0-101-81.eu-west-2.compute.internal","private_ip":"10.0.101.81","ptr_record":"","public_dns":"ec2-18-132-149-19.eu-west-2.compute.amazonaws.com","public_ip":"18.132.149.19","public_ipv4_pool":"amazon","tags":{"Environment":"production","Name":"production-api-eip","Service":"core-api"},"tags_all":{"Environment":"production","Name":"production-api-eip","Service":"core-api"},"timeouts":null,"vpc":true},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.api_access[0].aws_instance.api_server","mode":"managed","type":"aws_instance","name":"api_server","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"ami":"ami-021f9b1d0460d2e30","arn":"arn:aws:ec2:eu-west-2:540044833068:instance/i-0355d048569c5d522","associate_public_ip_address":true,"availability_zone":"eu-west-2a","capacity_reservation_specification":[{"capacity_reservation_preference":"open","capacity_reservation_target":[]}],"cpu_core_count":2,"cpu_options":[{"amd_sev_snp":"","core_count":2,"threads_per_core":1}],"cpu_threads_per_core":1,"credit_specification":[{"cpu_credits":"unlimited"}],"disable_api_stop":false,"disable_api_termination":false,"ebs_block_device":[],"ebs_optimized":false,"enable_primary_ipv6":null,"enclave_options":[{"enabled":false}],"ephemeral_block_device":[],"get_password_data":false,"hibernation":false,"host_id":"","host_resource_group_arn":null,"iam_instance_profile":"","id":"i-0355d048569c5d522","instance_initiated_shutdown_behavior":"stop","instance_lifecycle":"","instance_market_options":[],"instance_state":"running","instance_type":"t4g.nano","ipv6_address_count":0,"ipv6_addresses":[],"key_name":"","launch_template":[],"maintenance_options":[{"auto_recovery":"default"}],"metadata_options":[{"http_endpoint":"enabled","http_protocol_ipv6":"disabled","http_put_response_hop_limit":2,"http_tokens":"required","instance_metadata_tags":"disabled"}],"monitoring":false,"network_interface":[],"outpost_arn":"","password_data":"","placement_group":"","placement_partition_number":0,"primary_network_interface_id":"eni-08b9e3b07fe6ddd2b","private_dns":"ip-10-0-101-81.eu-west-2.compute.internal","private_dns_name_options":[{"enable_resource_name_dns_a_record":false,"enable_resource_name_dns_aaaa_record":false,"hostname_type":"ip-name"}],"private_ip":"10.0.101.81","public_dns":"ec2-18-132-149-19.eu-west-2.compute.amazonaws.com","public_ip":"18.132.149.19","root_block_device":[{"delete_on_termination":true,"device_name":"/dev/xvda","encrypted":false,"iops":3000,"kms_key_id":"","tags":{},"tags_all":{},"throughput":125,"volume_id":"vol-0b3f1b2cd8cfee137","volume_size":30,"volume_type":"gp3"}],"secondary_private_ips":[],"security_groups":[],"source_dest_check":true,"spot_instance_request_id":"","subnet_id":"subnet-0a1b287732e8ad0b7","tags":{"CostCenter":"engineering","Environment":"production","Name":"production-api-server","OnCall":"platform-oncall@company.com","Service":"core-api","Team":"platform"},"tags_all":{"CostCenter":"engineering","Environment":"production","Name":"production-api-server","OnCall":"platform-oncall@company.com","Service":"core-api","Team":"platform"},"tenancy":"default","timeouts":null,"user_data":null,"user_data_base64":null,"user_data_replace_on_change":false,"volume_tags":null,"vpc_security_group_ids":["sg-085ee012c9855643f","sg-08c3767d4eeede7b5"]},"sensitive_values":{"capacity_reservation_specification":[{"capacity_reservation_target":[]}],"cpu_options":[{}],"credit_specification":[{}],"ebs_block_device":[],"enclave_options":[{}],"ephemeral_block_device":[],"instance_market_options":[],"ipv6_addresses":[],"launch_template":[],"maintenance_options":[{}],"metadata_options":[{}],"network_interface":[],"private_dns_name_options":[{}],"root_block_device":[{"tags":{},"tags_all":{}}],"secondary_private_ips":[],"security_groups":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[false,false]}},{"address":"module.api_access[0].aws_route53_health_check.api","mode":"managed","type":"aws_route53_health_check","name":"api","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:route53:::healthcheck/2161fd41-d21d-4021-8337-13a621cec290","child_health_threshold":0,"child_healthchecks":[],"cloudwatch_alarm_name":null,"cloudwatch_alarm_region":null,"disabled":false,"enable_sni":true,"failure_threshold":3,"fqdn":"","id":"2161fd41-d21d-4021-8337-13a621cec290","insufficient_data_health_status":"","invert_healthcheck":false,"ip_address":"18.132.149.19","measure_latency":false,"port":443,"reference_name":null,"regions":[],"request_interval":30,"resource_path":"/health","routing_control_arn":"","search_string":"","tags":{"Environment":"production","Name":"production-api-health","Service":"core-api"},"tags_all":{"Environment":"production","Name":"production-api-health","Service":"core-api"},"triggers":{},"type":"HTTPS"},"sensitive_values":{"child_healthchecks":[],"regions":[],"tags":{},"tags_all":{},"triggers":{}}},{"address":"module.api_access[0].aws_route53_record.api","mode":"managed","type":"aws_route53_record","name":"api","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"alias":[],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"geoproximity_routing_policy":[],"health_check_id":null,"latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"api.example.com","records":["18.132.149.19"],"set_identifier":null,"timeouts":null,"ttl":300,"type":"A","weighted_routing_policy":[]},"sensitive_values":{"alias":[],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"geoproximity_routing_policy":[],"latency_routing_policy":[],"records":[false],"weighted_routing_policy":[]}},{"address":"module.api_access[0].aws_route53_zone.api","mode":"managed","type":"aws_route53_zone","name":"api","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"comment":"Managed by Terraform","delegation_set_id":null,"force_destroy":false,"name":"api.example.com","tags":{"Environment":"production","Purpose":"api-endpoint"},"tags_all":{"Environment":"production","Purpose":"api-endpoint"},"timeouts":null,"vpc":[]},"sensitive_values":{"name_servers":[],"tags":{},"tags_all":{},"vpc":[]}},{"address":"module.api_access[0].aws_security_group.customer_access","mode":"managed","type":"aws_security_group","name":"customer_access","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:eu-west-2:540044833068:security-group/sg-085ee012c9855643f","description":"Customer IP whitelist for API access - updated frequently","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"Allow all outbound","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-085ee012c9855643f","ingress":[{"cidr_blocks":["100.64.0.0/29"],"description":"Cyberdyne Systems","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443},{"cidr_blocks":["192.0.2.50/32"],"description":"Initech","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443},{"cidr_blocks":["198.18.100.0/24"],"description":"Umbrella Corp","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443},{"cidr_blocks":["198.51.100.0/29"],"description":"Globex Industries","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443},{"cidr_blocks":["203.0.113.10/32"],"description":"Acme Corp","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443}],"name":"customer-api-access","name_prefix":"","owner_id":"540044833068","revoke_rules_on_delete":false,"tags":{"Environment":"production","Name":"customer-api-access","Purpose":"customer-whitelist","Team":"platform","UpdateFrequency":"high"},"tags_all":{"Environment":"production","Name":"customer-api-access","Purpose":"customer-whitelist","Team":"platform","UpdateFrequency":"high"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}},{"address":"module.api_access[0].aws_security_group.internal_services","mode":"managed","type":"aws_security_group","name":"internal_services","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:eu-west-2:540044833068:security-group/sg-08c3767d4eeede7b5","description":"Internal service mesh, monitoring, and health check access - rarely modified","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"Allow all outbound","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-08c3767d4eeede7b5","ingress":[{"cidr_blocks":["10.0.0.0/8"],"description":"Health check endpoint","from_port":8080,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":8080},{"cidr_blocks":["10.0.0.0/8"],"description":"Internal HTTPS - monitoring, service mesh, internal tools","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443},{"cidr_blocks":["10.0.0.0/8"],"description":"Prometheus metrics scraping","from_port":9090,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":9090}],"name":"internal-services","name_prefix":"","owner_id":"540044833068","revoke_rules_on_delete":false,"tags":{"Critical":"true","Environment":"production","Name":"internal-services","Purpose":"internal-mesh","Team":"platform","UpdateFrequency":"low"},"tags_all":{"Critical":"true","Environment":"production","Name":"internal-services","Purpose":"internal-mesh","Team":"platform","UpdateFrequency":"low"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}},{"address":"module.api_access[0].aws_sns_topic.alerts","mode":"managed","type":"aws_sns_topic","name":"alerts","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"application_failure_feedback_role_arn":"","application_success_feedback_role_arn":"","application_success_feedback_sample_rate":0,"archive_policy":"","arn":"arn:aws:sns:eu-west-2:540044833068:production-api-alerts","beginning_archive_time":"","content_based_deduplication":false,"delivery_policy":"","display_name":"","fifo_throughput_scope":"","fifo_topic":false,"firehose_failure_feedback_role_arn":"","firehose_success_feedback_role_arn":"","firehose_success_feedback_sample_rate":0,"http_failure_feedback_role_arn":"","http_success_feedback_role_arn":"","http_success_feedback_sample_rate":0,"id":"arn:aws:sns:eu-west-2:540044833068:production-api-alerts","kms_master_key_id":"","lambda_failure_feedback_role_arn":"","lambda_success_feedback_role_arn":"","lambda_success_feedback_sample_rate":0,"name":"production-api-alerts","name_prefix":"","owner":"540044833068","policy":"{\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Action\":[\"SNS:GetTopicAttributes\",\"SNS:SetTopicAttributes\",\"SNS:AddPermission\",\"SNS:RemovePermission\",\"SNS:DeleteTopic\",\"SNS:Subscribe\",\"SNS:ListSubscriptionsByTopic\",\"SNS:Publish\"],\"Condition\":{\"StringEquals\":{\"AWS:SourceOwner\":\"540044833068\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Resource\":\"arn:aws:sns:eu-west-2:540044833068:production-api-alerts\",\"Sid\":\"__default_statement_ID\"}],\"Version\":\"2008-10-17\"}","signature_version":0,"sqs_failure_feedback_role_arn":"","sqs_success_feedback_role_arn":"","sqs_success_feedback_sample_rate":0,"tags":{"Environment":"production","Purpose":"oncall-alerts","Severity":"critical"},"tags_all":{"Environment":"production","Purpose":"oncall-alerts","Severity":"critical"},"tracing_config":""},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.api_access[0].aws_sns_topic_subscription.oncall_email","mode":"managed","type":"aws_sns_topic_subscription","name":"oncall_email","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:sns:eu-west-2:540044833068:production-api-alerts:33d3ad1c-91bb-4926-8c9f-9cb546486ff7","confirmation_timeout_in_minutes":1,"confirmation_was_authenticated":false,"delivery_policy":"","endpoint":"alerts@example.com","endpoint_auto_confirms":false,"filter_policy":"","filter_policy_scope":"","id":"arn:aws:sns:eu-west-2:540044833068:production-api-alerts:33d3ad1c-91bb-4926-8c9f-9cb546486ff7","owner_id":"540044833068","pending_confirmation":true,"protocol":"email","raw_message_delivery":false,"redrive_policy":"","replay_policy":"","subscription_role_arn":"","topic_arn":"arn:aws:sns:eu-west-2:540044833068:production-api-alerts"},"sensitive_values":{}}],"address":"module.api_access[0]"},{"resources":[{"address":"module.api_server.aws_cloudwatch_metric_alarm.high_cpu[0]","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"high_cpu","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"actions_enabled":true,"alarm_actions":["arn:aws:sns:eu-west-2:540044833068:api-51c748b4-alerts"],"alarm_description":"CPU utilization exceeds 80%","alarm_name":"api-51c748b4-high-cpu","arn":"arn:aws:cloudwatch:eu-west-2:540044833068:alarm:api-51c748b4-high-cpu","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":0,"dimensions":{"InstanceId":"i-0d1d4384862781a22"},"evaluate_low_sample_count_percentiles":"","evaluation_periods":2,"extended_statistic":"","id":"api-51c748b4-high-cpu","insufficient_data_actions":[],"metric_name":"CPUUtilization","metric_query":[],"namespace":"AWS/EC2","ok_actions":["arn:aws:sns:eu-west-2:540044833068:api-51c748b4-alerts"],"period":300,"statistic":"Average","tags":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-cpu-alarm","Project":"api-platform","Workload":"cpu-intensive"},"tags_all":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-cpu-alarm","Project":"api-platform","Workload":"cpu-intensive"},"threshold":80,"threshold_metric_id":"","treat_missing_data":"missing","unit":""},"sensitive_values":{"alarm_actions":[false],"dimensions":{},"insufficient_data_actions":[],"metric_query":[],"ok_actions":[false],"tags":{},"tags_all":{}}},{"address":"module.api_server.aws_cloudwatch_metric_alarm.unhealthy_targets[0]","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"unhealthy_targets","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"actions_enabled":true,"alarm_actions":["arn:aws:sns:eu-west-2:540044833068:api-51c748b4-alerts"],"alarm_description":"Load balancer has unhealthy targets","alarm_name":"api-51c748b4-unhealthy-targets","arn":"arn:aws:cloudwatch:eu-west-2:540044833068:alarm:api-51c748b4-unhealthy-targets","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":0,"dimensions":{"LoadBalancer":"app/api-51c748b4-alb/5006497ce35b7ecd","TargetGroup":"targetgroup/api-51c748b4-tg/fa0513c079206e1e"},"evaluate_low_sample_count_percentiles":"","evaluation_periods":2,"extended_statistic":"","id":"api-51c748b4-unhealthy-targets","insufficient_data_actions":[],"metric_name":"UnHealthyHostCount","metric_query":[],"namespace":"AWS/ApplicationELB","ok_actions":["arn:aws:sns:eu-west-2:540044833068:api-51c748b4-alerts"],"period":60,"statistic":"Average","tags":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-health-alarm","Project":"api-platform","Workload":"cpu-intensive"},"tags_all":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-health-alarm","Project":"api-platform","Workload":"cpu-intensive"},"threshold":0,"threshold_metric_id":"","treat_missing_data":"missing","unit":""},"sensitive_values":{"alarm_actions":[false],"dimensions":{},"insufficient_data_actions":[],"metric_query":[],"ok_actions":[false],"tags":{},"tags_all":{}}},{"address":"module.api_server.aws_iam_instance_profile.api_server[0]","mode":"managed","type":"aws_iam_instance_profile","name":"api_server","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::540044833068:instance-profile/api-51c748b4-api-profile","create_date":"2025-12-09T23:43:28Z","id":"api-51c748b4-api-profile","name":"api-51c748b4-api-profile","name_prefix":"","path":"/","role":"api-51c748b4-api-role","tags":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-api-profile","Project":"api-platform","Workload":"cpu-intensive"},"tags_all":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-api-profile","Project":"api-platform","Workload":"cpu-intensive"},"unique_id":"AIPAX3PJOGEWDK52XMNRS"},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.api_server.aws_iam_role.api_server[0]","mode":"managed","type":"aws_iam_role","name":"api_server","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::540044833068:role/api-51c748b4-api-role","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","create_date":"2025-12-09T23:43:28Z","description":"","force_detach_policies":false,"id":"api-51c748b4-api-role","inline_policy":[],"managed_policy_arns":["arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore","arn:aws:iam::aws:policy/CloudWatchAgentServerPolicy"],"max_session_duration":3600,"name":"api-51c748b4-api-role","name_prefix":"","path":"/","permissions_boundary":"","tags":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-api-role","Project":"api-platform","Workload":"cpu-intensive"},"tags_all":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-api-role","Project":"api-platform","Workload":"cpu-intensive"},"unique_id":"AROAX3PJOGEWDTMWQ5E7F"},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[false,false],"tags":{},"tags_all":{}}},{"address":"module.api_server.aws_iam_role_policy_attachment.cloudwatch_agent[0]","mode":"managed","type":"aws_iam_role_policy_attachment","name":"cloudwatch_agent","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"api-51c748b4-api-role-20251209234328560800000001","policy_arn":"arn:aws:iam::aws:policy/CloudWatchAgentServerPolicy","role":"api-51c748b4-api-role"},"sensitive_values":{}},{"address":"module.api_server.aws_iam_role_policy_attachment.ssm[0]","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ssm","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"api-51c748b4-api-role-20251209234328620600000002","policy_arn":"arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore","role":"api-51c748b4-api-role"},"sensitive_values":{}},{"address":"module.api_server.aws_instance.api_server[0]","mode":"managed","type":"aws_instance","name":"api_server","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"ami":"ami-02a95139d1d364420","arn":"arn:aws:ec2:eu-west-2:540044833068:instance/i-0d1d4384862781a22","associate_public_ip_address":true,"availability_zone":"eu-west-2a","capacity_reservation_specification":[{"capacity_reservation_preference":"open","capacity_reservation_target":[]}],"cpu_core_count":1,"cpu_options":[{"amd_sev_snp":"","core_count":1,"threads_per_core":2}],"cpu_threads_per_core":2,"credit_specification":[],"disable_api_stop":false,"disable_api_termination":false,"ebs_block_device":[],"ebs_optimized":false,"enable_primary_ipv6":null,"enclave_options":[{"enabled":false}],"ephemeral_block_device":[],"get_password_data":false,"hibernation":false,"host_id":"","host_resource_group_arn":null,"iam_instance_profile":"api-51c748b4-api-profile","id":"i-0d1d4384862781a22","instance_initiated_shutdown_behavior":"stop","instance_lifecycle":"","instance_market_options":[],"instance_state":"running","instance_type":"c5.large","ipv6_address_count":0,"ipv6_addresses":[],"key_name":"","launch_template":[],"maintenance_options":[{"auto_recovery":"default"}],"metadata_options":[{"http_endpoint":"enabled","http_protocol_ipv6":"disabled","http_put_response_hop_limit":1,"http_tokens":"optional","instance_metadata_tags":"disabled"}],"monitoring":false,"network_interface":[],"outpost_arn":"","password_data":"","placement_group":"","placement_partition_number":0,"primary_network_interface_id":"eni-0c732e6544f94d4fe","private_dns":"ip-10-0-101-249.eu-west-2.compute.internal","private_dns_name_options":[{"enable_resource_name_dns_a_record":false,"enable_resource_name_dns_aaaa_record":false,"hostname_type":"ip-name"}],"private_ip":"10.0.101.249","public_dns":"ec2-35-178-48-219.eu-west-2.compute.amazonaws.com","public_ip":"35.178.48.219","root_block_device":[{"delete_on_termination":true,"device_name":"/dev/xvda","encrypted":false,"iops":3000,"kms_key_id":"","tags":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-root-volume","Project":"api-platform","Workload":"cpu-intensive"},"tags_all":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-root-volume","Project":"api-platform","Workload":"cpu-intensive"},"throughput":125,"volume_id":"vol-084fb1fcaad21f25b","volume_size":8,"volume_type":"gp3"}],"secondary_private_ips":[],"security_groups":[],"source_dest_check":true,"spot_instance_request_id":"","subnet_id":"subnet-0a1b287732e8ad0b7","tags":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-api-server","Project":"api-platform","Workload":"cpu-intensive"},"tags_all":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-api-server","Project":"api-platform","Workload":"cpu-intensive"},"tenancy":"default","timeouts":null,"user_data":"627f06eeee1e41f87d9e55ae56203ae81058d890","user_data_base64":null,"user_data_replace_on_change":false,"volume_tags":null,"vpc_security_group_ids":["sg-0bf5d5df489e89796"]},"sensitive_values":{"capacity_reservation_specification":[{"capacity_reservation_target":[]}],"cpu_options":[{}],"credit_specification":[],"ebs_block_device":[],"enclave_options":[{}],"ephemeral_block_device":[],"instance_market_options":[],"ipv6_addresses":[],"launch_template":[],"maintenance_options":[{}],"metadata_options":[{}],"network_interface":[],"private_dns_name_options":[{}],"root_block_device":[{"tags":{},"tags_all":{}}],"secondary_private_ips":[],"security_groups":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[false]}},{"address":"module.api_server.aws_lb.api[0]","mode":"managed","type":"aws_lb","name":"api","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"access_logs":[{"bucket":"","enabled":false,"prefix":""}],"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:loadbalancer/app/api-51c748b4-alb/5006497ce35b7ecd","arn_suffix":"app/api-51c748b4-alb/5006497ce35b7ecd","client_keep_alive":3600,"connection_logs":[{"bucket":"","enabled":false,"prefix":""}],"customer_owned_ipv4_pool":"","desync_mitigation_mode":"defensive","dns_name":"api-51c748b4-alb-1999780759.eu-west-2.elb.amazonaws.com","dns_record_client_routing_policy":null,"drop_invalid_header_fields":false,"enable_cross_zone_load_balancing":true,"enable_deletion_protection":false,"enable_http2":true,"enable_tls_version_and_cipher_suite_headers":false,"enable_waf_fail_open":false,"enable_xff_client_port":false,"enable_zonal_shift":false,"enforce_security_group_inbound_rules_on_private_link_traffic":"","id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:loadbalancer/app/api-51c748b4-alb/5006497ce35b7ecd","idle_timeout":60,"internal":false,"ip_address_type":"ipv4","ipam_pools":[],"load_balancer_type":"application","minimum_load_balancer_capacity":[],"name":"api-51c748b4-alb","name_prefix":"","preserve_host_header":false,"security_groups":["sg-0874eb9069f386e2b"],"subnet_mapping":[{"allocation_id":"","ipv6_address":"","outpost_id":"","private_ipv4_address":"","subnet_id":"subnet-07fc72cf57c70e4f0"},{"allocation_id":"","ipv6_address":"","outpost_id":"","private_ipv4_address":"","subnet_id":"subnet-0a1b287732e8ad0b7"}],"subnets":["subnet-07fc72cf57c70e4f0","subnet-0a1b287732e8ad0b7"],"tags":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-alb","Project":"api-platform","Workload":"cpu-intensive"},"tags_all":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-alb","Project":"api-platform","Workload":"cpu-intensive"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298","xff_header_processing_mode":"append","zone_id":"ZHURV8PSTC4K8"},"sensitive_values":{"access_logs":[{}],"connection_logs":[{}],"ipam_pools":[],"minimum_load_balancer_capacity":[],"security_groups":[false],"subnet_mapping":[{},{}],"subnets":[false,false],"tags":{},"tags_all":{}}},{"address":"module.api_server.aws_lb_listener.http[0]","mode":"managed","type":"aws_lb_listener","name":"http","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"alpn_policy":null,"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:listener/app/api-51c748b4-alb/5006497ce35b7ecd/50b208cdabb9cb4d","certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":1,"redirect":[],"target_group_arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/api-51c748b4-tg/fa0513c079206e1e","type":"forward"}],"id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:listener/app/api-51c748b4-alb/5006497ce35b7ecd/50b208cdabb9cb4d","load_balancer_arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:loadbalancer/app/api-51c748b4-alb/5006497ce35b7ecd","mutual_authentication":[],"port":80,"protocol":"HTTP","routing_http_request_x_amzn_mtls_clientcert_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_issuer_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_leaf_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_serial_number_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_subject_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_validity_header_name":null,"routing_http_request_x_amzn_tls_cipher_suite_header_name":null,"routing_http_request_x_amzn_tls_version_header_name":null,"routing_http_response_access_control_allow_credentials_header_value":"","routing_http_response_access_control_allow_headers_header_value":"","routing_http_response_access_control_allow_methods_header_value":"","routing_http_response_access_control_allow_origin_header_value":"","routing_http_response_access_control_expose_headers_header_value":"","routing_http_response_access_control_max_age_header_value":"","routing_http_response_content_security_policy_header_value":"","routing_http_response_server_enabled":true,"routing_http_response_strict_transport_security_header_value":"","routing_http_response_x_content_type_options_header_value":"","routing_http_response_x_frame_options_header_value":"","ssl_policy":"","tags":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-http-listener","Project":"api-platform","Workload":"cpu-intensive"},"tags_all":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-http-listener","Project":"api-platform","Workload":"cpu-intensive"},"tcp_idle_timeout_seconds":null,"timeouts":null},"sensitive_values":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[]}],"mutual_authentication":[],"tags":{},"tags_all":{}}},{"address":"module.api_server.aws_lb_target_group.api[0]","mode":"managed","type":"aws_lb_target_group","name":"api","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/api-51c748b4-tg/fa0513c079206e1e","arn_suffix":"targetgroup/api-51c748b4-tg/fa0513c079206e1e","connection_termination":null,"deregistration_delay":"30","health_check":[{"enabled":true,"healthy_threshold":2,"interval":30,"matcher":"200","path":"/health","port":"traffic-port","protocol":"HTTP","timeout":5,"unhealthy_threshold":3}],"id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/api-51c748b4-tg/fa0513c079206e1e","ip_address_type":"ipv4","lambda_multi_value_headers_enabled":false,"load_balancer_arns":["arn:aws:elasticloadbalancing:eu-west-2:540044833068:loadbalancer/app/api-51c748b4-alb/5006497ce35b7ecd"],"load_balancing_algorithm_type":"round_robin","load_balancing_anomaly_mitigation":"off","load_balancing_cross_zone_enabled":"use_load_balancer_configuration","name":"api-51c748b4-tg","name_prefix":"","port":80,"preserve_client_ip":null,"protocol":"HTTP","protocol_version":"HTTP1","proxy_protocol_v2":false,"slow_start":0,"stickiness":[{"cookie_duration":86400,"cookie_name":"","enabled":false,"type":"lb_cookie"}],"tags":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-tg","Project":"api-platform","Workload":"cpu-intensive"},"tags_all":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-tg","Project":"api-platform","Workload":"cpu-intensive"},"target_failover":[{"on_deregistration":null,"on_unhealthy":null}],"target_group_health":[{"dns_failover":[{"minimum_healthy_targets_count":"1","minimum_healthy_targets_percentage":"off"}],"unhealthy_state_routing":[{"minimum_healthy_targets_count":1,"minimum_healthy_targets_percentage":"off"}]}],"target_health_state":[{"enable_unhealthy_connection_termination":null,"unhealthy_draining_interval":null}],"target_type":"instance","vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"health_check":[{}],"load_balancer_arns":[false],"stickiness":[{}],"tags":{},"tags_all":{},"target_failover":[{}],"target_group_health":[{"dns_failover":[{}],"unhealthy_state_routing":[{}]}],"target_health_state":[{}]}},{"address":"module.api_server.aws_lb_target_group_attachment.api[0]","mode":"managed","type":"aws_lb_target_group_attachment","name":"api","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"availability_zone":null,"id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/api-51c748b4-tg/fa0513c079206e1e-20251211003254874300000004","port":80,"target_group_arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/api-51c748b4-tg/fa0513c079206e1e","target_id":"i-0d1d4384862781a22"},"sensitive_values":{}},{"address":"module.api_server.aws_security_group.alb[0]","mode":"managed","type":"aws_security_group","name":"alb","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:eu-west-2:540044833068:security-group/sg-0874eb9069f386e2b","description":"Security group for Application Load Balancer","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"All outbound","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-0874eb9069f386e2b","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"HTTP from internet","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":80}],"name":"api-51c748b4-alb-sg","name_prefix":"","owner_id":"540044833068","revoke_rules_on_delete":false,"tags":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-alb-sg","Project":"api-platform","Workload":"cpu-intensive"},"tags_all":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-alb-sg","Project":"api-platform","Workload":"cpu-intensive"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}},{"address":"module.api_server.aws_security_group.api_server[0]","mode":"managed","type":"aws_security_group","name":"api_server","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:eu-west-2:540044833068:security-group/sg-0bf5d5df489e89796","description":"Security group for API server","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"All outbound","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0},{"cidr_blocks":[],"description":"Database access","from_port":5432,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":["sg-03c9420d0652e5719"],"self":false,"to_port":5432}],"id":"sg-0bf5d5df489e89796","ingress":[{"cidr_blocks":[],"description":"HTTP from ALB","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":["sg-0874eb9069f386e2b"],"self":false,"to_port":80}],"name":"api-51c748b4-api-sg","name_prefix":"","owner_id":"540044833068","revoke_rules_on_delete":false,"tags":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-api-sg","Project":"api-platform","Workload":"cpu-intensive"},"tags_all":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-api-sg","Project":"api-platform","Workload":"cpu-intensive"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[false]}],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[false]}],"tags":{},"tags_all":{}}},{"address":"module.api_server.aws_security_group.database[0]","mode":"managed","type":"aws_security_group","name":"database","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:eu-west-2:540044833068:security-group/sg-03c9420d0652e5719","description":"Security group for database tier","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"All outbound","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-03c9420d0652e5719","ingress":[{"cidr_blocks":[],"description":"PostgreSQL from API servers","from_port":5432,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":["sg-0bf5d5df489e89796"],"self":false,"to_port":5432}],"name":"api-51c748b4-database-sg","name_prefix":"","owner_id":"540044833068","revoke_rules_on_delete":false,"tags":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-database-sg","Project":"api-platform","Workload":"cpu-intensive"},"tags_all":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-database-sg","Project":"api-platform","Workload":"cpu-intensive"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[false]}],"tags":{},"tags_all":{}}},{"address":"module.api_server.aws_security_group_rule.database_from_api[0]","mode":"managed","type":"aws_security_group_rule","name":"database_from_api","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":null,"description":"PostgreSQL from API servers","from_port":5432,"id":"sgrule-3024000087","ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_group_id":"sg-03c9420d0652e5719","security_group_rule_id":"sgr-0471b318daf4376c1","self":false,"source_security_group_id":"sg-0bf5d5df489e89796","timeouts":null,"to_port":5432,"type":"ingress"},"sensitive_values":{}},{"address":"module.api_server.aws_sns_topic.alerts[0]","mode":"managed","type":"aws_sns_topic","name":"alerts","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"application_failure_feedback_role_arn":"","application_success_feedback_role_arn":"","application_success_feedback_sample_rate":0,"archive_policy":"","arn":"arn:aws:sns:eu-west-2:540044833068:api-51c748b4-alerts","beginning_archive_time":"","content_based_deduplication":false,"delivery_policy":"","display_name":"","fifo_throughput_scope":"","fifo_topic":false,"firehose_failure_feedback_role_arn":"","firehose_success_feedback_role_arn":"","firehose_success_feedback_sample_rate":0,"http_failure_feedback_role_arn":"","http_success_feedback_role_arn":"","http_success_feedback_sample_rate":0,"id":"arn:aws:sns:eu-west-2:540044833068:api-51c748b4-alerts","kms_master_key_id":"","lambda_failure_feedback_role_arn":"","lambda_success_feedback_role_arn":"","lambda_success_feedback_sample_rate":0,"name":"api-51c748b4-alerts","name_prefix":"","owner":"540044833068","policy":"{\"Statement\":[{\"Action\":\"sns:Publish\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"cloudwatch.amazonaws.com\"},\"Resource\":\"arn:aws:sns:eu-west-2:540044833068:api-51c748b4-alerts\",\"Sid\":\"AllowCloudWatchAlarms\"}],\"Version\":\"2012-10-17\"}","signature_version":0,"sqs_failure_feedback_role_arn":"","sqs_success_feedback_role_arn":"","sqs_success_feedback_sample_rate":0,"tags":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-alerts","Project":"api-platform","Workload":"cpu-intensive"},"tags_all":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-alerts","Project":"api-platform","Workload":"cpu-intensive"},"tracing_config":""},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.api_server.aws_sns_topic_policy.alerts[0]","mode":"managed","type":"aws_sns_topic_policy","name":"alerts","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:sns:eu-west-2:540044833068:api-51c748b4-alerts","id":"arn:aws:sns:eu-west-2:540044833068:api-51c748b4-alerts","owner":"540044833068","policy":"{\"Statement\":[{\"Action\":\"sns:Publish\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"cloudwatch.amazonaws.com\"},\"Resource\":\"arn:aws:sns:eu-west-2:540044833068:api-51c748b4-alerts\",\"Sid\":\"AllowCloudWatchAlarms\"}],\"Version\":\"2012-10-17\"}"},"sensitive_values":{}},{"address":"module.api_server.random_id.suffix[0]","mode":"managed","type":"random_id","name":"suffix","index":0,"provider_name":"registry.terraform.io/hashicorp/random","schema_version":0,"values":{"b64_std":"UcdItA==","b64_url":"UcdItA","byte_length":4,"dec":"1372014772","hex":"51c748b4","id":"UcdItA","keepers":null,"prefix":null},"sensitive_values":{}}],"address":"module.api_server"},{"address":"module.baseline","child_modules":[{"resources":[{"address":"module.baseline.module.vpc.aws_default_network_acl.this[0]","mode":"managed","type":"aws_default_network_acl","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:eu-west-2:540044833068:network-acl/acl-088dc8f9998dacc6b","default_network_acl_id":"acl-088dc8f9998dacc6b","egress":[{"action":"allow","cidr_block":"","from_port":0,"icmp_code":0,"icmp_type":0,"ipv6_cidr_block":"::/0","protocol":"-1","rule_no":101,"to_port":0},{"action":"allow","cidr_block":"0.0.0.0/0","from_port":0,"icmp_code":0,"icmp_type":0,"ipv6_cidr_block":"","protocol":"-1","rule_no":100,"to_port":0}],"id":"acl-088dc8f9998dacc6b","ingress":[{"action":"allow","cidr_block":"","from_port":0,"icmp_code":0,"icmp_type":0,"ipv6_cidr_block":"::/0","protocol":"-1","rule_no":101,"to_port":0},{"action":"allow","cidr_block":"0.0.0.0/0","from_port":0,"icmp_code":0,"icmp_type":0,"ipv6_cidr_block":"","protocol":"-1","rule_no":100,"to_port":0}],"owner_id":"540044833068","subnet_ids":["subnet-07fc72cf57c70e4f0","subnet-09605cfe202ef69e7","subnet-0a1b287732e8ad0b7","subnet-0eae990ebecf2d640"],"tags":{"Environment":"development","Name":"workloads-terraform-example-default","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-default","Terraform":"true"},"vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"egress":[{},{}],"ingress":[{},{}],"subnet_ids":[false,false,false,false],"tags":{},"tags_all":{}}},{"address":"module.baseline.module.vpc.aws_default_route_table.default[0]","mode":"managed","type":"aws_default_route_table","name":"default","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:eu-west-2:540044833068:route-table/rtb-0551700a1aabf64c9","default_route_table_id":"rtb-0551700a1aabf64c9","id":"rtb-0551700a1aabf64c9","owner_id":"540044833068","propagating_vgws":[],"route":[],"tags":{"Environment":"development","Name":"workloads-terraform-example-default","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-default","Terraform":"true"},"timeouts":{"create":"5m","update":"5m"},"vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"propagating_vgws":[],"route":[],"tags":{},"tags_all":{},"timeouts":{}}},{"address":"module.baseline.module.vpc.aws_default_security_group.this[0]","mode":"managed","type":"aws_default_security_group","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:eu-west-2:540044833068:security-group/sg-0159f0e3d8224d441","description":"default VPC security group","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-0159f0e3d8224d441","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":1234,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":1234},{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443},{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":80}],"name":"default","name_prefix":"","owner_id":"540044833068","revoke_rules_on_delete":false,"tags":{"Environment":"development","Name":"workloads-terraform-example-default","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-default","Terraform":"true"},"vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}},{"address":"module.baseline.module.vpc.aws_eip.nat[0]","mode":"managed","type":"aws_eip","name":"nat","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"address":null,"allocation_id":"eipalloc-07cc93e43d376b5e9","arn":"arn:aws:ec2:eu-west-2:540044833068:elastic-ip/eipalloc-07cc93e43d376b5e9","associate_with_private_ip":null,"association_id":"eipassoc-0a0433c17d9475350","carrier_ip":"","customer_owned_ip":"","customer_owned_ipv4_pool":"","domain":"vpc","id":"eipalloc-07cc93e43d376b5e9","instance":"","ipam_pool_id":null,"network_border_group":"eu-west-2","network_interface":"eni-0e80adc87987d3aa7","private_dns":"ip-10-0-101-133.eu-west-2.compute.internal","private_ip":"10.0.101.133","ptr_record":"","public_dns":"ec2-18-169-200-25.eu-west-2.compute.amazonaws.com","public_ip":"18.169.200.25","public_ipv4_pool":"amazon","tags":{"Environment":"development","Name":"workloads-terraform-example-eu-west-2a","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-eu-west-2a","Terraform":"true"},"timeouts":null,"vpc":true},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.baseline.module.vpc.aws_eip.nat[1]","mode":"managed","type":"aws_eip","name":"nat","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"address":null,"allocation_id":"eipalloc-0646301f7a4de4912","arn":"arn:aws:ec2:eu-west-2:540044833068:elastic-ip/eipalloc-0646301f7a4de4912","associate_with_private_ip":null,"association_id":"eipassoc-0d47f720125d78947","carrier_ip":"","customer_owned_ip":"","customer_owned_ipv4_pool":"","domain":"vpc","id":"eipalloc-0646301f7a4de4912","instance":"","ipam_pool_id":null,"network_border_group":"eu-west-2","network_interface":"eni-04149f872cf764621","private_dns":"ip-10-0-102-193.eu-west-2.compute.internal","private_ip":"10.0.102.193","ptr_record":"","public_dns":"ec2-13-134-130-46.eu-west-2.compute.amazonaws.com","public_ip":"13.134.130.46","public_ipv4_pool":"amazon","tags":{"Environment":"development","Name":"workloads-terraform-example-eu-west-2b","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-eu-west-2b","Terraform":"true"},"timeouts":null,"vpc":true},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.baseline.module.vpc.aws_internet_gateway.this[0]","mode":"managed","type":"aws_internet_gateway","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:eu-west-2:540044833068:internet-gateway/igw-01cea3cff43162407","id":"igw-01cea3cff43162407","owner_id":"540044833068","tags":{"Environment":"development","Name":"workloads-terraform-example","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example","Terraform":"true"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.baseline.module.vpc.aws_nat_gateway.this[0]","mode":"managed","type":"aws_nat_gateway","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"allocation_id":"eipalloc-07cc93e43d376b5e9","association_id":"eipassoc-0a0433c17d9475350","connectivity_type":"public","id":"nat-038cdf7bebbe06e18","network_interface_id":"eni-0e80adc87987d3aa7","private_ip":"10.0.101.133","public_ip":"18.169.200.25","secondary_allocation_ids":[],"secondary_private_ip_address_count":0,"secondary_private_ip_addresses":[],"subnet_id":"subnet-0a1b287732e8ad0b7","tags":{"Environment":"development","Name":"workloads-terraform-example-eu-west-2a","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-eu-west-2a","Terraform":"true"},"timeouts":null},"sensitive_values":{"secondary_allocation_ids":[],"secondary_private_ip_addresses":[],"tags":{},"tags_all":{}}},{"address":"module.baseline.module.vpc.aws_nat_gateway.this[1]","mode":"managed","type":"aws_nat_gateway","name":"this","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"allocation_id":"eipalloc-0646301f7a4de4912","association_id":"eipassoc-0d47f720125d78947","connectivity_type":"public","id":"nat-08567ba3cecdcfda4","network_interface_id":"eni-04149f872cf764621","private_ip":"10.0.102.193","public_ip":"13.134.130.46","secondary_allocation_ids":[],"secondary_private_ip_address_count":0,"secondary_private_ip_addresses":[],"subnet_id":"subnet-07fc72cf57c70e4f0","tags":{"Environment":"development","Name":"workloads-terraform-example-eu-west-2b","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-eu-west-2b","Terraform":"true"},"timeouts":null},"sensitive_values":{"secondary_allocation_ids":[],"secondary_private_ip_addresses":[],"tags":{},"tags_all":{}}},{"address":"module.baseline.module.vpc.aws_route.private_nat_gateway[0]","mode":"managed","type":"aws_route","name":"private_nat_gateway","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"carrier_gateway_id":"","core_network_arn":"","destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","id":"r-rtb-00d53afc4950c3e9a1080289494","instance_id":"","instance_owner_id":"","local_gateway_id":"","nat_gateway_id":"nat-038cdf7bebbe06e18","network_interface_id":"","origin":"CreateRoute","route_table_id":"rtb-00d53afc4950c3e9a","state":"active","timeouts":{"create":"5m","delete":null,"update":null},"transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""},"sensitive_values":{"timeouts":{}}},{"address":"module.baseline.module.vpc.aws_route.private_nat_gateway[1]","mode":"managed","type":"aws_route","name":"private_nat_gateway","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"carrier_gateway_id":"","core_network_arn":"","destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","id":"r-rtb-06193a3194e6d8cf21080289494","instance_id":"","instance_owner_id":"","local_gateway_id":"","nat_gateway_id":"nat-08567ba3cecdcfda4","network_interface_id":"","origin":"CreateRoute","route_table_id":"rtb-06193a3194e6d8cf2","state":"active","timeouts":{"create":"5m","delete":null,"update":null},"transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""},"sensitive_values":{"timeouts":{}}},{"address":"module.baseline.module.vpc.aws_route.public_internet_gateway[0]","mode":"managed","type":"aws_route","name":"public_internet_gateway","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"carrier_gateway_id":"","core_network_arn":"","destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"igw-01cea3cff43162407","id":"r-rtb-073519b951ac0afb51080289494","instance_id":"","instance_owner_id":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","origin":"CreateRoute","route_table_id":"rtb-073519b951ac0afb5","state":"active","timeouts":{"create":"5m","delete":null,"update":null},"transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""},"sensitive_values":{"timeouts":{}}},{"address":"module.baseline.module.vpc.aws_route_table.private[0]","mode":"managed","type":"aws_route_table","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:eu-west-2:540044833068:route-table/rtb-00d53afc4950c3e9a","id":"rtb-00d53afc4950c3e9a","owner_id":"540044833068","propagating_vgws":[],"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"nat-038cdf7bebbe06e18","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Environment":"development","Name":"workloads-terraform-example-private-eu-west-2a","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-private-eu-west-2a","Terraform":"true"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}}},{"address":"module.baseline.module.vpc.aws_route_table.private[1]","mode":"managed","type":"aws_route_table","name":"private","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:eu-west-2:540044833068:route-table/rtb-06193a3194e6d8cf2","id":"rtb-06193a3194e6d8cf2","owner_id":"540044833068","propagating_vgws":[],"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"nat-08567ba3cecdcfda4","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Environment":"development","Name":"workloads-terraform-example-private-eu-west-2b","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-private-eu-west-2b","Terraform":"true"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}}},{"address":"module.baseline.module.vpc.aws_route_table.public[0]","mode":"managed","type":"aws_route_table","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:eu-west-2:540044833068:route-table/rtb-073519b951ac0afb5","id":"rtb-073519b951ac0afb5","owner_id":"540044833068","propagating_vgws":[],"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"igw-01cea3cff43162407","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Environment":"development","Name":"workloads-terraform-example-public","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-public","Terraform":"true"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}}},{"address":"module.baseline.module.vpc.aws_route_table_association.private[0]","mode":"managed","type":"aws_route_table_association","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":"","id":"rtbassoc-0557ac7367cfe9d9c","route_table_id":"rtb-00d53afc4950c3e9a","subnet_id":"subnet-09605cfe202ef69e7","timeouts":null},"sensitive_values":{}},{"address":"module.baseline.module.vpc.aws_route_table_association.private[1]","mode":"managed","type":"aws_route_table_association","name":"private","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":"","id":"rtbassoc-03c4cc8adce32d125","route_table_id":"rtb-06193a3194e6d8cf2","subnet_id":"subnet-0eae990ebecf2d640","timeouts":null},"sensitive_values":{}},{"address":"module.baseline.module.vpc.aws_route_table_association.public[0]","mode":"managed","type":"aws_route_table_association","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":"","id":"rtbassoc-0bc7bb20e5bff7b21","route_table_id":"rtb-073519b951ac0afb5","subnet_id":"subnet-0a1b287732e8ad0b7","timeouts":null},"sensitive_values":{}},{"address":"module.baseline.module.vpc.aws_route_table_association.public[1]","mode":"managed","type":"aws_route_table_association","name":"public","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":"","id":"rtbassoc-0f86a1cf1181d93f4","route_table_id":"rtb-073519b951ac0afb5","subnet_id":"subnet-07fc72cf57c70e4f0","timeouts":null},"sensitive_values":{}},{"address":"module.baseline.module.vpc.aws_subnet.private[0]","mode":"managed","type":"aws_subnet","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:eu-west-2:540044833068:subnet/subnet-09605cfe202ef69e7","assign_ipv6_address_on_creation":false,"availability_zone":"eu-west-2a","availability_zone_id":"euw2-az2","cidr_block":"10.0.1.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-09605cfe202ef69e7","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"540044833068","private_dns_hostname_type_on_launch":"ip-name","tags":{"Environment":"development","Name":"workloads-terraform-example-private-eu-west-2a","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-private-eu-west-2a","Terraform":"true"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.baseline.module.vpc.aws_subnet.private[1]","mode":"managed","type":"aws_subnet","name":"private","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:eu-west-2:540044833068:subnet/subnet-0eae990ebecf2d640","assign_ipv6_address_on_creation":false,"availability_zone":"eu-west-2b","availability_zone_id":"euw2-az3","cidr_block":"10.0.2.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0eae990ebecf2d640","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"540044833068","private_dns_hostname_type_on_launch":"ip-name","tags":{"Environment":"development","Name":"workloads-terraform-example-private-eu-west-2b","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-private-eu-west-2b","Terraform":"true"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.baseline.module.vpc.aws_subnet.public[0]","mode":"managed","type":"aws_subnet","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:eu-west-2:540044833068:subnet/subnet-0a1b287732e8ad0b7","assign_ipv6_address_on_creation":false,"availability_zone":"eu-west-2a","availability_zone_id":"euw2-az2","cidr_block":"10.0.101.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0a1b287732e8ad0b7","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"540044833068","private_dns_hostname_type_on_launch":"ip-name","tags":{"Environment":"development","Name":"workloads-terraform-example-public-eu-west-2a","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-public-eu-west-2a","Terraform":"true"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.baseline.module.vpc.aws_subnet.public[1]","mode":"managed","type":"aws_subnet","name":"public","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:eu-west-2:540044833068:subnet/subnet-07fc72cf57c70e4f0","assign_ipv6_address_on_creation":false,"availability_zone":"eu-west-2b","availability_zone_id":"euw2-az3","cidr_block":"10.0.102.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-07fc72cf57c70e4f0","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"540044833068","private_dns_hostname_type_on_launch":"ip-name","tags":{"Environment":"development","Name":"workloads-terraform-example-public-eu-west-2b","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-public-eu-west-2b","Terraform":"true"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.baseline.module.vpc.aws_vpc.this[0]","mode":"managed","type":"aws_vpc","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:eu-west-2:540044833068:vpc/vpc-02901bcbb89561298","assign_generated_ipv6_cidr_block":false,"cidr_block":"10.0.0.0/16","default_network_acl_id":"acl-088dc8f9998dacc6b","default_route_table_id":"rtb-0551700a1aabf64c9","default_security_group_id":"sg-0159f0e3d8224d441","dhcp_options_id":"dopt-038753549445222b5","enable_dns_hostnames":true,"enable_dns_support":true,"enable_network_address_usage_metrics":false,"id":"vpc-02901bcbb89561298","instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_association_id":"","ipv6_cidr_block":"","ipv6_cidr_block_network_border_group":"","ipv6_ipam_pool_id":"","ipv6_netmask_length":0,"main_route_table_id":"rtb-0551700a1aabf64c9","owner_id":"540044833068","tags":{"Environment":"development","Name":"workloads-terraform-example","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example","Terraform":"true"}},"sensitive_values":{"tags":{},"tags_all":{}}}],"address":"module.baseline.module.vpc"}]},{"resources":[{"address":"module.heritage[0].aws_autoscaling_group.my_asg","mode":"managed","type":"aws_autoscaling_group","name":"my_asg","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:autoscaling:eu-west-2:540044833068:autoScalingGroup:f58ef987-cb0b-45e2-92fa-de63356d33f4:autoScalingGroupName/asg-change-test-asg-terraform-example","availability_zone_distribution":[{"capacity_distribution_strategy":"balanced-best-effort"}],"availability_zones":["eu-west-2a","eu-west-2b"],"capacity_rebalance":false,"capacity_reservation_specification":[{"capacity_reservation_preference":"default","capacity_reservation_target":[]}],"context":"","default_cooldown":300,"default_instance_warmup":0,"desired_capacity":1,"desired_capacity_type":"","enabled_metrics":[],"force_delete":false,"force_delete_warm_pool":false,"health_check_grace_period":300,"health_check_type":"EC2","id":"asg-change-test-asg-terraform-example","ignore_failed_scaling_activities":false,"initial_lifecycle_hook":[],"instance_maintenance_policy":[],"instance_refresh":[],"launch_configuration":"","launch_template":[{"id":"lt-04dc7394984712fe8","name":"asg-change-launch-template-terraform-example2025111723203932490000000b","version":"$Latest"}],"load_balancers":[],"max_instance_lifetime":0,"max_size":2,"metrics_granularity":"1Minute","min_elb_capacity":null,"min_size":0,"mixed_instances_policy":[],"name":"asg-change-test-asg-terraform-example","name_prefix":"","placement_group":"","predicted_capacity":0,"protect_from_scale_in":false,"service_linked_role_arn":"arn:aws:iam::540044833068:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling","suspended_processes":[],"tag":[],"target_group_arns":["arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/asg-change-tg-terraform-example/d9fca32e6f2d362a"],"termination_policies":[],"timeouts":null,"traffic_source":[{"identifier":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/asg-change-tg-terraform-example/d9fca32e6f2d362a","type":"elbv2"}],"vpc_zone_identifier":["subnet-07fc72cf57c70e4f0","subnet-0a1b287732e8ad0b7"],"wait_for_capacity_timeout":"10m","wait_for_elb_capacity":null,"warm_pool":[],"warm_pool_size":0},"sensitive_values":{"availability_zone_distribution":[{}],"availability_zones":[false,false],"capacity_reservation_specification":[{"capacity_reservation_target":[]}],"enabled_metrics":[],"initial_lifecycle_hook":[],"instance_maintenance_policy":[],"instance_refresh":[],"launch_template":[{}],"load_balancers":[],"mixed_instances_policy":[],"suspended_processes":[],"tag":[],"target_group_arns":[false],"termination_policies":[],"traffic_source":[{}],"vpc_zone_identifier":[false,false],"warm_pool":[]}},{"address":"module.heritage[0].aws_cloudfront_cache_policy.headers_based_policy","mode":"managed","type":"aws_cloudfront_cache_policy","name":"headers_based_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:cloudfront::540044833068:cache-policy/8e5fa4ea-50a6-44f8-86e8-3ca690bd9373","comment":"Cache policy that forwards Authorization and Accept-Language headers","default_ttl":86400,"etag":"E23ZP02F085DFQ","id":"8e5fa4ea-50a6-44f8-86e8-3ca690bd9373","max_ttl":31536000,"min_ttl":60,"name":"CacheHeadersBasedPolicy","parameters_in_cache_key_and_forwarded_to_origin":[{"cookies_config":[{"cookie_behavior":"none","cookies":[]}],"enable_accept_encoding_brotli":true,"enable_accept_encoding_gzip":true,"headers_config":[{"header_behavior":"whitelist","headers":[{"items":["Accept-Language","Authorization"]}]}],"query_strings_config":[{"query_string_behavior":"none","query_strings":[]}]}]},"sensitive_values":{"parameters_in_cache_key_and_forwarded_to_origin":[{"cookies_config":[{"cookies":[]}],"headers_config":[{"headers":[{"items":[false,false]}]}],"query_strings_config":[{"query_strings":[]}]}]}},{"address":"module.heritage[0].aws_cloudfront_distribution.s3_distribution","mode":"managed","type":"aws_cloudfront_distribution","name":"s3_distribution","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"aliases":[],"arn":"arn:aws:cloudfront::540044833068:distribution/E20U4HMGWRXZ4I","caller_reference":"terraform-20251117232026081500000009","comment":"Some comment","continuous_deployment_policy_id":"","custom_error_response":[],"default_cache_behavior":[{"allowed_methods":["DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT"],"cache_policy_id":"8e5fa4ea-50a6-44f8-86e8-3ca690bd9373","cached_methods":["GET","HEAD"],"compress":false,"default_ttl":0,"field_level_encryption_id":"","forwarded_values":[],"function_association":[],"grpc_config":[{"enabled":false}],"lambda_function_association":[],"max_ttl":0,"min_ttl":0,"origin_request_policy_id":"414eb566-4bb3-49d1-a868-0ee739830440","realtime_log_config_arn":"","response_headers_policy_id":"","smooth_streaming":false,"target_origin_id":"myS3Origin","trusted_key_groups":[],"trusted_signers":[],"viewer_protocol_policy":"redirect-to-https"}],"default_root_object":"index.html","domain_name":"d29emlm9rqxoo7.cloudfront.net","enabled":true,"etag":"E239IB0COYAEWZ","hosted_zone_id":"Z2FDTNDATAQYW2","http_version":"http2","id":"E20U4HMGWRXZ4I","in_progress_validation_batches":0,"is_ipv6_enabled":true,"last_modified_time":"2025-11-17 23:20:26.178 +0000 UTC","logging_config":[],"ordered_cache_behavior":[{"allowed_methods":["GET","HEAD","OPTIONS"],"cache_policy_id":"","cached_methods":["GET","HEAD","OPTIONS"],"compress":true,"default_ttl":0,"field_level_encryption_id":"","forwarded_values":[{"cookies":[{"forward":"none","whitelisted_names":[]}],"headers":["Origin"],"query_string":false,"query_string_cache_keys":[]}],"function_association":[],"grpc_config":[{"enabled":false}],"lambda_function_association":[],"max_ttl":0,"min_ttl":0,"origin_request_policy_id":"","path_pattern":"/content/immutable/*","realtime_log_config_arn":"","response_headers_policy_id":"c7fd455f-1fa8-4632-9a22-fef9a58b69a9","smooth_streaming":false,"target_origin_id":"myS3Origin","trusted_key_groups":[],"trusted_signers":[],"viewer_protocol_policy":"redirect-to-https"},{"allowed_methods":["GET","HEAD","OPTIONS"],"cache_policy_id":"8e5fa4ea-50a6-44f8-86e8-3ca690bd9373","cached_methods":["GET","HEAD"],"compress":true,"default_ttl":0,"field_level_encryption_id":"","forwarded_values":[],"function_association":[],"grpc_config":[{"enabled":false}],"lambda_function_association":[],"max_ttl":0,"min_ttl":0,"origin_request_policy_id":"414eb566-4bb3-49d1-a868-0ee739830440","path_pattern":"/content/*","realtime_log_config_arn":"","response_headers_policy_id":"","smooth_streaming":false,"target_origin_id":"myS3Origin","trusted_key_groups":[],"trusted_signers":[],"viewer_protocol_policy":"redirect-to-https"}],"origin":[{"connection_attempts":3,"connection_timeout":10,"custom_header":[],"custom_origin_config":[],"domain_name":"second-example-brave-crappie20251117232021571800000004.s3.eu-west-2.amazonaws.com","origin_access_control_id":"E2Z0P6Y1TOEHYP","origin_id":"myS3Origin","origin_path":"","origin_shield":[],"s3_origin_config":[],"vpc_origin_config":[]}],"origin_group":[],"price_class":"PriceClass_200","restrictions":[{"geo_restriction":[{"locations":["CA","DE","GB","US"],"restriction_type":"whitelist"}]}],"retain_on_delete":false,"staging":false,"status":"Deployed","tags":{"Environment":"production"},"tags_all":{"Environment":"production"},"trusted_key_groups":[{"enabled":false,"items":[]}],"trusted_signers":[{"enabled":false,"items":[]}],"viewer_certificate":[{"acm_certificate_arn":"","cloudfront_default_certificate":true,"iam_certificate_id":"","minimum_protocol_version":"TLSv1","ssl_support_method":""}],"wait_for_deployment":true,"web_acl_id":""},"sensitive_values":{"aliases":[],"custom_error_response":[],"default_cache_behavior":[{"allowed_methods":[false,false,false,false,false,false,false],"cached_methods":[false,false],"forwarded_values":[],"function_association":[],"grpc_config":[{}],"lambda_function_association":[],"trusted_key_groups":[],"trusted_signers":[]}],"logging_config":[],"ordered_cache_behavior":[{"allowed_methods":[false,false,false],"cached_methods":[false,false,false],"forwarded_values":[{"cookies":[{"whitelisted_names":[]}],"headers":[false],"query_string_cache_keys":[]}],"function_association":[],"grpc_config":[{}],"lambda_function_association":[],"trusted_key_groups":[],"trusted_signers":[]},{"allowed_methods":[false,false,false],"cached_methods":[false,false],"forwarded_values":[],"function_association":[],"grpc_config":[{}],"lambda_function_association":[],"trusted_key_groups":[],"trusted_signers":[]}],"origin":[{"custom_header":[],"custom_origin_config":[],"origin_shield":[],"s3_origin_config":[],"vpc_origin_config":[]}],"origin_group":[],"restrictions":[{"geo_restriction":[{"locations":[false,false,false,false]}]}],"tags":{},"tags_all":{},"trusted_key_groups":[{"items":[]}],"trusted_signers":[{"items":[]}],"viewer_certificate":[{}]}},{"address":"module.heritage[0].aws_cloudfront_distribution.visit_counter","mode":"managed","type":"aws_cloudfront_distribution","name":"visit_counter","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"aliases":[],"arn":"arn:aws:cloudfront::540044833068:distribution/E3LNWJXM6AF7NY","caller_reference":"terraform-20251117232423282000000017","comment":null,"continuous_deployment_policy_id":"","custom_error_response":[],"default_cache_behavior":[{"allowed_methods":["DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT"],"cache_policy_id":"8e5fa4ea-50a6-44f8-86e8-3ca690bd9373","cached_methods":["GET","HEAD"],"compress":false,"default_ttl":0,"field_level_encryption_id":"","forwarded_values":[],"function_association":[],"grpc_config":[{"enabled":false}],"lambda_function_association":[],"max_ttl":0,"min_ttl":0,"origin_request_policy_id":"414eb566-4bb3-49d1-a868-0ee739830440","realtime_log_config_arn":"","response_headers_policy_id":"c7fd455f-1fa8-4632-9a22-fef9a58b69a9","smooth_streaming":false,"target_origin_id":"visit-counter-ecs","trusted_key_groups":[],"trusted_signers":[],"viewer_protocol_policy":"redirect-to-https"}],"default_root_object":"index.html","domain_name":"d3qzo4ltspunma.cloudfront.net","enabled":true,"etag":"E3BS17IG773009","hosted_zone_id":"Z2FDTNDATAQYW2","http_version":"http2","id":"E3LNWJXM6AF7NY","in_progress_validation_batches":0,"is_ipv6_enabled":true,"last_modified_time":"2025-11-17 23:24:23.581 +0000 UTC","logging_config":[],"ordered_cache_behavior":[],"origin":[{"connection_attempts":3,"connection_timeout":10,"custom_header":[],"custom_origin_config":[{"http_port":80,"https_port":443,"origin_keepalive_timeout":5,"origin_protocol_policy":"http-only","origin_read_timeout":30,"origin_ssl_protocols":["TLSv1.1","TLSv1.2"]}],"domain_name":"visits-terraform-example.overmind-terraform-example.com","origin_access_control_id":"","origin_id":"visit-counter-ecs","origin_path":"","origin_shield":[],"s3_origin_config":[],"vpc_origin_config":[]}],"origin_group":[],"price_class":"PriceClass_All","restrictions":[{"geo_restriction":[{"locations":[],"restriction_type":"none"}]}],"retain_on_delete":false,"staging":false,"status":"Deployed","tags":{},"tags_all":{},"trusted_key_groups":[{"enabled":false,"items":[]}],"trusted_signers":[{"enabled":false,"items":[]}],"viewer_certificate":[{"acm_certificate_arn":"","cloudfront_default_certificate":true,"iam_certificate_id":"","minimum_protocol_version":"TLSv1","ssl_support_method":""}],"wait_for_deployment":true,"web_acl_id":""},"sensitive_values":{"aliases":[],"custom_error_response":[],"default_cache_behavior":[{"allowed_methods":[false,false,false,false,false,false,false],"cached_methods":[false,false],"forwarded_values":[],"function_association":[],"grpc_config":[{}],"lambda_function_association":[],"trusted_key_groups":[],"trusted_signers":[]}],"logging_config":[],"ordered_cache_behavior":[],"origin":[{"custom_header":[],"custom_origin_config":[{"origin_ssl_protocols":[false,false]}],"origin_shield":[],"s3_origin_config":[],"vpc_origin_config":[]}],"origin_group":[],"restrictions":[{"geo_restriction":[{"locations":[]}]}],"tags":{},"tags_all":{},"trusted_key_groups":[{"items":[]}],"trusted_signers":[{"items":[]}],"viewer_certificate":[{}]}},{"address":"module.heritage[0].aws_cloudfront_function.example","mode":"managed","type":"aws_cloudfront_function","name":"example","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:cloudfront::540044833068:function/terraform-example-adequate-gibbon","code":"function handler(event) {\n    // NOTE: This example function is for a viewer request event trigger. \n    // Choose viewer request for event trigger when you associate this function with a distribution. \n    var response = {\n        statusCode: 302,\n        statusDescription: 'Found',\n        headers: {\n        'cloudfront-functions': { value: 'generated-by-CloudFront-Functions' },\n        'location': { value: 'https://aws.amazon.com/cloudfront/' }\n        }\n    };\n    return response;\n}","comment":"","etag":"ETVPDKIKX0DER","id":"terraform-example-adequate-gibbon","key_value_store_associations":[],"live_stage_etag":"ETVPDKIKX0DER","name":"terraform-example-adequate-gibbon","publish":true,"runtime":"cloudfront-js-1.0","status":"DEPLOYED"},"sensitive_values":{"key_value_store_associations":[]}},{"address":"module.heritage[0].aws_cloudfront_origin_access_control.b","mode":"managed","type":"aws_cloudfront_origin_access_control","name":"b","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:cloudfront::540044833068:origin-access-control/E2Z0P6Y1TOEHYP","description":"Example Policy","etag":"ETVPDKIKX0DER","id":"E2Z0P6Y1TOEHYP","name":"example-terraform-example","origin_access_control_origin_type":"s3","signing_behavior":"always","signing_protocol":"sigv4"},"sensitive_values":{}},{"address":"module.heritage[0].aws_cloudfront_origin_request_policy.headers_based_policy","mode":"managed","type":"aws_cloudfront_origin_request_policy","name":"headers_based_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:cloudfront::540044833068:origin-request-policy/414eb566-4bb3-49d1-a868-0ee739830440","comment":"This policy forwards specific headers to the origin","cookies_config":[{"cookie_behavior":"none","cookies":[]}],"etag":"E23ZP02F085DFQ","headers_config":[{"header_behavior":"whitelist","headers":[{"items":["User-Agent"]}]}],"id":"414eb566-4bb3-49d1-a868-0ee739830440","name":"OriginHeadersBasedPolicy","query_strings_config":[{"query_string_behavior":"none","query_strings":[]}]},"sensitive_values":{"cookies_config":[{"cookies":[]}],"headers_config":[{"headers":[{"items":[false]}]}],"query_strings_config":[{"query_strings":[]}]}},{"address":"module.heritage[0].aws_cloudfront_response_headers_policy.headers-policy","mode":"managed","type":"aws_cloudfront_response_headers_policy","name":"headers-policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:cloudfront::540044833068:response-headers-policy/c7fd455f-1fa8-4632-9a22-fef9a58b69a9","comment":"This controls which headers are cached for baseline applications. This includes headers that are safe to cache","cors_config":[{"access_control_allow_credentials":false,"access_control_allow_headers":[{"items":["Accept","Accept-Encoding","Content-Encoding","Content-Length","Content-Type"]}],"access_control_allow_methods":[{"items":["GET"]}],"access_control_allow_origins":[{"items":["storage.overmind-demo.com"]}],"access_control_expose_headers":[],"access_control_max_age_sec":0,"origin_override":true}],"custom_headers_config":[],"etag":"E23ZP02F085DFQ","id":"c7fd455f-1fa8-4632-9a22-fef9a58b69a9","name":"baseline-terraform-example","remove_headers_config":[],"security_headers_config":[],"server_timing_headers_config":[]},"sensitive_values":{"cors_config":[{"access_control_allow_headers":[{"items":[false,false,false,false,false]}],"access_control_allow_methods":[{"items":[false]}],"access_control_allow_origins":[{"items":[false]}],"access_control_expose_headers":[]}],"custom_headers_config":[],"remove_headers_config":[],"security_headers_config":[],"server_timing_headers_config":[]}},{"address":"module.heritage[0].aws_db_subnet_group.default","mode":"managed","type":"aws_db_subnet_group","name":"default","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:rds:eu-west-2:540044833068:subgrp:main-terraform-example","description":"Managed by Terraform","id":"main-terraform-example","name":"main-terraform-example","name_prefix":"","subnet_ids":["subnet-09605cfe202ef69e7","subnet-0eae990ebecf2d640"],"supported_network_types":["IPV4"],"tags":{"Name":"Default DB Subnet Group for terraform-example"},"tags_all":{"Name":"Default DB Subnet Group for terraform-example"},"vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"subnet_ids":[false,false],"supported_network_types":[false],"tags":{},"tags_all":{}}},{"address":"module.heritage[0].aws_ecs_service.face","mode":"managed","type":"aws_ecs_service","name":"face","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"alarms":[],"availability_zone_rebalancing":"DISABLED","capacity_provider_strategy":[{"base":0,"capacity_provider":"FARGATE","weight":100}],"cluster":"arn:aws:ecs:eu-west-2:540044833068:cluster/example-terraform-example","deployment_circuit_breaker":[{"enable":false,"rollback":false}],"deployment_controller":[{"type":"ECS"}],"deployment_maximum_percent":200,"deployment_minimum_healthy_percent":100,"desired_count":1,"enable_ecs_managed_tags":false,"enable_execute_command":false,"force_delete":null,"force_new_deployment":null,"health_check_grace_period_seconds":0,"iam_role":"/aws-service-role/ecs.amazonaws.com/AWSServiceRoleForECS","id":"arn:aws:ecs:eu-west-2:540044833068:service/example-terraform-example/facial-recognition","launch_type":"","load_balancer":[{"container_name":"facial-recognition","container_port":1234,"elb_name":"","target_group_arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/facerec-terraform-example/ccde9b5e810e9a5d"}],"name":"facial-recognition","network_configuration":[{"assign_public_ip":false,"security_groups":["sg-0159f0e3d8224d441"],"subnets":["subnet-09605cfe202ef69e7","subnet-0eae990ebecf2d640"]}],"ordered_placement_strategy":[],"placement_constraints":[],"platform_version":"LATEST","propagate_tags":"NONE","scheduling_strategy":"REPLICA","service_connect_configuration":[],"service_registries":[],"tags":{},"tags_all":{},"task_definition":"arn:aws:ecs:eu-west-2:540044833068:task-definition/facial-recognition-terraform-example:9","timeouts":null,"triggers":{},"volume_configuration":[],"vpc_lattice_configurations":[],"wait_for_steady_state":false},"sensitive_values":{"alarms":[],"capacity_provider_strategy":[{}],"deployment_circuit_breaker":[{}],"deployment_controller":[{}],"load_balancer":[{}],"network_configuration":[{"security_groups":[false],"subnets":[false,false]}],"ordered_placement_strategy":[],"placement_constraints":[],"service_connect_configuration":[],"service_registries":[],"tags":{},"tags_all":{},"triggers":{},"volume_configuration":[],"vpc_lattice_configurations":[]}},{"address":"module.heritage[0].aws_ecs_service.visit_counter","mode":"managed","type":"aws_ecs_service","name":"visit_counter","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"alarms":[],"availability_zone_rebalancing":"DISABLED","capacity_provider_strategy":[{"base":0,"capacity_provider":"FARGATE","weight":100}],"cluster":"arn:aws:ecs:eu-west-2:540044833068:cluster/example-terraform-example","deployment_circuit_breaker":[{"enable":false,"rollback":false}],"deployment_controller":[{"type":"ECS"}],"deployment_maximum_percent":200,"deployment_minimum_healthy_percent":100,"desired_count":1,"enable_ecs_managed_tags":false,"enable_execute_command":false,"force_delete":null,"force_new_deployment":null,"health_check_grace_period_seconds":0,"iam_role":"/aws-service-role/ecs.amazonaws.com/AWSServiceRoleForECS","id":"arn:aws:ecs:eu-west-2:540044833068:service/example-terraform-example/visit-counter","launch_type":"","load_balancer":[{"container_name":"visit-counter","container_port":80,"elb_name":"","target_group_arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/visit-counter-terraform-example/5683104d7610bc44"}],"name":"visit-counter","network_configuration":[{"assign_public_ip":false,"security_groups":["sg-0159f0e3d8224d441"],"subnets":["subnet-09605cfe202ef69e7","subnet-0eae990ebecf2d640"]}],"ordered_placement_strategy":[],"placement_constraints":[],"platform_version":"LATEST","propagate_tags":"NONE","scheduling_strategy":"REPLICA","service_connect_configuration":[],"service_registries":[],"tags":{},"tags_all":{},"task_definition":"arn:aws:ecs:eu-west-2:540044833068:task-definition/visit-counter-terraform-example:11","timeouts":null,"triggers":{},"volume_configuration":[],"vpc_lattice_configurations":[],"wait_for_steady_state":false},"sensitive_values":{"alarms":[],"capacity_provider_strategy":[{}],"deployment_circuit_breaker":[{}],"deployment_controller":[{}],"load_balancer":[{}],"network_configuration":[{"security_groups":[false],"subnets":[false,false]}],"ordered_placement_strategy":[],"placement_constraints":[],"service_connect_configuration":[],"service_registries":[],"tags":{},"tags_all":{},"triggers":{},"volume_configuration":[],"vpc_lattice_configurations":[]}},{"address":"module.heritage[0].aws_ecs_task_definition.face","mode":"managed","type":"aws_ecs_task_definition","name":"face","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ecs:eu-west-2:540044833068:task-definition/facial-recognition-terraform-example:9","arn_without_revision":"arn:aws:ecs:eu-west-2:540044833068:task-definition/facial-recognition-terraform-example","container_definitions":"[{\"cpu\":1024,\"environment\":[{\"name\":\"DATABASE_URL\",\"value\":\"tf-20251117235257281600000001.cnx7xf6hwmba.eu-west-2.rds.amazonaws.com\"}],\"essential\":true,\"healthCheck\":{\"command\":[\"CMD-SHELL\",\"wget -q --spider localhost:1234\"],\"interval\":30,\"retries\":3,\"timeout\":5},\"image\":\"harshmanvar/face-detection-tensorjs:slim-amd\",\"memory\":2048,\"mountPoints\":[],\"name\":\"facial-recognition\",\"portMappings\":[{\"appProtocol\":\"http\",\"containerPort\":1234,\"hostPort\":1234,\"protocol\":\"tcp\"}],\"systemControls\":[],\"volumesFrom\":[]}]","cpu":"1024","enable_fault_injection":false,"ephemeral_storage":[],"execution_role_arn":"","family":"facial-recognition-terraform-example","id":"facial-recognition-terraform-example","inference_accelerator":[],"ipc_mode":"","memory":"2048","network_mode":"awsvpc","pid_mode":"","placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":["FARGATE"],"revision":9,"runtime_platform":[],"skip_destroy":false,"tags":{},"tags_all":{},"task_role_arn":"","track_latest":false,"volume":[]},"sensitive_values":{"ephemeral_storage":[],"inference_accelerator":[],"placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":[false],"runtime_platform":[],"tags":{},"tags_all":{},"volume":[]}},{"address":"module.heritage[0].aws_ecs_task_definition.visit_counter","mode":"managed","type":"aws_ecs_task_definition","name":"visit_counter","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ecs:eu-west-2:540044833068:task-definition/visit-counter-terraform-example:11","arn_without_revision":"arn:aws:ecs:eu-west-2:540044833068:task-definition/visit-counter-terraform-example","container_definitions":"[{\"cpu\":256,\"environment\":[{\"name\":\"FACIAL_RECOGNITION_SERVICE\",\"value\":\"face-terraform-example.overmind-terraform-example.com\"},{\"name\":\"FACIAL_RECOGNITION_SERVICE_USER\",\"value\":\"facerec\"}],\"essential\":true,\"healthCheck\":{\"command\":[\"CMD-SHELL\",\"curl -f http://localhost:80 || exit 1\"],\"interval\":30,\"retries\":3,\"timeout\":5},\"image\":\"yeasy/simple-web:latest\",\"memory\":512,\"mountPoints\":[],\"name\":\"visit-counter\",\"portMappings\":[{\"appProtocol\":\"http\",\"containerPort\":80,\"hostPort\":80,\"protocol\":\"tcp\"}],\"systemControls\":[],\"volumesFrom\":[]}]","cpu":"256","enable_fault_injection":false,"ephemeral_storage":[],"execution_role_arn":"","family":"visit-counter-terraform-example","id":"visit-counter-terraform-example","inference_accelerator":[],"ipc_mode":"","memory":"512","network_mode":"awsvpc","pid_mode":"","placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":["FARGATE"],"revision":11,"runtime_platform":[],"skip_destroy":false,"tags":{},"tags_all":{},"task_role_arn":"","track_latest":false,"volume":[]},"sensitive_values":{"ephemeral_storage":[],"inference_accelerator":[],"placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":[false],"runtime_platform":[],"tags":{},"tags_all":{},"volume":[]}},{"address":"module.heritage[0].aws_iam_role.lambda_iam_role","mode":"managed","type":"aws_iam_role","name":"lambda_iam_role","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::540044833068:role/-terraform-example_lambda_iam_role","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}","create_date":"2025-11-17T23:20:21Z","description":"","force_detach_policies":false,"id":"-terraform-example_lambda_iam_role","inline_policy":[],"managed_policy_arns":[],"max_session_duration":3600,"name":"-terraform-example_lambda_iam_role","name_prefix":"","path":"/","permissions_boundary":"","tags":{},"tags_all":{},"unique_id":"AROAX3PJOGEWBYSCV5QFP"},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags":{},"tags_all":{}}},{"address":"module.heritage[0].aws_instance.app_server","mode":"managed","type":"aws_instance","name":"app_server","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"ami":"ami-0ad8de99ac93341e7","arn":"arn:aws:ec2:eu-west-2:540044833068:instance/i-07072e97b42111cc0","associate_public_ip_address":true,"availability_zone":"eu-west-2b","capacity_reservation_specification":[{"capacity_reservation_preference":"open","capacity_reservation_target":[]}],"cpu_core_count":1,"cpu_options":[{"amd_sev_snp":"","core_count":1,"threads_per_core":2}],"cpu_threads_per_core":2,"credit_specification":[{"cpu_credits":"unlimited"}],"disable_api_stop":false,"disable_api_termination":false,"ebs_block_device":[],"ebs_optimized":false,"enable_primary_ipv6":null,"enclave_options":[{"enabled":false}],"ephemeral_block_device":[],"get_password_data":false,"hibernation":false,"host_id":"","host_resource_group_arn":null,"iam_instance_profile":"","id":"i-07072e97b42111cc0","instance_initiated_shutdown_behavior":"stop","instance_lifecycle":"","instance_market_options":[],"instance_state":"running","instance_type":"t3.small","ipv6_address_count":0,"ipv6_addresses":[],"key_name":"Demo Key Pair","launch_template":[],"maintenance_options":[{"auto_recovery":"default"}],"metadata_options":[{"http_endpoint":"enabled","http_protocol_ipv6":"disabled","http_put_response_hop_limit":1,"http_tokens":"optional","instance_metadata_tags":"disabled"}],"monitoring":false,"network_interface":[],"outpost_arn":"","password_data":"","placement_group":"","placement_partition_number":0,"primary_network_interface_id":"eni-04aaec985117a0700","private_dns":"ip-10-0-10-216.eu-west-2.compute.internal","private_dns_name_options":[{"enable_resource_name_dns_a_record":false,"enable_resource_name_dns_aaaa_record":false,"hostname_type":"ip-name"}],"private_ip":"10.0.10.216","public_dns":"ec2-18-133-252-243.eu-west-2.compute.amazonaws.com","public_ip":"18.133.252.243","root_block_device":[{"delete_on_termination":true,"device_name":"/dev/xvda","encrypted":false,"iops":100,"kms_key_id":"","tags":{},"tags_all":{},"throughput":0,"volume_id":"vol-0cbfb7fc868dce7f5","volume_size":8,"volume_type":"gp2"}],"secondary_private_ips":[],"security_groups":[],"source_dest_check":true,"spot_instance_request_id":"","subnet_id":"subnet-0e4cc60d35634e85b","tags":{"Environment":"dev","Name":"App Server"},"tags_all":{"Environment":"dev","Name":"App Server"},"tenancy":"default","timeouts":null,"user_data":null,"user_data_base64":null,"user_data_replace_on_change":false,"volume_tags":null,"vpc_security_group_ids":["sg-057ed2204f81107a5"]},"sensitive_values":{"ami":true,"capacity_reservation_specification":[{"capacity_reservation_target":[]}],"cpu_options":[{}],"credit_specification":[{}],"ebs_block_device":[],"enclave_options":[{}],"ephemeral_block_device":[],"instance_market_options":[],"ipv6_addresses":[],"launch_template":[],"maintenance_options":[{}],"metadata_options":[{}],"network_interface":[],"private_dns_name_options":[{}],"root_block_device":[{"tags":{},"tags_all":{}}],"secondary_private_ips":[],"security_groups":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[false]}},{"address":"module.heritage[0].aws_instance.webserver","mode":"managed","type":"aws_instance","name":"webserver","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"ami":"ami-0ad8de99ac93341e7","arn":"arn:aws:ec2:eu-west-2:540044833068:instance/i-012cafc89720d6fb5","associate_public_ip_address":true,"availability_zone":"eu-west-2a","capacity_reservation_specification":[{"capacity_reservation_preference":"open","capacity_reservation_target":[]}],"cpu_core_count":1,"cpu_options":[{"amd_sev_snp":"","core_count":1,"threads_per_core":2}],"cpu_threads_per_core":2,"credit_specification":[{"cpu_credits":"unlimited"}],"disable_api_stop":false,"disable_api_termination":false,"ebs_block_device":[],"ebs_optimized":false,"enable_primary_ipv6":null,"enclave_options":[{"enabled":false}],"ephemeral_block_device":[],"get_password_data":false,"hibernation":false,"host_id":"","host_resource_group_arn":null,"iam_instance_profile":"","id":"i-012cafc89720d6fb5","instance_initiated_shutdown_behavior":"stop","instance_lifecycle":"","instance_market_options":[],"instance_state":"running","instance_type":"t3.small","ipv6_address_count":0,"ipv6_addresses":[],"key_name":"Demo Key Pair","launch_template":[],"maintenance_options":[{"auto_recovery":"default"}],"metadata_options":[{"http_endpoint":"enabled","http_protocol_ipv6":"disabled","http_put_response_hop_limit":1,"http_tokens":"optional","instance_metadata_tags":"disabled"}],"monitoring":false,"network_interface":[],"outpost_arn":"","password_data":"","placement_group":"","placement_partition_number":0,"primary_network_interface_id":"eni-0c2fd58372f61bd60","private_dns":"ip-10-0-9-180.eu-west-2.compute.internal","private_dns_name_options":[{"enable_resource_name_dns_a_record":false,"enable_resource_name_dns_aaaa_record":false,"hostname_type":"ip-name"}],"private_ip":"10.0.9.180","public_dns":"ec2-18-130-74-67.eu-west-2.compute.amazonaws.com","public_ip":"18.130.74.67","root_block_device":[{"delete_on_termination":true,"device_name":"/dev/xvda","encrypted":false,"iops":100,"kms_key_id":"","tags":{},"tags_all":{},"throughput":0,"volume_id":"vol-0073f6dc4599e8523","volume_size":8,"volume_type":"gp2"}],"secondary_private_ips":[],"security_groups":[],"source_dest_check":true,"spot_instance_request_id":"","subnet_id":"subnet-0ec75df66980d2920","tags":{"Environment":"dev","Name":"Webserver"},"tags_all":{"Environment":"dev","Name":"Webserver"},"tenancy":"default","timeouts":null,"user_data":null,"user_data_base64":null,"user_data_replace_on_change":false,"volume_tags":null,"vpc_security_group_ids":["sg-057ed2204f81107a5"]},"sensitive_values":{"ami":true,"capacity_reservation_specification":[{"capacity_reservation_target":[]}],"cpu_options":[{}],"credit_specification":[{}],"ebs_block_device":[],"enclave_options":[{}],"ephemeral_block_device":[],"instance_market_options":[],"ipv6_addresses":[],"launch_template":[],"maintenance_options":[{}],"metadata_options":[{}],"network_interface":[],"private_dns_name_options":[{}],"root_block_device":[{"tags":{},"tags_all":{}}],"secondary_private_ips":[],"security_groups":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[false]}},{"address":"module.heritage[0].aws_lambda_function.example","mode":"managed","type":"aws_lambda_function","name":"example","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"architectures":["x86_64"],"arn":"arn:aws:lambda:eu-west-2:540044833068:function:-terraform-example_lambda_function","code_sha256":"AL+rDzevWkbhiW0wn6Q5AAB5yT4FUg5XY0X1IQvX8y0=","code_signing_config_arn":"","dead_letter_config":[],"description":"","environment":[],"ephemeral_storage":[{"size":512}],"file_system_config":[],"filename":"modules/heritage/tmp/lambda_function.zip","function_name":"-terraform-example_lambda_function","handler":"index.handler","id":"-terraform-example_lambda_function","image_config":[],"image_uri":"","invoke_arn":"arn:aws:apigateway:eu-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-2:540044833068:function:-terraform-example_lambda_function/invocations","kms_key_arn":"","last_modified":"2025-12-09T19:44:17.000+0000","layers":[],"logging_config":[{"application_log_level":"","log_format":"Text","log_group":"/aws/lambda/-terraform-example_lambda_function","system_log_level":""}],"memory_size":128,"package_type":"Zip","publish":false,"qualified_arn":"arn:aws:lambda:eu-west-2:540044833068:function:-terraform-example_lambda_function:$LATEST","qualified_invoke_arn":"arn:aws:apigateway:eu-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-2:540044833068:function:-terraform-example_lambda_function:$LATEST/invocations","replace_security_groups_on_destroy":null,"replacement_security_group_ids":null,"reserved_concurrent_executions":-1,"role":"arn:aws:iam::540044833068:role/-terraform-example_lambda_iam_role","runtime":"nodejs20.x","s3_bucket":null,"s3_key":null,"s3_object_version":null,"signing_job_arn":"","signing_profile_version_arn":"","skip_destroy":false,"snap_start":[],"source_code_hash":"AL+rDzevWkbhiW0wn6Q5AAB5yT4FUg5XY0X1IQvX8y0=","source_code_size":270,"tags":{},"tags_all":{},"timeout":3,"timeouts":null,"tracing_config":[{"mode":"PassThrough"}],"version":"$LATEST","vpc_config":[]},"sensitive_values":{"architectures":[false],"dead_letter_config":[],"environment":[],"ephemeral_storage":[{}],"file_system_config":[],"image_config":[],"layers":[],"logging_config":[{}],"snap_start":[],"tags":{},"tags_all":{},"tracing_config":[{}],"vpc_config":[]}},{"address":"module.heritage[0].aws_launch_template.my_launch_template","mode":"managed","type":"aws_launch_template","name":"my_launch_template","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:eu-west-2:540044833068:launch-template/lt-04dc7394984712fe8","block_device_mappings":[],"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"default_version":1,"description":"","disable_api_stop":false,"disable_api_termination":false,"ebs_optimized":"","elastic_gpu_specifications":[],"elastic_inference_accelerator":[],"enclave_options":[],"hibernation_options":[],"iam_instance_profile":[],"id":"lt-04dc7394984712fe8","image_id":"ami-02a95139d1d364420","instance_initiated_shutdown_behavior":"","instance_market_options":[],"instance_requirements":[],"instance_type":"t3.micro","kernel_id":"","key_name":"","latest_version":5,"license_specification":[],"maintenance_options":[],"metadata_options":[],"monitoring":[],"name":"asg-change-launch-template-terraform-example2025111723203932490000000b","name_prefix":"asg-change-launch-template-terraform-example","network_interfaces":[],"placement":[],"private_dns_name_options":[],"ram_disk_id":"","security_group_names":[],"tag_specifications":[],"tags":{},"tags_all":{},"update_default_version":null,"user_data":"","vpc_security_group_ids":["sg-0159f0e3d8224d441"]},"sensitive_values":{"block_device_mappings":[],"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"elastic_gpu_specifications":[],"elastic_inference_accelerator":[],"enclave_options":[],"hibernation_options":[],"iam_instance_profile":[],"instance_market_options":[],"instance_requirements":[],"license_specification":[],"maintenance_options":[],"metadata_options":[],"monitoring":[],"network_interfaces":[],"placement":[],"private_dns_name_options":[],"security_group_names":[],"tag_specifications":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[false]}},{"address":"module.heritage[0].aws_lb.main","mode":"managed","type":"aws_lb","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"access_logs":[{"bucket":"","enabled":false,"prefix":""}],"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:loadbalancer/app/terraform-example/16bbb139e6d96ffb","arn_suffix":"app/terraform-example/16bbb139e6d96ffb","client_keep_alive":3600,"connection_logs":[{"bucket":"","enabled":false,"prefix":""}],"customer_owned_ipv4_pool":"","desync_mitigation_mode":"defensive","dns_name":"terraform-example-1993925081.eu-west-2.elb.amazonaws.com","dns_record_client_routing_policy":null,"drop_invalid_header_fields":false,"enable_cross_zone_load_balancing":true,"enable_deletion_protection":false,"enable_http2":true,"enable_tls_version_and_cipher_suite_headers":false,"enable_waf_fail_open":false,"enable_xff_client_port":false,"enable_zonal_shift":false,"enforce_security_group_inbound_rules_on_private_link_traffic":"","id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:loadbalancer/app/terraform-example/16bbb139e6d96ffb","idle_timeout":60,"internal":false,"ip_address_type":"ipv4","ipam_pools":[],"load_balancer_type":"application","minimum_load_balancer_capacity":[],"name":"terraform-example","name_prefix":"","preserve_host_header":false,"security_groups":["sg-0159f0e3d8224d441"],"subnet_mapping":[{"allocation_id":"","ipv6_address":"","outpost_id":"","private_ipv4_address":"","subnet_id":"subnet-07fc72cf57c70e4f0"},{"allocation_id":"","ipv6_address":"","outpost_id":"","private_ipv4_address":"","subnet_id":"subnet-0a1b287732e8ad0b7"}],"subnets":["subnet-07fc72cf57c70e4f0","subnet-0a1b287732e8ad0b7"],"tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298","xff_header_processing_mode":"append","zone_id":"ZHURV8PSTC4K8"},"sensitive_values":{"access_logs":[{}],"connection_logs":[{}],"ipam_pools":[],"minimum_load_balancer_capacity":[],"security_groups":[false],"subnet_mapping":[{},{}],"subnets":[false,false],"tags":{},"tags_all":{}}},{"address":"module.heritage[0].aws_lb_listener.http","mode":"managed","type":"aws_lb_listener","name":"http","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"alpn_policy":null,"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:listener/app/terraform-example/16bbb139e6d96ffb/1e73b4b315bff0f1","certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[{"content_type":"text/plain","message_body":"Nothing here...","status_code":"200"}],"forward":[],"order":1,"redirect":[],"target_group_arn":"","type":"fixed-response"}],"id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:listener/app/terraform-example/16bbb139e6d96ffb/1e73b4b315bff0f1","load_balancer_arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:loadbalancer/app/terraform-example/16bbb139e6d96ffb","mutual_authentication":[],"port":80,"protocol":"HTTP","routing_http_request_x_amzn_mtls_clientcert_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_issuer_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_leaf_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_serial_number_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_subject_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_validity_header_name":null,"routing_http_request_x_amzn_tls_cipher_suite_header_name":null,"routing_http_request_x_amzn_tls_version_header_name":null,"routing_http_response_access_control_allow_credentials_header_value":"","routing_http_response_access_control_allow_headers_header_value":"","routing_http_response_access_control_allow_methods_header_value":"","routing_http_response_access_control_allow_origin_header_value":"","routing_http_response_access_control_expose_headers_header_value":"","routing_http_response_access_control_max_age_header_value":"","routing_http_response_content_security_policy_header_value":"","routing_http_response_server_enabled":true,"routing_http_response_strict_transport_security_header_value":"","routing_http_response_x_content_type_options_header_value":"","routing_http_response_x_frame_options_header_value":"","ssl_policy":"","tags":{},"tags_all":{},"tcp_idle_timeout_seconds":null,"timeouts":null},"sensitive_values":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[{}],"forward":[],"redirect":[]}],"mutual_authentication":[],"tags":{},"tags_all":{}}},{"address":"module.heritage[0].aws_lb_listener_rule.face","mode":"managed","type":"aws_lb_listener_rule","name":"face","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":1,"redirect":[],"target_group_arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/facerec-terraform-example/ccde9b5e810e9a5d","type":"forward"}],"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:listener-rule/app/terraform-example/16bbb139e6d96ffb/1e73b4b315bff0f1/b0d2ff0e2982cec8","condition":[{"host_header":[{"values":["face-terraform-example.overmind-terraform-example.com"]}],"http_header":[],"http_request_method":[],"path_pattern":[],"query_string":[],"source_ip":[]}],"id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:listener-rule/app/terraform-example/16bbb139e6d96ffb/1e73b4b315bff0f1/b0d2ff0e2982cec8","listener_arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:listener/app/terraform-example/16bbb139e6d96ffb/1e73b4b315bff0f1","priority":99,"tags":{},"tags_all":{}},"sensitive_values":{"action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[]}],"condition":[{"host_header":[{"values":[false]}],"http_header":[],"http_request_method":[],"path_pattern":[],"query_string":[],"source_ip":[]}],"tags":{},"tags_all":{}}},{"address":"module.heritage[0].aws_lb_listener_rule.visit_counter","mode":"managed","type":"aws_lb_listener_rule","name":"visit_counter","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":1,"redirect":[],"target_group_arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/visit-counter-terraform-example/5683104d7610bc44","type":"forward"}],"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:listener-rule/app/terraform-example/16bbb139e6d96ffb/1e73b4b315bff0f1/e9d949c11c2c2ffb","condition":[{"host_header":[{"values":["visits-terraform-example.overmind-terraform-example.com"]}],"http_header":[],"http_request_method":[],"path_pattern":[],"query_string":[],"source_ip":[]}],"id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:listener-rule/app/terraform-example/16bbb139e6d96ffb/1e73b4b315bff0f1/e9d949c11c2c2ffb","listener_arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:listener/app/terraform-example/16bbb139e6d96ffb/1e73b4b315bff0f1","priority":100,"tags":{},"tags_all":{}},"sensitive_values":{"action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[]}],"condition":[{"host_header":[{"values":[false]}],"http_header":[],"http_request_method":[],"path_pattern":[],"query_string":[],"source_ip":[]}],"tags":{},"tags_all":{}}},{"address":"module.heritage[0].aws_lb_target_group.face","mode":"managed","type":"aws_lb_target_group","name":"face","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/facerec-terraform-example/ccde9b5e810e9a5d","arn_suffix":"targetgroup/facerec-terraform-example/ccde9b5e810e9a5d","connection_termination":null,"deregistration_delay":"300","health_check":[{"enabled":true,"healthy_threshold":2,"interval":40,"matcher":"200","path":"/","port":"traffic-port","protocol":"HTTP","timeout":30,"unhealthy_threshold":3}],"id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/facerec-terraform-example/ccde9b5e810e9a5d","ip_address_type":"ipv4","lambda_multi_value_headers_enabled":false,"load_balancer_arns":["arn:aws:elasticloadbalancing:eu-west-2:540044833068:loadbalancer/app/terraform-example/16bbb139e6d96ffb"],"load_balancing_algorithm_type":"round_robin","load_balancing_anomaly_mitigation":"off","load_balancing_cross_zone_enabled":"use_load_balancer_configuration","name":"facerec-terraform-example","name_prefix":"","port":1234,"preserve_client_ip":null,"protocol":"HTTP","protocol_version":"HTTP1","proxy_protocol_v2":false,"slow_start":0,"stickiness":[{"cookie_duration":86400,"cookie_name":"","enabled":false,"type":"lb_cookie"}],"tags":{},"tags_all":{},"target_failover":[{"on_deregistration":null,"on_unhealthy":null}],"target_group_health":[{"dns_failover":[{"minimum_healthy_targets_count":"1","minimum_healthy_targets_percentage":"off"}],"unhealthy_state_routing":[{"minimum_healthy_targets_count":1,"minimum_healthy_targets_percentage":"off"}]}],"target_health_state":[{"enable_unhealthy_connection_termination":null,"unhealthy_draining_interval":null}],"target_type":"ip","vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"health_check":[{}],"load_balancer_arns":[false],"stickiness":[{}],"tags":{},"tags_all":{},"target_failover":[{}],"target_group_health":[{"dns_failover":[{}],"unhealthy_state_routing":[{}]}],"target_health_state":[{}]}},{"address":"module.heritage[0].aws_lb_target_group.my_new_target_group","mode":"managed","type":"aws_lb_target_group","name":"my_new_target_group","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/asg-new-terraform-example/b25da3bfef43543c","arn_suffix":"targetgroup/asg-new-terraform-example/b25da3bfef43543c","connection_termination":null,"deregistration_delay":"300","health_check":[{"enabled":true,"healthy_threshold":3,"interval":30,"matcher":"200","path":"/","port":"traffic-port","protocol":"HTTP","timeout":5,"unhealthy_threshold":3}],"id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/asg-new-terraform-example/b25da3bfef43543c","ip_address_type":"ipv4","lambda_multi_value_headers_enabled":false,"load_balancer_arns":[],"load_balancing_algorithm_type":"round_robin","load_balancing_anomaly_mitigation":"off","load_balancing_cross_zone_enabled":"use_load_balancer_configuration","name":"asg-new-terraform-example","name_prefix":"","port":80,"preserve_client_ip":null,"protocol":"HTTP","protocol_version":"HTTP1","proxy_protocol_v2":false,"slow_start":0,"stickiness":[{"cookie_duration":86400,"cookie_name":"","enabled":false,"type":"lb_cookie"}],"tags":{},"tags_all":{},"target_failover":[{"on_deregistration":null,"on_unhealthy":null}],"target_group_health":[{"dns_failover":[{"minimum_healthy_targets_count":"1","minimum_healthy_targets_percentage":"off"}],"unhealthy_state_routing":[{"minimum_healthy_targets_count":1,"minimum_healthy_targets_percentage":"off"}]}],"target_health_state":[{"enable_unhealthy_connection_termination":null,"unhealthy_draining_interval":null}],"target_type":"instance","vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"health_check":[{}],"load_balancer_arns":[],"stickiness":[{}],"tags":{},"tags_all":{},"target_failover":[{}],"target_group_health":[{"dns_failover":[{}],"unhealthy_state_routing":[{}]}],"target_health_state":[{}]}},{"address":"module.heritage[0].aws_lb_target_group.my_target_group","mode":"managed","type":"aws_lb_target_group","name":"my_target_group","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/asg-change-tg-terraform-example/d9fca32e6f2d362a","arn_suffix":"targetgroup/asg-change-tg-terraform-example/d9fca32e6f2d362a","connection_termination":null,"deregistration_delay":"300","health_check":[{"enabled":true,"healthy_threshold":3,"interval":30,"matcher":"200","path":"/","port":"traffic-port","protocol":"HTTP","timeout":5,"unhealthy_threshold":3}],"id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/asg-change-tg-terraform-example/d9fca32e6f2d362a","ip_address_type":"ipv4","lambda_multi_value_headers_enabled":false,"load_balancer_arns":[],"load_balancing_algorithm_type":"round_robin","load_balancing_anomaly_mitigation":"off","load_balancing_cross_zone_enabled":"use_load_balancer_configuration","name":"asg-change-tg-terraform-example","name_prefix":"","port":80,"preserve_client_ip":null,"protocol":"HTTP","protocol_version":"HTTP1","proxy_protocol_v2":false,"slow_start":0,"stickiness":[{"cookie_duration":86400,"cookie_name":"","enabled":false,"type":"lb_cookie"}],"tags":{},"tags_all":{},"target_failover":[{"on_deregistration":null,"on_unhealthy":null}],"target_group_health":[{"dns_failover":[{"minimum_healthy_targets_count":"1","minimum_healthy_targets_percentage":"off"}],"unhealthy_state_routing":[{"minimum_healthy_targets_count":1,"minimum_healthy_targets_percentage":"off"}]}],"target_health_state":[{"enable_unhealthy_connection_termination":null,"unhealthy_draining_interval":null}],"target_type":"instance","vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"health_check":[{}],"load_balancer_arns":[],"stickiness":[{}],"tags":{},"tags_all":{},"target_failover":[{}],"target_group_health":[{"dns_failover":[{}],"unhealthy_state_routing":[{}]}],"target_health_state":[{}]}},{"address":"module.heritage[0].aws_lb_target_group.visit_counter","mode":"managed","type":"aws_lb_target_group","name":"visit_counter","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/visit-counter-terraform-example/5683104d7610bc44","arn_suffix":"targetgroup/visit-counter-terraform-example/5683104d7610bc44","connection_termination":null,"deregistration_delay":"300","health_check":[{"enabled":true,"healthy_threshold":5,"interval":30,"matcher":"200","path":"/","port":"traffic-port","protocol":"HTTP","timeout":5,"unhealthy_threshold":2}],"id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/visit-counter-terraform-example/5683104d7610bc44","ip_address_type":"ipv4","lambda_multi_value_headers_enabled":false,"load_balancer_arns":["arn:aws:elasticloadbalancing:eu-west-2:540044833068:loadbalancer/app/terraform-example/16bbb139e6d96ffb"],"load_balancing_algorithm_type":"round_robin","load_balancing_anomaly_mitigation":"off","load_balancing_cross_zone_enabled":"use_load_balancer_configuration","name":"visit-counter-terraform-example","name_prefix":"","port":80,"preserve_client_ip":null,"protocol":"HTTP","protocol_version":"HTTP1","proxy_protocol_v2":false,"slow_start":0,"stickiness":[{"cookie_duration":86400,"cookie_name":"","enabled":false,"type":"lb_cookie"}],"tags":{},"tags_all":{},"target_failover":[{"on_deregistration":null,"on_unhealthy":null}],"target_group_health":[{"dns_failover":[{"minimum_healthy_targets_count":"1","minimum_healthy_targets_percentage":"off"}],"unhealthy_state_routing":[{"minimum_healthy_targets_count":1,"minimum_healthy_targets_percentage":"off"}]}],"target_health_state":[{"enable_unhealthy_connection_termination":null,"unhealthy_draining_interval":null}],"target_type":"ip","vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"health_check":[{}],"load_balancer_arns":[false],"stickiness":[{}],"tags":{},"tags_all":{},"target_failover":[{}],"target_group_health":[{"dns_failover":[{}],"unhealthy_state_routing":[{}]}],"target_health_state":[{}]}},{"address":"module.heritage[0].aws_network_acl.restricted","mode":"managed","type":"aws_network_acl","name":"restricted","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:eu-west-2:540044833068:network-acl/acl-069a798ad4aa03b2c","egress":[{"action":"allow","cidr_block":"0.0.0.0/0","from_port":0,"icmp_code":0,"icmp_type":0,"ipv6_cidr_block":"","protocol":"-1","rule_no":100,"to_port":0}],"id":"acl-069a798ad4aa03b2c","ingress":[{"action":"allow","cidr_block":"0.0.0.0/0","from_port":1024,"icmp_code":0,"icmp_type":0,"ipv6_cidr_block":"","protocol":"6","rule_no":300,"to_port":65535},{"action":"allow","cidr_block":"0.0.0.0/0","from_port":22,"icmp_code":0,"icmp_type":0,"ipv6_cidr_block":"","protocol":"6","rule_no":102,"to_port":22},{"action":"allow","cidr_block":"0.0.0.0/0","from_port":80,"icmp_code":0,"icmp_type":0,"ipv6_cidr_block":"","protocol":"6","rule_no":100,"to_port":80},{"action":"deny","cidr_block":"0.0.0.0/0","from_port":8000,"icmp_code":0,"icmp_type":0,"ipv6_cidr_block":"","protocol":"6","rule_no":200,"to_port":8100}],"owner_id":"540044833068","subnet_ids":["subnet-0e4cc60d35634e85b","subnet-0ec75df66980d2920"],"tags":{"Name":"Restricted Example"},"tags_all":{"Name":"Restricted Example"},"vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"egress":[{}],"ingress":[{},{},{},{}],"subnet_ids":[false,false],"tags":{},"tags_all":{}}},{"address":"module.heritage[0].aws_network_acl_rule.allow_ephemeral","mode":"managed","type":"aws_network_acl_rule","name":"allow_ephemeral","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"cidr_block":"0.0.0.0/0","egress":false,"from_port":1024,"icmp_code":null,"icmp_type":null,"id":"nacl-2257767417","ipv6_cidr_block":"","network_acl_id":"acl-069a798ad4aa03b2c","protocol":"6","rule_action":"allow","rule_number":300,"to_port":65535},"sensitive_values":{}},{"address":"module.heritage[0].aws_network_acl_rule.allow_http","mode":"managed","type":"aws_network_acl_rule","name":"allow_http","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"cidr_block":"0.0.0.0/0","egress":false,"from_port":80,"icmp_code":null,"icmp_type":null,"id":"nacl-1744572244","ipv6_cidr_block":"","network_acl_id":"acl-069a798ad4aa03b2c","protocol":"6","rule_action":"allow","rule_number":100,"to_port":80},"sensitive_values":{}},{"address":"module.heritage[0].aws_network_acl_rule.allow_outbound","mode":"managed","type":"aws_network_acl_rule","name":"allow_outbound","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"cidr_block":"0.0.0.0/0","egress":true,"from_port":null,"icmp_code":null,"icmp_type":null,"id":"nacl-1087552375","ipv6_cidr_block":"","network_acl_id":"acl-069a798ad4aa03b2c","protocol":"-1","rule_action":"allow","rule_number":100,"to_port":null},"sensitive_values":{}},{"address":"module.heritage[0].aws_network_acl_rule.allow_ssh","mode":"managed","type":"aws_network_acl_rule","name":"allow_ssh","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"cidr_block":"0.0.0.0/0","egress":false,"from_port":22,"icmp_code":null,"icmp_type":null,"id":"nacl-2345112011","ipv6_cidr_block":"","network_acl_id":"acl-069a798ad4aa03b2c","protocol":"6","rule_action":"allow","rule_number":102,"to_port":22},"sensitive_values":{}},{"address":"module.heritage[0].aws_network_acl_rule.deny_high_ports","mode":"managed","type":"aws_network_acl_rule","name":"deny_high_ports","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"cidr_block":"0.0.0.0/0","egress":false,"from_port":8000,"icmp_code":null,"icmp_type":null,"id":"nacl-463284879","ipv6_cidr_block":"","network_acl_id":"acl-069a798ad4aa03b2c","protocol":"6","rule_action":"deny","rule_number":200,"to_port":8100},"sensitive_values":{}},{"address":"module.heritage[0].aws_rds_cluster.face_database","mode":"managed","type":"aws_rds_cluster","name":"face_database","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"allocated_storage":1,"allow_major_version_upgrade":null,"apply_immediately":null,"arn":"arn:aws:rds:eu-west-2:540044833068:cluster:facial-recognition-terraform-example","availability_zones":["eu-west-2a","eu-west-2b","eu-west-2c"],"backtrack_window":0,"backup_retention_period":1,"ca_certificate_identifier":null,"ca_certificate_valid_till":null,"cluster_identifier":"facial-recognition-terraform-example","cluster_identifier_prefix":"","cluster_members":["tf-20251117235257281600000001"],"cluster_resource_id":"cluster-N6QYRDLXDK37JQDNBQCUCLZX2I","cluster_scalability_type":"","copy_tags_to_snapshot":false,"database_insights_mode":"standard","database_name":"test","db_cluster_instance_class":"","db_cluster_parameter_group_name":"default.aurora-postgresql16","db_instance_parameter_group_name":null,"db_subnet_group_name":"main-terraform-example","db_system_id":"","delete_automated_backups":true,"deletion_protection":false,"domain":"","domain_iam_role_name":"","enable_global_write_forwarding":false,"enable_http_endpoint":false,"enable_local_write_forwarding":false,"enabled_cloudwatch_logs_exports":[],"endpoint":"facial-recognition-terraform-example.cluster-cnx7xf6hwmba.eu-west-2.rds.amazonaws.com","engine":"aurora-postgresql","engine_lifecycle_support":"open-source-rds-extended-support","engine_mode":"provisioned","engine_version":"16.8","engine_version_actual":"16.8","final_snapshot_identifier":"test","global_cluster_identifier":"","hosted_zone_id":"Z1TTGA775OQIYO","iam_database_authentication_enabled":false,"iam_roles":[],"id":"facial-recognition-terraform-example","iops":0,"kms_key_id":"arn:aws:kms:eu-west-2:540044833068:key/2f30a33a-1c66-4b89-8420-50a4ce8f63f2","manage_master_user_password":null,"master_password":"must_be_eight_characters","master_password_wo":null,"master_password_wo_version":null,"master_user_secret":[],"master_user_secret_kms_key_id":null,"master_username":"test","monitoring_interval":0,"monitoring_role_arn":"","network_type":"IPV4","performance_insights_enabled":false,"performance_insights_kms_key_id":"","performance_insights_retention_period":0,"port":5432,"preferred_backup_window":"22:06-22:36","preferred_maintenance_window":"thu:05:14-thu:05:44","reader_endpoint":"facial-recognition-terraform-example.cluster-ro-cnx7xf6hwmba.eu-west-2.rds.amazonaws.com","replication_source_identifier":"","restore_to_point_in_time":[],"s3_import":[],"scaling_configuration":[],"serverlessv2_scaling_configuration":[{"max_capacity":1,"min_capacity":0.5,"seconds_until_auto_pause":0}],"skip_final_snapshot":true,"snapshot_identifier":null,"source_region":null,"storage_encrypted":true,"storage_type":"","tags":{},"tags_all":{},"timeouts":null,"vpc_security_group_ids":["sg-0159f0e3d8224d441"]},"sensitive_values":{"availability_zones":[false,false,false],"cluster_members":[false],"enabled_cloudwatch_logs_exports":[],"iam_roles":[],"master_password":true,"master_password_wo":true,"master_user_secret":[],"restore_to_point_in_time":[],"s3_import":[],"scaling_configuration":[],"serverlessv2_scaling_configuration":[{}],"tags":{},"tags_all":{},"vpc_security_group_ids":[false]}},{"address":"module.heritage[0].aws_rds_cluster_instance.face_database","mode":"managed","type":"aws_rds_cluster_instance","name":"face_database","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"apply_immediately":true,"arn":"arn:aws:rds:eu-west-2:540044833068:db:tf-20251117235257281600000001","auto_minor_version_upgrade":true,"availability_zone":"eu-west-2b","ca_cert_identifier":"rds-ca-rsa2048-g1","cluster_identifier":"facial-recognition-terraform-example","copy_tags_to_snapshot":false,"custom_iam_instance_profile":"","db_parameter_group_name":"default.aurora-postgresql16","db_subnet_group_name":"main-terraform-example","dbi_resource_id":"db-5JDUQAUCVWAJGUEVWQDBZUDHPE","endpoint":"tf-20251117235257281600000001.cnx7xf6hwmba.eu-west-2.rds.amazonaws.com","engine":"aurora-postgresql","engine_version":"16.8","engine_version_actual":"16.8","force_destroy":false,"id":"tf-20251117235257281600000001","identifier":"tf-20251117235257281600000001","identifier_prefix":"tf-","instance_class":"db.serverless","kms_key_id":"arn:aws:kms:eu-west-2:540044833068:key/2f30a33a-1c66-4b89-8420-50a4ce8f63f2","monitoring_interval":0,"monitoring_role_arn":"","network_type":"IPV4","performance_insights_enabled":false,"performance_insights_kms_key_id":"","performance_insights_retention_period":0,"port":5432,"preferred_backup_window":"22:06-22:36","preferred_maintenance_window":"wed:02:29-wed:02:59","promotion_tier":0,"publicly_accessible":false,"storage_encrypted":true,"tags":{},"tags_all":{},"timeouts":null,"writer":true},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.heritage[0].aws_route53_record.face","mode":"managed","type":"aws_route53_record","name":"face","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"alias":[],"allow_overwrite":null,"cidr_routing_policy":[],"failover_routing_policy":[],"fqdn":"face-terraform-example.overmind-terraform-example.com","geolocation_routing_policy":[],"geoproximity_routing_policy":[],"health_check_id":"","id":"Z0909695IU5SU6N8UFON_face-terraform-example.overmind-terraform-example.com_CNAME","latency_routing_policy":[],"multivalue_answer_routing_policy":false,"name":"face-terraform-example.overmind-terraform-example.com","records":["terraform-example-1993925081.eu-west-2.elb.amazonaws.com"],"set_identifier":"","timeouts":null,"ttl":300,"type":"CNAME","weighted_routing_policy":[],"zone_id":"Z0909695IU5SU6N8UFON"},"sensitive_values":{"alias":[],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"geoproximity_routing_policy":[],"latency_routing_policy":[],"records":[false],"weighted_routing_policy":[]}},{"address":"module.heritage[0].aws_route53_record.visit_counter","mode":"managed","type":"aws_route53_record","name":"visit_counter","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"alias":[],"allow_overwrite":null,"cidr_routing_policy":[],"failover_routing_policy":[],"fqdn":"visits-terraform-example.overmind-terraform-example.com","geolocation_routing_policy":[],"geoproximity_routing_policy":[],"health_check_id":"","id":"Z0909695IU5SU6N8UFON_visits-terraform-example.overmind-terraform-example.com_CNAME","latency_routing_policy":[],"multivalue_answer_routing_policy":false,"name":"visits-terraform-example.overmind-terraform-example.com","records":["terraform-example-1993925081.eu-west-2.elb.amazonaws.com"],"set_identifier":"","timeouts":null,"ttl":300,"type":"CNAME","weighted_routing_policy":[],"zone_id":"Z0909695IU5SU6N8UFON"},"sensitive_values":{"alias":[],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"geoproximity_routing_policy":[],"latency_routing_policy":[],"records":[false],"weighted_routing_policy":[]}},{"address":"module.heritage[0].aws_route_table_association.restricted-2a","mode":"managed","type":"aws_route_table_association","name":"restricted-2a","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":"","id":"rtbassoc-0424ae05f399b1fe1","route_table_id":"rtb-073519b951ac0afb5","subnet_id":"subnet-0ec75df66980d2920","timeouts":null},"sensitive_values":{}},{"address":"module.heritage[0].aws_route_table_association.restricted-2b","mode":"managed","type":"aws_route_table_association","name":"restricted-2b","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":"","id":"rtbassoc-07a004760c9195770","route_table_id":"rtb-073519b951ac0afb5","subnet_id":"subnet-0e4cc60d35634e85b","timeouts":null},"sensitive_values":{}},{"address":"module.heritage[0].aws_s3_bucket.b","mode":"managed","type":"aws_s3_bucket","name":"b","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"acceleration_status":"","acl":null,"arn":"arn:aws:s3:::second-example-brave-crappie20251117232021571800000004","bucket":"second-example-brave-crappie20251117232021571800000004","bucket_domain_name":"second-example-brave-crappie20251117232021571800000004.s3.amazonaws.com","bucket_prefix":"second-example-brave-crappie","bucket_regional_domain_name":"second-example-brave-crappie20251117232021571800000004.s3.eu-west-2.amazonaws.com","cors_rule":[],"force_destroy":false,"grant":[{"id":"05d918fa182ad8f3fa915436354b8657e3c2c59b326ecbfc43e6c00451268d0a","permissions":["FULL_CONTROL"],"type":"CanonicalUser","uri":""}],"hosted_zone_id":"Z3GKZC51ZF0DB4","id":"second-example-brave-crappie20251117232021571800000004","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"object_lock_enabled":false,"policy":"","region":"eu-west-2","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"","sse_algorithm":"AES256"}],"bucket_key_enabled":false}]}],"tags":{"Name":"Second example bucket"},"tags_all":{"Name":"Second example bucket"},"timeouts":null,"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"sensitive_values":{"cors_rule":[],"grant":[{"permissions":[false]}],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}],"tags":{},"tags_all":{},"versioning":[{}],"website":[]}},{"address":"module.heritage[0].aws_s3_bucket.my_bucket","mode":"managed","type":"aws_s3_bucket","name":"my_bucket","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"acceleration_status":"","acl":"private","arn":"arn:aws:s3:::bucket-notification-terraform-example20251117232019549500000001","bucket":"bucket-notification-terraform-example20251117232019549500000001","bucket_domain_name":"bucket-notification-terraform-example20251117232019549500000001.s3.amazonaws.com","bucket_prefix":"bucket-notification-terraform-example","bucket_regional_domain_name":"bucket-notification-terraform-example20251117232019549500000001.s3.eu-west-2.amazonaws.com","cors_rule":[],"force_destroy":false,"grant":[{"id":"05d918fa182ad8f3fa915436354b8657e3c2c59b326ecbfc43e6c00451268d0a","permissions":["FULL_CONTROL"],"type":"CanonicalUser","uri":""}],"hosted_zone_id":"Z3GKZC51ZF0DB4","id":"bucket-notification-terraform-example20251117232019549500000001","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"object_lock_enabled":false,"policy":"","region":"eu-west-2","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"","sse_algorithm":"AES256"}],"bucket_key_enabled":false}]}],"tags":{},"tags_all":{},"timeouts":null,"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"sensitive_values":{"cors_rule":[],"grant":[{"permissions":[false]}],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}],"tags":{},"tags_all":{},"versioning":[{}],"website":[]}},{"address":"module.heritage[0].aws_s3_bucket_acl.b_acl","mode":"managed","type":"aws_s3_bucket_acl","name":"b_acl","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"access_control_policy":[{"grant":[{"grantee":[{"display_name":"","email_address":"","id":"05d918fa182ad8f3fa915436354b8657e3c2c59b326ecbfc43e6c00451268d0a","type":"CanonicalUser","uri":""}],"permission":"FULL_CONTROL"}],"owner":[{"display_name":"","id":"05d918fa182ad8f3fa915436354b8657e3c2c59b326ecbfc43e6c00451268d0a"}]}],"acl":"private","bucket":"second-example-brave-crappie20251117232021571800000004","expected_bucket_owner":"","id":"second-example-brave-crappie20251117232021571800000004,private"},"sensitive_values":{"access_control_policy":[{"grant":[{"grantee":[{}]}],"owner":[{}]}]}},{"address":"module.heritage[0].aws_s3_bucket_notification.bucket_notification","mode":"managed","type":"aws_s3_bucket_notification","name":"bucket_notification","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"bucket":"bucket-notification-terraform-example20251117232019549500000001","eventbridge":false,"id":"bucket-notification-terraform-example20251117232019549500000001","lambda_function":[],"queue":[{"events":["s3:ObjectCreated:*"],"filter_prefix":"","filter_suffix":"","id":"tf-s3-queue-20251117232048550500000013","queue_arn":"arn:aws:sqs:eu-west-2:540044833068:-terraform-example-notifications-from-s3"}],"topic":[]},"sensitive_values":{"lambda_function":[],"queue":[{"events":[false]}],"topic":[]}},{"address":"module.heritage[0].aws_s3_bucket_ownership_controls.b","mode":"managed","type":"aws_s3_bucket_ownership_controls","name":"b","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"bucket":"second-example-brave-crappie20251117232021571800000004","id":"second-example-brave-crappie20251117232021571800000004","rule":[{"object_ownership":"ObjectWriter"}]},"sensitive_values":{"rule":[{}]}},{"address":"module.heritage[0].aws_s3_bucket_policy.bucket_policy","mode":"managed","type":"aws_s3_bucket_policy","name":"bucket_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"bucket":"s3-one-adequate-gibbon20251117232020021100000002","id":"s3-one-adequate-gibbon20251117232020021100000002","policy":"{\"Statement\":[{\"Action\":\"s3:GetObject\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::cloudfront:user/CloudFront Origin Access Identity E3773WNTKP0C2U\"},\"Resource\":\"arn:aws:s3:::s3-one-adequate-gibbon20251117232020021100000002/static/*\"},{\"Action\":\"s3:GetObject\",\"Condition\":{\"StringEquals\":{\"aws:SourceArn\":\"arn:aws:cloudfront::540044833068:distribution/EX4HFUQMZ2ULI\"}},\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"cloudfront.amazonaws.com\"},\"Resource\":\"arn:aws:s3:::s3-one-adequate-gibbon20251117232020021100000002/static/*\"}],\"Version\":\"2012-10-17\"}"},"sensitive_values":{}},{"address":"module.heritage[0].aws_security_group.allow_access","mode":"managed","type":"aws_security_group","name":"allow_access","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:eu-west-2:540044833068:security-group/sg-0c7e72143f1b9c08c","description":"Allow access security group","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-0c7e72143f1b9c08c","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22}],"name":"allow_access-terraform-example","name_prefix":"","owner_id":"540044833068","revoke_rules_on_delete":false,"tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}},{"address":"module.heritage[0].aws_security_group.instance_sg","mode":"managed","type":"aws_security_group","name":"instance_sg","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:eu-west-2:540044833068:security-group/sg-057ed2204f81107a5","description":"Managed by Terraform","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-057ed2204f81107a5","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22},{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":8080,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":8080}],"name":"terraform-2025111723203855250000000a","name_prefix":"terraform-","owner_id":"540044833068","revoke_rules_on_delete":false,"tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}},{"address":"module.heritage[0].aws_sns_topic.example_topic","mode":"managed","type":"aws_sns_topic","name":"example_topic","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"application_failure_feedback_role_arn":"","application_success_feedback_role_arn":"","application_success_feedback_sample_rate":0,"archive_policy":"","arn":"arn:aws:sns:eu-west-2:540044833068:-terraform-example-topic","beginning_archive_time":"","content_based_deduplication":false,"delivery_policy":"","display_name":"","fifo_throughput_scope":"","fifo_topic":false,"firehose_failure_feedback_role_arn":"","firehose_success_feedback_role_arn":"","firehose_success_feedback_sample_rate":0,"http_failure_feedback_role_arn":"","http_success_feedback_role_arn":"","http_success_feedback_sample_rate":0,"id":"arn:aws:sns:eu-west-2:540044833068:-terraform-example-topic","kms_master_key_id":"","lambda_failure_feedback_role_arn":"","lambda_success_feedback_role_arn":"","lambda_success_feedback_sample_rate":0,"name":"-terraform-example-topic","name_prefix":"","owner":"540044833068","policy":"{\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Action\":[\"SNS:GetTopicAttributes\",\"SNS:SetTopicAttributes\",\"SNS:AddPermission\",\"SNS:RemovePermission\",\"SNS:DeleteTopic\",\"SNS:Subscribe\",\"SNS:ListSubscriptionsByTopic\",\"SNS:Publish\"],\"Condition\":{\"StringEquals\":{\"AWS:SourceOwner\":\"540044833068\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Resource\":\"arn:aws:sns:eu-west-2:540044833068:-terraform-example-topic\",\"Sid\":\"__default_statement_ID\"}],\"Version\":\"2008-10-17\"}","signature_version":0,"sqs_failure_feedback_role_arn":"","sqs_success_feedback_role_arn":"","sqs_success_feedback_sample_rate":0,"tags":{},"tags_all":{},"tracing_config":""},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.heritage[0].aws_sqs_queue.my_queue","mode":"managed","type":"aws_sqs_queue","name":"my_queue","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:sqs:eu-west-2:540044833068:-terraform-example-notifications-from-s3","content_based_deduplication":false,"deduplication_scope":"","delay_seconds":0,"fifo_queue":false,"fifo_throughput_limit":"","id":"https://sqs.eu-west-2.amazonaws.com/540044833068/-terraform-example-notifications-from-s3","kms_data_key_reuse_period_seconds":300,"kms_master_key_id":"","max_message_size":262144,"message_retention_seconds":345600,"name":"-terraform-example-notifications-from-s3","name_prefix":"","policy":"{\"Id\":\"arn:aws:sqs:eu-west-2:540044833068:-terraform-example-notifications-from-s3/SQSPolicy\",\"Statement\":[{\"Action\":\"SQS:SendMessage\",\"Condition\":{\"ArnEquals\":{\"aws:SourceArn\":\"arn:aws:s3:::bucket-notification-terraform-example20251117232019549500000001\"}},\"Effect\":\"Allow\",\"Principal\":\"*\",\"Resource\":\"arn:aws:sqs:eu-west-2:540044833068:-terraform-example-notifications-from-s3\",\"Sid\":\"AllowS3BucketNotification\"}],\"Version\":\"2012-10-17\"}","receive_wait_time_seconds":0,"redrive_allow_policy":"","redrive_policy":"","sqs_managed_sse_enabled":true,"tags":{},"tags_all":{},"timeouts":null,"url":"https://sqs.eu-west-2.amazonaws.com/540044833068/-terraform-example-notifications-from-s3","visibility_timeout_seconds":30},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.heritage[0].aws_sqs_queue_policy.my_queue_policy","mode":"managed","type":"aws_sqs_queue_policy","name":"my_queue_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"id":"https://sqs.eu-west-2.amazonaws.com/540044833068/-terraform-example-notifications-from-s3","policy":"{\"Id\":\"arn:aws:sqs:eu-west-2:540044833068:-terraform-example-notifications-from-s3/SQSPolicy\",\"Statement\":[{\"Action\":\"SQS:SendMessage\",\"Condition\":{\"ArnEquals\":{\"aws:SourceArn\":\"arn:aws:s3:::bucket-notification-terraform-example20251117232019549500000001\"}},\"Effect\":\"Allow\",\"Principal\":\"*\",\"Resource\":\"arn:aws:sqs:eu-west-2:540044833068:-terraform-example-notifications-from-s3\",\"Sid\":\"AllowS3BucketNotification\"}],\"Version\":\"2012-10-17\"}","queue_url":"https://sqs.eu-west-2.amazonaws.com/540044833068/-terraform-example-notifications-from-s3"},"sensitive_values":{}},{"address":"module.heritage[0].aws_subnet.restricted-2a","mode":"managed","type":"aws_subnet","name":"restricted-2a","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:eu-west-2:540044833068:subnet/subnet-0ec75df66980d2920","assign_ipv6_address_on_creation":false,"availability_zone":"eu-west-2a","availability_zone_id":"euw2-az2","cidr_block":"10.0.9.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0ec75df66980d2920","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"540044833068","private_dns_hostname_type_on_launch":"ip-name","tags":{"Name":"Restricted 2a"},"tags_all":{"Name":"Restricted 2a"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.heritage[0].aws_subnet.restricted-2b","mode":"managed","type":"aws_subnet","name":"restricted-2b","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:eu-west-2:540044833068:subnet/subnet-0e4cc60d35634e85b","assign_ipv6_address_on_creation":false,"availability_zone":"eu-west-2b","availability_zone_id":"euw2-az3","cidr_block":"10.0.10.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0e4cc60d35634e85b","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"540044833068","private_dns_hostname_type_on_launch":"ip-name","tags":{"Name":"Restricted 2b"},"tags_all":{"Name":"Restricted 2b"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.heritage[0].random_pet.second","mode":"managed","type":"random_pet","name":"second","provider_name":"registry.terraform.io/hashicorp/random","schema_version":0,"values":{"id":"brave-crappie","keepers":null,"length":2,"prefix":null,"separator":"-"},"sensitive_values":{}},{"address":"module.heritage[0].random_pet.this","mode":"managed","type":"random_pet","name":"this","provider_name":"registry.terraform.io/hashicorp/random","schema_version":0,"values":{"id":"adequate-gibbon","keepers":null,"length":2,"prefix":null,"separator":"-"},"sensitive_values":{}}],"address":"module.heritage[0]","child_modules":[{"resources":[{"address":"module.heritage[0].module.memory_optimization.aws_cloudwatch_log_group.app[0]","mode":"managed","type":"aws_cloudwatch_log_group","name":"app","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:logs:eu-west-2:540044833068:log-group:/ecs/scenarios--27e78067","id":"/ecs/scenarios--27e78067","kms_key_id":"","log_group_class":"STANDARD","name":"/ecs/scenarios--27e78067","name_prefix":"","retention_in_days":1,"skip_destroy":false,"tags":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"Logs will show OOM kills when memory is reduced to 1024MB","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-logs","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"tags_all":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"Logs will show OOM kills when memory is reduced to 1024MB","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-logs","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.heritage[0].module.memory_optimization.aws_cloudwatch_log_metric_filter.memory_pressure[0]","mode":"managed","type":"aws_cloudwatch_log_metric_filter","name":"memory_pressure","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"scenarios--27e78067-memory-pressure","log_group_name":"/ecs/scenarios--27e78067","metric_transformation":[{"default_value":"","dimensions":{},"name":"JavaOOMErrors","namespace":"MemoryOptimization/Demo","unit":"None","value":"1"}],"name":"scenarios--27e78067-memory-pressure","pattern":"[timestamp, requestId, level=\"ERROR\", message=\"*OutOfMemoryError*\"]"},"sensitive_values":{"metric_transformation":[{"dimensions":{}}]}},{"address":"module.heritage[0].module.memory_optimization.aws_cloudwatch_metric_alarm.high_cpu_utilization[0]","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"high_cpu_utilization","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"actions_enabled":true,"alarm_actions":["arn:aws:sns:eu-west-2:540044833068:scenarios--27e78067-alerts"],"alarm_description":"This metric monitors ECS CPU utilization - will spike when JVM struggles with insufficient memory","alarm_name":"scenarios--27e78067-high-cpu","arn":"arn:aws:cloudwatch:eu-west-2:540044833068:alarm:scenarios--27e78067-high-cpu","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":0,"dimensions":{"ClusterName":"scenarios--27e78067-cluster","ServiceName":"scenarios--27e78067-service"},"evaluate_low_sample_count_percentiles":"","evaluation_periods":3,"extended_statistic":"","id":"scenarios--27e78067-high-cpu","insufficient_data_actions":[],"metric_name":"CPUUtilization","metric_query":[],"namespace":"AWS/ECS","ok_actions":[],"period":300,"statistic":"Average","tags":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"CPU utilization alarm for Java application performance","Environment":"demo","GCPressure":"high-when-heap-approaches-limit","JVMBehavior":"CPU-spikes-before-OOM","JavaHeapMB":"1536","MemoryMB":"2048","MemoryThrashing":"frequent-GC-when-constrained","Name":"scenarios--27e78067-cpu-alarm","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"tags_all":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"CPU utilization alarm for Java application performance","Environment":"demo","GCPressure":"high-when-heap-approaches-limit","JVMBehavior":"CPU-spikes-before-OOM","JavaHeapMB":"1536","MemoryMB":"2048","MemoryThrashing":"frequent-GC-when-constrained","Name":"scenarios--27e78067-cpu-alarm","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"threshold":80,"threshold_metric_id":"","treat_missing_data":"missing","unit":""},"sensitive_values":{"alarm_actions":[false],"dimensions":{},"insufficient_data_actions":[],"metric_query":[],"ok_actions":[],"tags":{},"tags_all":{}}},{"address":"module.heritage[0].module.memory_optimization.aws_cloudwatch_metric_alarm.high_memory_utilization[0]","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"high_memory_utilization","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"actions_enabled":true,"alarm_actions":["arn:aws:sns:eu-west-2:540044833068:scenarios--27e78067-alerts"],"alarm_description":"This metric monitors ECS memory utilization - WILL FIRE when containers run out of memory","alarm_name":"scenarios--27e78067-high-memory","arn":"arn:aws:cloudwatch:eu-west-2:540044833068:alarm:scenarios--27e78067-high-memory","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":0,"dimensions":{"ClusterName":"scenarios--27e78067-cluster","ServiceName":"scenarios--27e78067-service"},"evaluate_low_sample_count_percentiles":"","evaluation_periods":2,"extended_statistic":"","id":"scenarios--27e78067-high-memory","insufficient_data_actions":[],"metric_name":"MemoryUtilization","metric_query":[],"namespace":"AWS/ECS","ok_actions":["arn:aws:sns:eu-west-2:540044833068:scenarios--27e78067-alerts"],"period":300,"statistic":"Average","tags":{"AlarmTrigger":"memory-over-80-percent","ContainerMemoryMB":"2048","CreatedBy":"terraform","DaysUntilBF":"7","Description":"Memory utilization alarm for Java application","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-memory-alarm","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction","WillFireAfterChange":"false"},"tags_all":{"AlarmTrigger":"memory-over-80-percent","ContainerMemoryMB":"2048","CreatedBy":"terraform","DaysUntilBF":"7","Description":"Memory utilization alarm for Java application","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-memory-alarm","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction","WillFireAfterChange":"false"},"threshold":80,"threshold_metric_id":"","treat_missing_data":"missing","unit":""},"sensitive_values":{"alarm_actions":[false],"dimensions":{},"insufficient_data_actions":[],"metric_query":[],"ok_actions":[false],"tags":{},"tags_all":{}}},{"address":"module.heritage[0].module.memory_optimization.aws_cloudwatch_metric_alarm.low_task_count[0]","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"low_task_count","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"actions_enabled":true,"alarm_actions":["arn:aws:sns:eu-west-2:540044833068:scenarios--27e78067-alerts"],"alarm_description":"This metric monitors ECS running task count - WILL FIRE when containers crash due to OOM","alarm_name":"scenarios--27e78067-low-task-count","arn":"arn:aws:cloudwatch:eu-west-2:540044833068:alarm:scenarios--27e78067-low-task-count","comparison_operator":"LessThanThreshold","datapoints_to_alarm":0,"dimensions":{"ClusterName":"scenarios--27e78067-cluster","ServiceName":"scenarios--27e78067-service"},"evaluate_low_sample_count_percentiles":"","evaluation_periods":2,"extended_statistic":"","id":"scenarios--27e78067-low-task-count","insufficient_data_actions":[],"metric_name":"RunningTaskCount","metric_query":[],"namespace":"AWS/ECS","ok_actions":["arn:aws:sns:eu-west-2:540044833068:scenarios--27e78067-alerts"],"period":300,"statistic":"Average","tags":{"BusinessImpact":"service-degradation","CrashCause":"OOM-when-memory-reduced","CreatedBy":"terraform","DaysUntilBF":"7","Description":"Task count alarm for container health monitoring","Environment":"demo","ExpectedTasks":"3","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-task-count-alarm","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction","ThresholdTasks":"2.4"},"tags_all":{"BusinessImpact":"service-degradation","CrashCause":"OOM-when-memory-reduced","CreatedBy":"terraform","DaysUntilBF":"7","Description":"Task count alarm for container health monitoring","Environment":"demo","ExpectedTasks":"3","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-task-count-alarm","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction","ThresholdTasks":"2.4"},"threshold":2.4,"threshold_metric_id":"","treat_missing_data":"missing","unit":""},"sensitive_values":{"alarm_actions":[false],"dimensions":{},"insufficient_data_actions":[],"metric_query":[],"ok_actions":[false],"tags":{},"tags_all":{}}},{"address":"module.heritage[0].module.memory_optimization.aws_cloudwatch_metric_alarm.unhealthy_targets[0]","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"unhealthy_targets","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"actions_enabled":true,"alarm_actions":["arn:aws:sns:eu-west-2:540044833068:scenarios--27e78067-alerts"],"alarm_description":"This metric monitors ALB unhealthy targets - will fire when containers become unresponsive","alarm_name":"scenarios--27e78067-unhealthy-targets","arn":"arn:aws:cloudwatch:eu-west-2:540044833068:alarm:scenarios--27e78067-unhealthy-targets","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":0,"dimensions":{"LoadBalancer":"app/scenarios--27e78067-alb/d1465e8f5a619f26","TargetGroup":"targetgroup/scenarios--27e78067-tg/0ce05c8cfec9e2f1"},"evaluate_low_sample_count_percentiles":"","evaluation_periods":2,"extended_statistic":"","id":"scenarios--27e78067-unhealthy-targets","insufficient_data_actions":[],"metric_name":"UnHealthyHostCount","metric_query":[],"namespace":"AWS/ApplicationELB","ok_actions":[],"period":60,"statistic":"Average","tags":{"BusinessRisk":"outage-before-peak-season","CreatedBy":"terraform","DaysUntilBF":"7","DeregistrationTime":"5s","Description":"ALB target health monitoring for application availability","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-unhealthy-targets-alarm","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","RollbackCapability":"insufficient","Scenario":"cost-reduction","UserExperience":"failed-requests-during-crashes"},"tags_all":{"BusinessRisk":"outage-before-peak-season","CreatedBy":"terraform","DaysUntilBF":"7","DeregistrationTime":"5s","Description":"ALB target health monitoring for application availability","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-unhealthy-targets-alarm","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","RollbackCapability":"insufficient","Scenario":"cost-reduction","UserExperience":"failed-requests-during-crashes"},"threshold":0,"threshold_metric_id":"","treat_missing_data":"missing","unit":""},"sensitive_values":{"alarm_actions":[false],"dimensions":{},"insufficient_data_actions":[],"metric_query":[],"ok_actions":[],"tags":{},"tags_all":{}}},{"address":"module.heritage[0].module.memory_optimization.aws_cloudwatch_query_definition.oom_events[0]","mode":"managed","type":"aws_cloudwatch_query_definition","name":"oom_events","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"8d2b4d24-f4de-4ace-965a-54d45e1ad99e","log_group_names":["/ecs/scenarios--27e78067"],"name":"scenarios--27e78067-oom-analysis","query_definition_id":"8d2b4d24-f4de-4ace-965a-54d45e1ad99e","query_string":"fields @timestamp, @message\n| filter @message like /OutOfMemoryError/\n| sort @timestamp desc\n| limit 100\n"},"sensitive_values":{"log_group_names":[false]}},{"address":"module.heritage[0].module.memory_optimization.aws_ecs_cluster.main[0]","mode":"managed","type":"aws_ecs_cluster","name":"main","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ecs:eu-west-2:540044833068:cluster/scenarios--27e78067-cluster","configuration":[],"id":"arn:aws:ecs:eu-west-2:540044833068:cluster/scenarios--27e78067-cluster","name":"scenarios--27e78067-cluster","service_connect_defaults":[],"setting":[{"name":"containerInsights","value":"disabled"}],"tags":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"ECS cluster for memory optimization demo - all 3 containers will restart on memory change","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-cluster","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"tags_all":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"ECS cluster for memory optimization demo - all 3 containers will restart on memory change","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-cluster","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"}},"sensitive_values":{"configuration":[],"service_connect_defaults":[],"setting":[{}],"tags":{},"tags_all":{}}},{"address":"module.heritage[0].module.memory_optimization.aws_ecs_service.app[0]","mode":"managed","type":"aws_ecs_service","name":"app","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"alarms":[],"availability_zone_rebalancing":"DISABLED","capacity_provider_strategy":[],"cluster":"arn:aws:ecs:eu-west-2:540044833068:cluster/scenarios--27e78067-cluster","deployment_circuit_breaker":[{"enable":false,"rollback":false}],"deployment_controller":[{"type":"ECS"}],"deployment_maximum_percent":200,"deployment_minimum_healthy_percent":100,"desired_count":3,"enable_ecs_managed_tags":false,"enable_execute_command":false,"force_delete":null,"force_new_deployment":null,"health_check_grace_period_seconds":0,"iam_role":"/aws-service-role/ecs.amazonaws.com/AWSServiceRoleForECS","id":"arn:aws:ecs:eu-west-2:540044833068:service/scenarios--27e78067-cluster/scenarios--27e78067-service","launch_type":"FARGATE","load_balancer":[{"container_name":"tomcat-app","container_port":8080,"elb_name":"","target_group_arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/scenarios--27e78067-tg/0ce05c8cfec9e2f1"}],"name":"scenarios--27e78067-service","network_configuration":[{"assign_public_ip":true,"security_groups":["sg-07496007262e8cd03"],"subnets":["subnet-07fc72cf57c70e4f0","subnet-0a1b287732e8ad0b7"]}],"ordered_placement_strategy":[],"placement_constraints":[],"platform_version":"LATEST","propagate_tags":"NONE","scheduling_strategy":"REPLICA","service_connect_configuration":[],"service_registries":[],"tags":{"BusinessContext":"cost-optimization","ContainersAffected":"3","CreatedBy":"terraform","DaysUntilBF":"7","DeploymentType":"rolling","Description":"ECS service running Java application containers","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-service","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"tags_all":{"BusinessContext":"cost-optimization","ContainersAffected":"3","CreatedBy":"terraform","DaysUntilBF":"7","DeploymentType":"rolling","Description":"ECS service running Java application containers","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-service","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"task_definition":"arn:aws:ecs:eu-west-2:540044833068:task-definition/scenarios--27e78067-task:1","timeouts":null,"triggers":{},"volume_configuration":[],"vpc_lattice_configurations":[],"wait_for_steady_state":false},"sensitive_values":{"alarms":[],"capacity_provider_strategy":[],"deployment_circuit_breaker":[{}],"deployment_controller":[{}],"load_balancer":[{}],"network_configuration":[{"security_groups":[false],"subnets":[false,false]}],"ordered_placement_strategy":[],"placement_constraints":[],"service_connect_configuration":[],"service_registries":[],"tags":{},"tags_all":{},"triggers":{},"volume_configuration":[],"vpc_lattice_configurations":[]}},{"address":"module.heritage[0].module.memory_optimization.aws_ecs_task_definition.app[0]","mode":"managed","type":"aws_ecs_task_definition","name":"app","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ecs:eu-west-2:540044833068:task-definition/scenarios--27e78067-task:1","arn_without_revision":"arn:aws:ecs:eu-west-2:540044833068:task-definition/scenarios--27e78067-task","container_definitions":"[{\"environment\":[{\"name\":\"CATALINA_OPTS\",\"value\":\"-Djava.security.egd=file:/dev/./urandom\"},{\"name\":\"JAVA_OPTS\",\"value\":\"-Xmx1536m -Xms1536m -XX:+UseG1GC -XX:MaxGCPauseMillis=200\"}],\"essential\":true,\"healthCheck\":{\"command\":[\"CMD-SHELL\",\"curl -f http://localhost:8080/ || exit 1\"],\"interval\":30,\"retries\":3,\"startPeriod\":120,\"timeout\":5},\"image\":\"tomcat:9-jre11\",\"logConfiguration\":{\"logDriver\":\"awslogs\",\"options\":{\"awslogs-group\":\"/ecs/scenarios--27e78067\",\"awslogs-region\":\"eu-west-2\",\"awslogs-stream-prefix\":\"ecs\"}},\"memoryReservation\":800,\"mountPoints\":[],\"name\":\"tomcat-app\",\"portMappings\":[{\"containerPort\":8080,\"hostPort\":8080,\"protocol\":\"tcp\"}],\"systemControls\":[],\"volumesFrom\":[]}]","cpu":"512","enable_fault_injection":false,"ephemeral_storage":[],"execution_role_arn":"arn:aws:iam::540044833068:role/scenarios--27e78067-ecs-execution-role","family":"scenarios--27e78067-task","id":"scenarios--27e78067-task","inference_accelerator":[],"ipc_mode":"","memory":"2048","network_mode":"awsvpc","pid_mode":"","placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":["FARGATE"],"revision":1,"runtime_platform":[],"skip_destroy":false,"tags":{"ContainerMemoryMB":"2048","CreatedBy":"terraform","DaysUntilBF":"7","Description":"ECS task definition with Java heap configuration","Environment":"demo","JavaHeapMB":"1536","JavaHeapSizeMB":"1536","MemoryMB":"2048","MemoryOptimized":"true","MemoryOverheadMB":"256","Name":"scenarios--27e78067-task","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction","TotalRequiredMB":"1792"},"tags_all":{"ContainerMemoryMB":"2048","CreatedBy":"terraform","DaysUntilBF":"7","Description":"ECS task definition with Java heap configuration","Environment":"demo","JavaHeapMB":"1536","JavaHeapSizeMB":"1536","MemoryMB":"2048","MemoryOptimized":"true","MemoryOverheadMB":"256","Name":"scenarios--27e78067-task","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction","TotalRequiredMB":"1792"},"task_role_arn":"arn:aws:iam::540044833068:role/scenarios--27e78067-ecs-task-role","track_latest":false,"volume":[]},"sensitive_values":{"ephemeral_storage":[],"inference_accelerator":[],"placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":[false],"runtime_platform":[],"tags":{},"tags_all":{},"volume":[]}},{"address":"module.heritage[0].module.memory_optimization.aws_iam_role.ecs_execution_role[0]","mode":"managed","type":"aws_iam_role","name":"ecs_execution_role","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::540044833068:role/scenarios--27e78067-ecs-execution-role","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ecs-tasks.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","create_date":"2025-11-17T23:20:20Z","description":"","force_detach_policies":false,"id":"scenarios--27e78067-ecs-execution-role","inline_policy":[],"managed_policy_arns":["arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy"],"max_session_duration":3600,"name":"scenarios--27e78067-ecs-execution-role","name_prefix":"","path":"/","permissions_boundary":"","tags":{"CreatedBy":"terraform","DaysUntilBF":"7","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"tags_all":{"CreatedBy":"terraform","DaysUntilBF":"7","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"unique_id":"AROAX3PJOGEWEKKJ5H6OA"},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[false],"tags":{},"tags_all":{}}},{"address":"module.heritage[0].module.memory_optimization.aws_iam_role.ecs_task_role[0]","mode":"managed","type":"aws_iam_role","name":"ecs_task_role","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::540044833068:role/scenarios--27e78067-ecs-task-role","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ecs-tasks.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","create_date":"2025-11-17T23:20:19Z","description":"","force_detach_policies":false,"id":"scenarios--27e78067-ecs-task-role","inline_policy":[],"managed_policy_arns":[],"max_session_duration":3600,"name":"scenarios--27e78067-ecs-task-role","name_prefix":"","path":"/","permissions_boundary":"","tags":{"CreatedBy":"terraform","DaysUntilBF":"7","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"tags_all":{"CreatedBy":"terraform","DaysUntilBF":"7","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"unique_id":"AROAX3PJOGEWP7USRZI3E"},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags":{},"tags_all":{}}},{"address":"module.heritage[0].module.memory_optimization.aws_iam_role_policy_attachment.ecs_execution_role_policy[0]","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ecs_execution_role_policy","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"scenarios--27e78067-ecs-execution-role-20251117232023483800000005","policy_arn":"arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy","role":"scenarios--27e78067-ecs-execution-role"},"sensitive_values":{}},{"address":"module.heritage[0].module.memory_optimization.aws_lb.app[0]","mode":"managed","type":"aws_lb","name":"app","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"access_logs":[{"bucket":"","enabled":false,"prefix":""}],"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:loadbalancer/app/scenarios--27e78067-alb/d1465e8f5a619f26","arn_suffix":"app/scenarios--27e78067-alb/d1465e8f5a619f26","client_keep_alive":3600,"connection_logs":[{"bucket":"","enabled":false,"prefix":""}],"customer_owned_ipv4_pool":"","desync_mitigation_mode":"defensive","dns_name":"scenarios--27e78067-alb-513392904.eu-west-2.elb.amazonaws.com","dns_record_client_routing_policy":null,"drop_invalid_header_fields":false,"enable_cross_zone_load_balancing":true,"enable_deletion_protection":false,"enable_http2":true,"enable_tls_version_and_cipher_suite_headers":false,"enable_waf_fail_open":false,"enable_xff_client_port":false,"enable_zonal_shift":false,"enforce_security_group_inbound_rules_on_private_link_traffic":"","id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:loadbalancer/app/scenarios--27e78067-alb/d1465e8f5a619f26","idle_timeout":60,"internal":false,"ip_address_type":"ipv4","ipam_pools":[],"load_balancer_type":"application","minimum_load_balancer_capacity":[],"name":"scenarios--27e78067-alb","name_prefix":"","preserve_host_header":false,"security_groups":["sg-0b6f7b1aeeca6c2bc"],"subnet_mapping":[{"allocation_id":"","ipv6_address":"","outpost_id":"","private_ipv4_address":"","subnet_id":"subnet-07fc72cf57c70e4f0"},{"allocation_id":"","ipv6_address":"","outpost_id":"","private_ipv4_address":"","subnet_id":"subnet-0a1b287732e8ad0b7"}],"subnets":["subnet-07fc72cf57c70e4f0","subnet-0a1b287732e8ad0b7"],"tags":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"ALB for memory optimization demo - will route to failing containers after memory change","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-alb","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction","context:black-friday-traffic":"10x normal load expected","context:capacity-planning":"load balancer configured for high traffic"},"tags_all":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"ALB for memory optimization demo - will route to failing containers after memory change","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-alb","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction","context:black-friday-traffic":"10x normal load expected","context:capacity-planning":"load balancer configured for high traffic"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298","xff_header_processing_mode":"append","zone_id":"ZHURV8PSTC4K8"},"sensitive_values":{"access_logs":[{}],"connection_logs":[{}],"ipam_pools":[],"minimum_load_balancer_capacity":[],"security_groups":[false],"subnet_mapping":[{},{}],"subnets":[false,false],"tags":{},"tags_all":{}}},{"address":"module.heritage[0].module.memory_optimization.aws_lb_listener.app[0]","mode":"managed","type":"aws_lb_listener","name":"app","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"alpn_policy":null,"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:listener/app/scenarios--27e78067-alb/d1465e8f5a619f26/424adbb0b1b5a6ce","certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[{"stickiness":[{"duration":0,"enabled":false}],"target_group":[{"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/scenarios--27e78067-tg/0ce05c8cfec9e2f1","weight":1}]}],"order":1,"redirect":[],"target_group_arn":"","type":"forward"}],"id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:listener/app/scenarios--27e78067-alb/d1465e8f5a619f26/424adbb0b1b5a6ce","load_balancer_arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:loadbalancer/app/scenarios--27e78067-alb/d1465e8f5a619f26","mutual_authentication":[],"port":80,"protocol":"HTTP","routing_http_request_x_amzn_mtls_clientcert_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_issuer_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_leaf_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_serial_number_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_subject_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_validity_header_name":null,"routing_http_request_x_amzn_tls_cipher_suite_header_name":null,"routing_http_request_x_amzn_tls_version_header_name":null,"routing_http_response_access_control_allow_credentials_header_value":"","routing_http_response_access_control_allow_headers_header_value":"","routing_http_response_access_control_allow_methods_header_value":"","routing_http_response_access_control_allow_origin_header_value":"","routing_http_response_access_control_expose_headers_header_value":"","routing_http_response_access_control_max_age_header_value":"","routing_http_response_content_security_policy_header_value":"","routing_http_response_server_enabled":true,"routing_http_response_strict_transport_security_header_value":"","routing_http_response_x_content_type_options_header_value":"","routing_http_response_x_frame_options_header_value":"","ssl_policy":"","tags":{"CreatedBy":"terraform","DaysUntilBF":"7","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-listener","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"tags_all":{"CreatedBy":"terraform","DaysUntilBF":"7","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-listener","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"tcp_idle_timeout_seconds":null,"timeouts":null},"sensitive_values":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[{"stickiness":[{}],"target_group":[{}]}],"redirect":[]}],"mutual_authentication":[],"tags":{},"tags_all":{}}},{"address":"module.heritage[0].module.memory_optimization.aws_lb_target_group.app[0]","mode":"managed","type":"aws_lb_target_group","name":"app","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/scenarios--27e78067-tg/0ce05c8cfec9e2f1","arn_suffix":"targetgroup/scenarios--27e78067-tg/0ce05c8cfec9e2f1","connection_termination":null,"deregistration_delay":"5","health_check":[{"enabled":true,"healthy_threshold":2,"interval":30,"matcher":"200","path":"/","port":"traffic-port","protocol":"HTTP","timeout":5,"unhealthy_threshold":2}],"id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/scenarios--27e78067-tg/0ce05c8cfec9e2f1","ip_address_type":"ipv4","lambda_multi_value_headers_enabled":false,"load_balancer_arns":["arn:aws:elasticloadbalancing:eu-west-2:540044833068:loadbalancer/app/scenarios--27e78067-alb/d1465e8f5a619f26"],"load_balancing_algorithm_type":"round_robin","load_balancing_anomaly_mitigation":"off","load_balancing_cross_zone_enabled":"use_load_balancer_configuration","name":"scenarios--27e78067-tg","name_prefix":"","port":8080,"preserve_client_ip":null,"protocol":"HTTP","protocol_version":"HTTP1","proxy_protocol_v2":false,"slow_start":0,"stickiness":[{"cookie_duration":86400,"cookie_name":"","enabled":false,"type":"lb_cookie"}],"tags":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"Target group with 5s deregistration - NO TIME FOR ROLLBACK","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-tg","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction","risk:black-friday-timing":"change 7 days before peak","risk:deregistration-delay":"5s","risk:rollback-capability":"none"},"tags_all":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"Target group with 5s deregistration - NO TIME FOR ROLLBACK","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-tg","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction","risk:black-friday-timing":"change 7 days before peak","risk:deregistration-delay":"5s","risk:rollback-capability":"none"},"target_failover":[{"on_deregistration":null,"on_unhealthy":null}],"target_group_health":[{"dns_failover":[{"minimum_healthy_targets_count":"1","minimum_healthy_targets_percentage":"off"}],"unhealthy_state_routing":[{"minimum_healthy_targets_count":1,"minimum_healthy_targets_percentage":"off"}]}],"target_health_state":[{"enable_unhealthy_connection_termination":null,"unhealthy_draining_interval":null}],"target_type":"ip","vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"health_check":[{}],"load_balancer_arns":[false],"stickiness":[{}],"tags":{},"tags_all":{},"target_failover":[{}],"target_group_health":[{"dns_failover":[{}],"unhealthy_state_routing":[{}]}],"target_health_state":[{}]}},{"address":"module.heritage[0].module.memory_optimization.aws_security_group.alb[0]","mode":"managed","type":"aws_security_group","name":"alb","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:eu-west-2:540044833068:security-group/sg-0b6f7b1aeeca6c2bc","description":"Security group for ALB - allows public HTTP access","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"All outbound traffic","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-0b6f7b1aeeca6c2bc","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"HTTP from internet","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":80}],"name":"scenarios--27e78067-alb-sg","name_prefix":"","owner_id":"540044833068","revoke_rules_on_delete":false,"tags":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"ALB security group - public access for Black Friday capacity testing","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-alb-sg","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"tags_all":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"ALB security group - public access for Black Friday capacity testing","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-alb-sg","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}},{"address":"module.heritage[0].module.memory_optimization.aws_security_group.ecs_tasks[0]","mode":"managed","type":"aws_security_group","name":"ecs_tasks","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:eu-west-2:540044833068:security-group/sg-07496007262e8cd03","description":"Security group for ECS tasks - allows ALB access","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"All outbound traffic","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-07496007262e8cd03","ingress":[{"cidr_blocks":[],"description":"HTTP from ALB","from_port":8080,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":["sg-0b6f7b1aeeca6c2bc"],"self":false,"to_port":8080}],"name":"scenarios--27e78067-ecs-sg","name_prefix":"","owner_id":"540044833068","revoke_rules_on_delete":false,"tags":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"ECS tasks security group - containers will crash after memory optimization","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-ecs-sg","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction","warning:containers-affected":"3 containers","warning:crash-behavior":"immediate OOM after memory reduction"},"tags_all":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"ECS tasks security group - containers will crash after memory optimization","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-ecs-sg","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction","warning:containers-affected":"3 containers","warning:crash-behavior":"immediate OOM after memory reduction"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[false]}],"tags":{},"tags_all":{}}},{"address":"module.heritage[0].module.memory_optimization.aws_sns_topic.alerts[0]","mode":"managed","type":"aws_sns_topic","name":"alerts","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"application_failure_feedback_role_arn":"","application_success_feedback_role_arn":"","application_success_feedback_sample_rate":0,"archive_policy":"","arn":"arn:aws:sns:eu-west-2:540044833068:scenarios--27e78067-alerts","beginning_archive_time":"","content_based_deduplication":false,"delivery_policy":"","display_name":"","fifo_throughput_scope":"","fifo_topic":false,"firehose_failure_feedback_role_arn":"","firehose_success_feedback_role_arn":"","firehose_success_feedback_sample_rate":0,"http_failure_feedback_role_arn":"","http_success_feedback_role_arn":"","http_success_feedback_sample_rate":0,"id":"arn:aws:sns:eu-west-2:540044833068:scenarios--27e78067-alerts","kms_master_key_id":"","lambda_failure_feedback_role_arn":"","lambda_success_feedback_role_arn":"","lambda_success_feedback_sample_rate":0,"name":"scenarios--27e78067-alerts","name_prefix":"","owner":"540044833068","policy":"{\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Action\":[\"SNS:GetTopicAttributes\",\"SNS:SetTopicAttributes\",\"SNS:AddPermission\",\"SNS:RemovePermission\",\"SNS:DeleteTopic\",\"SNS:Subscribe\",\"SNS:ListSubscriptionsByTopic\",\"SNS:Publish\"],\"Condition\":{\"StringEquals\":{\"AWS:SourceOwner\":\"540044833068\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Resource\":\"arn:aws:sns:eu-west-2:540044833068:scenarios--27e78067-alerts\",\"Sid\":\"__default_statement_ID\"}],\"Version\":\"2008-10-17\"}","signature_version":0,"sqs_failure_feedback_role_arn":"","sqs_success_feedback_role_arn":"","sqs_success_feedback_sample_rate":0,"tags":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"SNS topic for memory optimization demo alerts - will fire when containers OOM","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-alerts","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"tags_all":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"SNS topic for memory optimization demo alerts - will fire when containers OOM","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-alerts","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"tracing_config":""},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.heritage[0].module.memory_optimization.random_id.suffix[0]","mode":"managed","type":"random_id","name":"suffix","index":0,"provider_name":"registry.terraform.io/hashicorp/random","schema_version":0,"values":{"b64_std":"J+eAZw==","b64_url":"J-eAZw","byte_length":4,"dec":"669483111","hex":"27e78067","id":"J-eAZw","keepers":null,"prefix":null},"sensitive_values":{}}],"address":"module.heritage[0].module.memory_optimization"},{"resources":[{"address":"module.heritage[0].module.cloudfront.aws_cloudfront_distribution.this[0]","mode":"managed","type":"aws_cloudfront_distribution","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"aliases":[],"arn":"arn:aws:cloudfront::540044833068:distribution/EX4HFUQMZ2ULI","caller_reference":"terraform-20251117232025598600000008","comment":"My awesome CloudFront","continuous_deployment_policy_id":"","custom_error_response":[{"error_caching_min_ttl":0,"error_code":403,"response_code":403,"response_page_path":"/errors/403.html"},{"error_caching_min_ttl":0,"error_code":404,"response_code":404,"response_page_path":"/errors/404.html"}],"default_cache_behavior":[{"allowed_methods":["GET","HEAD","OPTIONS"],"cache_policy_id":"8e5fa4ea-50a6-44f8-86e8-3ca690bd9373","cached_methods":["GET","HEAD"],"compress":true,"default_ttl":0,"field_level_encryption_id":"","forwarded_values":[],"function_association":[],"grpc_config":[{"enabled":false}],"lambda_function_association":[],"max_ttl":0,"min_ttl":0,"origin_request_policy_id":"414eb566-4bb3-49d1-a868-0ee739830440","realtime_log_config_arn":"","response_headers_policy_id":"67f7725c-6f97-4210-82d7-5512b31e9d03","smooth_streaming":false,"target_origin_id":"appsync","trusted_key_groups":[],"trusted_signers":[],"viewer_protocol_policy":"allow-all"}],"default_root_object":"","domain_name":"d3lsh8pjb3h0ub.cloudfront.net","enabled":true,"etag":"E1IXRQLQL1O86R","hosted_zone_id":"Z2FDTNDATAQYW2","http_version":"http2and3","id":"EX4HFUQMZ2ULI","in_progress_validation_batches":0,"is_ipv6_enabled":true,"last_modified_time":"2025-11-17 23:20:25.716 +0000 UTC","logging_config":[],"ordered_cache_behavior":[{"allowed_methods":["GET","HEAD"],"cache_policy_id":"","cached_methods":["GET","HEAD"],"compress":true,"default_ttl":0,"field_level_encryption_id":"","forwarded_values":[{"cookies":[{"forward":"none","whitelisted_names":[]}],"headers":[],"query_string":true,"query_string_cache_keys":[]}],"function_association":[{"event_type":"viewer-request","function_arn":"arn:aws:cloudfront::540044833068:function/terraform-example-adequate-gibbon"},{"event_type":"viewer-response","function_arn":"arn:aws:cloudfront::540044833068:function/terraform-example-adequate-gibbon"}],"grpc_config":[{"enabled":false}],"lambda_function_association":[],"max_ttl":0,"min_ttl":0,"origin_request_policy_id":"","path_pattern":"/static/*","realtime_log_config_arn":"","response_headers_policy_id":"c7fd455f-1fa8-4632-9a22-fef9a58b69a9","smooth_streaming":false,"target_origin_id":"s3_one","trusted_key_groups":[],"trusted_signers":[],"viewer_protocol_policy":"redirect-to-https"}],"origin":[{"connection_attempts":3,"connection_timeout":10,"custom_header":[{"name":"X-Forwarded-Scheme","value":"https"},{"name":"X-Frame-Options","value":"SAMEORIGIN"}],"custom_origin_config":[{"http_port":80,"https_port":443,"origin_keepalive_timeout":5,"origin_protocol_policy":"match-viewer","origin_read_timeout":30,"origin_ssl_protocols":["TLSv1","TLSv1.1","TLSv1.2"]}],"domain_name":"appsync.terraform-example.modules.tf","origin_access_control_id":"","origin_id":"appsync","origin_path":"","origin_shield":[{"enabled":true,"origin_shield_region":"us-east-1"}],"s3_origin_config":[],"vpc_origin_config":[]},{"connection_attempts":3,"connection_timeout":10,"custom_header":[],"custom_origin_config":[],"domain_name":"s3-one-adequate-gibbon20251117232020021100000002.s3.eu-west-2.amazonaws.com","origin_access_control_id":"","origin_id":"s3_one","origin_path":"","origin_shield":[],"s3_origin_config":[{"origin_access_identity":"origin-access-identity/cloudfront/E3773WNTKP0C2U"}],"vpc_origin_config":[]},{"connection_attempts":3,"connection_timeout":10,"custom_header":[],"custom_origin_config":[],"domain_name":"s3-one-adequate-gibbon20251117232020021100000002.s3.eu-west-2.amazonaws.com","origin_access_control_id":"E3F5P5J73PT9IJ","origin_id":"s3_oac","origin_path":"","origin_shield":[],"s3_origin_config":[],"vpc_origin_config":[]}],"origin_group":[{"failover_criteria":[{"status_codes":[403,404,500,502]}],"member":[{"origin_id":"appsync"},{"origin_id":"s3_one"}],"origin_id":"group_one"}],"price_class":"PriceClass_All","restrictions":[{"geo_restriction":[{"locations":["GB","NO","UA","US"],"restriction_type":"whitelist"}]}],"retain_on_delete":false,"staging":false,"status":"Deployed","tags":{},"tags_all":{},"trusted_key_groups":[{"enabled":false,"items":[]}],"trusted_signers":[{"enabled":false,"items":[]}],"viewer_certificate":[{"acm_certificate_arn":"","cloudfront_default_certificate":true,"iam_certificate_id":"","minimum_protocol_version":"TLSv1","ssl_support_method":""}],"wait_for_deployment":false,"web_acl_id":""},"sensitive_values":{"aliases":[],"custom_error_response":[{},{}],"default_cache_behavior":[{"allowed_methods":[false,false,false],"cached_methods":[false,false],"forwarded_values":[],"function_association":[],"grpc_config":[{}],"lambda_function_association":[],"trusted_key_groups":[],"trusted_signers":[]}],"logging_config":[],"ordered_cache_behavior":[{"allowed_methods":[false,false],"cached_methods":[false,false],"forwarded_values":[{"cookies":[{"whitelisted_names":[]}],"headers":[],"query_string_cache_keys":[]}],"function_association":[{},{}],"grpc_config":[{}],"lambda_function_association":[],"trusted_key_groups":[],"trusted_signers":[]}],"origin":[{"custom_header":[{},{}],"custom_origin_config":[{"origin_ssl_protocols":[false,false,false]}],"origin_shield":[{}],"s3_origin_config":[],"vpc_origin_config":[]},{"custom_header":[],"custom_origin_config":[],"origin_shield":[],"s3_origin_config":[{}],"vpc_origin_config":[]},{"custom_header":[],"custom_origin_config":[],"origin_shield":[],"s3_origin_config":[],"vpc_origin_config":[]}],"origin_group":[{"failover_criteria":[{"status_codes":[false,false,false,false]}],"member":[{},{}]}],"restrictions":[{"geo_restriction":[{"locations":[false,false,false,false]}]}],"tags":{},"tags_all":{},"trusted_key_groups":[{"items":[]}],"trusted_signers":[{"items":[]}],"viewer_certificate":[{}]}},{"address":"module.heritage[0].module.cloudfront.aws_cloudfront_monitoring_subscription.this[0]","mode":"managed","type":"aws_cloudfront_monitoring_subscription","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"distribution_id":"EX4HFUQMZ2ULI","id":"EX4HFUQMZ2ULI","monitoring_subscription":[{"realtime_metrics_subscription_config":[{"realtime_metrics_subscription_status":"Enabled"}]}]},"sensitive_values":{"monitoring_subscription":[{"realtime_metrics_subscription_config":[{}]}]}},{"address":"module.heritage[0].module.cloudfront.aws_cloudfront_origin_access_control.this[\"terraform-example\"]","mode":"managed","type":"aws_cloudfront_origin_access_control","name":"this","index":"terraform-example","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:cloudfront::540044833068:origin-access-control/E3F5P5J73PT9IJ","description":"CloudFront access to S3","etag":"ETVPDKIKX0DER","id":"E3F5P5J73PT9IJ","name":"terraform-example","origin_access_control_origin_type":"s3","signing_behavior":"always","signing_protocol":"sigv4"},"sensitive_values":{}},{"address":"module.heritage[0].module.cloudfront.aws_cloudfront_origin_access_identity.this[\"s3_bucket_one\"]","mode":"managed","type":"aws_cloudfront_origin_access_identity","name":"this","index":"s3_bucket_one","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:cloudfront::540044833068:origin-access-identity/E3773WNTKP0C2U","caller_reference":"terraform-20251117232021315100000003","cloudfront_access_identity_path":"origin-access-identity/cloudfront/E3773WNTKP0C2U","comment":"My awesome CloudFront can access","etag":"E3UN6WX5RRO2AG","iam_arn":"arn:aws:iam::cloudfront:user/CloudFront Origin Access Identity E3773WNTKP0C2U","id":"E3773WNTKP0C2U","s3_canonical_user_id":"616f6d6f237db229bb2fc63daa66b9c72a42691aca85621db17121ce20b0234705366f98cdd64601d82ef4ca0ca396ef"},"sensitive_values":{}}],"address":"module.heritage[0].module.cloudfront"},{"address":"module.heritage[0].module.ecs","child_modules":[{"resources":[{"address":"module.heritage[0].module.ecs.module.cluster.aws_cloudwatch_log_group.this[0]","mode":"managed","type":"aws_cloudwatch_log_group","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:logs:eu-west-2:540044833068:log-group:/aws/ecs/example-terraform-example","id":"/aws/ecs/example-terraform-example","kms_key_id":"","log_group_class":"STANDARD","name":"/aws/ecs/example-terraform-example","name_prefix":"","retention_in_days":90,"skip_destroy":false,"tags":{},"tags_all":{}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.heritage[0].module.ecs.module.cluster.aws_ecs_cluster.this[0]","mode":"managed","type":"aws_ecs_cluster","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ecs:eu-west-2:540044833068:cluster/example-terraform-example","configuration":[{"execute_command_configuration":[{"kms_key_id":"","log_configuration":[],"logging":"DEFAULT"}],"managed_storage_configuration":[]}],"id":"arn:aws:ecs:eu-west-2:540044833068:cluster/example-terraform-example","name":"example-terraform-example","service_connect_defaults":[],"setting":[{"name":"containerInsights","value":"enabled"}],"tags":{},"tags_all":{}},"sensitive_values":{"configuration":[{"execute_command_configuration":[{"log_configuration":[]}],"managed_storage_configuration":[]}],"service_connect_defaults":[],"setting":[{}],"tags":{},"tags_all":{}}},{"address":"module.heritage[0].module.ecs.module.cluster.aws_ecs_cluster_capacity_providers.this[0]","mode":"managed","type":"aws_ecs_cluster_capacity_providers","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"capacity_providers":["FARGATE"],"cluster_name":"example-terraform-example","default_capacity_provider_strategy":[{"base":0,"capacity_provider":"FARGATE","weight":100}],"id":"example-terraform-example"},"sensitive_values":{"capacity_providers":[false],"default_capacity_provider_strategy":[{}]}}],"address":"module.heritage[0].module.ecs.module.cluster"}]},{"resources":[{"address":"module.heritage[0].module.message_size_breach[0].aws_cloudwatch_log_group.lambda_logs","mode":"managed","type":"aws_cloudwatch_log_group","name":"lambda_logs","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:logs:eu-west-2:540044833068:log-group:/aws/lambda/image-processor-terraform-example","id":"/aws/lambda/image-processor-terraform-example","kms_key_id":"","log_group_class":"STANDARD","name":"/aws/lambda/image-processor-terraform-example","name_prefix":"","retention_in_days":14,"skip_destroy":false,"tags":{"Environment":"terraform-example","Name":"Lambda Logs","Scenario":"Message Size Breach"},"tags_all":{"Environment":"terraform-example","Name":"Lambda Logs","Scenario":"Message Size Breach"}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.heritage[0].module.message_size_breach[0].aws_cloudwatch_metric_alarm.lambda_errors","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"lambda_errors","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"actions_enabled":true,"alarm_actions":[],"alarm_description":"This alarm monitors Lambda function errors","alarm_name":"lambda-errors-terraform-example","arn":"arn:aws:cloudwatch:eu-west-2:540044833068:alarm:lambda-errors-terraform-example","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":0,"dimensions":{"FunctionName":"image-processor-terraform-example"},"evaluate_low_sample_count_percentiles":"","evaluation_periods":2,"extended_statistic":"","id":"lambda-errors-terraform-example","insufficient_data_actions":[],"metric_name":"Errors","metric_query":[],"namespace":"AWS/Lambda","ok_actions":[],"period":60,"statistic":"Sum","tags":{"Environment":"terraform-example","Name":"Lambda Errors Alarm","Scenario":"Message Size Breach"},"tags_all":{"Environment":"terraform-example","Name":"Lambda Errors Alarm","Scenario":"Message Size Breach"},"threshold":5,"threshold_metric_id":"","treat_missing_data":"missing","unit":""},"sensitive_values":{"alarm_actions":[],"dimensions":{},"insufficient_data_actions":[],"metric_query":[],"ok_actions":[],"tags":{},"tags_all":{}}},{"address":"module.heritage[0].module.message_size_breach[0].aws_cloudwatch_metric_alarm.sqs_queue_depth","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"sqs_queue_depth","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"actions_enabled":true,"alarm_actions":[],"alarm_description":"This alarm monitors SQS queue depth","alarm_name":"sqs-queue-depth-terraform-example","arn":"arn:aws:cloudwatch:eu-west-2:540044833068:alarm:sqs-queue-depth-terraform-example","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":0,"dimensions":{"QueueName":"image-processing-terraform-example"},"evaluate_low_sample_count_percentiles":"","evaluation_periods":2,"extended_statistic":"","id":"sqs-queue-depth-terraform-example","insufficient_data_actions":[],"metric_name":"ApproximateNumberOfVisibleMessages","metric_query":[],"namespace":"AWS/SQS","ok_actions":[],"period":60,"statistic":"Average","tags":{"Environment":"terraform-example","Name":"SQS Queue Depth Alarm","Scenario":"Message Size Breach"},"tags_all":{"Environment":"terraform-example","Name":"SQS Queue Depth Alarm","Scenario":"Message Size Breach"},"threshold":100,"threshold_metric_id":"","treat_missing_data":"missing","unit":""},"sensitive_values":{"alarm_actions":[],"dimensions":{},"insufficient_data_actions":[],"metric_query":[],"ok_actions":[],"tags":{},"tags_all":{}}},{"address":"module.heritage[0].module.message_size_breach[0].aws_iam_role.lambda_role","mode":"managed","type":"aws_iam_role","name":"lambda_role","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::540044833068:role/image-processor-lambda-role-terraform-example","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","create_date":"2025-11-17T23:20:22Z","description":"","force_detach_policies":false,"id":"image-processor-lambda-role-terraform-example","inline_policy":[{"name":"lambda-logs-policy-terraform-example","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"logs:CreateLogGroup\",\"logs:CreateLogStream\",\"logs:PutLogEvents\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:logs:eu-west-2:540044833068:log-group:/aws/lambda/image-processor-terraform-example:*\"}]}"}],"managed_policy_arns":["arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole","arn:aws:iam::aws:policy/service-role/AWSLambdaSQSQueueExecutionRole"],"max_session_duration":3600,"name":"image-processor-lambda-role-terraform-example","name_prefix":"","path":"/","permissions_boundary":"","tags":{"Environment":"terraform-example","Name":"Lambda Execution Role","Scenario":"Message Size Breach"},"tags_all":{"Environment":"terraform-example","Name":"Lambda Execution Role","Scenario":"Message Size Breach"},"unique_id":"AROAX3PJOGEWFCMQCXV45"},"sensitive_values":{"inline_policy":[{}],"managed_policy_arns":[false,false],"tags":{},"tags_all":{}}},{"address":"module.heritage[0].module.message_size_breach[0].aws_iam_role_policy.lambda_logs_policy","mode":"managed","type":"aws_iam_role_policy","name":"lambda_logs_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"image-processor-lambda-role-terraform-example:lambda-logs-policy-terraform-example","name":"lambda-logs-policy-terraform-example","name_prefix":"","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"logs:CreateLogGroup\",\"logs:CreateLogStream\",\"logs:PutLogEvents\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:logs:eu-west-2:540044833068:log-group:/aws/lambda/image-processor-terraform-example:*\"}]}","role":"image-processor-lambda-role-terraform-example"},"sensitive_values":{}},{"address":"module.heritage[0].module.message_size_breach[0].aws_iam_role_policy_attachment.lambda_basic_execution","mode":"managed","type":"aws_iam_role_policy_attachment","name":"lambda_basic_execution","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"image-processor-lambda-role-terraform-example-20251117232024175700000006","policy_arn":"arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole","role":"image-processor-lambda-role-terraform-example"},"sensitive_values":{}},{"address":"module.heritage[0].module.message_size_breach[0].aws_iam_role_policy_attachment.lambda_sqs_policy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"lambda_sqs_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"image-processor-lambda-role-terraform-example-20251117232024470000000007","policy_arn":"arn:aws:iam::aws:policy/service-role/AWSLambdaSQSQueueExecutionRole","role":"image-processor-lambda-role-terraform-example"},"sensitive_values":{}},{"address":"module.heritage[0].module.message_size_breach[0].aws_lambda_event_source_mapping.sqs_trigger","mode":"managed","type":"aws_lambda_event_source_mapping","name":"sqs_trigger","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"amazon_managed_kafka_event_source_config":[],"arn":"arn:aws:lambda:eu-west-2:540044833068:event-source-mapping:8feec500-57de-435d-b185-bc3e9d076225","batch_size":10,"bisect_batch_on_function_error":false,"destination_config":[],"document_db_event_source_config":[],"enabled":true,"event_source_arn":"arn:aws:sqs:eu-west-2:540044833068:image-processing-terraform-example","filter_criteria":[],"function_arn":"arn:aws:lambda:eu-west-2:540044833068:function:image-processor-terraform-example","function_name":"arn:aws:lambda:eu-west-2:540044833068:function:image-processor-terraform-example","function_response_types":[],"id":"8feec500-57de-435d-b185-bc3e9d076225","kms_key_arn":"","last_modified":"2025-11-17T23:21:15Z","last_processing_result":"","maximum_batching_window_in_seconds":5,"maximum_record_age_in_seconds":0,"maximum_retry_attempts":0,"metrics_config":[],"parallelization_factor":0,"provisioned_poller_config":[],"queues":[],"scaling_config":[],"self_managed_event_source":[],"self_managed_kafka_event_source_config":[],"source_access_configuration":[],"starting_position":"","starting_position_timestamp":"","state":"Enabled","state_transition_reason":"USER_INITIATED","tags":{},"tags_all":{},"topics":[],"tumbling_window_in_seconds":0,"uuid":"8feec500-57de-435d-b185-bc3e9d076225"},"sensitive_values":{"amazon_managed_kafka_event_source_config":[],"destination_config":[],"document_db_event_source_config":[],"filter_criteria":[],"function_response_types":[],"metrics_config":[],"provisioned_poller_config":[],"queues":[],"scaling_config":[],"self_managed_event_source":[],"self_managed_kafka_event_source_config":[],"source_access_configuration":[],"tags":{},"tags_all":{},"topics":[]}},{"address":"module.heritage[0].module.message_size_breach[0].aws_lambda_function.image_processor","mode":"managed","type":"aws_lambda_function","name":"image_processor","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"architectures":["x86_64"],"arn":"arn:aws:lambda:eu-west-2:540044833068:function:image-processor-terraform-example","code_sha256":"mMMwfSINMw8K3MiGaVuM4l2UHmgB+qZqX+Y26IWJut0=","code_signing_config_arn":"","dead_letter_config":[],"description":"","environment":[],"ephemeral_storage":[{"size":512}],"file_system_config":[],"filename":"modules/heritage/message-size-breach/lambda_function.zip","function_name":"image-processor-terraform-example","handler":"lambda_function.lambda_handler","id":"image-processor-terraform-example","image_config":[],"image_uri":"","invoke_arn":"arn:aws:apigateway:eu-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-2:540044833068:function:image-processor-terraform-example/invocations","kms_key_arn":"","last_modified":"2025-12-09T19:44:11.000+0000","layers":[],"logging_config":[{"application_log_level":"","log_format":"Text","log_group":"/aws/lambda/image-processor-terraform-example","system_log_level":""}],"memory_size":1024,"package_type":"Zip","publish":false,"qualified_arn":"arn:aws:lambda:eu-west-2:540044833068:function:image-processor-terraform-example:$LATEST","qualified_invoke_arn":"arn:aws:apigateway:eu-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-2:540044833068:function:image-processor-terraform-example:$LATEST/invocations","replace_security_groups_on_destroy":null,"replacement_security_group_ids":null,"reserved_concurrent_executions":-1,"role":"arn:aws:iam::540044833068:role/image-processor-lambda-role-terraform-example","runtime":"python3.13","s3_bucket":null,"s3_key":null,"s3_object_version":null,"signing_job_arn":"","signing_profile_version_arn":"","skip_destroy":false,"snap_start":[],"source_code_hash":"mMMwfSINMw8K3MiGaVuM4l2UHmgB+qZqX+Y26IWJut0=","source_code_size":404,"tags":{"Environment":"terraform-example","Name":"Image Processor","Scenario":"Message Size Breach"},"tags_all":{"Environment":"terraform-example","Name":"Image Processor","Scenario":"Message Size Breach"},"timeout":180,"timeouts":null,"tracing_config":[{"mode":"PassThrough"}],"version":"$LATEST","vpc_config":[]},"sensitive_values":{"architectures":[false],"dead_letter_config":[],"environment":[],"ephemeral_storage":[{}],"file_system_config":[],"image_config":[],"layers":[],"logging_config":[{}],"snap_start":[],"tags":{},"tags_all":{},"tracing_config":[{}],"vpc_config":[]}},{"address":"module.heritage[0].module.message_size_breach[0].aws_sqs_queue.image_processing_dlq","mode":"managed","type":"aws_sqs_queue","name":"image_processing_dlq","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:sqs:eu-west-2:540044833068:image-processing-dlq-terraform-example","content_based_deduplication":false,"deduplication_scope":"","delay_seconds":0,"fifo_queue":false,"fifo_throughput_limit":"","id":"https://sqs.eu-west-2.amazonaws.com/540044833068/image-processing-dlq-terraform-example","kms_data_key_reuse_period_seconds":300,"kms_master_key_id":"","max_message_size":262144,"message_retention_seconds":1209600,"name":"image-processing-dlq-terraform-example","name_prefix":"","policy":"","receive_wait_time_seconds":0,"redrive_allow_policy":"","redrive_policy":"","sqs_managed_sse_enabled":true,"tags":{"Environment":"terraform-example","Name":"Image Processing DLQ","Scenario":"Message Size Breach"},"tags_all":{"Environment":"terraform-example","Name":"Image Processing DLQ","Scenario":"Message Size Breach"},"timeouts":null,"url":"https://sqs.eu-west-2.amazonaws.com/540044833068/image-processing-dlq-terraform-example","visibility_timeout_seconds":30},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.heritage[0].module.message_size_breach[0].aws_sqs_queue.image_processing_queue","mode":"managed","type":"aws_sqs_queue","name":"image_processing_queue","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:sqs:eu-west-2:540044833068:image-processing-terraform-example","content_based_deduplication":false,"deduplication_scope":"","delay_seconds":0,"fifo_queue":false,"fifo_throughput_limit":"","id":"https://sqs.eu-west-2.amazonaws.com/540044833068/image-processing-terraform-example","kms_data_key_reuse_period_seconds":300,"kms_master_key_id":"","max_message_size":25600,"message_retention_seconds":1209600,"name":"image-processing-terraform-example","name_prefix":"","policy":"","receive_wait_time_seconds":20,"redrive_allow_policy":"","redrive_policy":"{\"deadLetterTargetArn\":\"arn:aws:sqs:eu-west-2:540044833068:image-processing-dlq-terraform-example\",\"maxReceiveCount\":3}","sqs_managed_sse_enabled":true,"tags":{"Environment":"terraform-example","Name":"Image Processing Queue","Scenario":"Message Size Breach"},"tags_all":{"Environment":"terraform-example","Name":"Image Processing Queue","Scenario":"Message Size Breach"},"timeouts":null,"url":"https://sqs.eu-west-2.amazonaws.com/540044833068/image-processing-terraform-example","visibility_timeout_seconds":1080},"sensitive_values":{"tags":{},"tags_all":{}}}],"address":"module.heritage[0].module.message_size_breach[0]"},{"resources":[{"address":"module.heritage[0].module.s3_one.aws_s3_bucket.this[0]","mode":"managed","type":"aws_s3_bucket","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"acceleration_status":"","acl":null,"arn":"arn:aws:s3:::s3-one-adequate-gibbon20251117232020021100000002","bucket":"s3-one-adequate-gibbon20251117232020021100000002","bucket_domain_name":"s3-one-adequate-gibbon20251117232020021100000002.s3.amazonaws.com","bucket_prefix":"s3-one-adequate-gibbon","bucket_regional_domain_name":"s3-one-adequate-gibbon20251117232020021100000002.s3.eu-west-2.amazonaws.com","cors_rule":[],"force_destroy":true,"grant":[{"id":"05d918fa182ad8f3fa915436354b8657e3c2c59b326ecbfc43e6c00451268d0a","permissions":["FULL_CONTROL"],"type":"CanonicalUser","uri":""}],"hosted_zone_id":"Z3GKZC51ZF0DB4","id":"s3-one-adequate-gibbon20251117232020021100000002","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"object_lock_enabled":false,"policy":"{\"Statement\":[{\"Action\":\"s3:GetObject\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::cloudfront:user/CloudFront Origin Access Identity E3773WNTKP0C2U\"},\"Resource\":\"arn:aws:s3:::s3-one-adequate-gibbon20251117232020021100000002/static/*\"},{\"Action\":\"s3:GetObject\",\"Condition\":{\"StringEquals\":{\"aws:SourceArn\":\"arn:aws:cloudfront::540044833068:distribution/EX4HFUQMZ2ULI\"}},\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"cloudfront.amazonaws.com\"},\"Resource\":\"arn:aws:s3:::s3-one-adequate-gibbon20251117232020021100000002/static/*\"}],\"Version\":\"2012-10-17\"}","region":"eu-west-2","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"","sse_algorithm":"AES256"}],"bucket_key_enabled":false}]}],"tags":{},"tags_all":{},"timeouts":null,"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"sensitive_values":{"cors_rule":[],"grant":[{"permissions":[false]}],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}],"tags":{},"tags_all":{},"versioning":[{}],"website":[]}},{"address":"module.heritage[0].module.s3_one.aws_s3_bucket_public_access_block.this[0]","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"block_public_acls":true,"block_public_policy":true,"bucket":"s3-one-adequate-gibbon20251117232020021100000002","id":"s3-one-adequate-gibbon20251117232020021100000002","ignore_public_acls":true,"restrict_public_buckets":true},"sensitive_values":{}}],"address":"module.heritage[0].module.s3_one"}]},{"resources":[{"address":"module.shared_security_group.aws_instance.api_server[0]","mode":"managed","type":"aws_instance","name":"api_server","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"ami":"ami-02a95139d1d364420","arn":"arn:aws:ec2:eu-west-2:540044833068:instance/i-0e205109677d47e83","associate_public_ip_address":true,"availability_zone":"eu-west-2a","capacity_reservation_specification":[{"capacity_reservation_preference":"open","capacity_reservation_target":[]}],"cpu_core_count":1,"cpu_options":[{"amd_sev_snp":"","core_count":1,"threads_per_core":2}],"cpu_threads_per_core":2,"credit_specification":[{"cpu_credits":"unlimited"}],"disable_api_stop":false,"disable_api_termination":false,"ebs_block_device":[],"ebs_optimized":false,"enable_primary_ipv6":null,"enclave_options":[{"enabled":false}],"ephemeral_block_device":[],"get_password_data":false,"hibernation":false,"host_id":"","host_resource_group_arn":null,"iam_instance_profile":"","id":"i-0e205109677d47e83","instance_initiated_shutdown_behavior":"stop","instance_lifecycle":"","instance_market_options":[],"instance_state":"running","instance_type":"t3.nano","ipv6_address_count":0,"ipv6_addresses":[],"key_name":"","launch_template":[],"maintenance_options":[{"auto_recovery":"default"}],"metadata_options":[{"http_endpoint":"enabled","http_protocol_ipv6":"disabled","http_put_response_hop_limit":1,"http_tokens":"optional","instance_metadata_tags":"disabled"}],"monitoring":false,"network_interface":[],"outpost_arn":"","password_data":"","placement_group":"","placement_partition_number":0,"primary_network_interface_id":"eni-0c4a8ea224e85896f","private_dns":"ip-10-0-101-39.eu-west-2.compute.internal","private_dns_name_options":[{"enable_resource_name_dns_a_record":false,"enable_resource_name_dns_aaaa_record":false,"hostname_type":"ip-name"}],"private_ip":"10.0.101.39","public_dns":"ec2-3-10-226-1.eu-west-2.compute.amazonaws.com","public_ip":"3.10.226.1","root_block_device":[{"delete_on_termination":true,"device_name":"/dev/xvda","encrypted":false,"iops":3000,"kms_key_id":"","tags":{},"tags_all":{},"throughput":125,"volume_id":"vol-043a55b2884cbcdc4","volume_size":8,"volume_type":"gp3"}],"secondary_private_ips":[],"security_groups":[],"source_dest_check":true,"spot_instance_request_id":"","subnet_id":"subnet-0a1b287732e8ad0b7","tags":{"Environment":"production","ManagedBy":"terraform","Name":"api-server","Project":"platform-services","Team":"platform"},"tags_all":{"Environment":"production","ManagedBy":"terraform","Name":"api-server","Project":"platform-services","Team":"platform"},"tenancy":"default","timeouts":null,"user_data":"146523b0a5c60264146991ccc0576cc1b24e25c3","user_data_base64":null,"user_data_replace_on_change":false,"volume_tags":null,"vpc_security_group_ids":["sg-0437857de45b640ce"]},"sensitive_values":{"capacity_reservation_specification":[{"capacity_reservation_target":[]}],"cpu_options":[{}],"credit_specification":[{}],"ebs_block_device":[],"enclave_options":[{}],"ephemeral_block_device":[],"instance_market_options":[],"ipv6_addresses":[],"launch_template":[],"maintenance_options":[{}],"metadata_options":[{}],"network_interface":[],"private_dns_name_options":[{}],"root_block_device":[{"tags":{},"tags_all":{}}],"secondary_private_ips":[],"security_groups":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[false]}},{"address":"module.shared_security_group.aws_security_group.internet_access[0]","mode":"managed","type":"aws_security_group","name":"internet_access","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:eu-west-2:540044833068:security-group/sg-0437857de45b640ce","description":"Allow outbound internet access","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"Allow all outbound traffic","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-0437857de45b640ce","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"HTTP access","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":80},{"cidr_blocks":["0.0.0.0/0"],"description":"SSH access","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22}],"name":"internet-access","name_prefix":"","owner_id":"540044833068","revoke_rules_on_delete":false,"tags":{"Environment":"production","ManagedBy":"terraform","Name":"internet-access","Project":"platform-services","Purpose":"General outbound access","Team":"platform"},"tags_all":{"Environment":"production","ManagedBy":"terraform","Name":"internet-access","Project":"platform-services","Purpose":"General outbound access","Team":"platform"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}},{"address":"module.shared_security_group.random_id.suffix[0]","mode":"managed","type":"random_id","name":"suffix","index":0,"provider_name":"registry.terraform.io/hashicorp/random","schema_version":0,"values":{"b64_std":"oof2Cw==","b64_url":"oof2Cw","byte_length":4,"dec":"2726819339","hex":"a287f60b","id":"oof2Cw","keepers":null,"prefix":null},"sensitive_values":{}}],"address":"module.shared_security_group"}]}},"resource_drift":[{"address":"module.api_access[0].aws_cloudwatch_metric_alarm.api_health","module_address":"module.api_access[0]","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"api_health","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["update"],"before":{"actions_enabled":true,"alarm_actions":["arn:aws:sns:eu-west-2:540044833068:production-api-alerts"],"alarm_description":"Production API health check failing - pages on-call team","alarm_name":"production-api-health-check-failed","arn":"arn:aws:cloudwatch:eu-west-2:540044833068:alarm:production-api-health-check-failed","comparison_operator":"LessThanThreshold","datapoints_to_alarm":0,"dimensions":{"HealthCheckId":"2161fd41-d21d-4021-8337-13a621cec290"},"evaluate_low_sample_count_percentiles":"","evaluation_periods":2,"extended_statistic":"","id":"production-api-health-check-failed","insufficient_data_actions":null,"metric_name":"HealthCheckStatus","metric_query":[],"namespace":"AWS/Route53","ok_actions":["arn:aws:sns:eu-west-2:540044833068:production-api-alerts"],"period":60,"statistic":"Minimum","tags":{"Environment":"production","Service":"core-api","Severity":"critical"},"tags_all":{"Environment":"production","Service":"core-api","Severity":"critical"},"threshold":1,"threshold_metric_id":"","treat_missing_data":"missing","unit":""},"after":{"actions_enabled":true,"alarm_actions":["arn:aws:sns:eu-west-2:540044833068:production-api-alerts"],"alarm_description":"Production API health check failing - pages on-call team","alarm_name":"production-api-health-check-failed","arn":"arn:aws:cloudwatch:eu-west-2:540044833068:alarm:production-api-health-check-failed","comparison_operator":"LessThanThreshold","datapoints_to_alarm":0,"dimensions":{"HealthCheckId":"2161fd41-d21d-4021-8337-13a621cec290"},"evaluate_low_sample_count_percentiles":"","evaluation_periods":2,"extended_statistic":"","id":"production-api-health-check-failed","insufficient_data_actions":[],"metric_name":"HealthCheckStatus","metric_query":[],"namespace":"AWS/Route53","ok_actions":["arn:aws:sns:eu-west-2:540044833068:production-api-alerts"],"period":60,"statistic":"Minimum","tags":{"Environment":"production","Service":"core-api","Severity":"critical"},"tags_all":{"Environment":"production","Service":"core-api","Severity":"critical"},"threshold":1,"threshold_metric_id":"","treat_missing_data":"missing","unit":""},"after_unknown":{},"before_sensitive":{"alarm_actions":[false],"dimensions":{},"metric_query":[],"ok_actions":[false],"tags":{},"tags_all":{}},"after_sensitive":{"alarm_actions":[false],"dimensions":{},"insufficient_data_actions":[],"metric_query":[],"ok_actions":[false],"tags":{},"tags_all":{}}}},{"address":"module.api_access[0].aws_instance.api_server","module_address":"module.api_access[0]","mode":"managed","type":"aws_instance","name":"api_server","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["update"],"before":{"ami":"ami-021f9b1d0460d2e30","arn":"arn:aws:ec2:eu-west-2:540044833068:instance/i-0355d048569c5d522","associate_public_ip_address":false,"availability_zone":"eu-west-2a","capacity_reservation_specification":[{"capacity_reservation_preference":"open","capacity_reservation_target":[]}],"cpu_core_count":2,"cpu_options":[{"amd_sev_snp":"","core_count":2,"threads_per_core":1}],"cpu_threads_per_core":1,"credit_specification":[{"cpu_credits":"unlimited"}],"disable_api_stop":false,"disable_api_termination":false,"ebs_block_device":[],"ebs_optimized":false,"enable_primary_ipv6":null,"enclave_options":[{"enabled":false}],"ephemeral_block_device":[],"get_password_data":false,"hibernation":false,"host_id":"","host_resource_group_arn":null,"iam_instance_profile":"","id":"i-0355d048569c5d522","instance_initiated_shutdown_behavior":"stop","instance_lifecycle":"","instance_market_options":[],"instance_state":"running","instance_type":"t4g.nano","ipv6_address_count":0,"ipv6_addresses":[],"key_name":"","launch_template":[],"maintenance_options":[{"auto_recovery":"default"}],"metadata_options":[{"http_endpoint":"enabled","http_protocol_ipv6":"disabled","http_put_response_hop_limit":2,"http_tokens":"required","instance_metadata_tags":"disabled"}],"monitoring":false,"network_interface":[],"outpost_arn":"","password_data":"","placement_group":"","placement_partition_number":0,"primary_network_interface_id":"eni-08b9e3b07fe6ddd2b","private_dns":"ip-10-0-101-81.eu-west-2.compute.internal","private_dns_name_options":[{"enable_resource_name_dns_a_record":false,"enable_resource_name_dns_aaaa_record":false,"hostname_type":"ip-name"}],"private_ip":"10.0.101.81","public_dns":"","public_ip":"","root_block_device":[{"delete_on_termination":true,"device_name":"/dev/xvda","encrypted":false,"iops":3000,"kms_key_id":"","tags":{},"tags_all":{},"throughput":125,"volume_id":"vol-0b3f1b2cd8cfee137","volume_size":30,"volume_type":"gp3"}],"secondary_private_ips":[],"security_groups":[],"source_dest_check":true,"spot_instance_request_id":"","subnet_id":"subnet-0a1b287732e8ad0b7","tags":{"CostCenter":"engineering","Environment":"production","Name":"production-api-server","OnCall":"platform-oncall@company.com","Service":"core-api","Team":"platform"},"tags_all":{"CostCenter":"engineering","Environment":"production","Name":"production-api-server","OnCall":"platform-oncall@company.com","Service":"core-api","Team":"platform"},"tenancy":"default","timeouts":null,"user_data":null,"user_data_base64":null,"user_data_replace_on_change":false,"volume_tags":null,"vpc_security_group_ids":["sg-085ee012c9855643f","sg-08c3767d4eeede7b5"]},"after":{"ami":"ami-021f9b1d0460d2e30","arn":"arn:aws:ec2:eu-west-2:540044833068:instance/i-0355d048569c5d522","associate_public_ip_address":true,"availability_zone":"eu-west-2a","capacity_reservation_specification":[{"capacity_reservation_preference":"open","capacity_reservation_target":[]}],"cpu_core_count":2,"cpu_options":[{"amd_sev_snp":"","core_count":2,"threads_per_core":1}],"cpu_threads_per_core":1,"credit_specification":[{"cpu_credits":"unlimited"}],"disable_api_stop":false,"disable_api_termination":false,"ebs_block_device":[],"ebs_optimized":false,"enable_primary_ipv6":null,"enclave_options":[{"enabled":false}],"ephemeral_block_device":[],"get_password_data":false,"hibernation":false,"host_id":"","host_resource_group_arn":null,"iam_instance_profile":"","id":"i-0355d048569c5d522","instance_initiated_shutdown_behavior":"stop","instance_lifecycle":"","instance_market_options":[],"instance_state":"running","instance_type":"t4g.nano","ipv6_address_count":0,"ipv6_addresses":[],"key_name":"","launch_template":[],"maintenance_options":[{"auto_recovery":"default"}],"metadata_options":[{"http_endpoint":"enabled","http_protocol_ipv6":"disabled","http_put_response_hop_limit":2,"http_tokens":"required","instance_metadata_tags":"disabled"}],"monitoring":false,"network_interface":[],"outpost_arn":"","password_data":"","placement_group":"","placement_partition_number":0,"primary_network_interface_id":"eni-08b9e3b07fe6ddd2b","private_dns":"ip-10-0-101-81.eu-west-2.compute.internal","private_dns_name_options":[{"enable_resource_name_dns_a_record":false,"enable_resource_name_dns_aaaa_record":false,"hostname_type":"ip-name"}],"private_ip":"10.0.101.81","public_dns":"ec2-18-132-149-19.eu-west-2.compute.amazonaws.com","public_ip":"18.132.149.19","root_block_device":[{"delete_on_termination":true,"device_name":"/dev/xvda","encrypted":false,"iops":3000,"kms_key_id":"","tags":{},"tags_all":{},"throughput":125,"volume_id":"vol-0b3f1b2cd8cfee137","volume_size":30,"volume_type":"gp3"}],"secondary_private_ips":[],"security_groups":[],"source_dest_check":true,"spot_instance_request_id":"","subnet_id":"subnet-0a1b287732e8ad0b7","tags":{"CostCenter":"engineering","Environment":"production","Name":"production-api-server","OnCall":"platform-oncall@company.com","Service":"core-api","Team":"platform"},"tags_all":{"CostCenter":"engineering","Environment":"production","Name":"production-api-server","OnCall":"platform-oncall@company.com","Service":"core-api","Team":"platform"},"tenancy":"default","timeouts":null,"user_data":null,"user_data_base64":null,"user_data_replace_on_change":false,"volume_tags":null,"vpc_security_group_ids":["sg-085ee012c9855643f","sg-08c3767d4eeede7b5"]},"after_unknown":{},"before_sensitive":{"capacity_reservation_specification":[{"capacity_reservation_target":[]}],"cpu_options":[{}],"credit_specification":[{}],"ebs_block_device":[],"enclave_options":[{}],"ephemeral_block_device":[],"instance_market_options":[],"ipv6_addresses":[],"launch_template":[],"maintenance_options":[{}],"metadata_options":[{}],"network_interface":[],"private_dns_name_options":[{}],"root_block_device":[{"tags":{},"tags_all":{}}],"secondary_private_ips":[],"security_groups":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[false,false]},"after_sensitive":{"capacity_reservation_specification":[{"capacity_reservation_target":[]}],"cpu_options":[{}],"credit_specification":[{}],"ebs_block_device":[],"enclave_options":[{}],"ephemeral_block_device":[],"instance_market_options":[],"ipv6_addresses":[],"launch_template":[],"maintenance_options":[{}],"metadata_options":[{}],"network_interface":[],"private_dns_name_options":[{}],"root_block_device":[{"tags":{},"tags_all":{}}],"secondary_private_ips":[],"security_groups":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[false,false]}}},{"address":"module.api_access[0].aws_route53_health_check.api","module_address":"module.api_access[0]","mode":"managed","type":"aws_route53_health_check","name":"api","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["update"],"before":{"arn":"arn:aws:route53:::healthcheck/2161fd41-d21d-4021-8337-13a621cec290","child_health_threshold":0,"child_healthchecks":null,"cloudwatch_alarm_name":null,"cloudwatch_alarm_region":null,"disabled":false,"enable_sni":true,"failure_threshold":3,"fqdn":"","id":"2161fd41-d21d-4021-8337-13a621cec290","insufficient_data_health_status":"","invert_healthcheck":false,"ip_address":"18.132.149.19","measure_latency":false,"port":443,"reference_name":null,"regions":null,"request_interval":30,"resource_path":"/health","routing_control_arn":"","search_string":"","tags":{"Environment":"production","Name":"production-api-health","Service":"core-api"},"tags_all":{"Environment":"production","Name":"production-api-health","Service":"core-api"},"triggers":{},"type":"HTTPS"},"after":{"arn":"arn:aws:route53:::healthcheck/2161fd41-d21d-4021-8337-13a621cec290","child_health_threshold":0,"child_healthchecks":[],"cloudwatch_alarm_name":null,"cloudwatch_alarm_region":null,"disabled":false,"enable_sni":true,"failure_threshold":3,"fqdn":"","id":"2161fd41-d21d-4021-8337-13a621cec290","insufficient_data_health_status":"","invert_healthcheck":false,"ip_address":"18.132.149.19","measure_latency":false,"port":443,"reference_name":null,"regions":[],"request_interval":30,"resource_path":"/health","routing_control_arn":"","search_string":"","tags":{"Environment":"production","Name":"production-api-health","Service":"core-api"},"tags_all":{"Environment":"production","Name":"production-api-health","Service":"core-api"},"triggers":{},"type":"HTTPS"},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{},"triggers":{}},"after_sensitive":{"child_healthchecks":[],"regions":[],"tags":{},"tags_all":{},"triggers":{}}}}],"resource_changes":[{"address":"aws_dynamodb_table.terraform-example-lock-table","mode":"managed","type":"aws_dynamodb_table","name":"terraform-example-lock-table","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:dynamodb:eu-west-2:540044833068:table/overmind-tf-example-state","attribute":[{"name":"LockID","type":"S"}],"billing_mode":"PAY_PER_REQUEST","deletion_protection_enabled":false,"global_secondary_index":[],"hash_key":"LockID","id":"overmind-tf-example-state","import_table":[],"local_secondary_index":[],"name":"overmind-tf-example-state","on_demand_throughput":[],"point_in_time_recovery":[{"enabled":false,"recovery_period_in_days":0}],"range_key":null,"read_capacity":0,"replica":[],"restore_date_time":null,"restore_source_name":null,"restore_source_table_arn":null,"restore_to_latest_time":null,"server_side_encryption":[],"stream_arn":"","stream_enabled":false,"stream_label":"","stream_view_type":"","table_class":"STANDARD","tags":{},"tags_all":{},"timeouts":null,"ttl":[{"attribute_name":"","enabled":false}],"write_capacity":0},"after":{"arn":"arn:aws:dynamodb:eu-west-2:540044833068:table/overmind-tf-example-state","attribute":[{"name":"LockID","type":"S"}],"billing_mode":"PAY_PER_REQUEST","deletion_protection_enabled":false,"global_secondary_index":[],"hash_key":"LockID","id":"overmind-tf-example-state","import_table":[],"local_secondary_index":[],"name":"overmind-tf-example-state","on_demand_throughput":[],"point_in_time_recovery":[{"enabled":false,"recovery_period_in_days":0}],"range_key":null,"read_capacity":0,"replica":[],"restore_date_time":null,"restore_source_name":null,"restore_source_table_arn":null,"restore_to_latest_time":null,"server_side_encryption":[],"stream_arn":"","stream_enabled":false,"stream_label":"","stream_view_type":"","table_class":"STANDARD","tags":{},"tags_all":{},"timeouts":null,"ttl":[{"attribute_name":"","enabled":false}],"write_capacity":0},"after_unknown":{},"before_sensitive":{"attribute":[{}],"global_secondary_index":[],"import_table":[],"local_secondary_index":[],"on_demand_throughput":[],"point_in_time_recovery":[{}],"replica":[],"server_side_encryption":[],"tags":{},"tags_all":{},"ttl":[{}]},"after_sensitive":{"attribute":[{}],"global_secondary_index":[],"import_table":[],"local_secondary_index":[],"on_demand_throughput":[],"point_in_time_recovery":[{}],"replica":[],"server_side_encryption":[],"tags":{},"tags_all":{},"ttl":[{}]}}},{"address":"aws_iam_openid_connect_provider.env0[0]","mode":"managed","type":"aws_iam_openid_connect_provider","name":"env0","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:iam::540044833068:oidc-provider/login.app.env0.com/","client_id_list":["hoMiq9PdkRh9LUvVpH4wIErWg50VSG1b"],"id":"arn:aws:iam::540044833068:oidc-provider/login.app.env0.com/","tags":{},"tags_all":{},"thumbprint_list":["06b25927c42a721631c1efd9431e648fa62e1e39"],"url":"login.app.env0.com/"},"after":{"arn":"arn:aws:iam::540044833068:oidc-provider/login.app.env0.com/","client_id_list":["hoMiq9PdkRh9LUvVpH4wIErWg50VSG1b"],"id":"arn:aws:iam::540044833068:oidc-provider/login.app.env0.com/","tags":{},"tags_all":{},"thumbprint_list":["06b25927c42a721631c1efd9431e648fa62e1e39"],"url":"login.app.env0.com/"},"after_unknown":{},"before_sensitive":{"client_id_list":[false],"tags":{},"tags_all":{},"thumbprint_list":[false]},"after_sensitive":{"client_id_list":[false],"tags":{},"tags_all":{},"thumbprint_list":[false]}}},{"address":"aws_iam_openid_connect_provider.github[0]","mode":"managed","type":"aws_iam_openid_connect_provider","name":"github","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:iam::540044833068:oidc-provider/token.actions.githubusercontent.com","client_id_list":["sts.amazonaws.com"],"id":"arn:aws:iam::540044833068:oidc-provider/token.actions.githubusercontent.com","tags":{},"tags_all":{},"thumbprint_list":["6938fd4d98bab03faadb97b34396831e3780aea1"],"url":"token.actions.githubusercontent.com"},"after":{"arn":"arn:aws:iam::540044833068:oidc-provider/token.actions.githubusercontent.com","client_id_list":["sts.amazonaws.com"],"id":"arn:aws:iam::540044833068:oidc-provider/token.actions.githubusercontent.com","tags":{},"tags_all":{},"thumbprint_list":["6938fd4d98bab03faadb97b34396831e3780aea1"],"url":"token.actions.githubusercontent.com"},"after_unknown":{},"before_sensitive":{"client_id_list":[false],"tags":{},"tags_all":{},"thumbprint_list":[false]},"after_sensitive":{"client_id_list":[false],"tags":{},"tags_all":{},"thumbprint_list":[false]}}},{"address":"aws_iam_openid_connect_provider.tfc_provider[0]","mode":"managed","type":"aws_iam_openid_connect_provider","name":"tfc_provider","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:iam::540044833068:oidc-provider/app.terraform.io","client_id_list":["aws.workload.identity"],"id":"arn:aws:iam::540044833068:oidc-provider/app.terraform.io","tags":{},"tags_all":{},"thumbprint_list":["06b25927c42a721631c1efd9431e648fa62e1e39"],"url":"app.terraform.io"},"after":{"arn":"arn:aws:iam::540044833068:oidc-provider/app.terraform.io","client_id_list":["aws.workload.identity"],"id":"arn:aws:iam::540044833068:oidc-provider/app.terraform.io","tags":{},"tags_all":{},"thumbprint_list":["06b25927c42a721631c1efd9431e648fa62e1e39"],"url":"app.terraform.io"},"after_unknown":{},"before_sensitive":{"client_id_list":[false],"tags":{},"tags_all":{},"thumbprint_list":[false]},"after_sensitive":{"client_id_list":[false],"tags":{},"tags_all":{},"thumbprint_list":[false]}}},{"address":"aws_iam_policy.state_access","mode":"managed","type":"aws_iam_policy","name":"state_access","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:iam::540044833068:policy/TerraformStateAccess-terraform-example","attachment_count":1,"description":"Allows access to everything terraform needs (state, lock, deploy role) to deploy","id":"arn:aws:iam::540044833068:policy/TerraformStateAccess-terraform-example","name":"TerraformStateAccess-terraform-example","name_prefix":"","path":"/","policy":"{\"Statement\":[{\"Action\":[\"sts:AssumeRole\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:iam::540044833068:role/terraform-example\",\"Sid\":\"Deploy\"},{\"Action\":[\"s3:ListBucket\",\"s3:GetEncryptionConfiguration\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::replaceme-with-a-unique-bucket-name\",\"Sid\":\"TFStateList\"},{\"Action\":[\"s3:PutObject\",\"s3:GetObject\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::replaceme-with-a-unique-bucket-name/*\",\"Sid\":\"TFStateAccess\"},{\"Action\":[\"dynamodb:PutItem\",\"dynamodb:DeleteItem\",\"dynamodb:GetItem\",\"dynamodb:Query\",\"dynamodb:UpdateItem\"],\"Condition\":{\"ForAllValues:StringEquals\":{\"dynamodb:LeadingKeys\":[\"replaceme-with-a-unique-bucket-name/env:/terraform-example/terraform-example.tfstate\",\"replaceme-with-a-unique-bucket-name/env:/terraform-example/terraform-example.tfstate-md5\"]}},\"Effect\":\"Allow\",\"Resource\":\"arn:aws:dynamodb:*:*:table/overmind-tf-example-state\",\"Sid\":\"TFLock\"}],\"Version\":\"2012-10-17\"}","policy_id":"ANPAX3PJOGEWCPJ4F4MT7","tags":{},"tags_all":{}},"after":{"arn":"arn:aws:iam::540044833068:policy/TerraformStateAccess-terraform-example","attachment_count":1,"description":"Allows access to everything terraform needs (state, lock, deploy role) to deploy","id":"arn:aws:iam::540044833068:policy/TerraformStateAccess-terraform-example","name":"TerraformStateAccess-terraform-example","name_prefix":"","path":"/","policy":"{\"Statement\":[{\"Action\":[\"sts:AssumeRole\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:iam::540044833068:role/terraform-example\",\"Sid\":\"Deploy\"},{\"Action\":[\"s3:ListBucket\",\"s3:GetEncryptionConfiguration\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::replaceme-with-a-unique-bucket-name\",\"Sid\":\"TFStateList\"},{\"Action\":[\"s3:PutObject\",\"s3:GetObject\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::replaceme-with-a-unique-bucket-name/*\",\"Sid\":\"TFStateAccess\"},{\"Action\":[\"dynamodb:PutItem\",\"dynamodb:DeleteItem\",\"dynamodb:GetItem\",\"dynamodb:Query\",\"dynamodb:UpdateItem\"],\"Condition\":{\"ForAllValues:StringEquals\":{\"dynamodb:LeadingKeys\":[\"replaceme-with-a-unique-bucket-name/env:/terraform-example/terraform-example.tfstate\",\"replaceme-with-a-unique-bucket-name/env:/terraform-example/terraform-example.tfstate-md5\"]}},\"Effect\":\"Allow\",\"Resource\":\"arn:aws:dynamodb:*:*:table/overmind-tf-example-state\",\"Sid\":\"TFLock\"}],\"Version\":\"2012-10-17\"}","policy_id":"ANPAX3PJOGEWCPJ4F4MT7","tags":{},"tags_all":{}},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"aws_iam_role.deploy_role","mode":"managed","type":"aws_iam_role","name":"deploy_role","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:iam::540044833068:role/terraform-example","assume_role_policy":"{\"Statement\":[{\"Action\":[\"sts:AssumeRoleWithWebIdentity\"],\"Condition\":{\"StringEquals\":{\"token.actions.githubusercontent.com:aud\":\"sts.amazonaws.com\"},\"StringLike\":{\"token.actions.githubusercontent.com:sub\":\"repo:overmindtech/terraform-example:*\"}},\"Effect\":\"Allow\",\"Principal\":{\"Federated\":\"arn:aws:iam::540044833068:oidc-provider/token.actions.githubusercontent.com\"},\"Sid\":\"AllowGithubOIDC\"},{\"Action\":[\"sts:AssumeRoleWithWebIdentity\"],\"Condition\":{\"StringEquals\":{\"app.terraform.io:aud\":\"aws.workload.identity\"},\"StringLike\":{\"app.terraform.io:sub\":\"organization:Overmind:project:Example:workspace:terraform-example:run_phase:*\"}},\"Effect\":\"Allow\",\"Principal\":{\"Federated\":\"arn:aws:iam::540044833068:oidc-provider/app.terraform.io\"},\"Sid\":\"AllowTerraformOIDC\"},{\"Action\":[\"sts:AssumeRoleWithWebIdentity\",\"sts:TagSession\"],\"Condition\":{\"StringEquals\":{\"login.app.env0.com/:aud\":\"hoMiq9PdkRh9LUvVpH4wIErWg50VSG1b\",\"login.app.env0.com/:sub\":\"auth0|691b8530eba074a8989d8726\"}},\"Effect\":\"Allow\",\"Principal\":{\"Federated\":\"arn:aws:iam::540044833068:oidc-provider/login.app.env0.com/\"},\"Sid\":\"AllowEnv0OIDC\"},{\"Action\":[\"sts:AssumeRole\"],\"Condition\":{\"StringLike\":{\"sts:ExternalId\":\"overmind-demo@*\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"324880187172\"},\"Sid\":\"AllowSpacelift\"}],\"Version\":\"2012-10-17\"}","create_date":"2025-11-17T23:20:28Z","description":"This is the role used by terraform running on github actions or Terraform Cloud to deploy.","force_detach_policies":false,"id":"terraform-example","inline_policy":[{"name":"AllowPublicECR","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"ecr-public:GetAuthorizationToken\",\"sts:GetServiceBearerToken\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}"}],"managed_policy_arns":["arn:aws:iam::540044833068:policy/TerraformStateAccess-terraform-example","arn:aws:iam::aws:policy/AdministratorAccess"],"max_session_duration":3600,"name":"terraform-example","name_prefix":"","path":"/","permissions_boundary":"","tags":{},"tags_all":{},"unique_id":"AROAX3PJOGEWIPNS5Y4JH"},"after":{"arn":"arn:aws:iam::540044833068:role/terraform-example","assume_role_policy":"{\"Statement\":[{\"Action\":[\"sts:AssumeRoleWithWebIdentity\"],\"Condition\":{\"StringEquals\":{\"token.actions.githubusercontent.com:aud\":\"sts.amazonaws.com\"},\"StringLike\":{\"token.actions.githubusercontent.com:sub\":\"repo:overmindtech/terraform-example:*\"}},\"Effect\":\"Allow\",\"Principal\":{\"Federated\":\"arn:aws:iam::540044833068:oidc-provider/token.actions.githubusercontent.com\"},\"Sid\":\"AllowGithubOIDC\"},{\"Action\":[\"sts:AssumeRoleWithWebIdentity\"],\"Condition\":{\"StringEquals\":{\"app.terraform.io:aud\":\"aws.workload.identity\"},\"StringLike\":{\"app.terraform.io:sub\":\"organization:Overmind:project:Example:workspace:terraform-example:run_phase:*\"}},\"Effect\":\"Allow\",\"Principal\":{\"Federated\":\"arn:aws:iam::540044833068:oidc-provider/app.terraform.io\"},\"Sid\":\"AllowTerraformOIDC\"},{\"Action\":[\"sts:AssumeRoleWithWebIdentity\",\"sts:TagSession\"],\"Condition\":{\"StringEquals\":{\"login.app.env0.com/:aud\":\"hoMiq9PdkRh9LUvVpH4wIErWg50VSG1b\",\"login.app.env0.com/:sub\":\"auth0|691b8530eba074a8989d8726\"}},\"Effect\":\"Allow\",\"Principal\":{\"Federated\":\"arn:aws:iam::540044833068:oidc-provider/login.app.env0.com/\"},\"Sid\":\"AllowEnv0OIDC\"},{\"Action\":[\"sts:AssumeRole\"],\"Condition\":{\"StringLike\":{\"sts:ExternalId\":\"overmind-demo@*\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"324880187172\"},\"Sid\":\"AllowSpacelift\"}],\"Version\":\"2012-10-17\"}","create_date":"2025-11-17T23:20:28Z","description":"This is the role used by terraform running on github actions or Terraform Cloud to deploy.","force_detach_policies":false,"id":"terraform-example","inline_policy":[{"name":"AllowPublicECR","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"ecr-public:GetAuthorizationToken\",\"sts:GetServiceBearerToken\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}"}],"managed_policy_arns":["arn:aws:iam::540044833068:policy/TerraformStateAccess-terraform-example","arn:aws:iam::aws:policy/AdministratorAccess"],"max_session_duration":3600,"name":"terraform-example","name_prefix":"","path":"/","permissions_boundary":"","tags":{},"tags_all":{},"unique_id":"AROAX3PJOGEWIPNS5Y4JH"},"after_unknown":{},"before_sensitive":{"inline_policy":[{}],"managed_policy_arns":[false,false],"tags":{},"tags_all":{}},"after_sensitive":{"inline_policy":[{}],"managed_policy_arns":[false,false],"tags":{},"tags_all":{}}}},{"address":"aws_s3_bucket.terraform-example-state-bucket","mode":"managed","type":"aws_s3_bucket","name":"terraform-example-state-bucket","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"acceleration_status":"","acl":null,"arn":"arn:aws:s3:::replaceme-with-a-unique-bucket-name","bucket":"replaceme-with-a-unique-bucket-name","bucket_domain_name":"replaceme-with-a-unique-bucket-name.s3.amazonaws.com","bucket_prefix":"","bucket_regional_domain_name":"replaceme-with-a-unique-bucket-name.s3.eu-west-2.amazonaws.com","cors_rule":[],"force_destroy":false,"grant":[{"id":"05d918fa182ad8f3fa915436354b8657e3c2c59b326ecbfc43e6c00451268d0a","permissions":["FULL_CONTROL"],"type":"CanonicalUser","uri":""}],"hosted_zone_id":"Z3GKZC51ZF0DB4","id":"replaceme-with-a-unique-bucket-name","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"object_lock_enabled":false,"policy":"","region":"eu-west-2","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"","sse_algorithm":"AES256"}],"bucket_key_enabled":false}]}],"tags":{},"tags_all":{},"timeouts":null,"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"after":{"acceleration_status":"","acl":null,"arn":"arn:aws:s3:::replaceme-with-a-unique-bucket-name","bucket":"replaceme-with-a-unique-bucket-name","bucket_domain_name":"replaceme-with-a-unique-bucket-name.s3.amazonaws.com","bucket_prefix":"","bucket_regional_domain_name":"replaceme-with-a-unique-bucket-name.s3.eu-west-2.amazonaws.com","cors_rule":[],"force_destroy":false,"grant":[{"id":"05d918fa182ad8f3fa915436354b8657e3c2c59b326ecbfc43e6c00451268d0a","permissions":["FULL_CONTROL"],"type":"CanonicalUser","uri":""}],"hosted_zone_id":"Z3GKZC51ZF0DB4","id":"replaceme-with-a-unique-bucket-name","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"object_lock_enabled":false,"policy":"","region":"eu-west-2","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"","sse_algorithm":"AES256"}],"bucket_key_enabled":false}]}],"tags":{},"tags_all":{},"timeouts":null,"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"after_unknown":{},"before_sensitive":{"cors_rule":[],"grant":[{"permissions":[false]}],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}],"tags":{},"tags_all":{},"versioning":[{}],"website":[]},"after_sensitive":{"cors_rule":[],"grant":[{"permissions":[false]}],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}],"tags":{},"tags_all":{},"versioning":[{}],"website":[]}}},{"address":"module.api_access[0].aws_cloudwatch_metric_alarm.api_health","module_address":"module.api_access[0]","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"api_health","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"actions_enabled":true,"alarm_actions":["arn:aws:sns:eu-west-2:540044833068:production-api-alerts"],"alarm_description":"Production API health check failing - pages on-call team","alarm_name":"production-api-health-check-failed","arn":"arn:aws:cloudwatch:eu-west-2:540044833068:alarm:production-api-health-check-failed","comparison_operator":"LessThanThreshold","datapoints_to_alarm":0,"dimensions":{"HealthCheckId":"2161fd41-d21d-4021-8337-13a621cec290"},"evaluate_low_sample_count_percentiles":"","evaluation_periods":2,"extended_statistic":"","id":"production-api-health-check-failed","insufficient_data_actions":[],"metric_name":"HealthCheckStatus","metric_query":[],"namespace":"AWS/Route53","ok_actions":["arn:aws:sns:eu-west-2:540044833068:production-api-alerts"],"period":60,"statistic":"Minimum","tags":{"Environment":"production","Service":"core-api","Severity":"critical"},"tags_all":{"Environment":"production","Service":"core-api","Severity":"critical"},"threshold":1,"threshold_metric_id":"","treat_missing_data":"missing","unit":""},"after":{"actions_enabled":true,"alarm_actions":["arn:aws:sns:eu-west-2:540044833068:production-api-alerts"],"alarm_description":"Production API health check failing - pages on-call team","alarm_name":"production-api-health-check-failed","arn":"arn:aws:cloudwatch:eu-west-2:540044833068:alarm:production-api-health-check-failed","comparison_operator":"LessThanThreshold","datapoints_to_alarm":0,"dimensions":{"HealthCheckId":"2161fd41-d21d-4021-8337-13a621cec290"},"evaluate_low_sample_count_percentiles":"","evaluation_periods":2,"extended_statistic":"","id":"production-api-health-check-failed","insufficient_data_actions":[],"metric_name":"HealthCheckStatus","metric_query":[],"namespace":"AWS/Route53","ok_actions":["arn:aws:sns:eu-west-2:540044833068:production-api-alerts"],"period":60,"statistic":"Minimum","tags":{"Environment":"production","Service":"core-api","Severity":"critical"},"tags_all":{"Environment":"production","Service":"core-api","Severity":"critical"},"threshold":1,"threshold_metric_id":"","treat_missing_data":"missing","unit":""},"after_unknown":{},"before_sensitive":{"alarm_actions":[false],"dimensions":{},"insufficient_data_actions":[],"metric_query":[],"ok_actions":[false],"tags":{},"tags_all":{}},"after_sensitive":{"alarm_actions":[false],"dimensions":{},"insufficient_data_actions":[],"metric_query":[],"ok_actions":[false],"tags":{},"tags_all":{}}}},{"address":"module.api_access[0].aws_eip.api_server","module_address":"module.api_access[0]","mode":"managed","type":"aws_eip","name":"api_server","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"address":null,"allocation_id":"eipalloc-0dba2be7032e76458","arn":"arn:aws:ec2:eu-west-2:540044833068:elastic-ip/eipalloc-0dba2be7032e76458","associate_with_private_ip":null,"association_id":"eipassoc-065e352e6eb2f0fc4","carrier_ip":"","customer_owned_ip":"","customer_owned_ipv4_pool":"","domain":"vpc","id":"eipalloc-0dba2be7032e76458","instance":"i-0355d048569c5d522","ipam_pool_id":null,"network_border_group":"eu-west-2","network_interface":"eni-08b9e3b07fe6ddd2b","private_dns":"ip-10-0-101-81.eu-west-2.compute.internal","private_ip":"10.0.101.81","ptr_record":"","public_dns":"ec2-18-132-149-19.eu-west-2.compute.amazonaws.com","public_ip":"18.132.149.19","public_ipv4_pool":"amazon","tags":{"Environment":"production","Name":"production-api-eip","Service":"core-api"},"tags_all":{"Environment":"production","Name":"production-api-eip","Service":"core-api"},"timeouts":null,"vpc":true},"after":{"address":null,"allocation_id":"eipalloc-0dba2be7032e76458","arn":"arn:aws:ec2:eu-west-2:540044833068:elastic-ip/eipalloc-0dba2be7032e76458","associate_with_private_ip":null,"association_id":"eipassoc-065e352e6eb2f0fc4","carrier_ip":"","customer_owned_ip":"","customer_owned_ipv4_pool":"","domain":"vpc","id":"eipalloc-0dba2be7032e76458","instance":"i-0355d048569c5d522","ipam_pool_id":null,"network_border_group":"eu-west-2","network_interface":"eni-08b9e3b07fe6ddd2b","private_dns":"ip-10-0-101-81.eu-west-2.compute.internal","private_ip":"10.0.101.81","ptr_record":"","public_dns":"ec2-18-132-149-19.eu-west-2.compute.amazonaws.com","public_ip":"18.132.149.19","public_ipv4_pool":"amazon","tags":{"Environment":"production","Name":"production-api-eip","Service":"core-api"},"tags_all":{"Environment":"production","Name":"production-api-eip","Service":"core-api"},"timeouts":null,"vpc":true},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.api_access[0].aws_instance.api_server","module_address":"module.api_access[0]","mode":"managed","type":"aws_instance","name":"api_server","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"ami":"ami-021f9b1d0460d2e30","arn":"arn:aws:ec2:eu-west-2:540044833068:instance/i-0355d048569c5d522","associate_public_ip_address":true,"availability_zone":"eu-west-2a","capacity_reservation_specification":[{"capacity_reservation_preference":"open","capacity_reservation_target":[]}],"cpu_core_count":2,"cpu_options":[{"amd_sev_snp":"","core_count":2,"threads_per_core":1}],"cpu_threads_per_core":1,"credit_specification":[{"cpu_credits":"unlimited"}],"disable_api_stop":false,"disable_api_termination":false,"ebs_block_device":[],"ebs_optimized":false,"enable_primary_ipv6":null,"enclave_options":[{"enabled":false}],"ephemeral_block_device":[],"get_password_data":false,"hibernation":false,"host_id":"","host_resource_group_arn":null,"iam_instance_profile":"","id":"i-0355d048569c5d522","instance_initiated_shutdown_behavior":"stop","instance_lifecycle":"","instance_market_options":[],"instance_state":"running","instance_type":"t4g.nano","ipv6_address_count":0,"ipv6_addresses":[],"key_name":"","launch_template":[],"maintenance_options":[{"auto_recovery":"default"}],"metadata_options":[{"http_endpoint":"enabled","http_protocol_ipv6":"disabled","http_put_response_hop_limit":2,"http_tokens":"required","instance_metadata_tags":"disabled"}],"monitoring":false,"network_interface":[],"outpost_arn":"","password_data":"","placement_group":"","placement_partition_number":0,"primary_network_interface_id":"eni-08b9e3b07fe6ddd2b","private_dns":"ip-10-0-101-81.eu-west-2.compute.internal","private_dns_name_options":[{"enable_resource_name_dns_a_record":false,"enable_resource_name_dns_aaaa_record":false,"hostname_type":"ip-name"}],"private_ip":"10.0.101.81","public_dns":"ec2-18-132-149-19.eu-west-2.compute.amazonaws.com","public_ip":"18.132.149.19","root_block_device":[{"delete_on_termination":true,"device_name":"/dev/xvda","encrypted":false,"iops":3000,"kms_key_id":"","tags":{},"tags_all":{},"throughput":125,"volume_id":"vol-0b3f1b2cd8cfee137","volume_size":30,"volume_type":"gp3"}],"secondary_private_ips":[],"security_groups":[],"source_dest_check":true,"spot_instance_request_id":"","subnet_id":"subnet-0a1b287732e8ad0b7","tags":{"CostCenter":"engineering","Environment":"production","Name":"production-api-server","OnCall":"platform-oncall@company.com","Service":"core-api","Team":"platform"},"tags_all":{"CostCenter":"engineering","Environment":"production","Name":"production-api-server","OnCall":"platform-oncall@company.com","Service":"core-api","Team":"platform"},"tenancy":"default","timeouts":null,"user_data":null,"user_data_base64":null,"user_data_replace_on_change":false,"volume_tags":null,"vpc_security_group_ids":["sg-085ee012c9855643f","sg-08c3767d4eeede7b5"]},"after":{"ami":"ami-021f9b1d0460d2e30","arn":"arn:aws:ec2:eu-west-2:540044833068:instance/i-0355d048569c5d522","associate_public_ip_address":true,"availability_zone":"eu-west-2a","capacity_reservation_specification":[{"capacity_reservation_preference":"open","capacity_reservation_target":[]}],"cpu_core_count":2,"cpu_options":[{"amd_sev_snp":"","core_count":2,"threads_per_core":1}],"cpu_threads_per_core":1,"credit_specification":[{"cpu_credits":"unlimited"}],"disable_api_stop":false,"disable_api_termination":false,"ebs_block_device":[],"ebs_optimized":false,"enable_primary_ipv6":null,"enclave_options":[{"enabled":false}],"ephemeral_block_device":[],"get_password_data":false,"hibernation":false,"host_id":"","host_resource_group_arn":null,"iam_instance_profile":"","id":"i-0355d048569c5d522","instance_initiated_shutdown_behavior":"stop","instance_lifecycle":"","instance_market_options":[],"instance_state":"running","instance_type":"t4g.nano","ipv6_address_count":0,"ipv6_addresses":[],"key_name":"","launch_template":[],"maintenance_options":[{"auto_recovery":"default"}],"metadata_options":[{"http_endpoint":"enabled","http_protocol_ipv6":"disabled","http_put_response_hop_limit":2,"http_tokens":"required","instance_metadata_tags":"disabled"}],"monitoring":false,"network_interface":[],"outpost_arn":"","password_data":"","placement_group":"","placement_partition_number":0,"primary_network_interface_id":"eni-08b9e3b07fe6ddd2b","private_dns":"ip-10-0-101-81.eu-west-2.compute.internal","private_dns_name_options":[{"enable_resource_name_dns_a_record":false,"enable_resource_name_dns_aaaa_record":false,"hostname_type":"ip-name"}],"private_ip":"10.0.101.81","public_dns":"ec2-18-132-149-19.eu-west-2.compute.amazonaws.com","public_ip":"18.132.149.19","root_block_device":[{"delete_on_termination":true,"device_name":"/dev/xvda","encrypted":false,"iops":3000,"kms_key_id":"","tags":{},"tags_all":{},"throughput":125,"volume_id":"vol-0b3f1b2cd8cfee137","volume_size":30,"volume_type":"gp3"}],"secondary_private_ips":[],"security_groups":[],"source_dest_check":true,"spot_instance_request_id":"","subnet_id":"subnet-0a1b287732e8ad0b7","tags":{"CostCenter":"engineering","Environment":"production","Name":"production-api-server","OnCall":"platform-oncall@company.com","Service":"core-api","Team":"platform"},"tags_all":{"CostCenter":"engineering","Environment":"production","Name":"production-api-server","OnCall":"platform-oncall@company.com","Service":"core-api","Team":"platform"},"tenancy":"default","timeouts":null,"user_data":null,"user_data_base64":null,"user_data_replace_on_change":false,"volume_tags":null,"vpc_security_group_ids":["sg-085ee012c9855643f","sg-08c3767d4eeede7b5"]},"after_unknown":{},"before_sensitive":{"capacity_reservation_specification":[{"capacity_reservation_target":[]}],"cpu_options":[{}],"credit_specification":[{}],"ebs_block_device":[],"enclave_options":[{}],"ephemeral_block_device":[],"instance_market_options":[],"ipv6_addresses":[],"launch_template":[],"maintenance_options":[{}],"metadata_options":[{}],"network_interface":[],"private_dns_name_options":[{}],"root_block_device":[{"tags":{},"tags_all":{}}],"secondary_private_ips":[],"security_groups":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[false,false]},"after_sensitive":{"capacity_reservation_specification":[{"capacity_reservation_target":[]}],"cpu_options":[{}],"credit_specification":[{}],"ebs_block_device":[],"enclave_options":[{}],"ephemeral_block_device":[],"instance_market_options":[],"ipv6_addresses":[],"launch_template":[],"maintenance_options":[{}],"metadata_options":[{}],"network_interface":[],"private_dns_name_options":[{}],"root_block_device":[{"tags":{},"tags_all":{}}],"secondary_private_ips":[],"security_groups":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[false,false]}}},{"address":"module.api_access[0].aws_route53_health_check.api","module_address":"module.api_access[0]","mode":"managed","type":"aws_route53_health_check","name":"api","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:route53:::healthcheck/2161fd41-d21d-4021-8337-13a621cec290","child_health_threshold":0,"child_healthchecks":[],"cloudwatch_alarm_name":null,"cloudwatch_alarm_region":null,"disabled":false,"enable_sni":true,"failure_threshold":3,"fqdn":"","id":"2161fd41-d21d-4021-8337-13a621cec290","insufficient_data_health_status":"","invert_healthcheck":false,"ip_address":"18.132.149.19","measure_latency":false,"port":443,"reference_name":null,"regions":[],"request_interval":30,"resource_path":"/health","routing_control_arn":"","search_string":"","tags":{"Environment":"production","Name":"production-api-health","Service":"core-api"},"tags_all":{"Environment":"production","Name":"production-api-health","Service":"core-api"},"triggers":{},"type":"HTTPS"},"after":{"arn":"arn:aws:route53:::healthcheck/2161fd41-d21d-4021-8337-13a621cec290","child_health_threshold":0,"child_healthchecks":[],"cloudwatch_alarm_name":null,"cloudwatch_alarm_region":null,"disabled":false,"enable_sni":true,"failure_threshold":3,"fqdn":"","id":"2161fd41-d21d-4021-8337-13a621cec290","insufficient_data_health_status":"","invert_healthcheck":false,"ip_address":"18.132.149.19","measure_latency":false,"port":443,"reference_name":null,"regions":[],"request_interval":30,"resource_path":"/health","routing_control_arn":"","search_string":"","tags":{"Environment":"production","Name":"production-api-health","Service":"core-api"},"tags_all":{"Environment":"production","Name":"production-api-health","Service":"core-api"},"triggers":{},"type":"HTTPS"},"after_unknown":{},"before_sensitive":{"child_healthchecks":[],"regions":[],"tags":{},"tags_all":{},"triggers":{}},"after_sensitive":{"child_healthchecks":[],"regions":[],"tags":{},"tags_all":{},"triggers":{}}}},{"address":"module.api_access[0].aws_route53_record.api","module_address":"module.api_access[0]","mode":"managed","type":"aws_route53_record","name":"api","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"alias":[],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"geoproximity_routing_policy":[],"health_check_id":null,"latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"api.example.com","records":["18.132.149.19"],"set_identifier":null,"timeouts":null,"ttl":300,"type":"A","weighted_routing_policy":[]},"after_unknown":{"alias":[],"allow_overwrite":true,"cidr_routing_policy":[],"failover_routing_policy":[],"fqdn":true,"geolocation_routing_policy":[],"geoproximity_routing_policy":[],"id":true,"latency_routing_policy":[],"records":[false],"weighted_routing_policy":[],"zone_id":true},"before_sensitive":false,"after_sensitive":{"alias":[],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"geoproximity_routing_policy":[],"latency_routing_policy":[],"records":[false],"weighted_routing_policy":[]}}},{"address":"module.api_access[0].aws_route53_zone.api","module_address":"module.api_access[0]","mode":"managed","type":"aws_route53_zone","name":"api","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"comment":"Managed by Terraform","delegation_set_id":null,"force_destroy":false,"name":"api.example.com","tags":{"Environment":"production","Purpose":"api-endpoint"},"tags_all":{"Environment":"production","Purpose":"api-endpoint"},"timeouts":null,"vpc":[]},"after_unknown":{"arn":true,"id":true,"name_servers":true,"primary_name_server":true,"tags":{},"tags_all":{},"vpc":[],"zone_id":true},"before_sensitive":false,"after_sensitive":{"name_servers":[],"tags":{},"tags_all":{},"vpc":[]}}},{"address":"module.api_access[0].aws_security_group.customer_access","module_address":"module.api_access[0]","mode":"managed","type":"aws_security_group","name":"customer_access","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:eu-west-2:540044833068:security-group/sg-085ee012c9855643f","description":"Customer IP whitelist for API access - updated frequently","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"Allow all outbound","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-085ee012c9855643f","ingress":[{"cidr_blocks":["100.64.0.0/29"],"description":"Cyberdyne Systems","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443},{"cidr_blocks":["192.0.2.50/32"],"description":"Initech","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443},{"cidr_blocks":["198.18.100.0/24"],"description":"Umbrella Corp","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443},{"cidr_blocks":["198.51.100.0/29"],"description":"Globex Industries","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443},{"cidr_blocks":["203.0.113.10/32"],"description":"Acme Corp","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443}],"name":"customer-api-access","name_prefix":"","owner_id":"540044833068","revoke_rules_on_delete":false,"tags":{"Environment":"production","Name":"customer-api-access","Purpose":"customer-whitelist","Team":"platform","UpdateFrequency":"high"},"tags_all":{"Environment":"production","Name":"customer-api-access","Purpose":"customer-whitelist","Team":"platform","UpdateFrequency":"high"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"after":{"arn":"arn:aws:ec2:eu-west-2:540044833068:security-group/sg-085ee012c9855643f","description":"Customer IP whitelist for API access - updated frequently","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"Allow all outbound","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-085ee012c9855643f","ingress":[{"cidr_blocks":["100.64.0.0/29"],"description":"Cyberdyne Systems","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443},{"cidr_blocks":["192.0.2.50/32"],"description":"Initech","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443},{"cidr_blocks":["198.18.100.0/24"],"description":"Umbrella Corp","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443},{"cidr_blocks":["198.51.100.0/29"],"description":"Globex Industries","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443},{"cidr_blocks":["203.0.113.10/32"],"description":"Acme Corp","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443}],"name":"customer-api-access","name_prefix":"","owner_id":"540044833068","revoke_rules_on_delete":false,"tags":{"Environment":"production","Name":"customer-api-access","Purpose":"customer-whitelist","Team":"platform","UpdateFrequency":"high"},"tags_all":{"Environment":"production","Name":"customer-api-access","Purpose":"customer-whitelist","Team":"platform","UpdateFrequency":"high"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"after_unknown":{},"before_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}},"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}},{"address":"module.api_access[0].aws_security_group.internal_services","module_address":"module.api_access[0]","mode":"managed","type":"aws_security_group","name":"internal_services","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:eu-west-2:540044833068:security-group/sg-08c3767d4eeede7b5","description":"Internal service mesh, monitoring, and health check access - rarely modified","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"Allow all outbound","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-08c3767d4eeede7b5","ingress":[{"cidr_blocks":["10.0.0.0/8"],"description":"Health check endpoint","from_port":8080,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":8080},{"cidr_blocks":["10.0.0.0/8"],"description":"Internal HTTPS - monitoring, service mesh, internal tools","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443},{"cidr_blocks":["10.0.0.0/8"],"description":"Prometheus metrics scraping","from_port":9090,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":9090}],"name":"internal-services","name_prefix":"","owner_id":"540044833068","revoke_rules_on_delete":false,"tags":{"Critical":"true","Environment":"production","Name":"internal-services","Purpose":"internal-mesh","Team":"platform","UpdateFrequency":"low"},"tags_all":{"Critical":"true","Environment":"production","Name":"internal-services","Purpose":"internal-mesh","Team":"platform","UpdateFrequency":"low"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"after":{"arn":"arn:aws:ec2:eu-west-2:540044833068:security-group/sg-08c3767d4eeede7b5","description":"Internal service mesh, monitoring, and health check access - rarely modified","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"Allow all outbound","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-08c3767d4eeede7b5","ingress":[{"cidr_blocks":["10.0.0.0/8"],"description":"Health check endpoint","from_port":8080,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":8080},{"cidr_blocks":["10.0.0.0/8"],"description":"Internal HTTPS - monitoring, service mesh, internal tools","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443},{"cidr_blocks":["10.0.0.0/8"],"description":"Prometheus metrics scraping","from_port":9090,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":9090}],"name":"internal-services","name_prefix":"","owner_id":"540044833068","revoke_rules_on_delete":false,"tags":{"Critical":"true","Environment":"production","Name":"internal-services","Purpose":"internal-mesh","Team":"platform","UpdateFrequency":"low"},"tags_all":{"Critical":"true","Environment":"production","Name":"internal-services","Purpose":"internal-mesh","Team":"platform","UpdateFrequency":"low"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"after_unknown":{},"before_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}},"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}},{"address":"module.api_access[0].aws_sns_topic.alerts","module_address":"module.api_access[0]","mode":"managed","type":"aws_sns_topic","name":"alerts","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"application_failure_feedback_role_arn":"","application_success_feedback_role_arn":"","application_success_feedback_sample_rate":0,"archive_policy":"","arn":"arn:aws:sns:eu-west-2:540044833068:production-api-alerts","beginning_archive_time":"","content_based_deduplication":false,"delivery_policy":"","display_name":"","fifo_throughput_scope":"","fifo_topic":false,"firehose_failure_feedback_role_arn":"","firehose_success_feedback_role_arn":"","firehose_success_feedback_sample_rate":0,"http_failure_feedback_role_arn":"","http_success_feedback_role_arn":"","http_success_feedback_sample_rate":0,"id":"arn:aws:sns:eu-west-2:540044833068:production-api-alerts","kms_master_key_id":"","lambda_failure_feedback_role_arn":"","lambda_success_feedback_role_arn":"","lambda_success_feedback_sample_rate":0,"name":"production-api-alerts","name_prefix":"","owner":"540044833068","policy":"{\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Action\":[\"SNS:GetTopicAttributes\",\"SNS:SetTopicAttributes\",\"SNS:AddPermission\",\"SNS:RemovePermission\",\"SNS:DeleteTopic\",\"SNS:Subscribe\",\"SNS:ListSubscriptionsByTopic\",\"SNS:Publish\"],\"Condition\":{\"StringEquals\":{\"AWS:SourceOwner\":\"540044833068\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Resource\":\"arn:aws:sns:eu-west-2:540044833068:production-api-alerts\",\"Sid\":\"__default_statement_ID\"}],\"Version\":\"2008-10-17\"}","signature_version":0,"sqs_failure_feedback_role_arn":"","sqs_success_feedback_role_arn":"","sqs_success_feedback_sample_rate":0,"tags":{"Environment":"production","Purpose":"oncall-alerts","Severity":"critical"},"tags_all":{"Environment":"production","Purpose":"oncall-alerts","Severity":"critical"},"tracing_config":""},"after":{"application_failure_feedback_role_arn":"","application_success_feedback_role_arn":"","application_success_feedback_sample_rate":0,"archive_policy":"","arn":"arn:aws:sns:eu-west-2:540044833068:production-api-alerts","beginning_archive_time":"","content_based_deduplication":false,"delivery_policy":"","display_name":"","fifo_throughput_scope":"","fifo_topic":false,"firehose_failure_feedback_role_arn":"","firehose_success_feedback_role_arn":"","firehose_success_feedback_sample_rate":0,"http_failure_feedback_role_arn":"","http_success_feedback_role_arn":"","http_success_feedback_sample_rate":0,"id":"arn:aws:sns:eu-west-2:540044833068:production-api-alerts","kms_master_key_id":"","lambda_failure_feedback_role_arn":"","lambda_success_feedback_role_arn":"","lambda_success_feedback_sample_rate":0,"name":"production-api-alerts","name_prefix":"","owner":"540044833068","policy":"{\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Action\":[\"SNS:GetTopicAttributes\",\"SNS:SetTopicAttributes\",\"SNS:AddPermission\",\"SNS:RemovePermission\",\"SNS:DeleteTopic\",\"SNS:Subscribe\",\"SNS:ListSubscriptionsByTopic\",\"SNS:Publish\"],\"Condition\":{\"StringEquals\":{\"AWS:SourceOwner\":\"540044833068\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Resource\":\"arn:aws:sns:eu-west-2:540044833068:production-api-alerts\",\"Sid\":\"__default_statement_ID\"}],\"Version\":\"2008-10-17\"}","signature_version":0,"sqs_failure_feedback_role_arn":"","sqs_success_feedback_role_arn":"","sqs_success_feedback_sample_rate":0,"tags":{"Environment":"production","Purpose":"oncall-alerts","Severity":"critical"},"tags_all":{"Environment":"production","Purpose":"oncall-alerts","Severity":"critical"},"tracing_config":""},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.api_access[0].aws_sns_topic_subscription.oncall_email","module_address":"module.api_access[0]","mode":"managed","type":"aws_sns_topic_subscription","name":"oncall_email","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:sns:eu-west-2:540044833068:production-api-alerts:33d3ad1c-91bb-4926-8c9f-9cb546486ff7","confirmation_timeout_in_minutes":1,"confirmation_was_authenticated":false,"delivery_policy":"","endpoint":"alerts@example.com","endpoint_auto_confirms":false,"filter_policy":"","filter_policy_scope":"","id":"arn:aws:sns:eu-west-2:540044833068:production-api-alerts:33d3ad1c-91bb-4926-8c9f-9cb546486ff7","owner_id":"540044833068","pending_confirmation":true,"protocol":"email","raw_message_delivery":false,"redrive_policy":"","replay_policy":"","subscription_role_arn":"","topic_arn":"arn:aws:sns:eu-west-2:540044833068:production-api-alerts"},"after":{"arn":"arn:aws:sns:eu-west-2:540044833068:production-api-alerts:33d3ad1c-91bb-4926-8c9f-9cb546486ff7","confirmation_timeout_in_minutes":1,"confirmation_was_authenticated":false,"delivery_policy":"","endpoint":"alerts@example.com","endpoint_auto_confirms":false,"filter_policy":"","filter_policy_scope":"","id":"arn:aws:sns:eu-west-2:540044833068:production-api-alerts:33d3ad1c-91bb-4926-8c9f-9cb546486ff7","owner_id":"540044833068","pending_confirmation":true,"protocol":"email","raw_message_delivery":false,"redrive_policy":"","replay_policy":"","subscription_role_arn":"","topic_arn":"arn:aws:sns:eu-west-2:540044833068:production-api-alerts"},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.api_server.aws_cloudwatch_metric_alarm.high_cpu[0]","module_address":"module.api_server","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"high_cpu","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"actions_enabled":true,"alarm_actions":["arn:aws:sns:eu-west-2:540044833068:api-51c748b4-alerts"],"alarm_description":"CPU utilization exceeds 80%","alarm_name":"api-51c748b4-high-cpu","arn":"arn:aws:cloudwatch:eu-west-2:540044833068:alarm:api-51c748b4-high-cpu","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":0,"dimensions":{"InstanceId":"i-0d1d4384862781a22"},"evaluate_low_sample_count_percentiles":"","evaluation_periods":2,"extended_statistic":"","id":"api-51c748b4-high-cpu","insufficient_data_actions":[],"metric_name":"CPUUtilization","metric_query":[],"namespace":"AWS/EC2","ok_actions":["arn:aws:sns:eu-west-2:540044833068:api-51c748b4-alerts"],"period":300,"statistic":"Average","tags":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-cpu-alarm","Project":"api-platform","Workload":"cpu-intensive"},"tags_all":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-cpu-alarm","Project":"api-platform","Workload":"cpu-intensive"},"threshold":80,"threshold_metric_id":"","treat_missing_data":"missing","unit":""},"after":{"actions_enabled":true,"alarm_actions":["arn:aws:sns:eu-west-2:540044833068:api-51c748b4-alerts"],"alarm_description":"CPU utilization exceeds 80%","alarm_name":"api-51c748b4-high-cpu","arn":"arn:aws:cloudwatch:eu-west-2:540044833068:alarm:api-51c748b4-high-cpu","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":0,"dimensions":{"InstanceId":"i-0d1d4384862781a22"},"evaluate_low_sample_count_percentiles":"","evaluation_periods":2,"extended_statistic":"","id":"api-51c748b4-high-cpu","insufficient_data_actions":[],"metric_name":"CPUUtilization","metric_query":[],"namespace":"AWS/EC2","ok_actions":["arn:aws:sns:eu-west-2:540044833068:api-51c748b4-alerts"],"period":300,"statistic":"Average","tags":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-cpu-alarm","Project":"api-platform","Workload":"cpu-intensive"},"tags_all":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-cpu-alarm","Project":"api-platform","Workload":"cpu-intensive"},"threshold":80,"threshold_metric_id":"","treat_missing_data":"missing","unit":""},"after_unknown":{},"before_sensitive":{"alarm_actions":[false],"dimensions":{},"insufficient_data_actions":[],"metric_query":[],"ok_actions":[false],"tags":{},"tags_all":{}},"after_sensitive":{"alarm_actions":[false],"dimensions":{},"insufficient_data_actions":[],"metric_query":[],"ok_actions":[false],"tags":{},"tags_all":{}}}},{"address":"module.api_server.aws_cloudwatch_metric_alarm.unhealthy_targets[0]","module_address":"module.api_server","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"unhealthy_targets","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"actions_enabled":true,"alarm_actions":["arn:aws:sns:eu-west-2:540044833068:api-51c748b4-alerts"],"alarm_description":"Load balancer has unhealthy targets","alarm_name":"api-51c748b4-unhealthy-targets","arn":"arn:aws:cloudwatch:eu-west-2:540044833068:alarm:api-51c748b4-unhealthy-targets","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":0,"dimensions":{"LoadBalancer":"app/api-51c748b4-alb/5006497ce35b7ecd","TargetGroup":"targetgroup/api-51c748b4-tg/fa0513c079206e1e"},"evaluate_low_sample_count_percentiles":"","evaluation_periods":2,"extended_statistic":"","id":"api-51c748b4-unhealthy-targets","insufficient_data_actions":[],"metric_name":"UnHealthyHostCount","metric_query":[],"namespace":"AWS/ApplicationELB","ok_actions":["arn:aws:sns:eu-west-2:540044833068:api-51c748b4-alerts"],"period":60,"statistic":"Average","tags":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-health-alarm","Project":"api-platform","Workload":"cpu-intensive"},"tags_all":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-health-alarm","Project":"api-platform","Workload":"cpu-intensive"},"threshold":0,"threshold_metric_id":"","treat_missing_data":"missing","unit":""},"after":{"actions_enabled":true,"alarm_actions":["arn:aws:sns:eu-west-2:540044833068:api-51c748b4-alerts"],"alarm_description":"Load balancer has unhealthy targets","alarm_name":"api-51c748b4-unhealthy-targets","arn":"arn:aws:cloudwatch:eu-west-2:540044833068:alarm:api-51c748b4-unhealthy-targets","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":0,"dimensions":{"LoadBalancer":"app/api-51c748b4-alb/5006497ce35b7ecd","TargetGroup":"targetgroup/api-51c748b4-tg/fa0513c079206e1e"},"evaluate_low_sample_count_percentiles":"","evaluation_periods":2,"extended_statistic":"","id":"api-51c748b4-unhealthy-targets","insufficient_data_actions":[],"metric_name":"UnHealthyHostCount","metric_query":[],"namespace":"AWS/ApplicationELB","ok_actions":["arn:aws:sns:eu-west-2:540044833068:api-51c748b4-alerts"],"period":60,"statistic":"Average","tags":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-health-alarm","Project":"api-platform","Workload":"cpu-intensive"},"tags_all":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-health-alarm","Project":"api-platform","Workload":"cpu-intensive"},"threshold":0,"threshold_metric_id":"","treat_missing_data":"missing","unit":""},"after_unknown":{},"before_sensitive":{"alarm_actions":[false],"dimensions":{},"insufficient_data_actions":[],"metric_query":[],"ok_actions":[false],"tags":{},"tags_all":{}},"after_sensitive":{"alarm_actions":[false],"dimensions":{},"insufficient_data_actions":[],"metric_query":[],"ok_actions":[false],"tags":{},"tags_all":{}}}},{"address":"module.api_server.aws_iam_instance_profile.api_server[0]","module_address":"module.api_server","mode":"managed","type":"aws_iam_instance_profile","name":"api_server","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:iam::540044833068:instance-profile/api-51c748b4-api-profile","create_date":"2025-12-09T23:43:28Z","id":"api-51c748b4-api-profile","name":"api-51c748b4-api-profile","name_prefix":"","path":"/","role":"api-51c748b4-api-role","tags":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-api-profile","Project":"api-platform","Workload":"cpu-intensive"},"tags_all":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-api-profile","Project":"api-platform","Workload":"cpu-intensive"},"unique_id":"AIPAX3PJOGEWDK52XMNRS"},"after":{"arn":"arn:aws:iam::540044833068:instance-profile/api-51c748b4-api-profile","create_date":"2025-12-09T23:43:28Z","id":"api-51c748b4-api-profile","name":"api-51c748b4-api-profile","name_prefix":"","path":"/","role":"api-51c748b4-api-role","tags":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-api-profile","Project":"api-platform","Workload":"cpu-intensive"},"tags_all":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-api-profile","Project":"api-platform","Workload":"cpu-intensive"},"unique_id":"AIPAX3PJOGEWDK52XMNRS"},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.api_server.aws_iam_role.api_server[0]","module_address":"module.api_server","mode":"managed","type":"aws_iam_role","name":"api_server","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:iam::540044833068:role/api-51c748b4-api-role","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","create_date":"2025-12-09T23:43:28Z","description":"","force_detach_policies":false,"id":"api-51c748b4-api-role","inline_policy":[],"managed_policy_arns":["arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore","arn:aws:iam::aws:policy/CloudWatchAgentServerPolicy"],"max_session_duration":3600,"name":"api-51c748b4-api-role","name_prefix":"","path":"/","permissions_boundary":"","tags":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-api-role","Project":"api-platform","Workload":"cpu-intensive"},"tags_all":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-api-role","Project":"api-platform","Workload":"cpu-intensive"},"unique_id":"AROAX3PJOGEWDTMWQ5E7F"},"after":{"arn":"arn:aws:iam::540044833068:role/api-51c748b4-api-role","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","create_date":"2025-12-09T23:43:28Z","description":"","force_detach_policies":false,"id":"api-51c748b4-api-role","inline_policy":[],"managed_policy_arns":["arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore","arn:aws:iam::aws:policy/CloudWatchAgentServerPolicy"],"max_session_duration":3600,"name":"api-51c748b4-api-role","name_prefix":"","path":"/","permissions_boundary":"","tags":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-api-role","Project":"api-platform","Workload":"cpu-intensive"},"tags_all":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-api-role","Project":"api-platform","Workload":"cpu-intensive"},"unique_id":"AROAX3PJOGEWDTMWQ5E7F"},"after_unknown":{},"before_sensitive":{"inline_policy":[],"managed_policy_arns":[false,false],"tags":{},"tags_all":{}},"after_sensitive":{"inline_policy":[],"managed_policy_arns":[false,false],"tags":{},"tags_all":{}}}},{"address":"module.api_server.aws_iam_role_policy_attachment.cloudwatch_agent[0]","module_address":"module.api_server","mode":"managed","type":"aws_iam_role_policy_attachment","name":"cloudwatch_agent","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"id":"api-51c748b4-api-role-20251209234328560800000001","policy_arn":"arn:aws:iam::aws:policy/CloudWatchAgentServerPolicy","role":"api-51c748b4-api-role"},"after":{"id":"api-51c748b4-api-role-20251209234328560800000001","policy_arn":"arn:aws:iam::aws:policy/CloudWatchAgentServerPolicy","role":"api-51c748b4-api-role"},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.api_server.aws_iam_role_policy_attachment.ssm[0]","module_address":"module.api_server","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ssm","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"id":"api-51c748b4-api-role-20251209234328620600000002","policy_arn":"arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore","role":"api-51c748b4-api-role"},"after":{"id":"api-51c748b4-api-role-20251209234328620600000002","policy_arn":"arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore","role":"api-51c748b4-api-role"},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.api_server.aws_instance.api_server[0]","module_address":"module.api_server","mode":"managed","type":"aws_instance","name":"api_server","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"ami":"ami-02a95139d1d364420","arn":"arn:aws:ec2:eu-west-2:540044833068:instance/i-0d1d4384862781a22","associate_public_ip_address":true,"availability_zone":"eu-west-2a","capacity_reservation_specification":[{"capacity_reservation_preference":"open","capacity_reservation_target":[]}],"cpu_core_count":1,"cpu_options":[{"amd_sev_snp":"","core_count":1,"threads_per_core":2}],"cpu_threads_per_core":2,"credit_specification":[],"disable_api_stop":false,"disable_api_termination":false,"ebs_block_device":[],"ebs_optimized":false,"enable_primary_ipv6":null,"enclave_options":[{"enabled":false}],"ephemeral_block_device":[],"get_password_data":false,"hibernation":false,"host_id":"","host_resource_group_arn":null,"iam_instance_profile":"api-51c748b4-api-profile","id":"i-0d1d4384862781a22","instance_initiated_shutdown_behavior":"stop","instance_lifecycle":"","instance_market_options":[],"instance_state":"running","instance_type":"c5.large","ipv6_address_count":0,"ipv6_addresses":[],"key_name":"","launch_template":[],"maintenance_options":[{"auto_recovery":"default"}],"metadata_options":[{"http_endpoint":"enabled","http_protocol_ipv6":"disabled","http_put_response_hop_limit":1,"http_tokens":"optional","instance_metadata_tags":"disabled"}],"monitoring":false,"network_interface":[],"outpost_arn":"","password_data":"","placement_group":"","placement_partition_number":0,"primary_network_interface_id":"eni-0c732e6544f94d4fe","private_dns":"ip-10-0-101-249.eu-west-2.compute.internal","private_dns_name_options":[{"enable_resource_name_dns_a_record":false,"enable_resource_name_dns_aaaa_record":false,"hostname_type":"ip-name"}],"private_ip":"10.0.101.249","public_dns":"ec2-35-178-48-219.eu-west-2.compute.amazonaws.com","public_ip":"35.178.48.219","root_block_device":[{"delete_on_termination":true,"device_name":"/dev/xvda","encrypted":false,"iops":3000,"kms_key_id":"","tags":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-root-volume","Project":"api-platform","Workload":"cpu-intensive"},"tags_all":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-root-volume","Project":"api-platform","Workload":"cpu-intensive"},"throughput":125,"volume_id":"vol-084fb1fcaad21f25b","volume_size":8,"volume_type":"gp3"}],"secondary_private_ips":[],"security_groups":[],"source_dest_check":true,"spot_instance_request_id":"","subnet_id":"subnet-0a1b287732e8ad0b7","tags":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-api-server","Project":"api-platform","Workload":"cpu-intensive"},"tags_all":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-api-server","Project":"api-platform","Workload":"cpu-intensive"},"tenancy":"default","timeouts":null,"user_data":"627f06eeee1e41f87d9e55ae56203ae81058d890","user_data_base64":null,"user_data_replace_on_change":false,"volume_tags":null,"vpc_security_group_ids":["sg-0bf5d5df489e89796"]},"after":{"ami":"ami-02a95139d1d364420","arn":"arn:aws:ec2:eu-west-2:540044833068:instance/i-0d1d4384862781a22","associate_public_ip_address":true,"availability_zone":"eu-west-2a","capacity_reservation_specification":[{"capacity_reservation_preference":"open","capacity_reservation_target":[]}],"cpu_core_count":1,"cpu_options":[{"amd_sev_snp":"","core_count":1,"threads_per_core":2}],"cpu_threads_per_core":2,"credit_specification":[],"disable_api_stop":false,"disable_api_termination":false,"ebs_block_device":[],"ebs_optimized":false,"enable_primary_ipv6":null,"enclave_options":[{"enabled":false}],"ephemeral_block_device":[],"get_password_data":false,"hibernation":false,"host_id":"","host_resource_group_arn":null,"iam_instance_profile":"api-51c748b4-api-profile","id":"i-0d1d4384862781a22","instance_initiated_shutdown_behavior":"stop","instance_lifecycle":"","instance_market_options":[],"instance_state":"running","instance_type":"c5.large","ipv6_address_count":0,"ipv6_addresses":[],"key_name":"","launch_template":[],"maintenance_options":[{"auto_recovery":"default"}],"metadata_options":[{"http_endpoint":"enabled","http_protocol_ipv6":"disabled","http_put_response_hop_limit":1,"http_tokens":"optional","instance_metadata_tags":"disabled"}],"monitoring":false,"network_interface":[],"outpost_arn":"","password_data":"","placement_group":"","placement_partition_number":0,"primary_network_interface_id":"eni-0c732e6544f94d4fe","private_dns":"ip-10-0-101-249.eu-west-2.compute.internal","private_dns_name_options":[{"enable_resource_name_dns_a_record":false,"enable_resource_name_dns_aaaa_record":false,"hostname_type":"ip-name"}],"private_ip":"10.0.101.249","public_dns":"ec2-35-178-48-219.eu-west-2.compute.amazonaws.com","public_ip":"35.178.48.219","root_block_device":[{"delete_on_termination":true,"device_name":"/dev/xvda","encrypted":false,"iops":3000,"kms_key_id":"","tags":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-root-volume","Project":"api-platform","Workload":"cpu-intensive"},"tags_all":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-root-volume","Project":"api-platform","Workload":"cpu-intensive"},"throughput":125,"volume_id":"vol-084fb1fcaad21f25b","volume_size":8,"volume_type":"gp3"}],"secondary_private_ips":[],"security_groups":[],"source_dest_check":true,"spot_instance_request_id":"","subnet_id":"subnet-0a1b287732e8ad0b7","tags":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-api-server","Project":"api-platform","Workload":"cpu-intensive"},"tags_all":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-api-server","Project":"api-platform","Workload":"cpu-intensive"},"tenancy":"default","timeouts":null,"user_data":"627f06eeee1e41f87d9e55ae56203ae81058d890","user_data_base64":null,"user_data_replace_on_change":false,"volume_tags":null,"vpc_security_group_ids":["sg-0bf5d5df489e89796"]},"after_unknown":{},"before_sensitive":{"capacity_reservation_specification":[{"capacity_reservation_target":[]}],"cpu_options":[{}],"credit_specification":[],"ebs_block_device":[],"enclave_options":[{}],"ephemeral_block_device":[],"instance_market_options":[],"ipv6_addresses":[],"launch_template":[],"maintenance_options":[{}],"metadata_options":[{}],"network_interface":[],"private_dns_name_options":[{}],"root_block_device":[{"tags":{},"tags_all":{}}],"secondary_private_ips":[],"security_groups":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[false]},"after_sensitive":{"capacity_reservation_specification":[{"capacity_reservation_target":[]}],"cpu_options":[{}],"credit_specification":[],"ebs_block_device":[],"enclave_options":[{}],"ephemeral_block_device":[],"instance_market_options":[],"ipv6_addresses":[],"launch_template":[],"maintenance_options":[{}],"metadata_options":[{}],"network_interface":[],"private_dns_name_options":[{}],"root_block_device":[{"tags":{},"tags_all":{}}],"secondary_private_ips":[],"security_groups":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[false]}}},{"address":"module.api_server.aws_lb.api[0]","module_address":"module.api_server","mode":"managed","type":"aws_lb","name":"api","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"access_logs":[{"bucket":"","enabled":false,"prefix":""}],"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:loadbalancer/app/api-51c748b4-alb/5006497ce35b7ecd","arn_suffix":"app/api-51c748b4-alb/5006497ce35b7ecd","client_keep_alive":3600,"connection_logs":[{"bucket":"","enabled":false,"prefix":""}],"customer_owned_ipv4_pool":"","desync_mitigation_mode":"defensive","dns_name":"api-51c748b4-alb-1999780759.eu-west-2.elb.amazonaws.com","dns_record_client_routing_policy":null,"drop_invalid_header_fields":false,"enable_cross_zone_load_balancing":true,"enable_deletion_protection":false,"enable_http2":true,"enable_tls_version_and_cipher_suite_headers":false,"enable_waf_fail_open":false,"enable_xff_client_port":false,"enable_zonal_shift":false,"enforce_security_group_inbound_rules_on_private_link_traffic":"","id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:loadbalancer/app/api-51c748b4-alb/5006497ce35b7ecd","idle_timeout":60,"internal":false,"ip_address_type":"ipv4","ipam_pools":[],"load_balancer_type":"application","minimum_load_balancer_capacity":[],"name":"api-51c748b4-alb","name_prefix":"","preserve_host_header":false,"security_groups":["sg-0874eb9069f386e2b"],"subnet_mapping":[{"allocation_id":"","ipv6_address":"","outpost_id":"","private_ipv4_address":"","subnet_id":"subnet-07fc72cf57c70e4f0"},{"allocation_id":"","ipv6_address":"","outpost_id":"","private_ipv4_address":"","subnet_id":"subnet-0a1b287732e8ad0b7"}],"subnets":["subnet-07fc72cf57c70e4f0","subnet-0a1b287732e8ad0b7"],"tags":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-alb","Project":"api-platform","Workload":"cpu-intensive"},"tags_all":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-alb","Project":"api-platform","Workload":"cpu-intensive"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298","xff_header_processing_mode":"append","zone_id":"ZHURV8PSTC4K8"},"after":{"access_logs":[{"bucket":"","enabled":false,"prefix":""}],"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:loadbalancer/app/api-51c748b4-alb/5006497ce35b7ecd","arn_suffix":"app/api-51c748b4-alb/5006497ce35b7ecd","client_keep_alive":3600,"connection_logs":[{"bucket":"","enabled":false,"prefix":""}],"customer_owned_ipv4_pool":"","desync_mitigation_mode":"defensive","dns_name":"api-51c748b4-alb-1999780759.eu-west-2.elb.amazonaws.com","dns_record_client_routing_policy":null,"drop_invalid_header_fields":false,"enable_cross_zone_load_balancing":true,"enable_deletion_protection":false,"enable_http2":true,"enable_tls_version_and_cipher_suite_headers":false,"enable_waf_fail_open":false,"enable_xff_client_port":false,"enable_zonal_shift":false,"enforce_security_group_inbound_rules_on_private_link_traffic":"","id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:loadbalancer/app/api-51c748b4-alb/5006497ce35b7ecd","idle_timeout":60,"internal":false,"ip_address_type":"ipv4","ipam_pools":[],"load_balancer_type":"application","minimum_load_balancer_capacity":[],"name":"api-51c748b4-alb","name_prefix":"","preserve_host_header":false,"security_groups":["sg-0874eb9069f386e2b"],"subnet_mapping":[{"allocation_id":"","ipv6_address":"","outpost_id":"","private_ipv4_address":"","subnet_id":"subnet-07fc72cf57c70e4f0"},{"allocation_id":"","ipv6_address":"","outpost_id":"","private_ipv4_address":"","subnet_id":"subnet-0a1b287732e8ad0b7"}],"subnets":["subnet-07fc72cf57c70e4f0","subnet-0a1b287732e8ad0b7"],"tags":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-alb","Project":"api-platform","Workload":"cpu-intensive"},"tags_all":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-alb","Project":"api-platform","Workload":"cpu-intensive"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298","xff_header_processing_mode":"append","zone_id":"ZHURV8PSTC4K8"},"after_unknown":{},"before_sensitive":{"access_logs":[{}],"connection_logs":[{}],"ipam_pools":[],"minimum_load_balancer_capacity":[],"security_groups":[false],"subnet_mapping":[{},{}],"subnets":[false,false],"tags":{},"tags_all":{}},"after_sensitive":{"access_logs":[{}],"connection_logs":[{}],"ipam_pools":[],"minimum_load_balancer_capacity":[],"security_groups":[false],"subnet_mapping":[{},{}],"subnets":[false,false],"tags":{},"tags_all":{}}}},{"address":"module.api_server.aws_lb_listener.http[0]","module_address":"module.api_server","mode":"managed","type":"aws_lb_listener","name":"http","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"alpn_policy":null,"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:listener/app/api-51c748b4-alb/5006497ce35b7ecd/50b208cdabb9cb4d","certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":1,"redirect":[],"target_group_arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/api-51c748b4-tg/fa0513c079206e1e","type":"forward"}],"id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:listener/app/api-51c748b4-alb/5006497ce35b7ecd/50b208cdabb9cb4d","load_balancer_arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:loadbalancer/app/api-51c748b4-alb/5006497ce35b7ecd","mutual_authentication":[],"port":80,"protocol":"HTTP","routing_http_request_x_amzn_mtls_clientcert_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_issuer_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_leaf_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_serial_number_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_subject_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_validity_header_name":null,"routing_http_request_x_amzn_tls_cipher_suite_header_name":null,"routing_http_request_x_amzn_tls_version_header_name":null,"routing_http_response_access_control_allow_credentials_header_value":"","routing_http_response_access_control_allow_headers_header_value":"","routing_http_response_access_control_allow_methods_header_value":"","routing_http_response_access_control_allow_origin_header_value":"","routing_http_response_access_control_expose_headers_header_value":"","routing_http_response_access_control_max_age_header_value":"","routing_http_response_content_security_policy_header_value":"","routing_http_response_server_enabled":true,"routing_http_response_strict_transport_security_header_value":"","routing_http_response_x_content_type_options_header_value":"","routing_http_response_x_frame_options_header_value":"","ssl_policy":"","tags":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-http-listener","Project":"api-platform","Workload":"cpu-intensive"},"tags_all":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-http-listener","Project":"api-platform","Workload":"cpu-intensive"},"tcp_idle_timeout_seconds":null,"timeouts":null},"after":{"alpn_policy":null,"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:listener/app/api-51c748b4-alb/5006497ce35b7ecd/50b208cdabb9cb4d","certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":1,"redirect":[],"target_group_arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/api-51c748b4-tg/fa0513c079206e1e","type":"forward"}],"id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:listener/app/api-51c748b4-alb/5006497ce35b7ecd/50b208cdabb9cb4d","load_balancer_arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:loadbalancer/app/api-51c748b4-alb/5006497ce35b7ecd","mutual_authentication":[],"port":80,"protocol":"HTTP","routing_http_request_x_amzn_mtls_clientcert_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_issuer_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_leaf_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_serial_number_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_subject_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_validity_header_name":null,"routing_http_request_x_amzn_tls_cipher_suite_header_name":null,"routing_http_request_x_amzn_tls_version_header_name":null,"routing_http_response_access_control_allow_credentials_header_value":"","routing_http_response_access_control_allow_headers_header_value":"","routing_http_response_access_control_allow_methods_header_value":"","routing_http_response_access_control_allow_origin_header_value":"","routing_http_response_access_control_expose_headers_header_value":"","routing_http_response_access_control_max_age_header_value":"","routing_http_response_content_security_policy_header_value":"","routing_http_response_server_enabled":true,"routing_http_response_strict_transport_security_header_value":"","routing_http_response_x_content_type_options_header_value":"","routing_http_response_x_frame_options_header_value":"","ssl_policy":"","tags":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-http-listener","Project":"api-platform","Workload":"cpu-intensive"},"tags_all":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-http-listener","Project":"api-platform","Workload":"cpu-intensive"},"tcp_idle_timeout_seconds":null,"timeouts":null},"after_unknown":{},"before_sensitive":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[]}],"mutual_authentication":[],"tags":{},"tags_all":{}},"after_sensitive":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[]}],"mutual_authentication":[],"tags":{},"tags_all":{}}}},{"address":"module.api_server.aws_lb_target_group.api[0]","module_address":"module.api_server","mode":"managed","type":"aws_lb_target_group","name":"api","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/api-51c748b4-tg/fa0513c079206e1e","arn_suffix":"targetgroup/api-51c748b4-tg/fa0513c079206e1e","connection_termination":null,"deregistration_delay":"30","health_check":[{"enabled":true,"healthy_threshold":2,"interval":30,"matcher":"200","path":"/health","port":"traffic-port","protocol":"HTTP","timeout":5,"unhealthy_threshold":3}],"id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/api-51c748b4-tg/fa0513c079206e1e","ip_address_type":"ipv4","lambda_multi_value_headers_enabled":false,"load_balancer_arns":["arn:aws:elasticloadbalancing:eu-west-2:540044833068:loadbalancer/app/api-51c748b4-alb/5006497ce35b7ecd"],"load_balancing_algorithm_type":"round_robin","load_balancing_anomaly_mitigation":"off","load_balancing_cross_zone_enabled":"use_load_balancer_configuration","name":"api-51c748b4-tg","name_prefix":"","port":80,"preserve_client_ip":null,"protocol":"HTTP","protocol_version":"HTTP1","proxy_protocol_v2":false,"slow_start":0,"stickiness":[{"cookie_duration":86400,"cookie_name":"","enabled":false,"type":"lb_cookie"}],"tags":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-tg","Project":"api-platform","Workload":"cpu-intensive"},"tags_all":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-tg","Project":"api-platform","Workload":"cpu-intensive"},"target_failover":[{"on_deregistration":null,"on_unhealthy":null}],"target_group_health":[{"dns_failover":[{"minimum_healthy_targets_count":"1","minimum_healthy_targets_percentage":"off"}],"unhealthy_state_routing":[{"minimum_healthy_targets_count":1,"minimum_healthy_targets_percentage":"off"}]}],"target_health_state":[{"enable_unhealthy_connection_termination":null,"unhealthy_draining_interval":null}],"target_type":"instance","vpc_id":"vpc-02901bcbb89561298"},"after":{"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/api-51c748b4-tg/fa0513c079206e1e","arn_suffix":"targetgroup/api-51c748b4-tg/fa0513c079206e1e","connection_termination":null,"deregistration_delay":"30","health_check":[{"enabled":true,"healthy_threshold":2,"interval":30,"matcher":"200","path":"/health","port":"traffic-port","protocol":"HTTP","timeout":5,"unhealthy_threshold":3}],"id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/api-51c748b4-tg/fa0513c079206e1e","ip_address_type":"ipv4","lambda_multi_value_headers_enabled":false,"load_balancer_arns":["arn:aws:elasticloadbalancing:eu-west-2:540044833068:loadbalancer/app/api-51c748b4-alb/5006497ce35b7ecd"],"load_balancing_algorithm_type":"round_robin","load_balancing_anomaly_mitigation":"off","load_balancing_cross_zone_enabled":"use_load_balancer_configuration","name":"api-51c748b4-tg","name_prefix":"","port":80,"preserve_client_ip":null,"protocol":"HTTP","protocol_version":"HTTP1","proxy_protocol_v2":false,"slow_start":0,"stickiness":[{"cookie_duration":86400,"cookie_name":"","enabled":false,"type":"lb_cookie"}],"tags":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-tg","Project":"api-platform","Workload":"cpu-intensive"},"tags_all":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-tg","Project":"api-platform","Workload":"cpu-intensive"},"target_failover":[{"on_deregistration":null,"on_unhealthy":null}],"target_group_health":[{"dns_failover":[{"minimum_healthy_targets_count":"1","minimum_healthy_targets_percentage":"off"}],"unhealthy_state_routing":[{"minimum_healthy_targets_count":1,"minimum_healthy_targets_percentage":"off"}]}],"target_health_state":[{"enable_unhealthy_connection_termination":null,"unhealthy_draining_interval":null}],"target_type":"instance","vpc_id":"vpc-02901bcbb89561298"},"after_unknown":{},"before_sensitive":{"health_check":[{}],"load_balancer_arns":[false],"stickiness":[{}],"tags":{},"tags_all":{},"target_failover":[{}],"target_group_health":[{"dns_failover":[{}],"unhealthy_state_routing":[{}]}],"target_health_state":[{}]},"after_sensitive":{"health_check":[{}],"load_balancer_arns":[false],"stickiness":[{}],"tags":{},"tags_all":{},"target_failover":[{}],"target_group_health":[{"dns_failover":[{}],"unhealthy_state_routing":[{}]}],"target_health_state":[{}]}}},{"address":"module.api_server.aws_lb_target_group_attachment.api[0]","module_address":"module.api_server","mode":"managed","type":"aws_lb_target_group_attachment","name":"api","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"availability_zone":null,"id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/api-51c748b4-tg/fa0513c079206e1e-20251211003254874300000004","port":80,"target_group_arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/api-51c748b4-tg/fa0513c079206e1e","target_id":"i-0d1d4384862781a22"},"after":{"availability_zone":null,"id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/api-51c748b4-tg/fa0513c079206e1e-20251211003254874300000004","port":80,"target_group_arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/api-51c748b4-tg/fa0513c079206e1e","target_id":"i-0d1d4384862781a22"},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.api_server.aws_security_group.alb[0]","module_address":"module.api_server","mode":"managed","type":"aws_security_group","name":"alb","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:eu-west-2:540044833068:security-group/sg-0874eb9069f386e2b","description":"Security group for Application Load Balancer","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"All outbound","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-0874eb9069f386e2b","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"HTTP from internet","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":80}],"name":"api-51c748b4-alb-sg","name_prefix":"","owner_id":"540044833068","revoke_rules_on_delete":false,"tags":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-alb-sg","Project":"api-platform","Workload":"cpu-intensive"},"tags_all":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-alb-sg","Project":"api-platform","Workload":"cpu-intensive"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"after":{"arn":"arn:aws:ec2:eu-west-2:540044833068:security-group/sg-0874eb9069f386e2b","description":"Security group for Application Load Balancer","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"All outbound","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-0874eb9069f386e2b","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"HTTP from internet","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":80}],"name":"api-51c748b4-alb-sg","name_prefix":"","owner_id":"540044833068","revoke_rules_on_delete":false,"tags":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-alb-sg","Project":"api-platform","Workload":"cpu-intensive"},"tags_all":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-alb-sg","Project":"api-platform","Workload":"cpu-intensive"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"after_unknown":{},"before_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}},"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}},{"address":"module.api_server.aws_security_group.api_server[0]","module_address":"module.api_server","mode":"managed","type":"aws_security_group","name":"api_server","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:eu-west-2:540044833068:security-group/sg-0bf5d5df489e89796","description":"Security group for API server","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"All outbound","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0},{"cidr_blocks":[],"description":"Database access","from_port":5432,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":["sg-03c9420d0652e5719"],"self":false,"to_port":5432}],"id":"sg-0bf5d5df489e89796","ingress":[{"cidr_blocks":[],"description":"HTTP from ALB","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":["sg-0874eb9069f386e2b"],"self":false,"to_port":80}],"name":"api-51c748b4-api-sg","name_prefix":"","owner_id":"540044833068","revoke_rules_on_delete":false,"tags":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-api-sg","Project":"api-platform","Workload":"cpu-intensive"},"tags_all":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-api-sg","Project":"api-platform","Workload":"cpu-intensive"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"after":{"arn":"arn:aws:ec2:eu-west-2:540044833068:security-group/sg-0bf5d5df489e89796","description":"Security group for API server","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"All outbound","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0},{"cidr_blocks":[],"description":"Database access","from_port":5432,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":["sg-03c9420d0652e5719"],"self":false,"to_port":5432}],"id":"sg-0bf5d5df489e89796","ingress":[{"cidr_blocks":[],"description":"HTTP from ALB","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":["sg-0874eb9069f386e2b"],"self":false,"to_port":80}],"name":"api-51c748b4-api-sg","name_prefix":"","owner_id":"540044833068","revoke_rules_on_delete":false,"tags":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-api-sg","Project":"api-platform","Workload":"cpu-intensive"},"tags_all":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-api-sg","Project":"api-platform","Workload":"cpu-intensive"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"after_unknown":{},"before_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[false]}],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[false]}],"tags":{},"tags_all":{}},"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[false]}],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[false]}],"tags":{},"tags_all":{}}}},{"address":"module.api_server.aws_security_group.database[0]","module_address":"module.api_server","mode":"managed","type":"aws_security_group","name":"database","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:eu-west-2:540044833068:security-group/sg-03c9420d0652e5719","description":"Security group for database tier","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"All outbound","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-03c9420d0652e5719","ingress":[{"cidr_blocks":[],"description":"PostgreSQL from API servers","from_port":5432,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":["sg-0bf5d5df489e89796"],"self":false,"to_port":5432}],"name":"api-51c748b4-database-sg","name_prefix":"","owner_id":"540044833068","revoke_rules_on_delete":false,"tags":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-database-sg","Project":"api-platform","Workload":"cpu-intensive"},"tags_all":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-database-sg","Project":"api-platform","Workload":"cpu-intensive"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"after":{"arn":"arn:aws:ec2:eu-west-2:540044833068:security-group/sg-03c9420d0652e5719","description":"Security group for database tier","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"All outbound","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-03c9420d0652e5719","ingress":[{"cidr_blocks":[],"description":"PostgreSQL from API servers","from_port":5432,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":["sg-0bf5d5df489e89796"],"self":false,"to_port":5432}],"name":"api-51c748b4-database-sg","name_prefix":"","owner_id":"540044833068","revoke_rules_on_delete":false,"tags":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-database-sg","Project":"api-platform","Workload":"cpu-intensive"},"tags_all":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-database-sg","Project":"api-platform","Workload":"cpu-intensive"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"after_unknown":{},"before_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[false]}],"tags":{},"tags_all":{}},"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[false]}],"tags":{},"tags_all":{}}}},{"address":"module.api_server.aws_security_group_rule.database_from_api[0]","module_address":"module.api_server","mode":"managed","type":"aws_security_group_rule","name":"database_from_api","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"cidr_blocks":null,"description":"PostgreSQL from API servers","from_port":5432,"id":"sgrule-3024000087","ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_group_id":"sg-03c9420d0652e5719","security_group_rule_id":"sgr-0471b318daf4376c1","self":false,"source_security_group_id":"sg-0bf5d5df489e89796","timeouts":null,"to_port":5432,"type":"ingress"},"after":{"cidr_blocks":null,"description":"PostgreSQL from API servers","from_port":5432,"id":"sgrule-3024000087","ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_group_id":"sg-03c9420d0652e5719","security_group_rule_id":"sgr-0471b318daf4376c1","self":false,"source_security_group_id":"sg-0bf5d5df489e89796","timeouts":null,"to_port":5432,"type":"ingress"},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.api_server.aws_sns_topic.alerts[0]","module_address":"module.api_server","mode":"managed","type":"aws_sns_topic","name":"alerts","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"application_failure_feedback_role_arn":"","application_success_feedback_role_arn":"","application_success_feedback_sample_rate":0,"archive_policy":"","arn":"arn:aws:sns:eu-west-2:540044833068:api-51c748b4-alerts","beginning_archive_time":"","content_based_deduplication":false,"delivery_policy":"","display_name":"","fifo_throughput_scope":"","fifo_topic":false,"firehose_failure_feedback_role_arn":"","firehose_success_feedback_role_arn":"","firehose_success_feedback_sample_rate":0,"http_failure_feedback_role_arn":"","http_success_feedback_role_arn":"","http_success_feedback_sample_rate":0,"id":"arn:aws:sns:eu-west-2:540044833068:api-51c748b4-alerts","kms_master_key_id":"","lambda_failure_feedback_role_arn":"","lambda_success_feedback_role_arn":"","lambda_success_feedback_sample_rate":0,"name":"api-51c748b4-alerts","name_prefix":"","owner":"540044833068","policy":"{\"Statement\":[{\"Action\":\"sns:Publish\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"cloudwatch.amazonaws.com\"},\"Resource\":\"arn:aws:sns:eu-west-2:540044833068:api-51c748b4-alerts\",\"Sid\":\"AllowCloudWatchAlarms\"}],\"Version\":\"2012-10-17\"}","signature_version":0,"sqs_failure_feedback_role_arn":"","sqs_success_feedback_role_arn":"","sqs_success_feedback_sample_rate":0,"tags":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-alerts","Project":"api-platform","Workload":"cpu-intensive"},"tags_all":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-alerts","Project":"api-platform","Workload":"cpu-intensive"},"tracing_config":""},"after":{"application_failure_feedback_role_arn":"","application_success_feedback_role_arn":"","application_success_feedback_sample_rate":0,"archive_policy":"","arn":"arn:aws:sns:eu-west-2:540044833068:api-51c748b4-alerts","beginning_archive_time":"","content_based_deduplication":false,"delivery_policy":"","display_name":"","fifo_throughput_scope":"","fifo_topic":false,"firehose_failure_feedback_role_arn":"","firehose_success_feedback_role_arn":"","firehose_success_feedback_sample_rate":0,"http_failure_feedback_role_arn":"","http_success_feedback_role_arn":"","http_success_feedback_sample_rate":0,"id":"arn:aws:sns:eu-west-2:540044833068:api-51c748b4-alerts","kms_master_key_id":"","lambda_failure_feedback_role_arn":"","lambda_success_feedback_role_arn":"","lambda_success_feedback_sample_rate":0,"name":"api-51c748b4-alerts","name_prefix":"","owner":"540044833068","policy":"{\"Statement\":[{\"Action\":\"sns:Publish\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"cloudwatch.amazonaws.com\"},\"Resource\":\"arn:aws:sns:eu-west-2:540044833068:api-51c748b4-alerts\",\"Sid\":\"AllowCloudWatchAlarms\"}],\"Version\":\"2012-10-17\"}","signature_version":0,"sqs_failure_feedback_role_arn":"","sqs_success_feedback_role_arn":"","sqs_success_feedback_sample_rate":0,"tags":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-alerts","Project":"api-platform","Workload":"cpu-intensive"},"tags_all":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-alerts","Project":"api-platform","Workload":"cpu-intensive"},"tracing_config":""},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.api_server.aws_sns_topic_policy.alerts[0]","module_address":"module.api_server","mode":"managed","type":"aws_sns_topic_policy","name":"alerts","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:sns:eu-west-2:540044833068:api-51c748b4-alerts","id":"arn:aws:sns:eu-west-2:540044833068:api-51c748b4-alerts","owner":"540044833068","policy":"{\"Statement\":[{\"Action\":\"sns:Publish\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"cloudwatch.amazonaws.com\"},\"Resource\":\"arn:aws:sns:eu-west-2:540044833068:api-51c748b4-alerts\",\"Sid\":\"AllowCloudWatchAlarms\"}],\"Version\":\"2012-10-17\"}"},"after":{"arn":"arn:aws:sns:eu-west-2:540044833068:api-51c748b4-alerts","id":"arn:aws:sns:eu-west-2:540044833068:api-51c748b4-alerts","owner":"540044833068","policy":"{\"Statement\":[{\"Action\":\"sns:Publish\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"cloudwatch.amazonaws.com\"},\"Resource\":\"arn:aws:sns:eu-west-2:540044833068:api-51c748b4-alerts\",\"Sid\":\"AllowCloudWatchAlarms\"}],\"Version\":\"2012-10-17\"}"},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.api_server.random_id.suffix[0]","module_address":"module.api_server","mode":"managed","type":"random_id","name":"suffix","index":0,"provider_name":"registry.terraform.io/hashicorp/random","change":{"actions":["no-op"],"before":{"b64_std":"UcdItA==","b64_url":"UcdItA","byte_length":4,"dec":"1372014772","hex":"51c748b4","id":"UcdItA","keepers":null,"prefix":null},"after":{"b64_std":"UcdItA==","b64_url":"UcdItA","byte_length":4,"dec":"1372014772","hex":"51c748b4","id":"UcdItA","keepers":null,"prefix":null},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.heritage[0].aws_autoscaling_group.my_asg","module_address":"module.heritage[0]","mode":"managed","type":"aws_autoscaling_group","name":"my_asg","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:autoscaling:eu-west-2:540044833068:autoScalingGroup:f58ef987-cb0b-45e2-92fa-de63356d33f4:autoScalingGroupName/asg-change-test-asg-terraform-example","availability_zone_distribution":[{"capacity_distribution_strategy":"balanced-best-effort"}],"availability_zones":["eu-west-2a","eu-west-2b"],"capacity_rebalance":false,"capacity_reservation_specification":[{"capacity_reservation_preference":"default","capacity_reservation_target":[]}],"context":"","default_cooldown":300,"default_instance_warmup":0,"desired_capacity":1,"desired_capacity_type":"","enabled_metrics":[],"force_delete":false,"force_delete_warm_pool":false,"health_check_grace_period":300,"health_check_type":"EC2","id":"asg-change-test-asg-terraform-example","ignore_failed_scaling_activities":false,"initial_lifecycle_hook":[],"instance_maintenance_policy":[],"instance_refresh":[],"launch_configuration":"","launch_template":[{"id":"lt-04dc7394984712fe8","name":"asg-change-launch-template-terraform-example2025111723203932490000000b","version":"$Latest"}],"load_balancers":[],"max_instance_lifetime":0,"max_size":2,"metrics_granularity":"1Minute","min_elb_capacity":null,"min_size":0,"mixed_instances_policy":[],"name":"asg-change-test-asg-terraform-example","name_prefix":"","placement_group":"","predicted_capacity":0,"protect_from_scale_in":false,"service_linked_role_arn":"arn:aws:iam::540044833068:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling","suspended_processes":[],"tag":[],"target_group_arns":["arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/asg-change-tg-terraform-example/d9fca32e6f2d362a"],"termination_policies":[],"timeouts":null,"traffic_source":[{"identifier":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/asg-change-tg-terraform-example/d9fca32e6f2d362a","type":"elbv2"}],"vpc_zone_identifier":["subnet-07fc72cf57c70e4f0","subnet-0a1b287732e8ad0b7"],"wait_for_capacity_timeout":"10m","wait_for_elb_capacity":null,"warm_pool":[],"warm_pool_size":0},"after":{"arn":"arn:aws:autoscaling:eu-west-2:540044833068:autoScalingGroup:f58ef987-cb0b-45e2-92fa-de63356d33f4:autoScalingGroupName/asg-change-test-asg-terraform-example","availability_zone_distribution":[{"capacity_distribution_strategy":"balanced-best-effort"}],"availability_zones":["eu-west-2a","eu-west-2b"],"capacity_rebalance":false,"capacity_reservation_specification":[{"capacity_reservation_preference":"default","capacity_reservation_target":[]}],"context":"","default_cooldown":300,"default_instance_warmup":0,"desired_capacity":1,"desired_capacity_type":"","enabled_metrics":[],"force_delete":false,"force_delete_warm_pool":false,"health_check_grace_period":300,"health_check_type":"EC2","id":"asg-change-test-asg-terraform-example","ignore_failed_scaling_activities":false,"initial_lifecycle_hook":[],"instance_maintenance_policy":[],"instance_refresh":[],"launch_configuration":"","launch_template":[{"id":"lt-04dc7394984712fe8","name":"asg-change-launch-template-terraform-example2025111723203932490000000b","version":"$Latest"}],"load_balancers":[],"max_instance_lifetime":0,"max_size":2,"metrics_granularity":"1Minute","min_elb_capacity":null,"min_size":0,"mixed_instances_policy":[],"name":"asg-change-test-asg-terraform-example","name_prefix":"","placement_group":"","predicted_capacity":0,"protect_from_scale_in":false,"service_linked_role_arn":"arn:aws:iam::540044833068:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling","suspended_processes":[],"tag":[],"target_group_arns":["arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/asg-change-tg-terraform-example/d9fca32e6f2d362a"],"termination_policies":[],"timeouts":null,"traffic_source":[{"identifier":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/asg-change-tg-terraform-example/d9fca32e6f2d362a","type":"elbv2"}],"vpc_zone_identifier":["subnet-07fc72cf57c70e4f0","subnet-0a1b287732e8ad0b7"],"wait_for_capacity_timeout":"10m","wait_for_elb_capacity":null,"warm_pool":[],"warm_pool_size":0},"after_unknown":{},"before_sensitive":{"availability_zone_distribution":[{}],"availability_zones":[false,false],"capacity_reservation_specification":[{"capacity_reservation_target":[]}],"enabled_metrics":[],"initial_lifecycle_hook":[],"instance_maintenance_policy":[],"instance_refresh":[],"launch_template":[{}],"load_balancers":[],"mixed_instances_policy":[],"suspended_processes":[],"tag":[],"target_group_arns":[false],"termination_policies":[],"traffic_source":[{}],"vpc_zone_identifier":[false,false],"warm_pool":[]},"after_sensitive":{"availability_zone_distribution":[{}],"availability_zones":[false,false],"capacity_reservation_specification":[{"capacity_reservation_target":[]}],"enabled_metrics":[],"initial_lifecycle_hook":[],"instance_maintenance_policy":[],"instance_refresh":[],"launch_template":[{}],"load_balancers":[],"mixed_instances_policy":[],"suspended_processes":[],"tag":[],"target_group_arns":[false],"termination_policies":[],"traffic_source":[{}],"vpc_zone_identifier":[false,false],"warm_pool":[]}}},{"address":"module.heritage[0].aws_cloudfront_cache_policy.headers_based_policy","module_address":"module.heritage[0]","mode":"managed","type":"aws_cloudfront_cache_policy","name":"headers_based_policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:cloudfront::540044833068:cache-policy/8e5fa4ea-50a6-44f8-86e8-3ca690bd9373","comment":"Cache policy that forwards Authorization and Accept-Language headers","default_ttl":86400,"etag":"E23ZP02F085DFQ","id":"8e5fa4ea-50a6-44f8-86e8-3ca690bd9373","max_ttl":31536000,"min_ttl":60,"name":"CacheHeadersBasedPolicy","parameters_in_cache_key_and_forwarded_to_origin":[{"cookies_config":[{"cookie_behavior":"none","cookies":[]}],"enable_accept_encoding_brotli":true,"enable_accept_encoding_gzip":true,"headers_config":[{"header_behavior":"whitelist","headers":[{"items":["Accept-Language","Authorization"]}]}],"query_strings_config":[{"query_string_behavior":"none","query_strings":[]}]}]},"after":{"arn":"arn:aws:cloudfront::540044833068:cache-policy/8e5fa4ea-50a6-44f8-86e8-3ca690bd9373","comment":"Cache policy that forwards Authorization and Accept-Language headers","default_ttl":86400,"etag":"E23ZP02F085DFQ","id":"8e5fa4ea-50a6-44f8-86e8-3ca690bd9373","max_ttl":31536000,"min_ttl":60,"name":"CacheHeadersBasedPolicy","parameters_in_cache_key_and_forwarded_to_origin":[{"cookies_config":[{"cookie_behavior":"none","cookies":[]}],"enable_accept_encoding_brotli":true,"enable_accept_encoding_gzip":true,"headers_config":[{"header_behavior":"whitelist","headers":[{"items":["Accept-Language","Authorization"]}]}],"query_strings_config":[{"query_string_behavior":"none","query_strings":[]}]}]},"after_unknown":{},"before_sensitive":{"parameters_in_cache_key_and_forwarded_to_origin":[{"cookies_config":[{"cookies":[]}],"headers_config":[{"headers":[{"items":[false,false]}]}],"query_strings_config":[{"query_strings":[]}]}]},"after_sensitive":{"parameters_in_cache_key_and_forwarded_to_origin":[{"cookies_config":[{"cookies":[]}],"headers_config":[{"headers":[{"items":[false,false]}]}],"query_strings_config":[{"query_strings":[]}]}]}}},{"address":"module.heritage[0].aws_cloudfront_distribution.s3_distribution","module_address":"module.heritage[0]","mode":"managed","type":"aws_cloudfront_distribution","name":"s3_distribution","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"aliases":[],"arn":"arn:aws:cloudfront::540044833068:distribution/E20U4HMGWRXZ4I","caller_reference":"terraform-20251117232026081500000009","comment":"Some comment","continuous_deployment_policy_id":"","custom_error_response":[],"default_cache_behavior":[{"allowed_methods":["DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT"],"cache_policy_id":"8e5fa4ea-50a6-44f8-86e8-3ca690bd9373","cached_methods":["GET","HEAD"],"compress":false,"default_ttl":0,"field_level_encryption_id":"","forwarded_values":[],"function_association":[],"grpc_config":[{"enabled":false}],"lambda_function_association":[],"max_ttl":0,"min_ttl":0,"origin_request_policy_id":"414eb566-4bb3-49d1-a868-0ee739830440","realtime_log_config_arn":"","response_headers_policy_id":"","smooth_streaming":false,"target_origin_id":"myS3Origin","trusted_key_groups":[],"trusted_signers":[],"viewer_protocol_policy":"redirect-to-https"}],"default_root_object":"index.html","domain_name":"d29emlm9rqxoo7.cloudfront.net","enabled":true,"etag":"E239IB0COYAEWZ","hosted_zone_id":"Z2FDTNDATAQYW2","http_version":"http2","id":"E20U4HMGWRXZ4I","in_progress_validation_batches":0,"is_ipv6_enabled":true,"last_modified_time":"2025-11-17 23:20:26.178 +0000 UTC","logging_config":[],"ordered_cache_behavior":[{"allowed_methods":["GET","HEAD","OPTIONS"],"cache_policy_id":"","cached_methods":["GET","HEAD","OPTIONS"],"compress":true,"default_ttl":0,"field_level_encryption_id":"","forwarded_values":[{"cookies":[{"forward":"none","whitelisted_names":[]}],"headers":["Origin"],"query_string":false,"query_string_cache_keys":[]}],"function_association":[],"grpc_config":[{"enabled":false}],"lambda_function_association":[],"max_ttl":0,"min_ttl":0,"origin_request_policy_id":"","path_pattern":"/content/immutable/*","realtime_log_config_arn":"","response_headers_policy_id":"c7fd455f-1fa8-4632-9a22-fef9a58b69a9","smooth_streaming":false,"target_origin_id":"myS3Origin","trusted_key_groups":[],"trusted_signers":[],"viewer_protocol_policy":"redirect-to-https"},{"allowed_methods":["GET","HEAD","OPTIONS"],"cache_policy_id":"8e5fa4ea-50a6-44f8-86e8-3ca690bd9373","cached_methods":["GET","HEAD"],"compress":true,"default_ttl":0,"field_level_encryption_id":"","forwarded_values":[],"function_association":[],"grpc_config":[{"enabled":false}],"lambda_function_association":[],"max_ttl":0,"min_ttl":0,"origin_request_policy_id":"414eb566-4bb3-49d1-a868-0ee739830440","path_pattern":"/content/*","realtime_log_config_arn":"","response_headers_policy_id":"","smooth_streaming":false,"target_origin_id":"myS3Origin","trusted_key_groups":[],"trusted_signers":[],"viewer_protocol_policy":"redirect-to-https"}],"origin":[{"connection_attempts":3,"connection_timeout":10,"custom_header":[],"custom_origin_config":[],"domain_name":"second-example-brave-crappie20251117232021571800000004.s3.eu-west-2.amazonaws.com","origin_access_control_id":"E2Z0P6Y1TOEHYP","origin_id":"myS3Origin","origin_path":"","origin_shield":[],"s3_origin_config":[],"vpc_origin_config":[]}],"origin_group":[],"price_class":"PriceClass_200","restrictions":[{"geo_restriction":[{"locations":["CA","DE","GB","US"],"restriction_type":"whitelist"}]}],"retain_on_delete":false,"staging":false,"status":"Deployed","tags":{"Environment":"production"},"tags_all":{"Environment":"production"},"trusted_key_groups":[{"enabled":false,"items":[]}],"trusted_signers":[{"enabled":false,"items":[]}],"viewer_certificate":[{"acm_certificate_arn":"","cloudfront_default_certificate":true,"iam_certificate_id":"","minimum_protocol_version":"TLSv1","ssl_support_method":""}],"wait_for_deployment":true,"web_acl_id":""},"after":{"aliases":[],"arn":"arn:aws:cloudfront::540044833068:distribution/E20U4HMGWRXZ4I","caller_reference":"terraform-20251117232026081500000009","comment":"Some comment","continuous_deployment_policy_id":"","custom_error_response":[],"default_cache_behavior":[{"allowed_methods":["DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT"],"cache_policy_id":"8e5fa4ea-50a6-44f8-86e8-3ca690bd9373","cached_methods":["GET","HEAD"],"compress":false,"default_ttl":0,"field_level_encryption_id":"","forwarded_values":[],"function_association":[],"grpc_config":[{"enabled":false}],"lambda_function_association":[],"max_ttl":0,"min_ttl":0,"origin_request_policy_id":"414eb566-4bb3-49d1-a868-0ee739830440","realtime_log_config_arn":"","response_headers_policy_id":"","smooth_streaming":false,"target_origin_id":"myS3Origin","trusted_key_groups":[],"trusted_signers":[],"viewer_protocol_policy":"redirect-to-https"}],"default_root_object":"index.html","domain_name":"d29emlm9rqxoo7.cloudfront.net","enabled":true,"etag":"E239IB0COYAEWZ","hosted_zone_id":"Z2FDTNDATAQYW2","http_version":"http2","id":"E20U4HMGWRXZ4I","in_progress_validation_batches":0,"is_ipv6_enabled":true,"last_modified_time":"2025-11-17 23:20:26.178 +0000 UTC","logging_config":[],"ordered_cache_behavior":[{"allowed_methods":["GET","HEAD","OPTIONS"],"cache_policy_id":"","cached_methods":["GET","HEAD","OPTIONS"],"compress":true,"default_ttl":0,"field_level_encryption_id":"","forwarded_values":[{"cookies":[{"forward":"none","whitelisted_names":[]}],"headers":["Origin"],"query_string":false,"query_string_cache_keys":[]}],"function_association":[],"grpc_config":[{"enabled":false}],"lambda_function_association":[],"max_ttl":0,"min_ttl":0,"origin_request_policy_id":"","path_pattern":"/content/immutable/*","realtime_log_config_arn":"","response_headers_policy_id":"c7fd455f-1fa8-4632-9a22-fef9a58b69a9","smooth_streaming":false,"target_origin_id":"myS3Origin","trusted_key_groups":[],"trusted_signers":[],"viewer_protocol_policy":"redirect-to-https"},{"allowed_methods":["GET","HEAD","OPTIONS"],"cache_policy_id":"8e5fa4ea-50a6-44f8-86e8-3ca690bd9373","cached_methods":["GET","HEAD"],"compress":true,"default_ttl":0,"field_level_encryption_id":"","forwarded_values":[],"function_association":[],"grpc_config":[{"enabled":false}],"lambda_function_association":[],"max_ttl":0,"min_ttl":0,"origin_request_policy_id":"414eb566-4bb3-49d1-a868-0ee739830440","path_pattern":"/content/*","realtime_log_config_arn":"","response_headers_policy_id":"","smooth_streaming":false,"target_origin_id":"myS3Origin","trusted_key_groups":[],"trusted_signers":[],"viewer_protocol_policy":"redirect-to-https"}],"origin":[{"connection_attempts":3,"connection_timeout":10,"custom_header":[],"custom_origin_config":[],"domain_name":"second-example-brave-crappie20251117232021571800000004.s3.eu-west-2.amazonaws.com","origin_access_control_id":"E2Z0P6Y1TOEHYP","origin_id":"myS3Origin","origin_path":"","origin_shield":[],"s3_origin_config":[],"vpc_origin_config":[]}],"origin_group":[],"price_class":"PriceClass_200","restrictions":[{"geo_restriction":[{"locations":["CA","DE","GB","US"],"restriction_type":"whitelist"}]}],"retain_on_delete":false,"staging":false,"status":"Deployed","tags":{"Environment":"production"},"tags_all":{"Environment":"production"},"trusted_key_groups":[{"enabled":false,"items":[]}],"trusted_signers":[{"enabled":false,"items":[]}],"viewer_certificate":[{"acm_certificate_arn":"","cloudfront_default_certificate":true,"iam_certificate_id":"","minimum_protocol_version":"TLSv1","ssl_support_method":""}],"wait_for_deployment":true,"web_acl_id":""},"after_unknown":{},"before_sensitive":{"aliases":[],"custom_error_response":[],"default_cache_behavior":[{"allowed_methods":[false,false,false,false,false,false,false],"cached_methods":[false,false],"forwarded_values":[],"function_association":[],"grpc_config":[{}],"lambda_function_association":[],"trusted_key_groups":[],"trusted_signers":[]}],"logging_config":[],"ordered_cache_behavior":[{"allowed_methods":[false,false,false],"cached_methods":[false,false,false],"forwarded_values":[{"cookies":[{"whitelisted_names":[]}],"headers":[false],"query_string_cache_keys":[]}],"function_association":[],"grpc_config":[{}],"lambda_function_association":[],"trusted_key_groups":[],"trusted_signers":[]},{"allowed_methods":[false,false,false],"cached_methods":[false,false],"forwarded_values":[],"function_association":[],"grpc_config":[{}],"lambda_function_association":[],"trusted_key_groups":[],"trusted_signers":[]}],"origin":[{"custom_header":[],"custom_origin_config":[],"origin_shield":[],"s3_origin_config":[],"vpc_origin_config":[]}],"origin_group":[],"restrictions":[{"geo_restriction":[{"locations":[false,false,false,false]}]}],"tags":{},"tags_all":{},"trusted_key_groups":[{"items":[]}],"trusted_signers":[{"items":[]}],"viewer_certificate":[{}]},"after_sensitive":{"aliases":[],"custom_error_response":[],"default_cache_behavior":[{"allowed_methods":[false,false,false,false,false,false,false],"cached_methods":[false,false],"forwarded_values":[],"function_association":[],"grpc_config":[{}],"lambda_function_association":[],"trusted_key_groups":[],"trusted_signers":[]}],"logging_config":[],"ordered_cache_behavior":[{"allowed_methods":[false,false,false],"cached_methods":[false,false,false],"forwarded_values":[{"cookies":[{"whitelisted_names":[]}],"headers":[false],"query_string_cache_keys":[]}],"function_association":[],"grpc_config":[{}],"lambda_function_association":[],"trusted_key_groups":[],"trusted_signers":[]},{"allowed_methods":[false,false,false],"cached_methods":[false,false],"forwarded_values":[],"function_association":[],"grpc_config":[{}],"lambda_function_association":[],"trusted_key_groups":[],"trusted_signers":[]}],"origin":[{"custom_header":[],"custom_origin_config":[],"origin_shield":[],"s3_origin_config":[],"vpc_origin_config":[]}],"origin_group":[],"restrictions":[{"geo_restriction":[{"locations":[false,false,false,false]}]}],"tags":{},"tags_all":{},"trusted_key_groups":[{"items":[]}],"trusted_signers":[{"items":[]}],"viewer_certificate":[{}]}}},{"address":"module.heritage[0].aws_cloudfront_distribution.visit_counter","module_address":"module.heritage[0]","mode":"managed","type":"aws_cloudfront_distribution","name":"visit_counter","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"aliases":[],"arn":"arn:aws:cloudfront::540044833068:distribution/E3LNWJXM6AF7NY","caller_reference":"terraform-20251117232423282000000017","comment":null,"continuous_deployment_policy_id":"","custom_error_response":[],"default_cache_behavior":[{"allowed_methods":["DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT"],"cache_policy_id":"8e5fa4ea-50a6-44f8-86e8-3ca690bd9373","cached_methods":["GET","HEAD"],"compress":false,"default_ttl":0,"field_level_encryption_id":"","forwarded_values":[],"function_association":[],"grpc_config":[{"enabled":false}],"lambda_function_association":[],"max_ttl":0,"min_ttl":0,"origin_request_policy_id":"414eb566-4bb3-49d1-a868-0ee739830440","realtime_log_config_arn":"","response_headers_policy_id":"c7fd455f-1fa8-4632-9a22-fef9a58b69a9","smooth_streaming":false,"target_origin_id":"visit-counter-ecs","trusted_key_groups":[],"trusted_signers":[],"viewer_protocol_policy":"redirect-to-https"}],"default_root_object":"index.html","domain_name":"d3qzo4ltspunma.cloudfront.net","enabled":true,"etag":"E3BS17IG773009","hosted_zone_id":"Z2FDTNDATAQYW2","http_version":"http2","id":"E3LNWJXM6AF7NY","in_progress_validation_batches":0,"is_ipv6_enabled":true,"last_modified_time":"2025-11-17 23:24:23.581 +0000 UTC","logging_config":[],"ordered_cache_behavior":[],"origin":[{"connection_attempts":3,"connection_timeout":10,"custom_header":[],"custom_origin_config":[{"http_port":80,"https_port":443,"origin_keepalive_timeout":5,"origin_protocol_policy":"http-only","origin_read_timeout":30,"origin_ssl_protocols":["TLSv1.1","TLSv1.2"]}],"domain_name":"visits-terraform-example.overmind-terraform-example.com","origin_access_control_id":"","origin_id":"visit-counter-ecs","origin_path":"","origin_shield":[],"s3_origin_config":[],"vpc_origin_config":[]}],"origin_group":[],"price_class":"PriceClass_All","restrictions":[{"geo_restriction":[{"locations":[],"restriction_type":"none"}]}],"retain_on_delete":false,"staging":false,"status":"Deployed","tags":{},"tags_all":{},"trusted_key_groups":[{"enabled":false,"items":[]}],"trusted_signers":[{"enabled":false,"items":[]}],"viewer_certificate":[{"acm_certificate_arn":"","cloudfront_default_certificate":true,"iam_certificate_id":"","minimum_protocol_version":"TLSv1","ssl_support_method":""}],"wait_for_deployment":true,"web_acl_id":""},"after":{"aliases":[],"arn":"arn:aws:cloudfront::540044833068:distribution/E3LNWJXM6AF7NY","caller_reference":"terraform-20251117232423282000000017","comment":null,"continuous_deployment_policy_id":"","custom_error_response":[],"default_cache_behavior":[{"allowed_methods":["DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT"],"cache_policy_id":"8e5fa4ea-50a6-44f8-86e8-3ca690bd9373","cached_methods":["GET","HEAD"],"compress":false,"default_ttl":0,"field_level_encryption_id":"","forwarded_values":[],"function_association":[],"grpc_config":[{"enabled":false}],"lambda_function_association":[],"max_ttl":0,"min_ttl":0,"origin_request_policy_id":"414eb566-4bb3-49d1-a868-0ee739830440","realtime_log_config_arn":"","response_headers_policy_id":"c7fd455f-1fa8-4632-9a22-fef9a58b69a9","smooth_streaming":false,"target_origin_id":"visit-counter-ecs","trusted_key_groups":[],"trusted_signers":[],"viewer_protocol_policy":"redirect-to-https"}],"default_root_object":"index.html","domain_name":"d3qzo4ltspunma.cloudfront.net","enabled":true,"etag":"E3BS17IG773009","hosted_zone_id":"Z2FDTNDATAQYW2","http_version":"http2","id":"E3LNWJXM6AF7NY","in_progress_validation_batches":0,"is_ipv6_enabled":true,"last_modified_time":"2025-11-17 23:24:23.581 +0000 UTC","logging_config":[],"ordered_cache_behavior":[],"origin":[{"connection_attempts":3,"connection_timeout":10,"custom_header":[],"custom_origin_config":[{"http_port":80,"https_port":443,"origin_keepalive_timeout":5,"origin_protocol_policy":"http-only","origin_read_timeout":30,"origin_ssl_protocols":["TLSv1.1","TLSv1.2"]}],"domain_name":"visits-terraform-example.overmind-terraform-example.com","origin_access_control_id":"","origin_id":"visit-counter-ecs","origin_path":"","origin_shield":[],"s3_origin_config":[],"vpc_origin_config":[]}],"origin_group":[],"price_class":"PriceClass_All","restrictions":[{"geo_restriction":[{"locations":[],"restriction_type":"none"}]}],"retain_on_delete":false,"staging":false,"status":"Deployed","tags":{},"tags_all":{},"trusted_key_groups":[{"enabled":false,"items":[]}],"trusted_signers":[{"enabled":false,"items":[]}],"viewer_certificate":[{"acm_certificate_arn":"","cloudfront_default_certificate":true,"iam_certificate_id":"","minimum_protocol_version":"TLSv1","ssl_support_method":""}],"wait_for_deployment":true,"web_acl_id":""},"after_unknown":{},"before_sensitive":{"aliases":[],"custom_error_response":[],"default_cache_behavior":[{"allowed_methods":[false,false,false,false,false,false,false],"cached_methods":[false,false],"forwarded_values":[],"function_association":[],"grpc_config":[{}],"lambda_function_association":[],"trusted_key_groups":[],"trusted_signers":[]}],"logging_config":[],"ordered_cache_behavior":[],"origin":[{"custom_header":[],"custom_origin_config":[{"origin_ssl_protocols":[false,false]}],"origin_shield":[],"s3_origin_config":[],"vpc_origin_config":[]}],"origin_group":[],"restrictions":[{"geo_restriction":[{"locations":[]}]}],"tags":{},"tags_all":{},"trusted_key_groups":[{"items":[]}],"trusted_signers":[{"items":[]}],"viewer_certificate":[{}]},"after_sensitive":{"aliases":[],"custom_error_response":[],"default_cache_behavior":[{"allowed_methods":[false,false,false,false,false,false,false],"cached_methods":[false,false],"forwarded_values":[],"function_association":[],"grpc_config":[{}],"lambda_function_association":[],"trusted_key_groups":[],"trusted_signers":[]}],"logging_config":[],"ordered_cache_behavior":[],"origin":[{"custom_header":[],"custom_origin_config":[{"origin_ssl_protocols":[false,false]}],"origin_shield":[],"s3_origin_config":[],"vpc_origin_config":[]}],"origin_group":[],"restrictions":[{"geo_restriction":[{"locations":[]}]}],"tags":{},"tags_all":{},"trusted_key_groups":[{"items":[]}],"trusted_signers":[{"items":[]}],"viewer_certificate":[{}]}}},{"address":"module.heritage[0].aws_cloudfront_function.example","module_address":"module.heritage[0]","mode":"managed","type":"aws_cloudfront_function","name":"example","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:cloudfront::540044833068:function/terraform-example-adequate-gibbon","code":"function handler(event) {\n    // NOTE: This example function is for a viewer request event trigger. \n    // Choose viewer request for event trigger when you associate this function with a distribution. \n    var response = {\n        statusCode: 302,\n        statusDescription: 'Found',\n        headers: {\n        'cloudfront-functions': { value: 'generated-by-CloudFront-Functions' },\n        'location': { value: 'https://aws.amazon.com/cloudfront/' }\n        }\n    };\n    return response;\n}","comment":"","etag":"ETVPDKIKX0DER","id":"terraform-example-adequate-gibbon","key_value_store_associations":[],"live_stage_etag":"ETVPDKIKX0DER","name":"terraform-example-adequate-gibbon","publish":true,"runtime":"cloudfront-js-1.0","status":"DEPLOYED"},"after":{"arn":"arn:aws:cloudfront::540044833068:function/terraform-example-adequate-gibbon","code":"function handler(event) {\n    // NOTE: This example function is for a viewer request event trigger. \n    // Choose viewer request for event trigger when you associate this function with a distribution. \n    var response = {\n        statusCode: 302,\n        statusDescription: 'Found',\n        headers: {\n        'cloudfront-functions': { value: 'generated-by-CloudFront-Functions' },\n        'location': { value: 'https://aws.amazon.com/cloudfront/' }\n        }\n    };\n    return response;\n}","comment":"","etag":"ETVPDKIKX0DER","id":"terraform-example-adequate-gibbon","key_value_store_associations":[],"live_stage_etag":"ETVPDKIKX0DER","name":"terraform-example-adequate-gibbon","publish":true,"runtime":"cloudfront-js-1.0","status":"DEPLOYED"},"after_unknown":{},"before_sensitive":{"key_value_store_associations":[]},"after_sensitive":{"key_value_store_associations":[]}}},{"address":"module.heritage[0].aws_cloudfront_origin_access_control.b","module_address":"module.heritage[0]","mode":"managed","type":"aws_cloudfront_origin_access_control","name":"b","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:cloudfront::540044833068:origin-access-control/E2Z0P6Y1TOEHYP","description":"Example Policy","etag":"ETVPDKIKX0DER","id":"E2Z0P6Y1TOEHYP","name":"example-terraform-example","origin_access_control_origin_type":"s3","signing_behavior":"always","signing_protocol":"sigv4"},"after":{"arn":"arn:aws:cloudfront::540044833068:origin-access-control/E2Z0P6Y1TOEHYP","description":"Example Policy","etag":"ETVPDKIKX0DER","id":"E2Z0P6Y1TOEHYP","name":"example-terraform-example","origin_access_control_origin_type":"s3","signing_behavior":"always","signing_protocol":"sigv4"},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.heritage[0].aws_cloudfront_origin_request_policy.headers_based_policy","module_address":"module.heritage[0]","mode":"managed","type":"aws_cloudfront_origin_request_policy","name":"headers_based_policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:cloudfront::540044833068:origin-request-policy/414eb566-4bb3-49d1-a868-0ee739830440","comment":"This policy forwards specific headers to the origin","cookies_config":[{"cookie_behavior":"none","cookies":[]}],"etag":"E23ZP02F085DFQ","headers_config":[{"header_behavior":"whitelist","headers":[{"items":["User-Agent"]}]}],"id":"414eb566-4bb3-49d1-a868-0ee739830440","name":"OriginHeadersBasedPolicy","query_strings_config":[{"query_string_behavior":"none","query_strings":[]}]},"after":{"arn":"arn:aws:cloudfront::540044833068:origin-request-policy/414eb566-4bb3-49d1-a868-0ee739830440","comment":"This policy forwards specific headers to the origin","cookies_config":[{"cookie_behavior":"none","cookies":[]}],"etag":"E23ZP02F085DFQ","headers_config":[{"header_behavior":"whitelist","headers":[{"items":["User-Agent"]}]}],"id":"414eb566-4bb3-49d1-a868-0ee739830440","name":"OriginHeadersBasedPolicy","query_strings_config":[{"query_string_behavior":"none","query_strings":[]}]},"after_unknown":{},"before_sensitive":{"cookies_config":[{"cookies":[]}],"headers_config":[{"headers":[{"items":[false]}]}],"query_strings_config":[{"query_strings":[]}]},"after_sensitive":{"cookies_config":[{"cookies":[]}],"headers_config":[{"headers":[{"items":[false]}]}],"query_strings_config":[{"query_strings":[]}]}}},{"address":"module.heritage[0].aws_cloudfront_response_headers_policy.headers-policy","module_address":"module.heritage[0]","mode":"managed","type":"aws_cloudfront_response_headers_policy","name":"headers-policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:cloudfront::540044833068:response-headers-policy/c7fd455f-1fa8-4632-9a22-fef9a58b69a9","comment":"This controls which headers are cached for baseline applications. This includes headers that are safe to cache","cors_config":[{"access_control_allow_credentials":false,"access_control_allow_headers":[{"items":["Accept","Accept-Encoding","Content-Encoding","Content-Length","Content-Type"]}],"access_control_allow_methods":[{"items":["GET"]}],"access_control_allow_origins":[{"items":["storage.overmind-demo.com"]}],"access_control_expose_headers":[],"access_control_max_age_sec":0,"origin_override":true}],"custom_headers_config":[],"etag":"E23ZP02F085DFQ","id":"c7fd455f-1fa8-4632-9a22-fef9a58b69a9","name":"baseline-terraform-example","remove_headers_config":[],"security_headers_config":[],"server_timing_headers_config":[]},"after":{"arn":"arn:aws:cloudfront::540044833068:response-headers-policy/c7fd455f-1fa8-4632-9a22-fef9a58b69a9","comment":"This controls which headers are cached for baseline applications. This includes headers that are safe to cache","cors_config":[{"access_control_allow_credentials":false,"access_control_allow_headers":[{"items":["Accept","Accept-Encoding","Content-Encoding","Content-Length","Content-Type"]}],"access_control_allow_methods":[{"items":["GET"]}],"access_control_allow_origins":[{"items":["storage.overmind-demo.com"]}],"access_control_expose_headers":[],"access_control_max_age_sec":0,"origin_override":true}],"custom_headers_config":[],"etag":"E23ZP02F085DFQ","id":"c7fd455f-1fa8-4632-9a22-fef9a58b69a9","name":"baseline-terraform-example","remove_headers_config":[],"security_headers_config":[],"server_timing_headers_config":[]},"after_unknown":{},"before_sensitive":{"cors_config":[{"access_control_allow_headers":[{"items":[false,false,false,false,false]}],"access_control_allow_methods":[{"items":[false]}],"access_control_allow_origins":[{"items":[false]}],"access_control_expose_headers":[]}],"custom_headers_config":[],"remove_headers_config":[],"security_headers_config":[],"server_timing_headers_config":[]},"after_sensitive":{"cors_config":[{"access_control_allow_headers":[{"items":[false,false,false,false,false]}],"access_control_allow_methods":[{"items":[false]}],"access_control_allow_origins":[{"items":[false]}],"access_control_expose_headers":[]}],"custom_headers_config":[],"remove_headers_config":[],"security_headers_config":[],"server_timing_headers_config":[]}}},{"address":"module.heritage[0].aws_db_subnet_group.default","module_address":"module.heritage[0]","mode":"managed","type":"aws_db_subnet_group","name":"default","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:rds:eu-west-2:540044833068:subgrp:main-terraform-example","description":"Managed by Terraform","id":"main-terraform-example","name":"main-terraform-example","name_prefix":"","subnet_ids":["subnet-09605cfe202ef69e7","subnet-0eae990ebecf2d640"],"supported_network_types":["IPV4"],"tags":{"Name":"Default DB Subnet Group for terraform-example"},"tags_all":{"Name":"Default DB Subnet Group for terraform-example"},"vpc_id":"vpc-02901bcbb89561298"},"after":{"arn":"arn:aws:rds:eu-west-2:540044833068:subgrp:main-terraform-example","description":"Managed by Terraform","id":"main-terraform-example","name":"main-terraform-example","name_prefix":"","subnet_ids":["subnet-09605cfe202ef69e7","subnet-0eae990ebecf2d640"],"supported_network_types":["IPV4"],"tags":{"Name":"Default DB Subnet Group for terraform-example"},"tags_all":{"Name":"Default DB Subnet Group for terraform-example"},"vpc_id":"vpc-02901bcbb89561298"},"after_unknown":{},"before_sensitive":{"subnet_ids":[false,false],"supported_network_types":[false],"tags":{},"tags_all":{}},"after_sensitive":{"subnet_ids":[false,false],"supported_network_types":[false],"tags":{},"tags_all":{}}}},{"address":"module.heritage[0].aws_ecs_service.face","module_address":"module.heritage[0]","mode":"managed","type":"aws_ecs_service","name":"face","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"alarms":[],"availability_zone_rebalancing":"DISABLED","capacity_provider_strategy":[{"base":0,"capacity_provider":"FARGATE","weight":100}],"cluster":"arn:aws:ecs:eu-west-2:540044833068:cluster/example-terraform-example","deployment_circuit_breaker":[{"enable":false,"rollback":false}],"deployment_controller":[{"type":"ECS"}],"deployment_maximum_percent":200,"deployment_minimum_healthy_percent":100,"desired_count":1,"enable_ecs_managed_tags":false,"enable_execute_command":false,"force_delete":null,"force_new_deployment":null,"health_check_grace_period_seconds":0,"iam_role":"/aws-service-role/ecs.amazonaws.com/AWSServiceRoleForECS","id":"arn:aws:ecs:eu-west-2:540044833068:service/example-terraform-example/facial-recognition","launch_type":"","load_balancer":[{"container_name":"facial-recognition","container_port":1234,"elb_name":"","target_group_arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/facerec-terraform-example/ccde9b5e810e9a5d"}],"name":"facial-recognition","network_configuration":[{"assign_public_ip":false,"security_groups":["sg-0159f0e3d8224d441"],"subnets":["subnet-09605cfe202ef69e7","subnet-0eae990ebecf2d640"]}],"ordered_placement_strategy":[],"placement_constraints":[],"platform_version":"LATEST","propagate_tags":"NONE","scheduling_strategy":"REPLICA","service_connect_configuration":[],"service_registries":[],"tags":{},"tags_all":{},"task_definition":"arn:aws:ecs:eu-west-2:540044833068:task-definition/facial-recognition-terraform-example:9","timeouts":null,"triggers":{},"volume_configuration":[],"vpc_lattice_configurations":[],"wait_for_steady_state":false},"after":{"alarms":[],"availability_zone_rebalancing":"DISABLED","capacity_provider_strategy":[{"base":0,"capacity_provider":"FARGATE","weight":100}],"cluster":"arn:aws:ecs:eu-west-2:540044833068:cluster/example-terraform-example","deployment_circuit_breaker":[{"enable":false,"rollback":false}],"deployment_controller":[{"type":"ECS"}],"deployment_maximum_percent":200,"deployment_minimum_healthy_percent":100,"desired_count":1,"enable_ecs_managed_tags":false,"enable_execute_command":false,"force_delete":null,"force_new_deployment":null,"health_check_grace_period_seconds":0,"iam_role":"/aws-service-role/ecs.amazonaws.com/AWSServiceRoleForECS","id":"arn:aws:ecs:eu-west-2:540044833068:service/example-terraform-example/facial-recognition","launch_type":"","load_balancer":[{"container_name":"facial-recognition","container_port":1234,"elb_name":"","target_group_arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/facerec-terraform-example/ccde9b5e810e9a5d"}],"name":"facial-recognition","network_configuration":[{"assign_public_ip":false,"security_groups":["sg-0159f0e3d8224d441"],"subnets":["subnet-09605cfe202ef69e7","subnet-0eae990ebecf2d640"]}],"ordered_placement_strategy":[],"placement_constraints":[],"platform_version":"LATEST","propagate_tags":"NONE","scheduling_strategy":"REPLICA","service_connect_configuration":[],"service_registries":[],"tags":{},"tags_all":{},"task_definition":"arn:aws:ecs:eu-west-2:540044833068:task-definition/facial-recognition-terraform-example:9","timeouts":null,"triggers":{},"volume_configuration":[],"vpc_lattice_configurations":[],"wait_for_steady_state":false},"after_unknown":{},"before_sensitive":{"alarms":[],"capacity_provider_strategy":[{}],"deployment_circuit_breaker":[{}],"deployment_controller":[{}],"load_balancer":[{}],"network_configuration":[{"security_groups":[false],"subnets":[false,false]}],"ordered_placement_strategy":[],"placement_constraints":[],"service_connect_configuration":[],"service_registries":[],"tags":{},"tags_all":{},"triggers":{},"volume_configuration":[],"vpc_lattice_configurations":[]},"after_sensitive":{"alarms":[],"capacity_provider_strategy":[{}],"deployment_circuit_breaker":[{}],"deployment_controller":[{}],"load_balancer":[{}],"network_configuration":[{"security_groups":[false],"subnets":[false,false]}],"ordered_placement_strategy":[],"placement_constraints":[],"service_connect_configuration":[],"service_registries":[],"tags":{},"tags_all":{},"triggers":{},"volume_configuration":[],"vpc_lattice_configurations":[]}}},{"address":"module.heritage[0].aws_ecs_service.visit_counter","module_address":"module.heritage[0]","mode":"managed","type":"aws_ecs_service","name":"visit_counter","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"alarms":[],"availability_zone_rebalancing":"DISABLED","capacity_provider_strategy":[{"base":0,"capacity_provider":"FARGATE","weight":100}],"cluster":"arn:aws:ecs:eu-west-2:540044833068:cluster/example-terraform-example","deployment_circuit_breaker":[{"enable":false,"rollback":false}],"deployment_controller":[{"type":"ECS"}],"deployment_maximum_percent":200,"deployment_minimum_healthy_percent":100,"desired_count":1,"enable_ecs_managed_tags":false,"enable_execute_command":false,"force_delete":null,"force_new_deployment":null,"health_check_grace_period_seconds":0,"iam_role":"/aws-service-role/ecs.amazonaws.com/AWSServiceRoleForECS","id":"arn:aws:ecs:eu-west-2:540044833068:service/example-terraform-example/visit-counter","launch_type":"","load_balancer":[{"container_name":"visit-counter","container_port":80,"elb_name":"","target_group_arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/visit-counter-terraform-example/5683104d7610bc44"}],"name":"visit-counter","network_configuration":[{"assign_public_ip":false,"security_groups":["sg-0159f0e3d8224d441"],"subnets":["subnet-09605cfe202ef69e7","subnet-0eae990ebecf2d640"]}],"ordered_placement_strategy":[],"placement_constraints":[],"platform_version":"LATEST","propagate_tags":"NONE","scheduling_strategy":"REPLICA","service_connect_configuration":[],"service_registries":[],"tags":{},"tags_all":{},"task_definition":"arn:aws:ecs:eu-west-2:540044833068:task-definition/visit-counter-terraform-example:11","timeouts":null,"triggers":{},"volume_configuration":[],"vpc_lattice_configurations":[],"wait_for_steady_state":false},"after":{"alarms":[],"availability_zone_rebalancing":"DISABLED","capacity_provider_strategy":[{"base":0,"capacity_provider":"FARGATE","weight":100}],"cluster":"arn:aws:ecs:eu-west-2:540044833068:cluster/example-terraform-example","deployment_circuit_breaker":[{"enable":false,"rollback":false}],"deployment_controller":[{"type":"ECS"}],"deployment_maximum_percent":200,"deployment_minimum_healthy_percent":100,"desired_count":1,"enable_ecs_managed_tags":false,"enable_execute_command":false,"force_delete":null,"force_new_deployment":null,"health_check_grace_period_seconds":0,"iam_role":"/aws-service-role/ecs.amazonaws.com/AWSServiceRoleForECS","id":"arn:aws:ecs:eu-west-2:540044833068:service/example-terraform-example/visit-counter","launch_type":"","load_balancer":[{"container_name":"visit-counter","container_port":80,"elb_name":"","target_group_arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/visit-counter-terraform-example/5683104d7610bc44"}],"name":"visit-counter","network_configuration":[{"assign_public_ip":false,"security_groups":["sg-0159f0e3d8224d441"],"subnets":["subnet-09605cfe202ef69e7","subnet-0eae990ebecf2d640"]}],"ordered_placement_strategy":[],"placement_constraints":[],"platform_version":"LATEST","propagate_tags":"NONE","scheduling_strategy":"REPLICA","service_connect_configuration":[],"service_registries":[],"tags":{},"tags_all":{},"task_definition":"arn:aws:ecs:eu-west-2:540044833068:task-definition/visit-counter-terraform-example:11","timeouts":null,"triggers":{},"volume_configuration":[],"vpc_lattice_configurations":[],"wait_for_steady_state":false},"after_unknown":{},"before_sensitive":{"alarms":[],"capacity_provider_strategy":[{}],"deployment_circuit_breaker":[{}],"deployment_controller":[{}],"load_balancer":[{}],"network_configuration":[{"security_groups":[false],"subnets":[false,false]}],"ordered_placement_strategy":[],"placement_constraints":[],"service_connect_configuration":[],"service_registries":[],"tags":{},"tags_all":{},"triggers":{},"volume_configuration":[],"vpc_lattice_configurations":[]},"after_sensitive":{"alarms":[],"capacity_provider_strategy":[{}],"deployment_circuit_breaker":[{}],"deployment_controller":[{}],"load_balancer":[{}],"network_configuration":[{"security_groups":[false],"subnets":[false,false]}],"ordered_placement_strategy":[],"placement_constraints":[],"service_connect_configuration":[],"service_registries":[],"tags":{},"tags_all":{},"triggers":{},"volume_configuration":[],"vpc_lattice_configurations":[]}}},{"address":"module.heritage[0].aws_ecs_task_definition.face","module_address":"module.heritage[0]","mode":"managed","type":"aws_ecs_task_definition","name":"face","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ecs:eu-west-2:540044833068:task-definition/facial-recognition-terraform-example:9","arn_without_revision":"arn:aws:ecs:eu-west-2:540044833068:task-definition/facial-recognition-terraform-example","container_definitions":"[{\"cpu\":1024,\"environment\":[{\"name\":\"DATABASE_URL\",\"value\":\"tf-20251117235257281600000001.cnx7xf6hwmba.eu-west-2.rds.amazonaws.com\"}],\"essential\":true,\"healthCheck\":{\"command\":[\"CMD-SHELL\",\"wget -q --spider localhost:1234\"],\"interval\":30,\"retries\":3,\"timeout\":5},\"image\":\"harshmanvar/face-detection-tensorjs:slim-amd\",\"memory\":2048,\"mountPoints\":[],\"name\":\"facial-recognition\",\"portMappings\":[{\"appProtocol\":\"http\",\"containerPort\":1234,\"hostPort\":1234,\"protocol\":\"tcp\"}],\"systemControls\":[],\"volumesFrom\":[]}]","cpu":"1024","enable_fault_injection":false,"ephemeral_storage":[],"execution_role_arn":"","family":"facial-recognition-terraform-example","id":"facial-recognition-terraform-example","inference_accelerator":[],"ipc_mode":"","memory":"2048","network_mode":"awsvpc","pid_mode":"","placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":["FARGATE"],"revision":9,"runtime_platform":[],"skip_destroy":false,"tags":{},"tags_all":{},"task_role_arn":"","track_latest":false,"volume":[]},"after":{"arn":"arn:aws:ecs:eu-west-2:540044833068:task-definition/facial-recognition-terraform-example:9","arn_without_revision":"arn:aws:ecs:eu-west-2:540044833068:task-definition/facial-recognition-terraform-example","container_definitions":"[{\"cpu\":1024,\"environment\":[{\"name\":\"DATABASE_URL\",\"value\":\"tf-20251117235257281600000001.cnx7xf6hwmba.eu-west-2.rds.amazonaws.com\"}],\"essential\":true,\"healthCheck\":{\"command\":[\"CMD-SHELL\",\"wget -q --spider localhost:1234\"],\"interval\":30,\"retries\":3,\"timeout\":5},\"image\":\"harshmanvar/face-detection-tensorjs:slim-amd\",\"memory\":2048,\"mountPoints\":[],\"name\":\"facial-recognition\",\"portMappings\":[{\"appProtocol\":\"http\",\"containerPort\":1234,\"hostPort\":1234,\"protocol\":\"tcp\"}],\"systemControls\":[],\"volumesFrom\":[]}]","cpu":"1024","enable_fault_injection":false,"ephemeral_storage":[],"execution_role_arn":"","family":"facial-recognition-terraform-example","id":"facial-recognition-terraform-example","inference_accelerator":[],"ipc_mode":"","memory":"2048","network_mode":"awsvpc","pid_mode":"","placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":["FARGATE"],"revision":9,"runtime_platform":[],"skip_destroy":false,"tags":{},"tags_all":{},"task_role_arn":"","track_latest":false,"volume":[]},"after_unknown":{},"before_sensitive":{"ephemeral_storage":[],"inference_accelerator":[],"placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":[false],"runtime_platform":[],"tags":{},"tags_all":{},"volume":[]},"after_sensitive":{"ephemeral_storage":[],"inference_accelerator":[],"placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":[false],"runtime_platform":[],"tags":{},"tags_all":{},"volume":[]}}},{"address":"module.heritage[0].aws_ecs_task_definition.visit_counter","module_address":"module.heritage[0]","mode":"managed","type":"aws_ecs_task_definition","name":"visit_counter","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ecs:eu-west-2:540044833068:task-definition/visit-counter-terraform-example:11","arn_without_revision":"arn:aws:ecs:eu-west-2:540044833068:task-definition/visit-counter-terraform-example","container_definitions":"[{\"cpu\":256,\"environment\":[{\"name\":\"FACIAL_RECOGNITION_SERVICE\",\"value\":\"face-terraform-example.overmind-terraform-example.com\"},{\"name\":\"FACIAL_RECOGNITION_SERVICE_USER\",\"value\":\"facerec\"}],\"essential\":true,\"healthCheck\":{\"command\":[\"CMD-SHELL\",\"curl -f http://localhost:80 || exit 1\"],\"interval\":30,\"retries\":3,\"timeout\":5},\"image\":\"yeasy/simple-web:latest\",\"memory\":512,\"mountPoints\":[],\"name\":\"visit-counter\",\"portMappings\":[{\"appProtocol\":\"http\",\"containerPort\":80,\"hostPort\":80,\"protocol\":\"tcp\"}],\"systemControls\":[],\"volumesFrom\":[]}]","cpu":"256","enable_fault_injection":false,"ephemeral_storage":[],"execution_role_arn":"","family":"visit-counter-terraform-example","id":"visit-counter-terraform-example","inference_accelerator":[],"ipc_mode":"","memory":"512","network_mode":"awsvpc","pid_mode":"","placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":["FARGATE"],"revision":11,"runtime_platform":[],"skip_destroy":false,"tags":{},"tags_all":{},"task_role_arn":"","track_latest":false,"volume":[]},"after":{"arn":"arn:aws:ecs:eu-west-2:540044833068:task-definition/visit-counter-terraform-example:11","arn_without_revision":"arn:aws:ecs:eu-west-2:540044833068:task-definition/visit-counter-terraform-example","container_definitions":"[{\"cpu\":256,\"environment\":[{\"name\":\"FACIAL_RECOGNITION_SERVICE\",\"value\":\"face-terraform-example.overmind-terraform-example.com\"},{\"name\":\"FACIAL_RECOGNITION_SERVICE_USER\",\"value\":\"facerec\"}],\"essential\":true,\"healthCheck\":{\"command\":[\"CMD-SHELL\",\"curl -f http://localhost:80 || exit 1\"],\"interval\":30,\"retries\":3,\"timeout\":5},\"image\":\"yeasy/simple-web:latest\",\"memory\":512,\"mountPoints\":[],\"name\":\"visit-counter\",\"portMappings\":[{\"appProtocol\":\"http\",\"containerPort\":80,\"hostPort\":80,\"protocol\":\"tcp\"}],\"systemControls\":[],\"volumesFrom\":[]}]","cpu":"256","enable_fault_injection":false,"ephemeral_storage":[],"execution_role_arn":"","family":"visit-counter-terraform-example","id":"visit-counter-terraform-example","inference_accelerator":[],"ipc_mode":"","memory":"512","network_mode":"awsvpc","pid_mode":"","placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":["FARGATE"],"revision":11,"runtime_platform":[],"skip_destroy":false,"tags":{},"tags_all":{},"task_role_arn":"","track_latest":false,"volume":[]},"after_unknown":{},"before_sensitive":{"ephemeral_storage":[],"inference_accelerator":[],"placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":[false],"runtime_platform":[],"tags":{},"tags_all":{},"volume":[]},"after_sensitive":{"ephemeral_storage":[],"inference_accelerator":[],"placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":[false],"runtime_platform":[],"tags":{},"tags_all":{},"volume":[]}}},{"address":"module.heritage[0].aws_iam_role.lambda_iam_role","module_address":"module.heritage[0]","mode":"managed","type":"aws_iam_role","name":"lambda_iam_role","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:iam::540044833068:role/-terraform-example_lambda_iam_role","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}","create_date":"2025-11-17T23:20:21Z","description":"","force_detach_policies":false,"id":"-terraform-example_lambda_iam_role","inline_policy":[],"managed_policy_arns":[],"max_session_duration":3600,"name":"-terraform-example_lambda_iam_role","name_prefix":"","path":"/","permissions_boundary":"","tags":{},"tags_all":{},"unique_id":"AROAX3PJOGEWBYSCV5QFP"},"after":{"arn":"arn:aws:iam::540044833068:role/-terraform-example_lambda_iam_role","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}","create_date":"2025-11-17T23:20:21Z","description":"","force_detach_policies":false,"id":"-terraform-example_lambda_iam_role","inline_policy":[],"managed_policy_arns":[],"max_session_duration":3600,"name":"-terraform-example_lambda_iam_role","name_prefix":"","path":"/","permissions_boundary":"","tags":{},"tags_all":{},"unique_id":"AROAX3PJOGEWBYSCV5QFP"},"after_unknown":{},"before_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags":{},"tags_all":{}},"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags":{},"tags_all":{}}}},{"address":"module.heritage[0].aws_instance.app_server","module_address":"module.heritage[0]","mode":"managed","type":"aws_instance","name":"app_server","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"ami":"ami-0ad8de99ac93341e7","arn":"arn:aws:ec2:eu-west-2:540044833068:instance/i-07072e97b42111cc0","associate_public_ip_address":true,"availability_zone":"eu-west-2b","capacity_reservation_specification":[{"capacity_reservation_preference":"open","capacity_reservation_target":[]}],"cpu_core_count":1,"cpu_options":[{"amd_sev_snp":"","core_count":1,"threads_per_core":2}],"cpu_threads_per_core":2,"credit_specification":[{"cpu_credits":"unlimited"}],"disable_api_stop":false,"disable_api_termination":false,"ebs_block_device":[],"ebs_optimized":false,"enable_primary_ipv6":null,"enclave_options":[{"enabled":false}],"ephemeral_block_device":[],"get_password_data":false,"hibernation":false,"host_id":"","host_resource_group_arn":null,"iam_instance_profile":"","id":"i-07072e97b42111cc0","instance_initiated_shutdown_behavior":"stop","instance_lifecycle":"","instance_market_options":[],"instance_state":"running","instance_type":"t3.small","ipv6_address_count":0,"ipv6_addresses":[],"key_name":"Demo Key Pair","launch_template":[],"maintenance_options":[{"auto_recovery":"default"}],"metadata_options":[{"http_endpoint":"enabled","http_protocol_ipv6":"disabled","http_put_response_hop_limit":1,"http_tokens":"optional","instance_metadata_tags":"disabled"}],"monitoring":false,"network_interface":[],"outpost_arn":"","password_data":"","placement_group":"","placement_partition_number":0,"primary_network_interface_id":"eni-04aaec985117a0700","private_dns":"ip-10-0-10-216.eu-west-2.compute.internal","private_dns_name_options":[{"enable_resource_name_dns_a_record":false,"enable_resource_name_dns_aaaa_record":false,"hostname_type":"ip-name"}],"private_ip":"10.0.10.216","public_dns":"ec2-18-133-252-243.eu-west-2.compute.amazonaws.com","public_ip":"18.133.252.243","root_block_device":[{"delete_on_termination":true,"device_name":"/dev/xvda","encrypted":false,"iops":100,"kms_key_id":"","tags":{},"tags_all":{},"throughput":0,"volume_id":"vol-0cbfb7fc868dce7f5","volume_size":8,"volume_type":"gp2"}],"secondary_private_ips":[],"security_groups":[],"source_dest_check":true,"spot_instance_request_id":"","subnet_id":"subnet-0e4cc60d35634e85b","tags":{"Environment":"dev","Name":"App Server"},"tags_all":{"Environment":"dev","Name":"App Server"},"tenancy":"default","timeouts":null,"user_data":null,"user_data_base64":null,"user_data_replace_on_change":false,"volume_tags":null,"vpc_security_group_ids":["sg-057ed2204f81107a5"]},"after":{"ami":"ami-0ad8de99ac93341e7","arn":"arn:aws:ec2:eu-west-2:540044833068:instance/i-07072e97b42111cc0","associate_public_ip_address":true,"availability_zone":"eu-west-2b","capacity_reservation_specification":[{"capacity_reservation_preference":"open","capacity_reservation_target":[]}],"cpu_core_count":1,"cpu_options":[{"amd_sev_snp":"","core_count":1,"threads_per_core":2}],"cpu_threads_per_core":2,"credit_specification":[{"cpu_credits":"unlimited"}],"disable_api_stop":false,"disable_api_termination":false,"ebs_block_device":[],"ebs_optimized":false,"enable_primary_ipv6":null,"enclave_options":[{"enabled":false}],"ephemeral_block_device":[],"get_password_data":false,"hibernation":false,"host_id":"","host_resource_group_arn":null,"iam_instance_profile":"","id":"i-07072e97b42111cc0","instance_initiated_shutdown_behavior":"stop","instance_lifecycle":"","instance_market_options":[],"instance_state":"running","instance_type":"t3.small","ipv6_address_count":0,"ipv6_addresses":[],"key_name":"Demo Key Pair","launch_template":[],"maintenance_options":[{"auto_recovery":"default"}],"metadata_options":[{"http_endpoint":"enabled","http_protocol_ipv6":"disabled","http_put_response_hop_limit":1,"http_tokens":"optional","instance_metadata_tags":"disabled"}],"monitoring":false,"network_interface":[],"outpost_arn":"","password_data":"","placement_group":"","placement_partition_number":0,"primary_network_interface_id":"eni-04aaec985117a0700","private_dns":"ip-10-0-10-216.eu-west-2.compute.internal","private_dns_name_options":[{"enable_resource_name_dns_a_record":false,"enable_resource_name_dns_aaaa_record":false,"hostname_type":"ip-name"}],"private_ip":"10.0.10.216","public_dns":"ec2-18-133-252-243.eu-west-2.compute.amazonaws.com","public_ip":"18.133.252.243","root_block_device":[{"delete_on_termination":true,"device_name":"/dev/xvda","encrypted":false,"iops":100,"kms_key_id":"","tags":{},"tags_all":{},"throughput":0,"volume_id":"vol-0cbfb7fc868dce7f5","volume_size":8,"volume_type":"gp2"}],"secondary_private_ips":[],"security_groups":[],"source_dest_check":true,"spot_instance_request_id":"","subnet_id":"subnet-0e4cc60d35634e85b","tags":{"Environment":"dev","Name":"App Server"},"tags_all":{"Environment":"dev","Name":"App Server"},"tenancy":"default","timeouts":null,"user_data":null,"user_data_base64":null,"user_data_replace_on_change":false,"volume_tags":null,"vpc_security_group_ids":["sg-057ed2204f81107a5"]},"after_unknown":{},"before_sensitive":{"ami":true,"capacity_reservation_specification":[{"capacity_reservation_target":[]}],"cpu_options":[{}],"credit_specification":[{}],"ebs_block_device":[],"enclave_options":[{}],"ephemeral_block_device":[],"instance_market_options":[],"ipv6_addresses":[],"launch_template":[],"maintenance_options":[{}],"metadata_options":[{}],"network_interface":[],"private_dns_name_options":[{}],"root_block_device":[{"tags":{},"tags_all":{}}],"secondary_private_ips":[],"security_groups":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[false]},"after_sensitive":{"ami":true,"capacity_reservation_specification":[{"capacity_reservation_target":[]}],"cpu_options":[{}],"credit_specification":[{}],"ebs_block_device":[],"enclave_options":[{}],"ephemeral_block_device":[],"instance_market_options":[],"ipv6_addresses":[],"launch_template":[],"maintenance_options":[{}],"metadata_options":[{}],"network_interface":[],"private_dns_name_options":[{}],"root_block_device":[{"tags":{},"tags_all":{}}],"secondary_private_ips":[],"security_groups":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[false]}}},{"address":"module.heritage[0].aws_instance.webserver","module_address":"module.heritage[0]","mode":"managed","type":"aws_instance","name":"webserver","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"ami":"ami-0ad8de99ac93341e7","arn":"arn:aws:ec2:eu-west-2:540044833068:instance/i-012cafc89720d6fb5","associate_public_ip_address":true,"availability_zone":"eu-west-2a","capacity_reservation_specification":[{"capacity_reservation_preference":"open","capacity_reservation_target":[]}],"cpu_core_count":1,"cpu_options":[{"amd_sev_snp":"","core_count":1,"threads_per_core":2}],"cpu_threads_per_core":2,"credit_specification":[{"cpu_credits":"unlimited"}],"disable_api_stop":false,"disable_api_termination":false,"ebs_block_device":[],"ebs_optimized":false,"enable_primary_ipv6":null,"enclave_options":[{"enabled":false}],"ephemeral_block_device":[],"get_password_data":false,"hibernation":false,"host_id":"","host_resource_group_arn":null,"iam_instance_profile":"","id":"i-012cafc89720d6fb5","instance_initiated_shutdown_behavior":"stop","instance_lifecycle":"","instance_market_options":[],"instance_state":"running","instance_type":"t3.small","ipv6_address_count":0,"ipv6_addresses":[],"key_name":"Demo Key Pair","launch_template":[],"maintenance_options":[{"auto_recovery":"default"}],"metadata_options":[{"http_endpoint":"enabled","http_protocol_ipv6":"disabled","http_put_response_hop_limit":1,"http_tokens":"optional","instance_metadata_tags":"disabled"}],"monitoring":false,"network_interface":[],"outpost_arn":"","password_data":"","placement_group":"","placement_partition_number":0,"primary_network_interface_id":"eni-0c2fd58372f61bd60","private_dns":"ip-10-0-9-180.eu-west-2.compute.internal","private_dns_name_options":[{"enable_resource_name_dns_a_record":false,"enable_resource_name_dns_aaaa_record":false,"hostname_type":"ip-name"}],"private_ip":"10.0.9.180","public_dns":"ec2-18-130-74-67.eu-west-2.compute.amazonaws.com","public_ip":"18.130.74.67","root_block_device":[{"delete_on_termination":true,"device_name":"/dev/xvda","encrypted":false,"iops":100,"kms_key_id":"","tags":{},"tags_all":{},"throughput":0,"volume_id":"vol-0073f6dc4599e8523","volume_size":8,"volume_type":"gp2"}],"secondary_private_ips":[],"security_groups":[],"source_dest_check":true,"spot_instance_request_id":"","subnet_id":"subnet-0ec75df66980d2920","tags":{"Environment":"dev","Name":"Webserver"},"tags_all":{"Environment":"dev","Name":"Webserver"},"tenancy":"default","timeouts":null,"user_data":null,"user_data_base64":null,"user_data_replace_on_change":false,"volume_tags":null,"vpc_security_group_ids":["sg-057ed2204f81107a5"]},"after":{"ami":"ami-0ad8de99ac93341e7","arn":"arn:aws:ec2:eu-west-2:540044833068:instance/i-012cafc89720d6fb5","associate_public_ip_address":true,"availability_zone":"eu-west-2a","capacity_reservation_specification":[{"capacity_reservation_preference":"open","capacity_reservation_target":[]}],"cpu_core_count":1,"cpu_options":[{"amd_sev_snp":"","core_count":1,"threads_per_core":2}],"cpu_threads_per_core":2,"credit_specification":[{"cpu_credits":"unlimited"}],"disable_api_stop":false,"disable_api_termination":false,"ebs_block_device":[],"ebs_optimized":false,"enable_primary_ipv6":null,"enclave_options":[{"enabled":false}],"ephemeral_block_device":[],"get_password_data":false,"hibernation":false,"host_id":"","host_resource_group_arn":null,"iam_instance_profile":"","id":"i-012cafc89720d6fb5","instance_initiated_shutdown_behavior":"stop","instance_lifecycle":"","instance_market_options":[],"instance_state":"running","instance_type":"t3.small","ipv6_address_count":0,"ipv6_addresses":[],"key_name":"Demo Key Pair","launch_template":[],"maintenance_options":[{"auto_recovery":"default"}],"metadata_options":[{"http_endpoint":"enabled","http_protocol_ipv6":"disabled","http_put_response_hop_limit":1,"http_tokens":"optional","instance_metadata_tags":"disabled"}],"monitoring":false,"network_interface":[],"outpost_arn":"","password_data":"","placement_group":"","placement_partition_number":0,"primary_network_interface_id":"eni-0c2fd58372f61bd60","private_dns":"ip-10-0-9-180.eu-west-2.compute.internal","private_dns_name_options":[{"enable_resource_name_dns_a_record":false,"enable_resource_name_dns_aaaa_record":false,"hostname_type":"ip-name"}],"private_ip":"10.0.9.180","public_dns":"ec2-18-130-74-67.eu-west-2.compute.amazonaws.com","public_ip":"18.130.74.67","root_block_device":[{"delete_on_termination":true,"device_name":"/dev/xvda","encrypted":false,"iops":100,"kms_key_id":"","tags":{},"tags_all":{},"throughput":0,"volume_id":"vol-0073f6dc4599e8523","volume_size":8,"volume_type":"gp2"}],"secondary_private_ips":[],"security_groups":[],"source_dest_check":true,"spot_instance_request_id":"","subnet_id":"subnet-0ec75df66980d2920","tags":{"Environment":"dev","Name":"Webserver"},"tags_all":{"Environment":"dev","Name":"Webserver"},"tenancy":"default","timeouts":null,"user_data":null,"user_data_base64":null,"user_data_replace_on_change":false,"volume_tags":null,"vpc_security_group_ids":["sg-057ed2204f81107a5"]},"after_unknown":{},"before_sensitive":{"ami":true,"capacity_reservation_specification":[{"capacity_reservation_target":[]}],"cpu_options":[{}],"credit_specification":[{}],"ebs_block_device":[],"enclave_options":[{}],"ephemeral_block_device":[],"instance_market_options":[],"ipv6_addresses":[],"launch_template":[],"maintenance_options":[{}],"metadata_options":[{}],"network_interface":[],"private_dns_name_options":[{}],"root_block_device":[{"tags":{},"tags_all":{}}],"secondary_private_ips":[],"security_groups":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[false]},"after_sensitive":{"ami":true,"capacity_reservation_specification":[{"capacity_reservation_target":[]}],"cpu_options":[{}],"credit_specification":[{}],"ebs_block_device":[],"enclave_options":[{}],"ephemeral_block_device":[],"instance_market_options":[],"ipv6_addresses":[],"launch_template":[],"maintenance_options":[{}],"metadata_options":[{}],"network_interface":[],"private_dns_name_options":[{}],"root_block_device":[{"tags":{},"tags_all":{}}],"secondary_private_ips":[],"security_groups":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[false]}}},{"address":"module.heritage[0].aws_lambda_function.example","module_address":"module.heritage[0]","mode":"managed","type":"aws_lambda_function","name":"example","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"architectures":["x86_64"],"arn":"arn:aws:lambda:eu-west-2:540044833068:function:-terraform-example_lambda_function","code_sha256":"AL+rDzevWkbhiW0wn6Q5AAB5yT4FUg5XY0X1IQvX8y0=","code_signing_config_arn":"","dead_letter_config":[],"description":"","environment":[],"ephemeral_storage":[{"size":512}],"file_system_config":[],"filename":"modules/heritage/tmp/lambda_function.zip","function_name":"-terraform-example_lambda_function","handler":"index.handler","id":"-terraform-example_lambda_function","image_config":[],"image_uri":"","invoke_arn":"arn:aws:apigateway:eu-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-2:540044833068:function:-terraform-example_lambda_function/invocations","kms_key_arn":"","last_modified":"2025-12-09T19:44:17.000+0000","layers":[],"logging_config":[{"application_log_level":"","log_format":"Text","log_group":"/aws/lambda/-terraform-example_lambda_function","system_log_level":""}],"memory_size":128,"package_type":"Zip","publish":false,"qualified_arn":"arn:aws:lambda:eu-west-2:540044833068:function:-terraform-example_lambda_function:$LATEST","qualified_invoke_arn":"arn:aws:apigateway:eu-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-2:540044833068:function:-terraform-example_lambda_function:$LATEST/invocations","replace_security_groups_on_destroy":null,"replacement_security_group_ids":null,"reserved_concurrent_executions":-1,"role":"arn:aws:iam::540044833068:role/-terraform-example_lambda_iam_role","runtime":"nodejs20.x","s3_bucket":null,"s3_key":null,"s3_object_version":null,"signing_job_arn":"","signing_profile_version_arn":"","skip_destroy":false,"snap_start":[],"source_code_hash":"AL+rDzevWkbhiW0wn6Q5AAB5yT4FUg5XY0X1IQvX8y0=","source_code_size":270,"tags":{},"tags_all":{},"timeout":3,"timeouts":null,"tracing_config":[{"mode":"PassThrough"}],"version":"$LATEST","vpc_config":[]},"after":{"architectures":["x86_64"],"arn":"arn:aws:lambda:eu-west-2:540044833068:function:-terraform-example_lambda_function","code_sha256":"AL+rDzevWkbhiW0wn6Q5AAB5yT4FUg5XY0X1IQvX8y0=","code_signing_config_arn":"","dead_letter_config":[],"description":"","environment":[],"ephemeral_storage":[{"size":512}],"file_system_config":[],"filename":"modules/heritage/tmp/lambda_function.zip","function_name":"-terraform-example_lambda_function","handler":"index.handler","id":"-terraform-example_lambda_function","image_config":[],"image_uri":"","invoke_arn":"arn:aws:apigateway:eu-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-2:540044833068:function:-terraform-example_lambda_function/invocations","kms_key_arn":"","last_modified":"2025-12-09T19:44:17.000+0000","layers":[],"logging_config":[{"application_log_level":"","log_format":"Text","log_group":"/aws/lambda/-terraform-example_lambda_function","system_log_level":""}],"memory_size":128,"package_type":"Zip","publish":false,"qualified_arn":"arn:aws:lambda:eu-west-2:540044833068:function:-terraform-example_lambda_function:$LATEST","qualified_invoke_arn":"arn:aws:apigateway:eu-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-2:540044833068:function:-terraform-example_lambda_function:$LATEST/invocations","replace_security_groups_on_destroy":null,"replacement_security_group_ids":null,"reserved_concurrent_executions":-1,"role":"arn:aws:iam::540044833068:role/-terraform-example_lambda_iam_role","runtime":"nodejs20.x","s3_bucket":null,"s3_key":null,"s3_object_version":null,"signing_job_arn":"","signing_profile_version_arn":"","skip_destroy":false,"snap_start":[],"source_code_hash":"AL+rDzevWkbhiW0wn6Q5AAB5yT4FUg5XY0X1IQvX8y0=","source_code_size":270,"tags":{},"tags_all":{},"timeout":3,"timeouts":null,"tracing_config":[{"mode":"PassThrough"}],"version":"$LATEST","vpc_config":[]},"after_unknown":{},"before_sensitive":{"architectures":[false],"dead_letter_config":[],"environment":[],"ephemeral_storage":[{}],"file_system_config":[],"image_config":[],"layers":[],"logging_config":[{}],"snap_start":[],"tags":{},"tags_all":{},"tracing_config":[{}],"vpc_config":[]},"after_sensitive":{"architectures":[false],"dead_letter_config":[],"environment":[],"ephemeral_storage":[{}],"file_system_config":[],"image_config":[],"layers":[],"logging_config":[{}],"snap_start":[],"tags":{},"tags_all":{},"tracing_config":[{}],"vpc_config":[]}}},{"address":"module.heritage[0].aws_launch_template.my_launch_template","module_address":"module.heritage[0]","mode":"managed","type":"aws_launch_template","name":"my_launch_template","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:eu-west-2:540044833068:launch-template/lt-04dc7394984712fe8","block_device_mappings":[],"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"default_version":1,"description":"","disable_api_stop":false,"disable_api_termination":false,"ebs_optimized":"","elastic_gpu_specifications":[],"elastic_inference_accelerator":[],"enclave_options":[],"hibernation_options":[],"iam_instance_profile":[],"id":"lt-04dc7394984712fe8","image_id":"ami-02a95139d1d364420","instance_initiated_shutdown_behavior":"","instance_market_options":[],"instance_requirements":[],"instance_type":"t3.micro","kernel_id":"","key_name":"","latest_version":5,"license_specification":[],"maintenance_options":[],"metadata_options":[],"monitoring":[],"name":"asg-change-launch-template-terraform-example2025111723203932490000000b","name_prefix":"asg-change-launch-template-terraform-example","network_interfaces":[],"placement":[],"private_dns_name_options":[],"ram_disk_id":"","security_group_names":[],"tag_specifications":[],"tags":{},"tags_all":{},"update_default_version":null,"user_data":"","vpc_security_group_ids":["sg-0159f0e3d8224d441"]},"after":{"arn":"arn:aws:ec2:eu-west-2:540044833068:launch-template/lt-04dc7394984712fe8","block_device_mappings":[],"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"default_version":1,"description":"","disable_api_stop":false,"disable_api_termination":false,"ebs_optimized":"","elastic_gpu_specifications":[],"elastic_inference_accelerator":[],"enclave_options":[],"hibernation_options":[],"iam_instance_profile":[],"id":"lt-04dc7394984712fe8","image_id":"ami-02a95139d1d364420","instance_initiated_shutdown_behavior":"","instance_market_options":[],"instance_requirements":[],"instance_type":"t3.micro","kernel_id":"","key_name":"","latest_version":5,"license_specification":[],"maintenance_options":[],"metadata_options":[],"monitoring":[],"name":"asg-change-launch-template-terraform-example2025111723203932490000000b","name_prefix":"asg-change-launch-template-terraform-example","network_interfaces":[],"placement":[],"private_dns_name_options":[],"ram_disk_id":"","security_group_names":[],"tag_specifications":[],"tags":{},"tags_all":{},"update_default_version":null,"user_data":"","vpc_security_group_ids":["sg-0159f0e3d8224d441"]},"after_unknown":{},"before_sensitive":{"block_device_mappings":[],"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"elastic_gpu_specifications":[],"elastic_inference_accelerator":[],"enclave_options":[],"hibernation_options":[],"iam_instance_profile":[],"instance_market_options":[],"instance_requirements":[],"license_specification":[],"maintenance_options":[],"metadata_options":[],"monitoring":[],"network_interfaces":[],"placement":[],"private_dns_name_options":[],"security_group_names":[],"tag_specifications":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[false]},"after_sensitive":{"block_device_mappings":[],"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"elastic_gpu_specifications":[],"elastic_inference_accelerator":[],"enclave_options":[],"hibernation_options":[],"iam_instance_profile":[],"instance_market_options":[],"instance_requirements":[],"license_specification":[],"maintenance_options":[],"metadata_options":[],"monitoring":[],"network_interfaces":[],"placement":[],"private_dns_name_options":[],"security_group_names":[],"tag_specifications":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[false]}}},{"address":"module.heritage[0].aws_lb.main","module_address":"module.heritage[0]","mode":"managed","type":"aws_lb","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"access_logs":[{"bucket":"","enabled":false,"prefix":""}],"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:loadbalancer/app/terraform-example/16bbb139e6d96ffb","arn_suffix":"app/terraform-example/16bbb139e6d96ffb","client_keep_alive":3600,"connection_logs":[{"bucket":"","enabled":false,"prefix":""}],"customer_owned_ipv4_pool":"","desync_mitigation_mode":"defensive","dns_name":"terraform-example-1993925081.eu-west-2.elb.amazonaws.com","dns_record_client_routing_policy":null,"drop_invalid_header_fields":false,"enable_cross_zone_load_balancing":true,"enable_deletion_protection":false,"enable_http2":true,"enable_tls_version_and_cipher_suite_headers":false,"enable_waf_fail_open":false,"enable_xff_client_port":false,"enable_zonal_shift":false,"enforce_security_group_inbound_rules_on_private_link_traffic":"","id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:loadbalancer/app/terraform-example/16bbb139e6d96ffb","idle_timeout":60,"internal":false,"ip_address_type":"ipv4","ipam_pools":[],"load_balancer_type":"application","minimum_load_balancer_capacity":[],"name":"terraform-example","name_prefix":"","preserve_host_header":false,"security_groups":["sg-0159f0e3d8224d441"],"subnet_mapping":[{"allocation_id":"","ipv6_address":"","outpost_id":"","private_ipv4_address":"","subnet_id":"subnet-07fc72cf57c70e4f0"},{"allocation_id":"","ipv6_address":"","outpost_id":"","private_ipv4_address":"","subnet_id":"subnet-0a1b287732e8ad0b7"}],"subnets":["subnet-07fc72cf57c70e4f0","subnet-0a1b287732e8ad0b7"],"tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298","xff_header_processing_mode":"append","zone_id":"ZHURV8PSTC4K8"},"after":{"access_logs":[{"bucket":"","enabled":false,"prefix":""}],"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:loadbalancer/app/terraform-example/16bbb139e6d96ffb","arn_suffix":"app/terraform-example/16bbb139e6d96ffb","client_keep_alive":3600,"connection_logs":[{"bucket":"","enabled":false,"prefix":""}],"customer_owned_ipv4_pool":"","desync_mitigation_mode":"defensive","dns_name":"terraform-example-1993925081.eu-west-2.elb.amazonaws.com","dns_record_client_routing_policy":null,"drop_invalid_header_fields":false,"enable_cross_zone_load_balancing":true,"enable_deletion_protection":false,"enable_http2":true,"enable_tls_version_and_cipher_suite_headers":false,"enable_waf_fail_open":false,"enable_xff_client_port":false,"enable_zonal_shift":false,"enforce_security_group_inbound_rules_on_private_link_traffic":"","id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:loadbalancer/app/terraform-example/16bbb139e6d96ffb","idle_timeout":60,"internal":false,"ip_address_type":"ipv4","ipam_pools":[],"load_balancer_type":"application","minimum_load_balancer_capacity":[],"name":"terraform-example","name_prefix":"","preserve_host_header":false,"security_groups":["sg-0159f0e3d8224d441"],"subnet_mapping":[{"allocation_id":"","ipv6_address":"","outpost_id":"","private_ipv4_address":"","subnet_id":"subnet-07fc72cf57c70e4f0"},{"allocation_id":"","ipv6_address":"","outpost_id":"","private_ipv4_address":"","subnet_id":"subnet-0a1b287732e8ad0b7"}],"subnets":["subnet-07fc72cf57c70e4f0","subnet-0a1b287732e8ad0b7"],"tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298","xff_header_processing_mode":"append","zone_id":"ZHURV8PSTC4K8"},"after_unknown":{},"before_sensitive":{"access_logs":[{}],"connection_logs":[{}],"ipam_pools":[],"minimum_load_balancer_capacity":[],"security_groups":[false],"subnet_mapping":[{},{}],"subnets":[false,false],"tags":{},"tags_all":{}},"after_sensitive":{"access_logs":[{}],"connection_logs":[{}],"ipam_pools":[],"minimum_load_balancer_capacity":[],"security_groups":[false],"subnet_mapping":[{},{}],"subnets":[false,false],"tags":{},"tags_all":{}}}},{"address":"module.heritage[0].aws_lb_listener.http","module_address":"module.heritage[0]","mode":"managed","type":"aws_lb_listener","name":"http","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"alpn_policy":null,"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:listener/app/terraform-example/16bbb139e6d96ffb/1e73b4b315bff0f1","certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[{"content_type":"text/plain","message_body":"Nothing here...","status_code":"200"}],"forward":[],"order":1,"redirect":[],"target_group_arn":"","type":"fixed-response"}],"id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:listener/app/terraform-example/16bbb139e6d96ffb/1e73b4b315bff0f1","load_balancer_arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:loadbalancer/app/terraform-example/16bbb139e6d96ffb","mutual_authentication":[],"port":80,"protocol":"HTTP","routing_http_request_x_amzn_mtls_clientcert_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_issuer_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_leaf_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_serial_number_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_subject_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_validity_header_name":null,"routing_http_request_x_amzn_tls_cipher_suite_header_name":null,"routing_http_request_x_amzn_tls_version_header_name":null,"routing_http_response_access_control_allow_credentials_header_value":"","routing_http_response_access_control_allow_headers_header_value":"","routing_http_response_access_control_allow_methods_header_value":"","routing_http_response_access_control_allow_origin_header_value":"","routing_http_response_access_control_expose_headers_header_value":"","routing_http_response_access_control_max_age_header_value":"","routing_http_response_content_security_policy_header_value":"","routing_http_response_server_enabled":true,"routing_http_response_strict_transport_security_header_value":"","routing_http_response_x_content_type_options_header_value":"","routing_http_response_x_frame_options_header_value":"","ssl_policy":"","tags":{},"tags_all":{},"tcp_idle_timeout_seconds":null,"timeouts":null},"after":{"alpn_policy":null,"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:listener/app/terraform-example/16bbb139e6d96ffb/1e73b4b315bff0f1","certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[{"content_type":"text/plain","message_body":"Nothing here...","status_code":"200"}],"forward":[],"order":1,"redirect":[],"target_group_arn":"","type":"fixed-response"}],"id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:listener/app/terraform-example/16bbb139e6d96ffb/1e73b4b315bff0f1","load_balancer_arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:loadbalancer/app/terraform-example/16bbb139e6d96ffb","mutual_authentication":[],"port":80,"protocol":"HTTP","routing_http_request_x_amzn_mtls_clientcert_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_issuer_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_leaf_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_serial_number_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_subject_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_validity_header_name":null,"routing_http_request_x_amzn_tls_cipher_suite_header_name":null,"routing_http_request_x_amzn_tls_version_header_name":null,"routing_http_response_access_control_allow_credentials_header_value":"","routing_http_response_access_control_allow_headers_header_value":"","routing_http_response_access_control_allow_methods_header_value":"","routing_http_response_access_control_allow_origin_header_value":"","routing_http_response_access_control_expose_headers_header_value":"","routing_http_response_access_control_max_age_header_value":"","routing_http_response_content_security_policy_header_value":"","routing_http_response_server_enabled":true,"routing_http_response_strict_transport_security_header_value":"","routing_http_response_x_content_type_options_header_value":"","routing_http_response_x_frame_options_header_value":"","ssl_policy":"","tags":{},"tags_all":{},"tcp_idle_timeout_seconds":null,"timeouts":null},"after_unknown":{},"before_sensitive":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[{}],"forward":[],"redirect":[]}],"mutual_authentication":[],"tags":{},"tags_all":{}},"after_sensitive":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[{}],"forward":[],"redirect":[]}],"mutual_authentication":[],"tags":{},"tags_all":{}}}},{"address":"module.heritage[0].aws_lb_listener_rule.face","module_address":"module.heritage[0]","mode":"managed","type":"aws_lb_listener_rule","name":"face","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":1,"redirect":[],"target_group_arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/facerec-terraform-example/ccde9b5e810e9a5d","type":"forward"}],"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:listener-rule/app/terraform-example/16bbb139e6d96ffb/1e73b4b315bff0f1/b0d2ff0e2982cec8","condition":[{"host_header":[{"values":["face-terraform-example.overmind-terraform-example.com"]}],"http_header":[],"http_request_method":[],"path_pattern":[],"query_string":[],"source_ip":[]}],"id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:listener-rule/app/terraform-example/16bbb139e6d96ffb/1e73b4b315bff0f1/b0d2ff0e2982cec8","listener_arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:listener/app/terraform-example/16bbb139e6d96ffb/1e73b4b315bff0f1","priority":99,"tags":{},"tags_all":{}},"after":{"action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":1,"redirect":[],"target_group_arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/facerec-terraform-example/ccde9b5e810e9a5d","type":"forward"}],"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:listener-rule/app/terraform-example/16bbb139e6d96ffb/1e73b4b315bff0f1/b0d2ff0e2982cec8","condition":[{"host_header":[{"values":["face-terraform-example.overmind-terraform-example.com"]}],"http_header":[],"http_request_method":[],"path_pattern":[],"query_string":[],"source_ip":[]}],"id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:listener-rule/app/terraform-example/16bbb139e6d96ffb/1e73b4b315bff0f1/b0d2ff0e2982cec8","listener_arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:listener/app/terraform-example/16bbb139e6d96ffb/1e73b4b315bff0f1","priority":99,"tags":{},"tags_all":{}},"after_unknown":{},"before_sensitive":{"action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[]}],"condition":[{"host_header":[{"values":[false]}],"http_header":[],"http_request_method":[],"path_pattern":[],"query_string":[],"source_ip":[]}],"tags":{},"tags_all":{}},"after_sensitive":{"action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[]}],"condition":[{"host_header":[{"values":[false]}],"http_header":[],"http_request_method":[],"path_pattern":[],"query_string":[],"source_ip":[]}],"tags":{},"tags_all":{}}}},{"address":"module.heritage[0].aws_lb_listener_rule.visit_counter","module_address":"module.heritage[0]","mode":"managed","type":"aws_lb_listener_rule","name":"visit_counter","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":1,"redirect":[],"target_group_arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/visit-counter-terraform-example/5683104d7610bc44","type":"forward"}],"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:listener-rule/app/terraform-example/16bbb139e6d96ffb/1e73b4b315bff0f1/e9d949c11c2c2ffb","condition":[{"host_header":[{"values":["visits-terraform-example.overmind-terraform-example.com"]}],"http_header":[],"http_request_method":[],"path_pattern":[],"query_string":[],"source_ip":[]}],"id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:listener-rule/app/terraform-example/16bbb139e6d96ffb/1e73b4b315bff0f1/e9d949c11c2c2ffb","listener_arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:listener/app/terraform-example/16bbb139e6d96ffb/1e73b4b315bff0f1","priority":100,"tags":{},"tags_all":{}},"after":{"action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":1,"redirect":[],"target_group_arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/visit-counter-terraform-example/5683104d7610bc44","type":"forward"}],"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:listener-rule/app/terraform-example/16bbb139e6d96ffb/1e73b4b315bff0f1/e9d949c11c2c2ffb","condition":[{"host_header":[{"values":["visits-terraform-example.overmind-terraform-example.com"]}],"http_header":[],"http_request_method":[],"path_pattern":[],"query_string":[],"source_ip":[]}],"id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:listener-rule/app/terraform-example/16bbb139e6d96ffb/1e73b4b315bff0f1/e9d949c11c2c2ffb","listener_arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:listener/app/terraform-example/16bbb139e6d96ffb/1e73b4b315bff0f1","priority":100,"tags":{},"tags_all":{}},"after_unknown":{},"before_sensitive":{"action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[]}],"condition":[{"host_header":[{"values":[false]}],"http_header":[],"http_request_method":[],"path_pattern":[],"query_string":[],"source_ip":[]}],"tags":{},"tags_all":{}},"after_sensitive":{"action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[]}],"condition":[{"host_header":[{"values":[false]}],"http_header":[],"http_request_method":[],"path_pattern":[],"query_string":[],"source_ip":[]}],"tags":{},"tags_all":{}}}},{"address":"module.heritage[0].aws_lb_target_group.face","module_address":"module.heritage[0]","mode":"managed","type":"aws_lb_target_group","name":"face","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/facerec-terraform-example/ccde9b5e810e9a5d","arn_suffix":"targetgroup/facerec-terraform-example/ccde9b5e810e9a5d","connection_termination":null,"deregistration_delay":"300","health_check":[{"enabled":true,"healthy_threshold":2,"interval":40,"matcher":"200","path":"/","port":"traffic-port","protocol":"HTTP","timeout":30,"unhealthy_threshold":3}],"id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/facerec-terraform-example/ccde9b5e810e9a5d","ip_address_type":"ipv4","lambda_multi_value_headers_enabled":false,"load_balancer_arns":["arn:aws:elasticloadbalancing:eu-west-2:540044833068:loadbalancer/app/terraform-example/16bbb139e6d96ffb"],"load_balancing_algorithm_type":"round_robin","load_balancing_anomaly_mitigation":"off","load_balancing_cross_zone_enabled":"use_load_balancer_configuration","name":"facerec-terraform-example","name_prefix":"","port":1234,"preserve_client_ip":null,"protocol":"HTTP","protocol_version":"HTTP1","proxy_protocol_v2":false,"slow_start":0,"stickiness":[{"cookie_duration":86400,"cookie_name":"","enabled":false,"type":"lb_cookie"}],"tags":{},"tags_all":{},"target_failover":[{"on_deregistration":null,"on_unhealthy":null}],"target_group_health":[{"dns_failover":[{"minimum_healthy_targets_count":"1","minimum_healthy_targets_percentage":"off"}],"unhealthy_state_routing":[{"minimum_healthy_targets_count":1,"minimum_healthy_targets_percentage":"off"}]}],"target_health_state":[{"enable_unhealthy_connection_termination":null,"unhealthy_draining_interval":null}],"target_type":"ip","vpc_id":"vpc-02901bcbb89561298"},"after":{"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/facerec-terraform-example/ccde9b5e810e9a5d","arn_suffix":"targetgroup/facerec-terraform-example/ccde9b5e810e9a5d","connection_termination":null,"deregistration_delay":"300","health_check":[{"enabled":true,"healthy_threshold":2,"interval":40,"matcher":"200","path":"/","port":"traffic-port","protocol":"HTTP","timeout":30,"unhealthy_threshold":3}],"id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/facerec-terraform-example/ccde9b5e810e9a5d","ip_address_type":"ipv4","lambda_multi_value_headers_enabled":false,"load_balancer_arns":["arn:aws:elasticloadbalancing:eu-west-2:540044833068:loadbalancer/app/terraform-example/16bbb139e6d96ffb"],"load_balancing_algorithm_type":"round_robin","load_balancing_anomaly_mitigation":"off","load_balancing_cross_zone_enabled":"use_load_balancer_configuration","name":"facerec-terraform-example","name_prefix":"","port":1234,"preserve_client_ip":null,"protocol":"HTTP","protocol_version":"HTTP1","proxy_protocol_v2":false,"slow_start":0,"stickiness":[{"cookie_duration":86400,"cookie_name":"","enabled":false,"type":"lb_cookie"}],"tags":{},"tags_all":{},"target_failover":[{"on_deregistration":null,"on_unhealthy":null}],"target_group_health":[{"dns_failover":[{"minimum_healthy_targets_count":"1","minimum_healthy_targets_percentage":"off"}],"unhealthy_state_routing":[{"minimum_healthy_targets_count":1,"minimum_healthy_targets_percentage":"off"}]}],"target_health_state":[{"enable_unhealthy_connection_termination":null,"unhealthy_draining_interval":null}],"target_type":"ip","vpc_id":"vpc-02901bcbb89561298"},"after_unknown":{},"before_sensitive":{"health_check":[{}],"load_balancer_arns":[false],"stickiness":[{}],"tags":{},"tags_all":{},"target_failover":[{}],"target_group_health":[{"dns_failover":[{}],"unhealthy_state_routing":[{}]}],"target_health_state":[{}]},"after_sensitive":{"health_check":[{}],"load_balancer_arns":[false],"stickiness":[{}],"tags":{},"tags_all":{},"target_failover":[{}],"target_group_health":[{"dns_failover":[{}],"unhealthy_state_routing":[{}]}],"target_health_state":[{}]}}},{"address":"module.heritage[0].aws_lb_target_group.my_new_target_group","module_address":"module.heritage[0]","mode":"managed","type":"aws_lb_target_group","name":"my_new_target_group","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/asg-new-terraform-example/b25da3bfef43543c","arn_suffix":"targetgroup/asg-new-terraform-example/b25da3bfef43543c","connection_termination":null,"deregistration_delay":"300","health_check":[{"enabled":true,"healthy_threshold":3,"interval":30,"matcher":"200","path":"/","port":"traffic-port","protocol":"HTTP","timeout":5,"unhealthy_threshold":3}],"id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/asg-new-terraform-example/b25da3bfef43543c","ip_address_type":"ipv4","lambda_multi_value_headers_enabled":false,"load_balancer_arns":[],"load_balancing_algorithm_type":"round_robin","load_balancing_anomaly_mitigation":"off","load_balancing_cross_zone_enabled":"use_load_balancer_configuration","name":"asg-new-terraform-example","name_prefix":"","port":80,"preserve_client_ip":null,"protocol":"HTTP","protocol_version":"HTTP1","proxy_protocol_v2":false,"slow_start":0,"stickiness":[{"cookie_duration":86400,"cookie_name":"","enabled":false,"type":"lb_cookie"}],"tags":{},"tags_all":{},"target_failover":[{"on_deregistration":null,"on_unhealthy":null}],"target_group_health":[{"dns_failover":[{"minimum_healthy_targets_count":"1","minimum_healthy_targets_percentage":"off"}],"unhealthy_state_routing":[{"minimum_healthy_targets_count":1,"minimum_healthy_targets_percentage":"off"}]}],"target_health_state":[{"enable_unhealthy_connection_termination":null,"unhealthy_draining_interval":null}],"target_type":"instance","vpc_id":"vpc-02901bcbb89561298"},"after":{"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/asg-new-terraform-example/b25da3bfef43543c","arn_suffix":"targetgroup/asg-new-terraform-example/b25da3bfef43543c","connection_termination":null,"deregistration_delay":"300","health_check":[{"enabled":true,"healthy_threshold":3,"interval":30,"matcher":"200","path":"/","port":"traffic-port","protocol":"HTTP","timeout":5,"unhealthy_threshold":3}],"id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/asg-new-terraform-example/b25da3bfef43543c","ip_address_type":"ipv4","lambda_multi_value_headers_enabled":false,"load_balancer_arns":[],"load_balancing_algorithm_type":"round_robin","load_balancing_anomaly_mitigation":"off","load_balancing_cross_zone_enabled":"use_load_balancer_configuration","name":"asg-new-terraform-example","name_prefix":"","port":80,"preserve_client_ip":null,"protocol":"HTTP","protocol_version":"HTTP1","proxy_protocol_v2":false,"slow_start":0,"stickiness":[{"cookie_duration":86400,"cookie_name":"","enabled":false,"type":"lb_cookie"}],"tags":{},"tags_all":{},"target_failover":[{"on_deregistration":null,"on_unhealthy":null}],"target_group_health":[{"dns_failover":[{"minimum_healthy_targets_count":"1","minimum_healthy_targets_percentage":"off"}],"unhealthy_state_routing":[{"minimum_healthy_targets_count":1,"minimum_healthy_targets_percentage":"off"}]}],"target_health_state":[{"enable_unhealthy_connection_termination":null,"unhealthy_draining_interval":null}],"target_type":"instance","vpc_id":"vpc-02901bcbb89561298"},"after_unknown":{},"before_sensitive":{"health_check":[{}],"load_balancer_arns":[],"stickiness":[{}],"tags":{},"tags_all":{},"target_failover":[{}],"target_group_health":[{"dns_failover":[{}],"unhealthy_state_routing":[{}]}],"target_health_state":[{}]},"after_sensitive":{"health_check":[{}],"load_balancer_arns":[],"stickiness":[{}],"tags":{},"tags_all":{},"target_failover":[{}],"target_group_health":[{"dns_failover":[{}],"unhealthy_state_routing":[{}]}],"target_health_state":[{}]}}},{"address":"module.heritage[0].aws_lb_target_group.my_target_group","module_address":"module.heritage[0]","mode":"managed","type":"aws_lb_target_group","name":"my_target_group","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/asg-change-tg-terraform-example/d9fca32e6f2d362a","arn_suffix":"targetgroup/asg-change-tg-terraform-example/d9fca32e6f2d362a","connection_termination":null,"deregistration_delay":"300","health_check":[{"enabled":true,"healthy_threshold":3,"interval":30,"matcher":"200","path":"/","port":"traffic-port","protocol":"HTTP","timeout":5,"unhealthy_threshold":3}],"id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/asg-change-tg-terraform-example/d9fca32e6f2d362a","ip_address_type":"ipv4","lambda_multi_value_headers_enabled":false,"load_balancer_arns":[],"load_balancing_algorithm_type":"round_robin","load_balancing_anomaly_mitigation":"off","load_balancing_cross_zone_enabled":"use_load_balancer_configuration","name":"asg-change-tg-terraform-example","name_prefix":"","port":80,"preserve_client_ip":null,"protocol":"HTTP","protocol_version":"HTTP1","proxy_protocol_v2":false,"slow_start":0,"stickiness":[{"cookie_duration":86400,"cookie_name":"","enabled":false,"type":"lb_cookie"}],"tags":{},"tags_all":{},"target_failover":[{"on_deregistration":null,"on_unhealthy":null}],"target_group_health":[{"dns_failover":[{"minimum_healthy_targets_count":"1","minimum_healthy_targets_percentage":"off"}],"unhealthy_state_routing":[{"minimum_healthy_targets_count":1,"minimum_healthy_targets_percentage":"off"}]}],"target_health_state":[{"enable_unhealthy_connection_termination":null,"unhealthy_draining_interval":null}],"target_type":"instance","vpc_id":"vpc-02901bcbb89561298"},"after":{"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/asg-change-tg-terraform-example/d9fca32e6f2d362a","arn_suffix":"targetgroup/asg-change-tg-terraform-example/d9fca32e6f2d362a","connection_termination":null,"deregistration_delay":"300","health_check":[{"enabled":true,"healthy_threshold":3,"interval":30,"matcher":"200","path":"/","port":"traffic-port","protocol":"HTTP","timeout":5,"unhealthy_threshold":3}],"id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/asg-change-tg-terraform-example/d9fca32e6f2d362a","ip_address_type":"ipv4","lambda_multi_value_headers_enabled":false,"load_balancer_arns":[],"load_balancing_algorithm_type":"round_robin","load_balancing_anomaly_mitigation":"off","load_balancing_cross_zone_enabled":"use_load_balancer_configuration","name":"asg-change-tg-terraform-example","name_prefix":"","port":80,"preserve_client_ip":null,"protocol":"HTTP","protocol_version":"HTTP1","proxy_protocol_v2":false,"slow_start":0,"stickiness":[{"cookie_duration":86400,"cookie_name":"","enabled":false,"type":"lb_cookie"}],"tags":{},"tags_all":{},"target_failover":[{"on_deregistration":null,"on_unhealthy":null}],"target_group_health":[{"dns_failover":[{"minimum_healthy_targets_count":"1","minimum_healthy_targets_percentage":"off"}],"unhealthy_state_routing":[{"minimum_healthy_targets_count":1,"minimum_healthy_targets_percentage":"off"}]}],"target_health_state":[{"enable_unhealthy_connection_termination":null,"unhealthy_draining_interval":null}],"target_type":"instance","vpc_id":"vpc-02901bcbb89561298"},"after_unknown":{},"before_sensitive":{"health_check":[{}],"load_balancer_arns":[],"stickiness":[{}],"tags":{},"tags_all":{},"target_failover":[{}],"target_group_health":[{"dns_failover":[{}],"unhealthy_state_routing":[{}]}],"target_health_state":[{}]},"after_sensitive":{"health_check":[{}],"load_balancer_arns":[],"stickiness":[{}],"tags":{},"tags_all":{},"target_failover":[{}],"target_group_health":[{"dns_failover":[{}],"unhealthy_state_routing":[{}]}],"target_health_state":[{}]}}},{"address":"module.heritage[0].aws_lb_target_group.visit_counter","module_address":"module.heritage[0]","mode":"managed","type":"aws_lb_target_group","name":"visit_counter","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/visit-counter-terraform-example/5683104d7610bc44","arn_suffix":"targetgroup/visit-counter-terraform-example/5683104d7610bc44","connection_termination":null,"deregistration_delay":"300","health_check":[{"enabled":true,"healthy_threshold":5,"interval":30,"matcher":"200","path":"/","port":"traffic-port","protocol":"HTTP","timeout":5,"unhealthy_threshold":2}],"id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/visit-counter-terraform-example/5683104d7610bc44","ip_address_type":"ipv4","lambda_multi_value_headers_enabled":false,"load_balancer_arns":["arn:aws:elasticloadbalancing:eu-west-2:540044833068:loadbalancer/app/terraform-example/16bbb139e6d96ffb"],"load_balancing_algorithm_type":"round_robin","load_balancing_anomaly_mitigation":"off","load_balancing_cross_zone_enabled":"use_load_balancer_configuration","name":"visit-counter-terraform-example","name_prefix":"","port":80,"preserve_client_ip":null,"protocol":"HTTP","protocol_version":"HTTP1","proxy_protocol_v2":false,"slow_start":0,"stickiness":[{"cookie_duration":86400,"cookie_name":"","enabled":false,"type":"lb_cookie"}],"tags":{},"tags_all":{},"target_failover":[{"on_deregistration":null,"on_unhealthy":null}],"target_group_health":[{"dns_failover":[{"minimum_healthy_targets_count":"1","minimum_healthy_targets_percentage":"off"}],"unhealthy_state_routing":[{"minimum_healthy_targets_count":1,"minimum_healthy_targets_percentage":"off"}]}],"target_health_state":[{"enable_unhealthy_connection_termination":null,"unhealthy_draining_interval":null}],"target_type":"ip","vpc_id":"vpc-02901bcbb89561298"},"after":{"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/visit-counter-terraform-example/5683104d7610bc44","arn_suffix":"targetgroup/visit-counter-terraform-example/5683104d7610bc44","connection_termination":null,"deregistration_delay":"300","health_check":[{"enabled":true,"healthy_threshold":5,"interval":30,"matcher":"200","path":"/","port":"traffic-port","protocol":"HTTP","timeout":5,"unhealthy_threshold":2}],"id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/visit-counter-terraform-example/5683104d7610bc44","ip_address_type":"ipv4","lambda_multi_value_headers_enabled":false,"load_balancer_arns":["arn:aws:elasticloadbalancing:eu-west-2:540044833068:loadbalancer/app/terraform-example/16bbb139e6d96ffb"],"load_balancing_algorithm_type":"round_robin","load_balancing_anomaly_mitigation":"off","load_balancing_cross_zone_enabled":"use_load_balancer_configuration","name":"visit-counter-terraform-example","name_prefix":"","port":80,"preserve_client_ip":null,"protocol":"HTTP","protocol_version":"HTTP1","proxy_protocol_v2":false,"slow_start":0,"stickiness":[{"cookie_duration":86400,"cookie_name":"","enabled":false,"type":"lb_cookie"}],"tags":{},"tags_all":{},"target_failover":[{"on_deregistration":null,"on_unhealthy":null}],"target_group_health":[{"dns_failover":[{"minimum_healthy_targets_count":"1","minimum_healthy_targets_percentage":"off"}],"unhealthy_state_routing":[{"minimum_healthy_targets_count":1,"minimum_healthy_targets_percentage":"off"}]}],"target_health_state":[{"enable_unhealthy_connection_termination":null,"unhealthy_draining_interval":null}],"target_type":"ip","vpc_id":"vpc-02901bcbb89561298"},"after_unknown":{},"before_sensitive":{"health_check":[{}],"load_balancer_arns":[false],"stickiness":[{}],"tags":{},"tags_all":{},"target_failover":[{}],"target_group_health":[{"dns_failover":[{}],"unhealthy_state_routing":[{}]}],"target_health_state":[{}]},"after_sensitive":{"health_check":[{}],"load_balancer_arns":[false],"stickiness":[{}],"tags":{},"tags_all":{},"target_failover":[{}],"target_group_health":[{"dns_failover":[{}],"unhealthy_state_routing":[{}]}],"target_health_state":[{}]}}},{"address":"module.heritage[0].aws_network_acl.restricted","module_address":"module.heritage[0]","mode":"managed","type":"aws_network_acl","name":"restricted","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:eu-west-2:540044833068:network-acl/acl-069a798ad4aa03b2c","egress":[{"action":"allow","cidr_block":"0.0.0.0/0","from_port":0,"icmp_code":0,"icmp_type":0,"ipv6_cidr_block":"","protocol":"-1","rule_no":100,"to_port":0}],"id":"acl-069a798ad4aa03b2c","ingress":[{"action":"allow","cidr_block":"0.0.0.0/0","from_port":1024,"icmp_code":0,"icmp_type":0,"ipv6_cidr_block":"","protocol":"6","rule_no":300,"to_port":65535},{"action":"allow","cidr_block":"0.0.0.0/0","from_port":22,"icmp_code":0,"icmp_type":0,"ipv6_cidr_block":"","protocol":"6","rule_no":102,"to_port":22},{"action":"allow","cidr_block":"0.0.0.0/0","from_port":80,"icmp_code":0,"icmp_type":0,"ipv6_cidr_block":"","protocol":"6","rule_no":100,"to_port":80},{"action":"deny","cidr_block":"0.0.0.0/0","from_port":8000,"icmp_code":0,"icmp_type":0,"ipv6_cidr_block":"","protocol":"6","rule_no":200,"to_port":8100}],"owner_id":"540044833068","subnet_ids":["subnet-0e4cc60d35634e85b","subnet-0ec75df66980d2920"],"tags":{"Name":"Restricted Example"},"tags_all":{"Name":"Restricted Example"},"vpc_id":"vpc-02901bcbb89561298"},"after":{"arn":"arn:aws:ec2:eu-west-2:540044833068:network-acl/acl-069a798ad4aa03b2c","egress":[{"action":"allow","cidr_block":"0.0.0.0/0","from_port":0,"icmp_code":0,"icmp_type":0,"ipv6_cidr_block":"","protocol":"-1","rule_no":100,"to_port":0}],"id":"acl-069a798ad4aa03b2c","ingress":[{"action":"allow","cidr_block":"0.0.0.0/0","from_port":1024,"icmp_code":0,"icmp_type":0,"ipv6_cidr_block":"","protocol":"6","rule_no":300,"to_port":65535},{"action":"allow","cidr_block":"0.0.0.0/0","from_port":22,"icmp_code":0,"icmp_type":0,"ipv6_cidr_block":"","protocol":"6","rule_no":102,"to_port":22},{"action":"allow","cidr_block":"0.0.0.0/0","from_port":80,"icmp_code":0,"icmp_type":0,"ipv6_cidr_block":"","protocol":"6","rule_no":100,"to_port":80},{"action":"deny","cidr_block":"0.0.0.0/0","from_port":8000,"icmp_code":0,"icmp_type":0,"ipv6_cidr_block":"","protocol":"6","rule_no":200,"to_port":8100}],"owner_id":"540044833068","subnet_ids":["subnet-0e4cc60d35634e85b","subnet-0ec75df66980d2920"],"tags":{"Name":"Restricted Example"},"tags_all":{"Name":"Restricted Example"},"vpc_id":"vpc-02901bcbb89561298"},"after_unknown":{},"before_sensitive":{"egress":[{}],"ingress":[{},{},{},{}],"subnet_ids":[false,false],"tags":{},"tags_all":{}},"after_sensitive":{"egress":[{}],"ingress":[{},{},{},{}],"subnet_ids":[false,false],"tags":{},"tags_all":{}}}},{"address":"module.heritage[0].aws_network_acl_rule.allow_ephemeral","module_address":"module.heritage[0]","mode":"managed","type":"aws_network_acl_rule","name":"allow_ephemeral","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"cidr_block":"0.0.0.0/0","egress":false,"from_port":1024,"icmp_code":null,"icmp_type":null,"id":"nacl-2257767417","ipv6_cidr_block":"","network_acl_id":"acl-069a798ad4aa03b2c","protocol":"6","rule_action":"allow","rule_number":300,"to_port":65535},"after":{"cidr_block":"0.0.0.0/0","egress":false,"from_port":1024,"icmp_code":null,"icmp_type":null,"id":"nacl-2257767417","ipv6_cidr_block":"","network_acl_id":"acl-069a798ad4aa03b2c","protocol":"6","rule_action":"allow","rule_number":300,"to_port":65535},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.heritage[0].aws_network_acl_rule.allow_http","module_address":"module.heritage[0]","mode":"managed","type":"aws_network_acl_rule","name":"allow_http","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"cidr_block":"0.0.0.0/0","egress":false,"from_port":80,"icmp_code":null,"icmp_type":null,"id":"nacl-1744572244","ipv6_cidr_block":"","network_acl_id":"acl-069a798ad4aa03b2c","protocol":"6","rule_action":"allow","rule_number":100,"to_port":80},"after":{"cidr_block":"0.0.0.0/0","egress":false,"from_port":80,"icmp_code":null,"icmp_type":null,"id":"nacl-1744572244","ipv6_cidr_block":"","network_acl_id":"acl-069a798ad4aa03b2c","protocol":"6","rule_action":"allow","rule_number":100,"to_port":80},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.heritage[0].aws_network_acl_rule.allow_outbound","module_address":"module.heritage[0]","mode":"managed","type":"aws_network_acl_rule","name":"allow_outbound","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"cidr_block":"0.0.0.0/0","egress":true,"from_port":null,"icmp_code":null,"icmp_type":null,"id":"nacl-1087552375","ipv6_cidr_block":"","network_acl_id":"acl-069a798ad4aa03b2c","protocol":"-1","rule_action":"allow","rule_number":100,"to_port":null},"after":{"cidr_block":"0.0.0.0/0","egress":true,"from_port":null,"icmp_code":null,"icmp_type":null,"id":"nacl-1087552375","ipv6_cidr_block":"","network_acl_id":"acl-069a798ad4aa03b2c","protocol":"-1","rule_action":"allow","rule_number":100,"to_port":null},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.heritage[0].aws_network_acl_rule.allow_ssh","module_address":"module.heritage[0]","mode":"managed","type":"aws_network_acl_rule","name":"allow_ssh","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"cidr_block":"0.0.0.0/0","egress":false,"from_port":22,"icmp_code":null,"icmp_type":null,"id":"nacl-2345112011","ipv6_cidr_block":"","network_acl_id":"acl-069a798ad4aa03b2c","protocol":"6","rule_action":"allow","rule_number":102,"to_port":22},"after":{"cidr_block":"0.0.0.0/0","egress":false,"from_port":22,"icmp_code":null,"icmp_type":null,"id":"nacl-2345112011","ipv6_cidr_block":"","network_acl_id":"acl-069a798ad4aa03b2c","protocol":"6","rule_action":"allow","rule_number":102,"to_port":22},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.heritage[0].aws_network_acl_rule.deny_high_ports","module_address":"module.heritage[0]","mode":"managed","type":"aws_network_acl_rule","name":"deny_high_ports","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"cidr_block":"0.0.0.0/0","egress":false,"from_port":8000,"icmp_code":null,"icmp_type":null,"id":"nacl-463284879","ipv6_cidr_block":"","network_acl_id":"acl-069a798ad4aa03b2c","protocol":"6","rule_action":"deny","rule_number":200,"to_port":8100},"after":{"cidr_block":"0.0.0.0/0","egress":false,"from_port":8000,"icmp_code":null,"icmp_type":null,"id":"nacl-463284879","ipv6_cidr_block":"","network_acl_id":"acl-069a798ad4aa03b2c","protocol":"6","rule_action":"deny","rule_number":200,"to_port":8100},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.heritage[0].aws_rds_cluster.face_database","module_address":"module.heritage[0]","mode":"managed","type":"aws_rds_cluster","name":"face_database","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"allocated_storage":1,"allow_major_version_upgrade":null,"apply_immediately":null,"arn":"arn:aws:rds:eu-west-2:540044833068:cluster:facial-recognition-terraform-example","availability_zones":["eu-west-2a","eu-west-2b","eu-west-2c"],"backtrack_window":0,"backup_retention_period":1,"ca_certificate_identifier":null,"ca_certificate_valid_till":null,"cluster_identifier":"facial-recognition-terraform-example","cluster_identifier_prefix":"","cluster_members":["tf-20251117235257281600000001"],"cluster_resource_id":"cluster-N6QYRDLXDK37JQDNBQCUCLZX2I","cluster_scalability_type":"","copy_tags_to_snapshot":false,"database_insights_mode":"standard","database_name":"test","db_cluster_instance_class":"","db_cluster_parameter_group_name":"default.aurora-postgresql16","db_instance_parameter_group_name":null,"db_subnet_group_name":"main-terraform-example","db_system_id":"","delete_automated_backups":true,"deletion_protection":false,"domain":"","domain_iam_role_name":"","enable_global_write_forwarding":false,"enable_http_endpoint":false,"enable_local_write_forwarding":false,"enabled_cloudwatch_logs_exports":[],"endpoint":"facial-recognition-terraform-example.cluster-cnx7xf6hwmba.eu-west-2.rds.amazonaws.com","engine":"aurora-postgresql","engine_lifecycle_support":"open-source-rds-extended-support","engine_mode":"provisioned","engine_version":"16.8","engine_version_actual":"16.8","final_snapshot_identifier":"test","global_cluster_identifier":"","hosted_zone_id":"Z1TTGA775OQIYO","iam_database_authentication_enabled":false,"iam_roles":[],"id":"facial-recognition-terraform-example","iops":0,"kms_key_id":"arn:aws:kms:eu-west-2:540044833068:key/2f30a33a-1c66-4b89-8420-50a4ce8f63f2","manage_master_user_password":null,"master_password":"must_be_eight_characters","master_password_wo":null,"master_password_wo_version":null,"master_user_secret":[],"master_user_secret_kms_key_id":null,"master_username":"test","monitoring_interval":0,"monitoring_role_arn":"","network_type":"IPV4","performance_insights_enabled":false,"performance_insights_kms_key_id":"","performance_insights_retention_period":0,"port":5432,"preferred_backup_window":"22:06-22:36","preferred_maintenance_window":"thu:05:14-thu:05:44","reader_endpoint":"facial-recognition-terraform-example.cluster-ro-cnx7xf6hwmba.eu-west-2.rds.amazonaws.com","replication_source_identifier":"","restore_to_point_in_time":[],"s3_import":[],"scaling_configuration":[],"serverlessv2_scaling_configuration":[{"max_capacity":1,"min_capacity":0.5,"seconds_until_auto_pause":0}],"skip_final_snapshot":true,"snapshot_identifier":null,"source_region":null,"storage_encrypted":true,"storage_type":"","tags":{},"tags_all":{},"timeouts":null,"vpc_security_group_ids":["sg-0159f0e3d8224d441"]},"after":{"allocated_storage":1,"allow_major_version_upgrade":null,"apply_immediately":null,"arn":"arn:aws:rds:eu-west-2:540044833068:cluster:facial-recognition-terraform-example","availability_zones":["eu-west-2a","eu-west-2b","eu-west-2c"],"backtrack_window":0,"backup_retention_period":1,"ca_certificate_identifier":null,"ca_certificate_valid_till":null,"cluster_identifier":"facial-recognition-terraform-example","cluster_identifier_prefix":"","cluster_members":["tf-20251117235257281600000001"],"cluster_resource_id":"cluster-N6QYRDLXDK37JQDNBQCUCLZX2I","cluster_scalability_type":"","copy_tags_to_snapshot":false,"database_insights_mode":"standard","database_name":"test","db_cluster_instance_class":"","db_cluster_parameter_group_name":"default.aurora-postgresql16","db_instance_parameter_group_name":null,"db_subnet_group_name":"main-terraform-example","db_system_id":"","delete_automated_backups":true,"deletion_protection":false,"domain":"","domain_iam_role_name":"","enable_global_write_forwarding":false,"enable_http_endpoint":false,"enable_local_write_forwarding":false,"enabled_cloudwatch_logs_exports":[],"endpoint":"facial-recognition-terraform-example.cluster-cnx7xf6hwmba.eu-west-2.rds.amazonaws.com","engine":"aurora-postgresql","engine_lifecycle_support":"open-source-rds-extended-support","engine_mode":"provisioned","engine_version":"16.8","engine_version_actual":"16.8","final_snapshot_identifier":"test","global_cluster_identifier":"","hosted_zone_id":"Z1TTGA775OQIYO","iam_database_authentication_enabled":false,"iam_roles":[],"id":"facial-recognition-terraform-example","iops":0,"kms_key_id":"arn:aws:kms:eu-west-2:540044833068:key/2f30a33a-1c66-4b89-8420-50a4ce8f63f2","manage_master_user_password":null,"master_password":"must_be_eight_characters","master_password_wo":null,"master_password_wo_version":null,"master_user_secret":[],"master_user_secret_kms_key_id":null,"master_username":"test","monitoring_interval":0,"monitoring_role_arn":"","network_type":"IPV4","performance_insights_enabled":false,"performance_insights_kms_key_id":"","performance_insights_retention_period":0,"port":5432,"preferred_backup_window":"22:06-22:36","preferred_maintenance_window":"thu:05:14-thu:05:44","reader_endpoint":"facial-recognition-terraform-example.cluster-ro-cnx7xf6hwmba.eu-west-2.rds.amazonaws.com","replication_source_identifier":"","restore_to_point_in_time":[],"s3_import":[],"scaling_configuration":[],"serverlessv2_scaling_configuration":[{"max_capacity":1,"min_capacity":0.5,"seconds_until_auto_pause":0}],"skip_final_snapshot":true,"snapshot_identifier":null,"source_region":null,"storage_encrypted":true,"storage_type":"","tags":{},"tags_all":{},"timeouts":null,"vpc_security_group_ids":["sg-0159f0e3d8224d441"]},"after_unknown":{},"before_sensitive":{"availability_zones":[false,false,false],"cluster_members":[false],"enabled_cloudwatch_logs_exports":[],"iam_roles":[],"master_password":true,"master_password_wo":true,"master_user_secret":[],"restore_to_point_in_time":[],"s3_import":[],"scaling_configuration":[],"serverlessv2_scaling_configuration":[{}],"tags":{},"tags_all":{},"vpc_security_group_ids":[false]},"after_sensitive":{"availability_zones":[false,false,false],"cluster_members":[false],"enabled_cloudwatch_logs_exports":[],"iam_roles":[],"master_password":true,"master_password_wo":true,"master_user_secret":[],"restore_to_point_in_time":[],"s3_import":[],"scaling_configuration":[],"serverlessv2_scaling_configuration":[{}],"tags":{},"tags_all":{},"vpc_security_group_ids":[false]}}},{"address":"module.heritage[0].aws_rds_cluster_instance.face_database","module_address":"module.heritage[0]","mode":"managed","type":"aws_rds_cluster_instance","name":"face_database","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"apply_immediately":true,"arn":"arn:aws:rds:eu-west-2:540044833068:db:tf-20251117235257281600000001","auto_minor_version_upgrade":true,"availability_zone":"eu-west-2b","ca_cert_identifier":"rds-ca-rsa2048-g1","cluster_identifier":"facial-recognition-terraform-example","copy_tags_to_snapshot":false,"custom_iam_instance_profile":"","db_parameter_group_name":"default.aurora-postgresql16","db_subnet_group_name":"main-terraform-example","dbi_resource_id":"db-5JDUQAUCVWAJGUEVWQDBZUDHPE","endpoint":"tf-20251117235257281600000001.cnx7xf6hwmba.eu-west-2.rds.amazonaws.com","engine":"aurora-postgresql","engine_version":"16.8","engine_version_actual":"16.8","force_destroy":false,"id":"tf-20251117235257281600000001","identifier":"tf-20251117235257281600000001","identifier_prefix":"tf-","instance_class":"db.serverless","kms_key_id":"arn:aws:kms:eu-west-2:540044833068:key/2f30a33a-1c66-4b89-8420-50a4ce8f63f2","monitoring_interval":0,"monitoring_role_arn":"","network_type":"IPV4","performance_insights_enabled":false,"performance_insights_kms_key_id":"","performance_insights_retention_period":0,"port":5432,"preferred_backup_window":"22:06-22:36","preferred_maintenance_window":"wed:02:29-wed:02:59","promotion_tier":0,"publicly_accessible":false,"storage_encrypted":true,"tags":{},"tags_all":{},"timeouts":null,"writer":true},"after":{"apply_immediately":true,"arn":"arn:aws:rds:eu-west-2:540044833068:db:tf-20251117235257281600000001","auto_minor_version_upgrade":true,"availability_zone":"eu-west-2b","ca_cert_identifier":"rds-ca-rsa2048-g1","cluster_identifier":"facial-recognition-terraform-example","copy_tags_to_snapshot":false,"custom_iam_instance_profile":"","db_parameter_group_name":"default.aurora-postgresql16","db_subnet_group_name":"main-terraform-example","dbi_resource_id":"db-5JDUQAUCVWAJGUEVWQDBZUDHPE","endpoint":"tf-20251117235257281600000001.cnx7xf6hwmba.eu-west-2.rds.amazonaws.com","engine":"aurora-postgresql","engine_version":"16.8","engine_version_actual":"16.8","force_destroy":false,"id":"tf-20251117235257281600000001","identifier":"tf-20251117235257281600000001","identifier_prefix":"tf-","instance_class":"db.serverless","kms_key_id":"arn:aws:kms:eu-west-2:540044833068:key/2f30a33a-1c66-4b89-8420-50a4ce8f63f2","monitoring_interval":0,"monitoring_role_arn":"","network_type":"IPV4","performance_insights_enabled":false,"performance_insights_kms_key_id":"","performance_insights_retention_period":0,"port":5432,"preferred_backup_window":"22:06-22:36","preferred_maintenance_window":"wed:02:29-wed:02:59","promotion_tier":0,"publicly_accessible":false,"storage_encrypted":true,"tags":{},"tags_all":{},"timeouts":null,"writer":true},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.heritage[0].aws_route53_record.face","module_address":"module.heritage[0]","mode":"managed","type":"aws_route53_record","name":"face","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"alias":[],"allow_overwrite":null,"cidr_routing_policy":[],"failover_routing_policy":[],"fqdn":"face-terraform-example.overmind-terraform-example.com","geolocation_routing_policy":[],"geoproximity_routing_policy":[],"health_check_id":"","id":"Z0909695IU5SU6N8UFON_face-terraform-example.overmind-terraform-example.com_CNAME","latency_routing_policy":[],"multivalue_answer_routing_policy":false,"name":"face-terraform-example.overmind-terraform-example.com","records":["terraform-example-1993925081.eu-west-2.elb.amazonaws.com"],"set_identifier":"","timeouts":null,"ttl":300,"type":"CNAME","weighted_routing_policy":[],"zone_id":"Z0909695IU5SU6N8UFON"},"after":{"alias":[],"allow_overwrite":null,"cidr_routing_policy":[],"failover_routing_policy":[],"fqdn":"face-terraform-example.overmind-terraform-example.com","geolocation_routing_policy":[],"geoproximity_routing_policy":[],"health_check_id":"","id":"Z0909695IU5SU6N8UFON_face-terraform-example.overmind-terraform-example.com_CNAME","latency_routing_policy":[],"multivalue_answer_routing_policy":false,"name":"face-terraform-example.overmind-terraform-example.com","records":["terraform-example-1993925081.eu-west-2.elb.amazonaws.com"],"set_identifier":"","timeouts":null,"ttl":300,"type":"CNAME","weighted_routing_policy":[],"zone_id":"Z0909695IU5SU6N8UFON"},"after_unknown":{},"before_sensitive":{"alias":[],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"geoproximity_routing_policy":[],"latency_routing_policy":[],"records":[false],"weighted_routing_policy":[]},"after_sensitive":{"alias":[],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"geoproximity_routing_policy":[],"latency_routing_policy":[],"records":[false],"weighted_routing_policy":[]}}},{"address":"module.heritage[0].aws_route53_record.visit_counter","module_address":"module.heritage[0]","mode":"managed","type":"aws_route53_record","name":"visit_counter","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"alias":[],"allow_overwrite":null,"cidr_routing_policy":[],"failover_routing_policy":[],"fqdn":"visits-terraform-example.overmind-terraform-example.com","geolocation_routing_policy":[],"geoproximity_routing_policy":[],"health_check_id":"","id":"Z0909695IU5SU6N8UFON_visits-terraform-example.overmind-terraform-example.com_CNAME","latency_routing_policy":[],"multivalue_answer_routing_policy":false,"name":"visits-terraform-example.overmind-terraform-example.com","records":["terraform-example-1993925081.eu-west-2.elb.amazonaws.com"],"set_identifier":"","timeouts":null,"ttl":300,"type":"CNAME","weighted_routing_policy":[],"zone_id":"Z0909695IU5SU6N8UFON"},"after":{"alias":[],"allow_overwrite":null,"cidr_routing_policy":[],"failover_routing_policy":[],"fqdn":"visits-terraform-example.overmind-terraform-example.com","geolocation_routing_policy":[],"geoproximity_routing_policy":[],"health_check_id":"","id":"Z0909695IU5SU6N8UFON_visits-terraform-example.overmind-terraform-example.com_CNAME","latency_routing_policy":[],"multivalue_answer_routing_policy":false,"name":"visits-terraform-example.overmind-terraform-example.com","records":["terraform-example-1993925081.eu-west-2.elb.amazonaws.com"],"set_identifier":"","timeouts":null,"ttl":300,"type":"CNAME","weighted_routing_policy":[],"zone_id":"Z0909695IU5SU6N8UFON"},"after_unknown":{},"before_sensitive":{"alias":[],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"geoproximity_routing_policy":[],"latency_routing_policy":[],"records":[false],"weighted_routing_policy":[]},"after_sensitive":{"alias":[],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"geoproximity_routing_policy":[],"latency_routing_policy":[],"records":[false],"weighted_routing_policy":[]}}},{"address":"module.heritage[0].aws_route_table_association.restricted-2a","module_address":"module.heritage[0]","mode":"managed","type":"aws_route_table_association","name":"restricted-2a","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"gateway_id":"","id":"rtbassoc-0424ae05f399b1fe1","route_table_id":"rtb-073519b951ac0afb5","subnet_id":"subnet-0ec75df66980d2920","timeouts":null},"after":{"gateway_id":"","id":"rtbassoc-0424ae05f399b1fe1","route_table_id":"rtb-073519b951ac0afb5","subnet_id":"subnet-0ec75df66980d2920","timeouts":null},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.heritage[0].aws_route_table_association.restricted-2b","module_address":"module.heritage[0]","mode":"managed","type":"aws_route_table_association","name":"restricted-2b","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"gateway_id":"","id":"rtbassoc-07a004760c9195770","route_table_id":"rtb-073519b951ac0afb5","subnet_id":"subnet-0e4cc60d35634e85b","timeouts":null},"after":{"gateway_id":"","id":"rtbassoc-07a004760c9195770","route_table_id":"rtb-073519b951ac0afb5","subnet_id":"subnet-0e4cc60d35634e85b","timeouts":null},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.heritage[0].aws_s3_bucket.b","module_address":"module.heritage[0]","mode":"managed","type":"aws_s3_bucket","name":"b","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"acceleration_status":"","acl":null,"arn":"arn:aws:s3:::second-example-brave-crappie20251117232021571800000004","bucket":"second-example-brave-crappie20251117232021571800000004","bucket_domain_name":"second-example-brave-crappie20251117232021571800000004.s3.amazonaws.com","bucket_prefix":"second-example-brave-crappie","bucket_regional_domain_name":"second-example-brave-crappie20251117232021571800000004.s3.eu-west-2.amazonaws.com","cors_rule":[],"force_destroy":false,"grant":[{"id":"05d918fa182ad8f3fa915436354b8657e3c2c59b326ecbfc43e6c00451268d0a","permissions":["FULL_CONTROL"],"type":"CanonicalUser","uri":""}],"hosted_zone_id":"Z3GKZC51ZF0DB4","id":"second-example-brave-crappie20251117232021571800000004","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"object_lock_enabled":false,"policy":"","region":"eu-west-2","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"","sse_algorithm":"AES256"}],"bucket_key_enabled":false}]}],"tags":{"Name":"Second example bucket"},"tags_all":{"Name":"Second example bucket"},"timeouts":null,"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"after":{"acceleration_status":"","acl":null,"arn":"arn:aws:s3:::second-example-brave-crappie20251117232021571800000004","bucket":"second-example-brave-crappie20251117232021571800000004","bucket_domain_name":"second-example-brave-crappie20251117232021571800000004.s3.amazonaws.com","bucket_prefix":"second-example-brave-crappie","bucket_regional_domain_name":"second-example-brave-crappie20251117232021571800000004.s3.eu-west-2.amazonaws.com","cors_rule":[],"force_destroy":false,"grant":[{"id":"05d918fa182ad8f3fa915436354b8657e3c2c59b326ecbfc43e6c00451268d0a","permissions":["FULL_CONTROL"],"type":"CanonicalUser","uri":""}],"hosted_zone_id":"Z3GKZC51ZF0DB4","id":"second-example-brave-crappie20251117232021571800000004","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"object_lock_enabled":false,"policy":"","region":"eu-west-2","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"","sse_algorithm":"AES256"}],"bucket_key_enabled":false}]}],"tags":{"Name":"Second example bucket"},"tags_all":{"Name":"Second example bucket"},"timeouts":null,"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"after_unknown":{},"before_sensitive":{"cors_rule":[],"grant":[{"permissions":[false]}],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}],"tags":{},"tags_all":{},"versioning":[{}],"website":[]},"after_sensitive":{"cors_rule":[],"grant":[{"permissions":[false]}],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}],"tags":{},"tags_all":{},"versioning":[{}],"website":[]}}},{"address":"module.heritage[0].aws_s3_bucket.my_bucket","module_address":"module.heritage[0]","mode":"managed","type":"aws_s3_bucket","name":"my_bucket","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"acceleration_status":"","acl":"private","arn":"arn:aws:s3:::bucket-notification-terraform-example20251117232019549500000001","bucket":"bucket-notification-terraform-example20251117232019549500000001","bucket_domain_name":"bucket-notification-terraform-example20251117232019549500000001.s3.amazonaws.com","bucket_prefix":"bucket-notification-terraform-example","bucket_regional_domain_name":"bucket-notification-terraform-example20251117232019549500000001.s3.eu-west-2.amazonaws.com","cors_rule":[],"force_destroy":false,"grant":[{"id":"05d918fa182ad8f3fa915436354b8657e3c2c59b326ecbfc43e6c00451268d0a","permissions":["FULL_CONTROL"],"type":"CanonicalUser","uri":""}],"hosted_zone_id":"Z3GKZC51ZF0DB4","id":"bucket-notification-terraform-example20251117232019549500000001","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"object_lock_enabled":false,"policy":"","region":"eu-west-2","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"","sse_algorithm":"AES256"}],"bucket_key_enabled":false}]}],"tags":{},"tags_all":{},"timeouts":null,"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"after":{"acceleration_status":"","acl":"private","arn":"arn:aws:s3:::bucket-notification-terraform-example20251117232019549500000001","bucket":"bucket-notification-terraform-example20251117232019549500000001","bucket_domain_name":"bucket-notification-terraform-example20251117232019549500000001.s3.amazonaws.com","bucket_prefix":"bucket-notification-terraform-example","bucket_regional_domain_name":"bucket-notification-terraform-example20251117232019549500000001.s3.eu-west-2.amazonaws.com","cors_rule":[],"force_destroy":false,"grant":[{"id":"05d918fa182ad8f3fa915436354b8657e3c2c59b326ecbfc43e6c00451268d0a","permissions":["FULL_CONTROL"],"type":"CanonicalUser","uri":""}],"hosted_zone_id":"Z3GKZC51ZF0DB4","id":"bucket-notification-terraform-example20251117232019549500000001","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"object_lock_enabled":false,"policy":"","region":"eu-west-2","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"","sse_algorithm":"AES256"}],"bucket_key_enabled":false}]}],"tags":{},"tags_all":{},"timeouts":null,"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"after_unknown":{},"before_sensitive":{"cors_rule":[],"grant":[{"permissions":[false]}],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}],"tags":{},"tags_all":{},"versioning":[{}],"website":[]},"after_sensitive":{"cors_rule":[],"grant":[{"permissions":[false]}],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}],"tags":{},"tags_all":{},"versioning":[{}],"website":[]}}},{"address":"module.heritage[0].aws_s3_bucket_acl.b_acl","module_address":"module.heritage[0]","mode":"managed","type":"aws_s3_bucket_acl","name":"b_acl","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"access_control_policy":[{"grant":[{"grantee":[{"display_name":"","email_address":"","id":"05d918fa182ad8f3fa915436354b8657e3c2c59b326ecbfc43e6c00451268d0a","type":"CanonicalUser","uri":""}],"permission":"FULL_CONTROL"}],"owner":[{"display_name":"","id":"05d918fa182ad8f3fa915436354b8657e3c2c59b326ecbfc43e6c00451268d0a"}]}],"acl":"private","bucket":"second-example-brave-crappie20251117232021571800000004","expected_bucket_owner":"","id":"second-example-brave-crappie20251117232021571800000004,private"},"after":{"access_control_policy":[{"grant":[{"grantee":[{"display_name":"","email_address":"","id":"05d918fa182ad8f3fa915436354b8657e3c2c59b326ecbfc43e6c00451268d0a","type":"CanonicalUser","uri":""}],"permission":"FULL_CONTROL"}],"owner":[{"display_name":"","id":"05d918fa182ad8f3fa915436354b8657e3c2c59b326ecbfc43e6c00451268d0a"}]}],"acl":"private","bucket":"second-example-brave-crappie20251117232021571800000004","expected_bucket_owner":"","id":"second-example-brave-crappie20251117232021571800000004,private"},"after_unknown":{},"before_sensitive":{"access_control_policy":[{"grant":[{"grantee":[{}]}],"owner":[{}]}]},"after_sensitive":{"access_control_policy":[{"grant":[{"grantee":[{}]}],"owner":[{}]}]}}},{"address":"module.heritage[0].aws_s3_bucket_notification.bucket_notification","module_address":"module.heritage[0]","mode":"managed","type":"aws_s3_bucket_notification","name":"bucket_notification","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"bucket":"bucket-notification-terraform-example20251117232019549500000001","eventbridge":false,"id":"bucket-notification-terraform-example20251117232019549500000001","lambda_function":[],"queue":[{"events":["s3:ObjectCreated:*"],"filter_prefix":"","filter_suffix":"","id":"tf-s3-queue-20251117232048550500000013","queue_arn":"arn:aws:sqs:eu-west-2:540044833068:-terraform-example-notifications-from-s3"}],"topic":[]},"after":{"bucket":"bucket-notification-terraform-example20251117232019549500000001","eventbridge":false,"id":"bucket-notification-terraform-example20251117232019549500000001","lambda_function":[],"queue":[{"events":["s3:ObjectCreated:*"],"filter_prefix":"","filter_suffix":"","id":"tf-s3-queue-20251117232048550500000013","queue_arn":"arn:aws:sqs:eu-west-2:540044833068:-terraform-example-notifications-from-s3"}],"topic":[]},"after_unknown":{},"before_sensitive":{"lambda_function":[],"queue":[{"events":[false]}],"topic":[]},"after_sensitive":{"lambda_function":[],"queue":[{"events":[false]}],"topic":[]}}},{"address":"module.heritage[0].aws_s3_bucket_ownership_controls.b","module_address":"module.heritage[0]","mode":"managed","type":"aws_s3_bucket_ownership_controls","name":"b","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"bucket":"second-example-brave-crappie20251117232021571800000004","id":"second-example-brave-crappie20251117232021571800000004","rule":[{"object_ownership":"ObjectWriter"}]},"after":{"bucket":"second-example-brave-crappie20251117232021571800000004","id":"second-example-brave-crappie20251117232021571800000004","rule":[{"object_ownership":"ObjectWriter"}]},"after_unknown":{},"before_sensitive":{"rule":[{}]},"after_sensitive":{"rule":[{}]}}},{"address":"module.heritage[0].aws_s3_bucket_policy.bucket_policy","module_address":"module.heritage[0]","mode":"managed","type":"aws_s3_bucket_policy","name":"bucket_policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"bucket":"s3-one-adequate-gibbon20251117232020021100000002","id":"s3-one-adequate-gibbon20251117232020021100000002","policy":"{\"Statement\":[{\"Action\":\"s3:GetObject\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::cloudfront:user/CloudFront Origin Access Identity E3773WNTKP0C2U\"},\"Resource\":\"arn:aws:s3:::s3-one-adequate-gibbon20251117232020021100000002/static/*\"},{\"Action\":\"s3:GetObject\",\"Condition\":{\"StringEquals\":{\"aws:SourceArn\":\"arn:aws:cloudfront::540044833068:distribution/EX4HFUQMZ2ULI\"}},\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"cloudfront.amazonaws.com\"},\"Resource\":\"arn:aws:s3:::s3-one-adequate-gibbon20251117232020021100000002/static/*\"}],\"Version\":\"2012-10-17\"}"},"after":{"bucket":"s3-one-adequate-gibbon20251117232020021100000002","id":"s3-one-adequate-gibbon20251117232020021100000002","policy":"{\"Statement\":[{\"Action\":\"s3:GetObject\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::cloudfront:user/CloudFront Origin Access Identity E3773WNTKP0C2U\"},\"Resource\":\"arn:aws:s3:::s3-one-adequate-gibbon20251117232020021100000002/static/*\"},{\"Action\":\"s3:GetObject\",\"Condition\":{\"StringEquals\":{\"aws:SourceArn\":\"arn:aws:cloudfront::540044833068:distribution/EX4HFUQMZ2ULI\"}},\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"cloudfront.amazonaws.com\"},\"Resource\":\"arn:aws:s3:::s3-one-adequate-gibbon20251117232020021100000002/static/*\"}],\"Version\":\"2012-10-17\"}"},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.heritage[0].aws_security_group.allow_access","module_address":"module.heritage[0]","mode":"managed","type":"aws_security_group","name":"allow_access","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:eu-west-2:540044833068:security-group/sg-0c7e72143f1b9c08c","description":"Allow access security group","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-0c7e72143f1b9c08c","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22}],"name":"allow_access-terraform-example","name_prefix":"","owner_id":"540044833068","revoke_rules_on_delete":false,"tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"after":{"arn":"arn:aws:ec2:eu-west-2:540044833068:security-group/sg-0c7e72143f1b9c08c","description":"Allow access security group","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-0c7e72143f1b9c08c","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22}],"name":"allow_access-terraform-example","name_prefix":"","owner_id":"540044833068","revoke_rules_on_delete":false,"tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"after_unknown":{},"before_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}},"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}},{"address":"module.heritage[0].aws_security_group.instance_sg","module_address":"module.heritage[0]","mode":"managed","type":"aws_security_group","name":"instance_sg","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:eu-west-2:540044833068:security-group/sg-057ed2204f81107a5","description":"Managed by Terraform","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-057ed2204f81107a5","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22},{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":8080,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":8080}],"name":"terraform-2025111723203855250000000a","name_prefix":"terraform-","owner_id":"540044833068","revoke_rules_on_delete":false,"tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"after":{"arn":"arn:aws:ec2:eu-west-2:540044833068:security-group/sg-057ed2204f81107a5","description":"Managed by Terraform","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-057ed2204f81107a5","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22},{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":8080,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":8080}],"name":"terraform-2025111723203855250000000a","name_prefix":"terraform-","owner_id":"540044833068","revoke_rules_on_delete":false,"tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"after_unknown":{},"before_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}},"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}},{"address":"module.heritage[0].aws_sns_topic.example_topic","module_address":"module.heritage[0]","mode":"managed","type":"aws_sns_topic","name":"example_topic","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"application_failure_feedback_role_arn":"","application_success_feedback_role_arn":"","application_success_feedback_sample_rate":0,"archive_policy":"","arn":"arn:aws:sns:eu-west-2:540044833068:-terraform-example-topic","beginning_archive_time":"","content_based_deduplication":false,"delivery_policy":"","display_name":"","fifo_throughput_scope":"","fifo_topic":false,"firehose_failure_feedback_role_arn":"","firehose_success_feedback_role_arn":"","firehose_success_feedback_sample_rate":0,"http_failure_feedback_role_arn":"","http_success_feedback_role_arn":"","http_success_feedback_sample_rate":0,"id":"arn:aws:sns:eu-west-2:540044833068:-terraform-example-topic","kms_master_key_id":"","lambda_failure_feedback_role_arn":"","lambda_success_feedback_role_arn":"","lambda_success_feedback_sample_rate":0,"name":"-terraform-example-topic","name_prefix":"","owner":"540044833068","policy":"{\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Action\":[\"SNS:GetTopicAttributes\",\"SNS:SetTopicAttributes\",\"SNS:AddPermission\",\"SNS:RemovePermission\",\"SNS:DeleteTopic\",\"SNS:Subscribe\",\"SNS:ListSubscriptionsByTopic\",\"SNS:Publish\"],\"Condition\":{\"StringEquals\":{\"AWS:SourceOwner\":\"540044833068\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Resource\":\"arn:aws:sns:eu-west-2:540044833068:-terraform-example-topic\",\"Sid\":\"__default_statement_ID\"}],\"Version\":\"2008-10-17\"}","signature_version":0,"sqs_failure_feedback_role_arn":"","sqs_success_feedback_role_arn":"","sqs_success_feedback_sample_rate":0,"tags":{},"tags_all":{},"tracing_config":""},"after":{"application_failure_feedback_role_arn":"","application_success_feedback_role_arn":"","application_success_feedback_sample_rate":0,"archive_policy":"","arn":"arn:aws:sns:eu-west-2:540044833068:-terraform-example-topic","beginning_archive_time":"","content_based_deduplication":false,"delivery_policy":"","display_name":"","fifo_throughput_scope":"","fifo_topic":false,"firehose_failure_feedback_role_arn":"","firehose_success_feedback_role_arn":"","firehose_success_feedback_sample_rate":0,"http_failure_feedback_role_arn":"","http_success_feedback_role_arn":"","http_success_feedback_sample_rate":0,"id":"arn:aws:sns:eu-west-2:540044833068:-terraform-example-topic","kms_master_key_id":"","lambda_failure_feedback_role_arn":"","lambda_success_feedback_role_arn":"","lambda_success_feedback_sample_rate":0,"name":"-terraform-example-topic","name_prefix":"","owner":"540044833068","policy":"{\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Action\":[\"SNS:GetTopicAttributes\",\"SNS:SetTopicAttributes\",\"SNS:AddPermission\",\"SNS:RemovePermission\",\"SNS:DeleteTopic\",\"SNS:Subscribe\",\"SNS:ListSubscriptionsByTopic\",\"SNS:Publish\"],\"Condition\":{\"StringEquals\":{\"AWS:SourceOwner\":\"540044833068\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Resource\":\"arn:aws:sns:eu-west-2:540044833068:-terraform-example-topic\",\"Sid\":\"__default_statement_ID\"}],\"Version\":\"2008-10-17\"}","signature_version":0,"sqs_failure_feedback_role_arn":"","sqs_success_feedback_role_arn":"","sqs_success_feedback_sample_rate":0,"tags":{},"tags_all":{},"tracing_config":""},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.heritage[0].aws_sqs_queue.my_queue","module_address":"module.heritage[0]","mode":"managed","type":"aws_sqs_queue","name":"my_queue","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:sqs:eu-west-2:540044833068:-terraform-example-notifications-from-s3","content_based_deduplication":false,"deduplication_scope":"","delay_seconds":0,"fifo_queue":false,"fifo_throughput_limit":"","id":"https://sqs.eu-west-2.amazonaws.com/540044833068/-terraform-example-notifications-from-s3","kms_data_key_reuse_period_seconds":300,"kms_master_key_id":"","max_message_size":262144,"message_retention_seconds":345600,"name":"-terraform-example-notifications-from-s3","name_prefix":"","policy":"{\"Id\":\"arn:aws:sqs:eu-west-2:540044833068:-terraform-example-notifications-from-s3/SQSPolicy\",\"Statement\":[{\"Action\":\"SQS:SendMessage\",\"Condition\":{\"ArnEquals\":{\"aws:SourceArn\":\"arn:aws:s3:::bucket-notification-terraform-example20251117232019549500000001\"}},\"Effect\":\"Allow\",\"Principal\":\"*\",\"Resource\":\"arn:aws:sqs:eu-west-2:540044833068:-terraform-example-notifications-from-s3\",\"Sid\":\"AllowS3BucketNotification\"}],\"Version\":\"2012-10-17\"}","receive_wait_time_seconds":0,"redrive_allow_policy":"","redrive_policy":"","sqs_managed_sse_enabled":true,"tags":{},"tags_all":{},"timeouts":null,"url":"https://sqs.eu-west-2.amazonaws.com/540044833068/-terraform-example-notifications-from-s3","visibility_timeout_seconds":30},"after":{"arn":"arn:aws:sqs:eu-west-2:540044833068:-terraform-example-notifications-from-s3","content_based_deduplication":false,"deduplication_scope":"","delay_seconds":0,"fifo_queue":false,"fifo_throughput_limit":"","id":"https://sqs.eu-west-2.amazonaws.com/540044833068/-terraform-example-notifications-from-s3","kms_data_key_reuse_period_seconds":300,"kms_master_key_id":"","max_message_size":262144,"message_retention_seconds":345600,"name":"-terraform-example-notifications-from-s3","name_prefix":"","policy":"{\"Id\":\"arn:aws:sqs:eu-west-2:540044833068:-terraform-example-notifications-from-s3/SQSPolicy\",\"Statement\":[{\"Action\":\"SQS:SendMessage\",\"Condition\":{\"ArnEquals\":{\"aws:SourceArn\":\"arn:aws:s3:::bucket-notification-terraform-example20251117232019549500000001\"}},\"Effect\":\"Allow\",\"Principal\":\"*\",\"Resource\":\"arn:aws:sqs:eu-west-2:540044833068:-terraform-example-notifications-from-s3\",\"Sid\":\"AllowS3BucketNotification\"}],\"Version\":\"2012-10-17\"}","receive_wait_time_seconds":0,"redrive_allow_policy":"","redrive_policy":"","sqs_managed_sse_enabled":true,"tags":{},"tags_all":{},"timeouts":null,"url":"https://sqs.eu-west-2.amazonaws.com/540044833068/-terraform-example-notifications-from-s3","visibility_timeout_seconds":30},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.heritage[0].aws_sqs_queue_policy.my_queue_policy","module_address":"module.heritage[0]","mode":"managed","type":"aws_sqs_queue_policy","name":"my_queue_policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"id":"https://sqs.eu-west-2.amazonaws.com/540044833068/-terraform-example-notifications-from-s3","policy":"{\"Id\":\"arn:aws:sqs:eu-west-2:540044833068:-terraform-example-notifications-from-s3/SQSPolicy\",\"Statement\":[{\"Action\":\"SQS:SendMessage\",\"Condition\":{\"ArnEquals\":{\"aws:SourceArn\":\"arn:aws:s3:::bucket-notification-terraform-example20251117232019549500000001\"}},\"Effect\":\"Allow\",\"Principal\":\"*\",\"Resource\":\"arn:aws:sqs:eu-west-2:540044833068:-terraform-example-notifications-from-s3\",\"Sid\":\"AllowS3BucketNotification\"}],\"Version\":\"2012-10-17\"}","queue_url":"https://sqs.eu-west-2.amazonaws.com/540044833068/-terraform-example-notifications-from-s3"},"after":{"id":"https://sqs.eu-west-2.amazonaws.com/540044833068/-terraform-example-notifications-from-s3","policy":"{\"Id\":\"arn:aws:sqs:eu-west-2:540044833068:-terraform-example-notifications-from-s3/SQSPolicy\",\"Statement\":[{\"Action\":\"SQS:SendMessage\",\"Condition\":{\"ArnEquals\":{\"aws:SourceArn\":\"arn:aws:s3:::bucket-notification-terraform-example20251117232019549500000001\"}},\"Effect\":\"Allow\",\"Principal\":\"*\",\"Resource\":\"arn:aws:sqs:eu-west-2:540044833068:-terraform-example-notifications-from-s3\",\"Sid\":\"AllowS3BucketNotification\"}],\"Version\":\"2012-10-17\"}","queue_url":"https://sqs.eu-west-2.amazonaws.com/540044833068/-terraform-example-notifications-from-s3"},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.heritage[0].aws_subnet.restricted-2a","module_address":"module.heritage[0]","mode":"managed","type":"aws_subnet","name":"restricted-2a","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:eu-west-2:540044833068:subnet/subnet-0ec75df66980d2920","assign_ipv6_address_on_creation":false,"availability_zone":"eu-west-2a","availability_zone_id":"euw2-az2","cidr_block":"10.0.9.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0ec75df66980d2920","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"540044833068","private_dns_hostname_type_on_launch":"ip-name","tags":{"Name":"Restricted 2a"},"tags_all":{"Name":"Restricted 2a"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"after":{"arn":"arn:aws:ec2:eu-west-2:540044833068:subnet/subnet-0ec75df66980d2920","assign_ipv6_address_on_creation":false,"availability_zone":"eu-west-2a","availability_zone_id":"euw2-az2","cidr_block":"10.0.9.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0ec75df66980d2920","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"540044833068","private_dns_hostname_type_on_launch":"ip-name","tags":{"Name":"Restricted 2a"},"tags_all":{"Name":"Restricted 2a"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.heritage[0].aws_subnet.restricted-2b","module_address":"module.heritage[0]","mode":"managed","type":"aws_subnet","name":"restricted-2b","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:eu-west-2:540044833068:subnet/subnet-0e4cc60d35634e85b","assign_ipv6_address_on_creation":false,"availability_zone":"eu-west-2b","availability_zone_id":"euw2-az3","cidr_block":"10.0.10.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0e4cc60d35634e85b","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"540044833068","private_dns_hostname_type_on_launch":"ip-name","tags":{"Name":"Restricted 2b"},"tags_all":{"Name":"Restricted 2b"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"after":{"arn":"arn:aws:ec2:eu-west-2:540044833068:subnet/subnet-0e4cc60d35634e85b","assign_ipv6_address_on_creation":false,"availability_zone":"eu-west-2b","availability_zone_id":"euw2-az3","cidr_block":"10.0.10.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0e4cc60d35634e85b","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"540044833068","private_dns_hostname_type_on_launch":"ip-name","tags":{"Name":"Restricted 2b"},"tags_all":{"Name":"Restricted 2b"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.heritage[0].random_pet.second","module_address":"module.heritage[0]","mode":"managed","type":"random_pet","name":"second","provider_name":"registry.terraform.io/hashicorp/random","change":{"actions":["no-op"],"before":{"id":"brave-crappie","keepers":null,"length":2,"prefix":null,"separator":"-"},"after":{"id":"brave-crappie","keepers":null,"length":2,"prefix":null,"separator":"-"},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.heritage[0].random_pet.this","module_address":"module.heritage[0]","mode":"managed","type":"random_pet","name":"this","provider_name":"registry.terraform.io/hashicorp/random","change":{"actions":["no-op"],"before":{"id":"adequate-gibbon","keepers":null,"length":2,"prefix":null,"separator":"-"},"after":{"id":"adequate-gibbon","keepers":null,"length":2,"prefix":null,"separator":"-"},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.shared_security_group.aws_instance.api_server[0]","module_address":"module.shared_security_group","mode":"managed","type":"aws_instance","name":"api_server","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"ami":"ami-02a95139d1d364420","arn":"arn:aws:ec2:eu-west-2:540044833068:instance/i-0e205109677d47e83","associate_public_ip_address":true,"availability_zone":"eu-west-2a","capacity_reservation_specification":[{"capacity_reservation_preference":"open","capacity_reservation_target":[]}],"cpu_core_count":1,"cpu_options":[{"amd_sev_snp":"","core_count":1,"threads_per_core":2}],"cpu_threads_per_core":2,"credit_specification":[{"cpu_credits":"unlimited"}],"disable_api_stop":false,"disable_api_termination":false,"ebs_block_device":[],"ebs_optimized":false,"enable_primary_ipv6":null,"enclave_options":[{"enabled":false}],"ephemeral_block_device":[],"get_password_data":false,"hibernation":false,"host_id":"","host_resource_group_arn":null,"iam_instance_profile":"","id":"i-0e205109677d47e83","instance_initiated_shutdown_behavior":"stop","instance_lifecycle":"","instance_market_options":[],"instance_state":"running","instance_type":"t3.nano","ipv6_address_count":0,"ipv6_addresses":[],"key_name":"","launch_template":[],"maintenance_options":[{"auto_recovery":"default"}],"metadata_options":[{"http_endpoint":"enabled","http_protocol_ipv6":"disabled","http_put_response_hop_limit":1,"http_tokens":"optional","instance_metadata_tags":"disabled"}],"monitoring":false,"network_interface":[],"outpost_arn":"","password_data":"","placement_group":"","placement_partition_number":0,"primary_network_interface_id":"eni-0c4a8ea224e85896f","private_dns":"ip-10-0-101-39.eu-west-2.compute.internal","private_dns_name_options":[{"enable_resource_name_dns_a_record":false,"enable_resource_name_dns_aaaa_record":false,"hostname_type":"ip-name"}],"private_ip":"10.0.101.39","public_dns":"ec2-3-10-226-1.eu-west-2.compute.amazonaws.com","public_ip":"3.10.226.1","root_block_device":[{"delete_on_termination":true,"device_name":"/dev/xvda","encrypted":false,"iops":3000,"kms_key_id":"","tags":{},"tags_all":{},"throughput":125,"volume_id":"vol-043a55b2884cbcdc4","volume_size":8,"volume_type":"gp3"}],"secondary_private_ips":[],"security_groups":[],"source_dest_check":true,"spot_instance_request_id":"","subnet_id":"subnet-0a1b287732e8ad0b7","tags":{"Environment":"production","ManagedBy":"terraform","Name":"api-server","Project":"platform-services","Team":"platform"},"tags_all":{"Environment":"production","ManagedBy":"terraform","Name":"api-server","Project":"platform-services","Team":"platform"},"tenancy":"default","timeouts":null,"user_data":"146523b0a5c60264146991ccc0576cc1b24e25c3","user_data_base64":null,"user_data_replace_on_change":false,"volume_tags":null,"vpc_security_group_ids":["sg-0437857de45b640ce"]},"after":{"ami":"ami-02a95139d1d364420","arn":"arn:aws:ec2:eu-west-2:540044833068:instance/i-0e205109677d47e83","associate_public_ip_address":true,"availability_zone":"eu-west-2a","capacity_reservation_specification":[{"capacity_reservation_preference":"open","capacity_reservation_target":[]}],"cpu_core_count":1,"cpu_options":[{"amd_sev_snp":"","core_count":1,"threads_per_core":2}],"cpu_threads_per_core":2,"credit_specification":[{"cpu_credits":"unlimited"}],"disable_api_stop":false,"disable_api_termination":false,"ebs_block_device":[],"ebs_optimized":false,"enable_primary_ipv6":null,"enclave_options":[{"enabled":false}],"ephemeral_block_device":[],"get_password_data":false,"hibernation":false,"host_id":"","host_resource_group_arn":null,"iam_instance_profile":"","id":"i-0e205109677d47e83","instance_initiated_shutdown_behavior":"stop","instance_lifecycle":"","instance_market_options":[],"instance_state":"running","instance_type":"t3.nano","ipv6_address_count":0,"ipv6_addresses":[],"key_name":"","launch_template":[],"maintenance_options":[{"auto_recovery":"default"}],"metadata_options":[{"http_endpoint":"enabled","http_protocol_ipv6":"disabled","http_put_response_hop_limit":1,"http_tokens":"optional","instance_metadata_tags":"disabled"}],"monitoring":false,"network_interface":[],"outpost_arn":"","password_data":"","placement_group":"","placement_partition_number":0,"primary_network_interface_id":"eni-0c4a8ea224e85896f","private_dns":"ip-10-0-101-39.eu-west-2.compute.internal","private_dns_name_options":[{"enable_resource_name_dns_a_record":false,"enable_resource_name_dns_aaaa_record":false,"hostname_type":"ip-name"}],"private_ip":"10.0.101.39","public_dns":"ec2-3-10-226-1.eu-west-2.compute.amazonaws.com","public_ip":"3.10.226.1","root_block_device":[{"delete_on_termination":true,"device_name":"/dev/xvda","encrypted":false,"iops":3000,"kms_key_id":"","tags":{},"tags_all":{},"throughput":125,"volume_id":"vol-043a55b2884cbcdc4","volume_size":8,"volume_type":"gp3"}],"secondary_private_ips":[],"security_groups":[],"source_dest_check":true,"spot_instance_request_id":"","subnet_id":"subnet-0a1b287732e8ad0b7","tags":{"Environment":"production","ManagedBy":"terraform","Name":"api-server","Project":"platform-services","Team":"platform"},"tags_all":{"Environment":"production","ManagedBy":"terraform","Name":"api-server","Project":"platform-services","Team":"platform"},"tenancy":"default","timeouts":null,"user_data":"146523b0a5c60264146991ccc0576cc1b24e25c3","user_data_base64":null,"user_data_replace_on_change":false,"volume_tags":null,"vpc_security_group_ids":["sg-0437857de45b640ce"]},"after_unknown":{},"before_sensitive":{"capacity_reservation_specification":[{"capacity_reservation_target":[]}],"cpu_options":[{}],"credit_specification":[{}],"ebs_block_device":[],"enclave_options":[{}],"ephemeral_block_device":[],"instance_market_options":[],"ipv6_addresses":[],"launch_template":[],"maintenance_options":[{}],"metadata_options":[{}],"network_interface":[],"private_dns_name_options":[{}],"root_block_device":[{"tags":{},"tags_all":{}}],"secondary_private_ips":[],"security_groups":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[false]},"after_sensitive":{"capacity_reservation_specification":[{"capacity_reservation_target":[]}],"cpu_options":[{}],"credit_specification":[{}],"ebs_block_device":[],"enclave_options":[{}],"ephemeral_block_device":[],"instance_market_options":[],"ipv6_addresses":[],"launch_template":[],"maintenance_options":[{}],"metadata_options":[{}],"network_interface":[],"private_dns_name_options":[{}],"root_block_device":[{"tags":{},"tags_all":{}}],"secondary_private_ips":[],"security_groups":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[false]}}},{"address":"module.shared_security_group.aws_security_group.internet_access[0]","module_address":"module.shared_security_group","mode":"managed","type":"aws_security_group","name":"internet_access","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:eu-west-2:540044833068:security-group/sg-0437857de45b640ce","description":"Allow outbound internet access","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"Allow all outbound traffic","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-0437857de45b640ce","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"HTTP access","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":80},{"cidr_blocks":["0.0.0.0/0"],"description":"SSH access","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22}],"name":"internet-access","name_prefix":"","owner_id":"540044833068","revoke_rules_on_delete":false,"tags":{"Environment":"production","ManagedBy":"terraform","Name":"internet-access","Project":"platform-services","Purpose":"General outbound access","Team":"platform"},"tags_all":{"Environment":"production","ManagedBy":"terraform","Name":"internet-access","Project":"platform-services","Purpose":"General outbound access","Team":"platform"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"after":{"arn":"arn:aws:ec2:eu-west-2:540044833068:security-group/sg-0437857de45b640ce","description":"Allow outbound internet access","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"Allow all outbound traffic","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-0437857de45b640ce","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"HTTP access","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":80},{"cidr_blocks":["0.0.0.0/0"],"description":"SSH access","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22}],"name":"internet-access","name_prefix":"","owner_id":"540044833068","revoke_rules_on_delete":false,"tags":{"Environment":"production","ManagedBy":"terraform","Name":"internet-access","Project":"platform-services","Purpose":"General outbound access","Team":"platform"},"tags_all":{"Environment":"production","ManagedBy":"terraform","Name":"internet-access","Project":"platform-services","Purpose":"General outbound access","Team":"platform"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"after_unknown":{},"before_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}},"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}},{"address":"module.shared_security_group.random_id.suffix[0]","module_address":"module.shared_security_group","mode":"managed","type":"random_id","name":"suffix","index":0,"provider_name":"registry.terraform.io/hashicorp/random","change":{"actions":["no-op"],"before":{"b64_std":"oof2Cw==","b64_url":"oof2Cw","byte_length":4,"dec":"2726819339","hex":"a287f60b","id":"oof2Cw","keepers":null,"prefix":null},"after":{"b64_std":"oof2Cw==","b64_url":"oof2Cw","byte_length":4,"dec":"2726819339","hex":"a287f60b","id":"oof2Cw","keepers":null,"prefix":null},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.baseline.module.vpc.aws_default_network_acl.this[0]","module_address":"module.baseline.module.vpc","mode":"managed","type":"aws_default_network_acl","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:eu-west-2:540044833068:network-acl/acl-088dc8f9998dacc6b","default_network_acl_id":"acl-088dc8f9998dacc6b","egress":[{"action":"allow","cidr_block":"","from_port":0,"icmp_code":0,"icmp_type":0,"ipv6_cidr_block":"::/0","protocol":"-1","rule_no":101,"to_port":0},{"action":"allow","cidr_block":"0.0.0.0/0","from_port":0,"icmp_code":0,"icmp_type":0,"ipv6_cidr_block":"","protocol":"-1","rule_no":100,"to_port":0}],"id":"acl-088dc8f9998dacc6b","ingress":[{"action":"allow","cidr_block":"","from_port":0,"icmp_code":0,"icmp_type":0,"ipv6_cidr_block":"::/0","protocol":"-1","rule_no":101,"to_port":0},{"action":"allow","cidr_block":"0.0.0.0/0","from_port":0,"icmp_code":0,"icmp_type":0,"ipv6_cidr_block":"","protocol":"-1","rule_no":100,"to_port":0}],"owner_id":"540044833068","subnet_ids":["subnet-07fc72cf57c70e4f0","subnet-09605cfe202ef69e7","subnet-0a1b287732e8ad0b7","subnet-0eae990ebecf2d640"],"tags":{"Environment":"development","Name":"workloads-terraform-example-default","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-default","Terraform":"true"},"vpc_id":"vpc-02901bcbb89561298"},"after":{"arn":"arn:aws:ec2:eu-west-2:540044833068:network-acl/acl-088dc8f9998dacc6b","default_network_acl_id":"acl-088dc8f9998dacc6b","egress":[{"action":"allow","cidr_block":"","from_port":0,"icmp_code":0,"icmp_type":0,"ipv6_cidr_block":"::/0","protocol":"-1","rule_no":101,"to_port":0},{"action":"allow","cidr_block":"0.0.0.0/0","from_port":0,"icmp_code":0,"icmp_type":0,"ipv6_cidr_block":"","protocol":"-1","rule_no":100,"to_port":0}],"id":"acl-088dc8f9998dacc6b","ingress":[{"action":"allow","cidr_block":"","from_port":0,"icmp_code":0,"icmp_type":0,"ipv6_cidr_block":"::/0","protocol":"-1","rule_no":101,"to_port":0},{"action":"allow","cidr_block":"0.0.0.0/0","from_port":0,"icmp_code":0,"icmp_type":0,"ipv6_cidr_block":"","protocol":"-1","rule_no":100,"to_port":0}],"owner_id":"540044833068","subnet_ids":["subnet-07fc72cf57c70e4f0","subnet-09605cfe202ef69e7","subnet-0a1b287732e8ad0b7","subnet-0eae990ebecf2d640"],"tags":{"Environment":"development","Name":"workloads-terraform-example-default","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-default","Terraform":"true"},"vpc_id":"vpc-02901bcbb89561298"},"after_unknown":{},"before_sensitive":{"egress":[{},{}],"ingress":[{},{}],"subnet_ids":[false,false,false,false],"tags":{},"tags_all":{}},"after_sensitive":{"egress":[{},{}],"ingress":[{},{}],"subnet_ids":[false,false,false,false],"tags":{},"tags_all":{}}}},{"address":"module.baseline.module.vpc.aws_default_route_table.default[0]","module_address":"module.baseline.module.vpc","mode":"managed","type":"aws_default_route_table","name":"default","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:eu-west-2:540044833068:route-table/rtb-0551700a1aabf64c9","default_route_table_id":"rtb-0551700a1aabf64c9","id":"rtb-0551700a1aabf64c9","owner_id":"540044833068","propagating_vgws":[],"route":[],"tags":{"Environment":"development","Name":"workloads-terraform-example-default","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-default","Terraform":"true"},"timeouts":{"create":"5m","update":"5m"},"vpc_id":"vpc-02901bcbb89561298"},"after":{"arn":"arn:aws:ec2:eu-west-2:540044833068:route-table/rtb-0551700a1aabf64c9","default_route_table_id":"rtb-0551700a1aabf64c9","id":"rtb-0551700a1aabf64c9","owner_id":"540044833068","propagating_vgws":[],"route":[],"tags":{"Environment":"development","Name":"workloads-terraform-example-default","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-default","Terraform":"true"},"timeouts":{"create":"5m","update":"5m"},"vpc_id":"vpc-02901bcbb89561298"},"after_unknown":{},"before_sensitive":{"propagating_vgws":[],"route":[],"tags":{},"tags_all":{},"timeouts":{}},"after_sensitive":{"propagating_vgws":[],"route":[],"tags":{},"tags_all":{},"timeouts":{}}}},{"address":"module.baseline.module.vpc.aws_default_security_group.this[0]","module_address":"module.baseline.module.vpc","mode":"managed","type":"aws_default_security_group","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:eu-west-2:540044833068:security-group/sg-0159f0e3d8224d441","description":"default VPC security group","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-0159f0e3d8224d441","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":1234,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":1234},{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443},{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":80}],"name":"default","name_prefix":"","owner_id":"540044833068","revoke_rules_on_delete":false,"tags":{"Environment":"development","Name":"workloads-terraform-example-default","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-default","Terraform":"true"},"vpc_id":"vpc-02901bcbb89561298"},"after":{"arn":"arn:aws:ec2:eu-west-2:540044833068:security-group/sg-0159f0e3d8224d441","description":"default VPC security group","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-0159f0e3d8224d441","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":1234,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":1234},{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443},{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":80}],"name":"default","name_prefix":"","owner_id":"540044833068","revoke_rules_on_delete":false,"tags":{"Environment":"development","Name":"workloads-terraform-example-default","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-default","Terraform":"true"},"vpc_id":"vpc-02901bcbb89561298"},"after_unknown":{},"before_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}},"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}},{"address":"module.baseline.module.vpc.aws_eip.nat[0]","module_address":"module.baseline.module.vpc","mode":"managed","type":"aws_eip","name":"nat","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"address":null,"allocation_id":"eipalloc-07cc93e43d376b5e9","arn":"arn:aws:ec2:eu-west-2:540044833068:elastic-ip/eipalloc-07cc93e43d376b5e9","associate_with_private_ip":null,"association_id":"eipassoc-0a0433c17d9475350","carrier_ip":"","customer_owned_ip":"","customer_owned_ipv4_pool":"","domain":"vpc","id":"eipalloc-07cc93e43d376b5e9","instance":"","ipam_pool_id":null,"network_border_group":"eu-west-2","network_interface":"eni-0e80adc87987d3aa7","private_dns":"ip-10-0-101-133.eu-west-2.compute.internal","private_ip":"10.0.101.133","ptr_record":"","public_dns":"ec2-18-169-200-25.eu-west-2.compute.amazonaws.com","public_ip":"18.169.200.25","public_ipv4_pool":"amazon","tags":{"Environment":"development","Name":"workloads-terraform-example-eu-west-2a","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-eu-west-2a","Terraform":"true"},"timeouts":null,"vpc":true},"after":{"address":null,"allocation_id":"eipalloc-07cc93e43d376b5e9","arn":"arn:aws:ec2:eu-west-2:540044833068:elastic-ip/eipalloc-07cc93e43d376b5e9","associate_with_private_ip":null,"association_id":"eipassoc-0a0433c17d9475350","carrier_ip":"","customer_owned_ip":"","customer_owned_ipv4_pool":"","domain":"vpc","id":"eipalloc-07cc93e43d376b5e9","instance":"","ipam_pool_id":null,"network_border_group":"eu-west-2","network_interface":"eni-0e80adc87987d3aa7","private_dns":"ip-10-0-101-133.eu-west-2.compute.internal","private_ip":"10.0.101.133","ptr_record":"","public_dns":"ec2-18-169-200-25.eu-west-2.compute.amazonaws.com","public_ip":"18.169.200.25","public_ipv4_pool":"amazon","tags":{"Environment":"development","Name":"workloads-terraform-example-eu-west-2a","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-eu-west-2a","Terraform":"true"},"timeouts":null,"vpc":true},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.baseline.module.vpc.aws_eip.nat[1]","module_address":"module.baseline.module.vpc","mode":"managed","type":"aws_eip","name":"nat","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"address":null,"allocation_id":"eipalloc-0646301f7a4de4912","arn":"arn:aws:ec2:eu-west-2:540044833068:elastic-ip/eipalloc-0646301f7a4de4912","associate_with_private_ip":null,"association_id":"eipassoc-0d47f720125d78947","carrier_ip":"","customer_owned_ip":"","customer_owned_ipv4_pool":"","domain":"vpc","id":"eipalloc-0646301f7a4de4912","instance":"","ipam_pool_id":null,"network_border_group":"eu-west-2","network_interface":"eni-04149f872cf764621","private_dns":"ip-10-0-102-193.eu-west-2.compute.internal","private_ip":"10.0.102.193","ptr_record":"","public_dns":"ec2-13-134-130-46.eu-west-2.compute.amazonaws.com","public_ip":"13.134.130.46","public_ipv4_pool":"amazon","tags":{"Environment":"development","Name":"workloads-terraform-example-eu-west-2b","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-eu-west-2b","Terraform":"true"},"timeouts":null,"vpc":true},"after":{"address":null,"allocation_id":"eipalloc-0646301f7a4de4912","arn":"arn:aws:ec2:eu-west-2:540044833068:elastic-ip/eipalloc-0646301f7a4de4912","associate_with_private_ip":null,"association_id":"eipassoc-0d47f720125d78947","carrier_ip":"","customer_owned_ip":"","customer_owned_ipv4_pool":"","domain":"vpc","id":"eipalloc-0646301f7a4de4912","instance":"","ipam_pool_id":null,"network_border_group":"eu-west-2","network_interface":"eni-04149f872cf764621","private_dns":"ip-10-0-102-193.eu-west-2.compute.internal","private_ip":"10.0.102.193","ptr_record":"","public_dns":"ec2-13-134-130-46.eu-west-2.compute.amazonaws.com","public_ip":"13.134.130.46","public_ipv4_pool":"amazon","tags":{"Environment":"development","Name":"workloads-terraform-example-eu-west-2b","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-eu-west-2b","Terraform":"true"},"timeouts":null,"vpc":true},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.baseline.module.vpc.aws_internet_gateway.this[0]","module_address":"module.baseline.module.vpc","mode":"managed","type":"aws_internet_gateway","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:eu-west-2:540044833068:internet-gateway/igw-01cea3cff43162407","id":"igw-01cea3cff43162407","owner_id":"540044833068","tags":{"Environment":"development","Name":"workloads-terraform-example","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example","Terraform":"true"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"after":{"arn":"arn:aws:ec2:eu-west-2:540044833068:internet-gateway/igw-01cea3cff43162407","id":"igw-01cea3cff43162407","owner_id":"540044833068","tags":{"Environment":"development","Name":"workloads-terraform-example","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example","Terraform":"true"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.baseline.module.vpc.aws_nat_gateway.this[0]","module_address":"module.baseline.module.vpc","mode":"managed","type":"aws_nat_gateway","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"allocation_id":"eipalloc-07cc93e43d376b5e9","association_id":"eipassoc-0a0433c17d9475350","connectivity_type":"public","id":"nat-038cdf7bebbe06e18","network_interface_id":"eni-0e80adc87987d3aa7","private_ip":"10.0.101.133","public_ip":"18.169.200.25","secondary_allocation_ids":[],"secondary_private_ip_address_count":0,"secondary_private_ip_addresses":[],"subnet_id":"subnet-0a1b287732e8ad0b7","tags":{"Environment":"development","Name":"workloads-terraform-example-eu-west-2a","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-eu-west-2a","Terraform":"true"},"timeouts":null},"after":{"allocation_id":"eipalloc-07cc93e43d376b5e9","association_id":"eipassoc-0a0433c17d9475350","connectivity_type":"public","id":"nat-038cdf7bebbe06e18","network_interface_id":"eni-0e80adc87987d3aa7","private_ip":"10.0.101.133","public_ip":"18.169.200.25","secondary_allocation_ids":[],"secondary_private_ip_address_count":0,"secondary_private_ip_addresses":[],"subnet_id":"subnet-0a1b287732e8ad0b7","tags":{"Environment":"development","Name":"workloads-terraform-example-eu-west-2a","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-eu-west-2a","Terraform":"true"},"timeouts":null},"after_unknown":{},"before_sensitive":{"secondary_allocation_ids":[],"secondary_private_ip_addresses":[],"tags":{},"tags_all":{}},"after_sensitive":{"secondary_allocation_ids":[],"secondary_private_ip_addresses":[],"tags":{},"tags_all":{}}}},{"address":"module.baseline.module.vpc.aws_nat_gateway.this[1]","module_address":"module.baseline.module.vpc","mode":"managed","type":"aws_nat_gateway","name":"this","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"allocation_id":"eipalloc-0646301f7a4de4912","association_id":"eipassoc-0d47f720125d78947","connectivity_type":"public","id":"nat-08567ba3cecdcfda4","network_interface_id":"eni-04149f872cf764621","private_ip":"10.0.102.193","public_ip":"13.134.130.46","secondary_allocation_ids":[],"secondary_private_ip_address_count":0,"secondary_private_ip_addresses":[],"subnet_id":"subnet-07fc72cf57c70e4f0","tags":{"Environment":"development","Name":"workloads-terraform-example-eu-west-2b","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-eu-west-2b","Terraform":"true"},"timeouts":null},"after":{"allocation_id":"eipalloc-0646301f7a4de4912","association_id":"eipassoc-0d47f720125d78947","connectivity_type":"public","id":"nat-08567ba3cecdcfda4","network_interface_id":"eni-04149f872cf764621","private_ip":"10.0.102.193","public_ip":"13.134.130.46","secondary_allocation_ids":[],"secondary_private_ip_address_count":0,"secondary_private_ip_addresses":[],"subnet_id":"subnet-07fc72cf57c70e4f0","tags":{"Environment":"development","Name":"workloads-terraform-example-eu-west-2b","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-eu-west-2b","Terraform":"true"},"timeouts":null},"after_unknown":{},"before_sensitive":{"secondary_allocation_ids":[],"secondary_private_ip_addresses":[],"tags":{},"tags_all":{}},"after_sensitive":{"secondary_allocation_ids":[],"secondary_private_ip_addresses":[],"tags":{},"tags_all":{}}}},{"address":"module.baseline.module.vpc.aws_route.private_nat_gateway[0]","module_address":"module.baseline.module.vpc","mode":"managed","type":"aws_route","name":"private_nat_gateway","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"carrier_gateway_id":"","core_network_arn":"","destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","id":"r-rtb-00d53afc4950c3e9a1080289494","instance_id":"","instance_owner_id":"","local_gateway_id":"","nat_gateway_id":"nat-038cdf7bebbe06e18","network_interface_id":"","origin":"CreateRoute","route_table_id":"rtb-00d53afc4950c3e9a","state":"active","timeouts":{"create":"5m","delete":null,"update":null},"transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""},"after":{"carrier_gateway_id":"","core_network_arn":"","destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","id":"r-rtb-00d53afc4950c3e9a1080289494","instance_id":"","instance_owner_id":"","local_gateway_id":"","nat_gateway_id":"nat-038cdf7bebbe06e18","network_interface_id":"","origin":"CreateRoute","route_table_id":"rtb-00d53afc4950c3e9a","state":"active","timeouts":{"create":"5m","delete":null,"update":null},"transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""},"after_unknown":{},"before_sensitive":{"timeouts":{}},"after_sensitive":{"timeouts":{}}}},{"address":"module.baseline.module.vpc.aws_route.private_nat_gateway[1]","module_address":"module.baseline.module.vpc","mode":"managed","type":"aws_route","name":"private_nat_gateway","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"carrier_gateway_id":"","core_network_arn":"","destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","id":"r-rtb-06193a3194e6d8cf21080289494","instance_id":"","instance_owner_id":"","local_gateway_id":"","nat_gateway_id":"nat-08567ba3cecdcfda4","network_interface_id":"","origin":"CreateRoute","route_table_id":"rtb-06193a3194e6d8cf2","state":"active","timeouts":{"create":"5m","delete":null,"update":null},"transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""},"after":{"carrier_gateway_id":"","core_network_arn":"","destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","id":"r-rtb-06193a3194e6d8cf21080289494","instance_id":"","instance_owner_id":"","local_gateway_id":"","nat_gateway_id":"nat-08567ba3cecdcfda4","network_interface_id":"","origin":"CreateRoute","route_table_id":"rtb-06193a3194e6d8cf2","state":"active","timeouts":{"create":"5m","delete":null,"update":null},"transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""},"after_unknown":{},"before_sensitive":{"timeouts":{}},"after_sensitive":{"timeouts":{}}}},{"address":"module.baseline.module.vpc.aws_route.public_internet_gateway[0]","module_address":"module.baseline.module.vpc","mode":"managed","type":"aws_route","name":"public_internet_gateway","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"carrier_gateway_id":"","core_network_arn":"","destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"igw-01cea3cff43162407","id":"r-rtb-073519b951ac0afb51080289494","instance_id":"","instance_owner_id":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","origin":"CreateRoute","route_table_id":"rtb-073519b951ac0afb5","state":"active","timeouts":{"create":"5m","delete":null,"update":null},"transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""},"after":{"carrier_gateway_id":"","core_network_arn":"","destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"igw-01cea3cff43162407","id":"r-rtb-073519b951ac0afb51080289494","instance_id":"","instance_owner_id":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","origin":"CreateRoute","route_table_id":"rtb-073519b951ac0afb5","state":"active","timeouts":{"create":"5m","delete":null,"update":null},"transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""},"after_unknown":{},"before_sensitive":{"timeouts":{}},"after_sensitive":{"timeouts":{}}}},{"address":"module.baseline.module.vpc.aws_route_table.private[0]","module_address":"module.baseline.module.vpc","mode":"managed","type":"aws_route_table","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:eu-west-2:540044833068:route-table/rtb-00d53afc4950c3e9a","id":"rtb-00d53afc4950c3e9a","owner_id":"540044833068","propagating_vgws":[],"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"nat-038cdf7bebbe06e18","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Environment":"development","Name":"workloads-terraform-example-private-eu-west-2a","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-private-eu-west-2a","Terraform":"true"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"after":{"arn":"arn:aws:ec2:eu-west-2:540044833068:route-table/rtb-00d53afc4950c3e9a","id":"rtb-00d53afc4950c3e9a","owner_id":"540044833068","propagating_vgws":[],"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"nat-038cdf7bebbe06e18","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Environment":"development","Name":"workloads-terraform-example-private-eu-west-2a","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-private-eu-west-2a","Terraform":"true"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"after_unknown":{},"before_sensitive":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}},"after_sensitive":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}}}},{"address":"module.baseline.module.vpc.aws_route_table.private[1]","module_address":"module.baseline.module.vpc","mode":"managed","type":"aws_route_table","name":"private","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:eu-west-2:540044833068:route-table/rtb-06193a3194e6d8cf2","id":"rtb-06193a3194e6d8cf2","owner_id":"540044833068","propagating_vgws":[],"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"nat-08567ba3cecdcfda4","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Environment":"development","Name":"workloads-terraform-example-private-eu-west-2b","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-private-eu-west-2b","Terraform":"true"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"after":{"arn":"arn:aws:ec2:eu-west-2:540044833068:route-table/rtb-06193a3194e6d8cf2","id":"rtb-06193a3194e6d8cf2","owner_id":"540044833068","propagating_vgws":[],"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"nat-08567ba3cecdcfda4","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Environment":"development","Name":"workloads-terraform-example-private-eu-west-2b","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-private-eu-west-2b","Terraform":"true"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"after_unknown":{},"before_sensitive":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}},"after_sensitive":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}}}},{"address":"module.baseline.module.vpc.aws_route_table.public[0]","module_address":"module.baseline.module.vpc","mode":"managed","type":"aws_route_table","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:eu-west-2:540044833068:route-table/rtb-073519b951ac0afb5","id":"rtb-073519b951ac0afb5","owner_id":"540044833068","propagating_vgws":[],"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"igw-01cea3cff43162407","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Environment":"development","Name":"workloads-terraform-example-public","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-public","Terraform":"true"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"after":{"arn":"arn:aws:ec2:eu-west-2:540044833068:route-table/rtb-073519b951ac0afb5","id":"rtb-073519b951ac0afb5","owner_id":"540044833068","propagating_vgws":[],"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"igw-01cea3cff43162407","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Environment":"development","Name":"workloads-terraform-example-public","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-public","Terraform":"true"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"after_unknown":{},"before_sensitive":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}},"after_sensitive":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}}}},{"address":"module.baseline.module.vpc.aws_route_table_association.private[0]","module_address":"module.baseline.module.vpc","mode":"managed","type":"aws_route_table_association","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"gateway_id":"","id":"rtbassoc-0557ac7367cfe9d9c","route_table_id":"rtb-00d53afc4950c3e9a","subnet_id":"subnet-09605cfe202ef69e7","timeouts":null},"after":{"gateway_id":"","id":"rtbassoc-0557ac7367cfe9d9c","route_table_id":"rtb-00d53afc4950c3e9a","subnet_id":"subnet-09605cfe202ef69e7","timeouts":null},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.baseline.module.vpc.aws_route_table_association.private[1]","module_address":"module.baseline.module.vpc","mode":"managed","type":"aws_route_table_association","name":"private","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"gateway_id":"","id":"rtbassoc-03c4cc8adce32d125","route_table_id":"rtb-06193a3194e6d8cf2","subnet_id":"subnet-0eae990ebecf2d640","timeouts":null},"after":{"gateway_id":"","id":"rtbassoc-03c4cc8adce32d125","route_table_id":"rtb-06193a3194e6d8cf2","subnet_id":"subnet-0eae990ebecf2d640","timeouts":null},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.baseline.module.vpc.aws_route_table_association.public[0]","module_address":"module.baseline.module.vpc","mode":"managed","type":"aws_route_table_association","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"gateway_id":"","id":"rtbassoc-0bc7bb20e5bff7b21","route_table_id":"rtb-073519b951ac0afb5","subnet_id":"subnet-0a1b287732e8ad0b7","timeouts":null},"after":{"gateway_id":"","id":"rtbassoc-0bc7bb20e5bff7b21","route_table_id":"rtb-073519b951ac0afb5","subnet_id":"subnet-0a1b287732e8ad0b7","timeouts":null},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.baseline.module.vpc.aws_route_table_association.public[1]","module_address":"module.baseline.module.vpc","mode":"managed","type":"aws_route_table_association","name":"public","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"gateway_id":"","id":"rtbassoc-0f86a1cf1181d93f4","route_table_id":"rtb-073519b951ac0afb5","subnet_id":"subnet-07fc72cf57c70e4f0","timeouts":null},"after":{"gateway_id":"","id":"rtbassoc-0f86a1cf1181d93f4","route_table_id":"rtb-073519b951ac0afb5","subnet_id":"subnet-07fc72cf57c70e4f0","timeouts":null},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.baseline.module.vpc.aws_subnet.private[0]","module_address":"module.baseline.module.vpc","mode":"managed","type":"aws_subnet","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:eu-west-2:540044833068:subnet/subnet-09605cfe202ef69e7","assign_ipv6_address_on_creation":false,"availability_zone":"eu-west-2a","availability_zone_id":"euw2-az2","cidr_block":"10.0.1.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-09605cfe202ef69e7","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"540044833068","private_dns_hostname_type_on_launch":"ip-name","tags":{"Environment":"development","Name":"workloads-terraform-example-private-eu-west-2a","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-private-eu-west-2a","Terraform":"true"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"after":{"arn":"arn:aws:ec2:eu-west-2:540044833068:subnet/subnet-09605cfe202ef69e7","assign_ipv6_address_on_creation":false,"availability_zone":"eu-west-2a","availability_zone_id":"euw2-az2","cidr_block":"10.0.1.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-09605cfe202ef69e7","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"540044833068","private_dns_hostname_type_on_launch":"ip-name","tags":{"Environment":"development","Name":"workloads-terraform-example-private-eu-west-2a","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-private-eu-west-2a","Terraform":"true"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.baseline.module.vpc.aws_subnet.private[1]","module_address":"module.baseline.module.vpc","mode":"managed","type":"aws_subnet","name":"private","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:eu-west-2:540044833068:subnet/subnet-0eae990ebecf2d640","assign_ipv6_address_on_creation":false,"availability_zone":"eu-west-2b","availability_zone_id":"euw2-az3","cidr_block":"10.0.2.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0eae990ebecf2d640","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"540044833068","private_dns_hostname_type_on_launch":"ip-name","tags":{"Environment":"development","Name":"workloads-terraform-example-private-eu-west-2b","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-private-eu-west-2b","Terraform":"true"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"after":{"arn":"arn:aws:ec2:eu-west-2:540044833068:subnet/subnet-0eae990ebecf2d640","assign_ipv6_address_on_creation":false,"availability_zone":"eu-west-2b","availability_zone_id":"euw2-az3","cidr_block":"10.0.2.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0eae990ebecf2d640","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"540044833068","private_dns_hostname_type_on_launch":"ip-name","tags":{"Environment":"development","Name":"workloads-terraform-example-private-eu-west-2b","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-private-eu-west-2b","Terraform":"true"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.baseline.module.vpc.aws_subnet.public[0]","module_address":"module.baseline.module.vpc","mode":"managed","type":"aws_subnet","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:eu-west-2:540044833068:subnet/subnet-0a1b287732e8ad0b7","assign_ipv6_address_on_creation":false,"availability_zone":"eu-west-2a","availability_zone_id":"euw2-az2","cidr_block":"10.0.101.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0a1b287732e8ad0b7","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"540044833068","private_dns_hostname_type_on_launch":"ip-name","tags":{"Environment":"development","Name":"workloads-terraform-example-public-eu-west-2a","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-public-eu-west-2a","Terraform":"true"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"after":{"arn":"arn:aws:ec2:eu-west-2:540044833068:subnet/subnet-0a1b287732e8ad0b7","assign_ipv6_address_on_creation":false,"availability_zone":"eu-west-2a","availability_zone_id":"euw2-az2","cidr_block":"10.0.101.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0a1b287732e8ad0b7","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"540044833068","private_dns_hostname_type_on_launch":"ip-name","tags":{"Environment":"development","Name":"workloads-terraform-example-public-eu-west-2a","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-public-eu-west-2a","Terraform":"true"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.baseline.module.vpc.aws_subnet.public[1]","module_address":"module.baseline.module.vpc","mode":"managed","type":"aws_subnet","name":"public","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:eu-west-2:540044833068:subnet/subnet-07fc72cf57c70e4f0","assign_ipv6_address_on_creation":false,"availability_zone":"eu-west-2b","availability_zone_id":"euw2-az3","cidr_block":"10.0.102.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-07fc72cf57c70e4f0","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"540044833068","private_dns_hostname_type_on_launch":"ip-name","tags":{"Environment":"development","Name":"workloads-terraform-example-public-eu-west-2b","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-public-eu-west-2b","Terraform":"true"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"after":{"arn":"arn:aws:ec2:eu-west-2:540044833068:subnet/subnet-07fc72cf57c70e4f0","assign_ipv6_address_on_creation":false,"availability_zone":"eu-west-2b","availability_zone_id":"euw2-az3","cidr_block":"10.0.102.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-07fc72cf57c70e4f0","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"540044833068","private_dns_hostname_type_on_launch":"ip-name","tags":{"Environment":"development","Name":"workloads-terraform-example-public-eu-west-2b","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-public-eu-west-2b","Terraform":"true"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.baseline.module.vpc.aws_vpc.this[0]","module_address":"module.baseline.module.vpc","mode":"managed","type":"aws_vpc","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:eu-west-2:540044833068:vpc/vpc-02901bcbb89561298","assign_generated_ipv6_cidr_block":false,"cidr_block":"10.0.0.0/16","default_network_acl_id":"acl-088dc8f9998dacc6b","default_route_table_id":"rtb-0551700a1aabf64c9","default_security_group_id":"sg-0159f0e3d8224d441","dhcp_options_id":"dopt-038753549445222b5","enable_dns_hostnames":true,"enable_dns_support":true,"enable_network_address_usage_metrics":false,"id":"vpc-02901bcbb89561298","instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_association_id":"","ipv6_cidr_block":"","ipv6_cidr_block_network_border_group":"","ipv6_ipam_pool_id":"","ipv6_netmask_length":0,"main_route_table_id":"rtb-0551700a1aabf64c9","owner_id":"540044833068","tags":{"Environment":"development","Name":"workloads-terraform-example","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example","Terraform":"true"}},"after":{"arn":"arn:aws:ec2:eu-west-2:540044833068:vpc/vpc-02901bcbb89561298","assign_generated_ipv6_cidr_block":false,"cidr_block":"10.0.0.0/16","default_network_acl_id":"acl-088dc8f9998dacc6b","default_route_table_id":"rtb-0551700a1aabf64c9","default_security_group_id":"sg-0159f0e3d8224d441","dhcp_options_id":"dopt-038753549445222b5","enable_dns_hostnames":true,"enable_dns_support":true,"enable_network_address_usage_metrics":false,"id":"vpc-02901bcbb89561298","instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_association_id":"","ipv6_cidr_block":"","ipv6_cidr_block_network_border_group":"","ipv6_ipam_pool_id":"","ipv6_netmask_length":0,"main_route_table_id":"rtb-0551700a1aabf64c9","owner_id":"540044833068","tags":{"Environment":"development","Name":"workloads-terraform-example","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example","Terraform":"true"}},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.heritage[0].module.cloudfront.aws_cloudfront_distribution.this[0]","module_address":"module.heritage[0].module.cloudfront","mode":"managed","type":"aws_cloudfront_distribution","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"aliases":[],"arn":"arn:aws:cloudfront::540044833068:distribution/EX4HFUQMZ2ULI","caller_reference":"terraform-20251117232025598600000008","comment":"My awesome CloudFront","continuous_deployment_policy_id":"","custom_error_response":[{"error_caching_min_ttl":0,"error_code":403,"response_code":403,"response_page_path":"/errors/403.html"},{"error_caching_min_ttl":0,"error_code":404,"response_code":404,"response_page_path":"/errors/404.html"}],"default_cache_behavior":[{"allowed_methods":["GET","HEAD","OPTIONS"],"cache_policy_id":"8e5fa4ea-50a6-44f8-86e8-3ca690bd9373","cached_methods":["GET","HEAD"],"compress":true,"default_ttl":0,"field_level_encryption_id":"","forwarded_values":[],"function_association":[],"grpc_config":[{"enabled":false}],"lambda_function_association":[],"max_ttl":0,"min_ttl":0,"origin_request_policy_id":"414eb566-4bb3-49d1-a868-0ee739830440","realtime_log_config_arn":"","response_headers_policy_id":"67f7725c-6f97-4210-82d7-5512b31e9d03","smooth_streaming":false,"target_origin_id":"appsync","trusted_key_groups":[],"trusted_signers":[],"viewer_protocol_policy":"allow-all"}],"default_root_object":"","domain_name":"d3lsh8pjb3h0ub.cloudfront.net","enabled":true,"etag":"E1IXRQLQL1O86R","hosted_zone_id":"Z2FDTNDATAQYW2","http_version":"http2and3","id":"EX4HFUQMZ2ULI","in_progress_validation_batches":0,"is_ipv6_enabled":true,"last_modified_time":"2025-11-17 23:20:25.716 +0000 UTC","logging_config":[],"ordered_cache_behavior":[{"allowed_methods":["GET","HEAD"],"cache_policy_id":"","cached_methods":["GET","HEAD"],"compress":true,"default_ttl":0,"field_level_encryption_id":"","forwarded_values":[{"cookies":[{"forward":"none","whitelisted_names":[]}],"headers":[],"query_string":true,"query_string_cache_keys":[]}],"function_association":[{"event_type":"viewer-request","function_arn":"arn:aws:cloudfront::540044833068:function/terraform-example-adequate-gibbon"},{"event_type":"viewer-response","function_arn":"arn:aws:cloudfront::540044833068:function/terraform-example-adequate-gibbon"}],"grpc_config":[{"enabled":false}],"lambda_function_association":[],"max_ttl":0,"min_ttl":0,"origin_request_policy_id":"","path_pattern":"/static/*","realtime_log_config_arn":"","response_headers_policy_id":"c7fd455f-1fa8-4632-9a22-fef9a58b69a9","smooth_streaming":false,"target_origin_id":"s3_one","trusted_key_groups":[],"trusted_signers":[],"viewer_protocol_policy":"redirect-to-https"}],"origin":[{"connection_attempts":3,"connection_timeout":10,"custom_header":[{"name":"X-Forwarded-Scheme","value":"https"},{"name":"X-Frame-Options","value":"SAMEORIGIN"}],"custom_origin_config":[{"http_port":80,"https_port":443,"origin_keepalive_timeout":5,"origin_protocol_policy":"match-viewer","origin_read_timeout":30,"origin_ssl_protocols":["TLSv1","TLSv1.1","TLSv1.2"]}],"domain_name":"appsync.terraform-example.modules.tf","origin_access_control_id":"","origin_id":"appsync","origin_path":"","origin_shield":[{"enabled":true,"origin_shield_region":"us-east-1"}],"s3_origin_config":[],"vpc_origin_config":[]},{"connection_attempts":3,"connection_timeout":10,"custom_header":[],"custom_origin_config":[],"domain_name":"s3-one-adequate-gibbon20251117232020021100000002.s3.eu-west-2.amazonaws.com","origin_access_control_id":"","origin_id":"s3_one","origin_path":"","origin_shield":[],"s3_origin_config":[{"origin_access_identity":"origin-access-identity/cloudfront/E3773WNTKP0C2U"}],"vpc_origin_config":[]},{"connection_attempts":3,"connection_timeout":10,"custom_header":[],"custom_origin_config":[],"domain_name":"s3-one-adequate-gibbon20251117232020021100000002.s3.eu-west-2.amazonaws.com","origin_access_control_id":"E3F5P5J73PT9IJ","origin_id":"s3_oac","origin_path":"","origin_shield":[],"s3_origin_config":[],"vpc_origin_config":[]}],"origin_group":[{"failover_criteria":[{"status_codes":[403,404,500,502]}],"member":[{"origin_id":"appsync"},{"origin_id":"s3_one"}],"origin_id":"group_one"}],"price_class":"PriceClass_All","restrictions":[{"geo_restriction":[{"locations":["GB","NO","UA","US"],"restriction_type":"whitelist"}]}],"retain_on_delete":false,"staging":false,"status":"Deployed","tags":{},"tags_all":{},"trusted_key_groups":[{"enabled":false,"items":[]}],"trusted_signers":[{"enabled":false,"items":[]}],"viewer_certificate":[{"acm_certificate_arn":"","cloudfront_default_certificate":true,"iam_certificate_id":"","minimum_protocol_version":"TLSv1","ssl_support_method":""}],"wait_for_deployment":false,"web_acl_id":""},"after":{"aliases":[],"arn":"arn:aws:cloudfront::540044833068:distribution/EX4HFUQMZ2ULI","caller_reference":"terraform-20251117232025598600000008","comment":"My awesome CloudFront","continuous_deployment_policy_id":"","custom_error_response":[{"error_caching_min_ttl":0,"error_code":403,"response_code":403,"response_page_path":"/errors/403.html"},{"error_caching_min_ttl":0,"error_code":404,"response_code":404,"response_page_path":"/errors/404.html"}],"default_cache_behavior":[{"allowed_methods":["GET","HEAD","OPTIONS"],"cache_policy_id":"8e5fa4ea-50a6-44f8-86e8-3ca690bd9373","cached_methods":["GET","HEAD"],"compress":true,"default_ttl":0,"field_level_encryption_id":"","forwarded_values":[],"function_association":[],"grpc_config":[{"enabled":false}],"lambda_function_association":[],"max_ttl":0,"min_ttl":0,"origin_request_policy_id":"414eb566-4bb3-49d1-a868-0ee739830440","realtime_log_config_arn":"","response_headers_policy_id":"67f7725c-6f97-4210-82d7-5512b31e9d03","smooth_streaming":false,"target_origin_id":"appsync","trusted_key_groups":[],"trusted_signers":[],"viewer_protocol_policy":"allow-all"}],"default_root_object":"","domain_name":"d3lsh8pjb3h0ub.cloudfront.net","enabled":true,"etag":"E1IXRQLQL1O86R","hosted_zone_id":"Z2FDTNDATAQYW2","http_version":"http2and3","id":"EX4HFUQMZ2ULI","in_progress_validation_batches":0,"is_ipv6_enabled":true,"last_modified_time":"2025-11-17 23:20:25.716 +0000 UTC","logging_config":[],"ordered_cache_behavior":[{"allowed_methods":["GET","HEAD"],"cache_policy_id":"","cached_methods":["GET","HEAD"],"compress":true,"default_ttl":0,"field_level_encryption_id":"","forwarded_values":[{"cookies":[{"forward":"none","whitelisted_names":[]}],"headers":[],"query_string":true,"query_string_cache_keys":[]}],"function_association":[{"event_type":"viewer-request","function_arn":"arn:aws:cloudfront::540044833068:function/terraform-example-adequate-gibbon"},{"event_type":"viewer-response","function_arn":"arn:aws:cloudfront::540044833068:function/terraform-example-adequate-gibbon"}],"grpc_config":[{"enabled":false}],"lambda_function_association":[],"max_ttl":0,"min_ttl":0,"origin_request_policy_id":"","path_pattern":"/static/*","realtime_log_config_arn":"","response_headers_policy_id":"c7fd455f-1fa8-4632-9a22-fef9a58b69a9","smooth_streaming":false,"target_origin_id":"s3_one","trusted_key_groups":[],"trusted_signers":[],"viewer_protocol_policy":"redirect-to-https"}],"origin":[{"connection_attempts":3,"connection_timeout":10,"custom_header":[{"name":"X-Forwarded-Scheme","value":"https"},{"name":"X-Frame-Options","value":"SAMEORIGIN"}],"custom_origin_config":[{"http_port":80,"https_port":443,"origin_keepalive_timeout":5,"origin_protocol_policy":"match-viewer","origin_read_timeout":30,"origin_ssl_protocols":["TLSv1","TLSv1.1","TLSv1.2"]}],"domain_name":"appsync.terraform-example.modules.tf","origin_access_control_id":"","origin_id":"appsync","origin_path":"","origin_shield":[{"enabled":true,"origin_shield_region":"us-east-1"}],"s3_origin_config":[],"vpc_origin_config":[]},{"connection_attempts":3,"connection_timeout":10,"custom_header":[],"custom_origin_config":[],"domain_name":"s3-one-adequate-gibbon20251117232020021100000002.s3.eu-west-2.amazonaws.com","origin_access_control_id":"","origin_id":"s3_one","origin_path":"","origin_shield":[],"s3_origin_config":[{"origin_access_identity":"origin-access-identity/cloudfront/E3773WNTKP0C2U"}],"vpc_origin_config":[]},{"connection_attempts":3,"connection_timeout":10,"custom_header":[],"custom_origin_config":[],"domain_name":"s3-one-adequate-gibbon20251117232020021100000002.s3.eu-west-2.amazonaws.com","origin_access_control_id":"E3F5P5J73PT9IJ","origin_id":"s3_oac","origin_path":"","origin_shield":[],"s3_origin_config":[],"vpc_origin_config":[]}],"origin_group":[{"failover_criteria":[{"status_codes":[403,404,500,502]}],"member":[{"origin_id":"appsync"},{"origin_id":"s3_one"}],"origin_id":"group_one"}],"price_class":"PriceClass_All","restrictions":[{"geo_restriction":[{"locations":["GB","NO","UA","US"],"restriction_type":"whitelist"}]}],"retain_on_delete":false,"staging":false,"status":"Deployed","tags":{},"tags_all":{},"trusted_key_groups":[{"enabled":false,"items":[]}],"trusted_signers":[{"enabled":false,"items":[]}],"viewer_certificate":[{"acm_certificate_arn":"","cloudfront_default_certificate":true,"iam_certificate_id":"","minimum_protocol_version":"TLSv1","ssl_support_method":""}],"wait_for_deployment":false,"web_acl_id":""},"after_unknown":{},"before_sensitive":{"aliases":[],"custom_error_response":[{},{}],"default_cache_behavior":[{"allowed_methods":[false,false,false],"cached_methods":[false,false],"forwarded_values":[],"function_association":[],"grpc_config":[{}],"lambda_function_association":[],"trusted_key_groups":[],"trusted_signers":[]}],"logging_config":[],"ordered_cache_behavior":[{"allowed_methods":[false,false],"cached_methods":[false,false],"forwarded_values":[{"cookies":[{"whitelisted_names":[]}],"headers":[],"query_string_cache_keys":[]}],"function_association":[{},{}],"grpc_config":[{}],"lambda_function_association":[],"trusted_key_groups":[],"trusted_signers":[]}],"origin":[{"custom_header":[{},{}],"custom_origin_config":[{"origin_ssl_protocols":[false,false,false]}],"origin_shield":[{}],"s3_origin_config":[],"vpc_origin_config":[]},{"custom_header":[],"custom_origin_config":[],"origin_shield":[],"s3_origin_config":[{}],"vpc_origin_config":[]},{"custom_header":[],"custom_origin_config":[],"origin_shield":[],"s3_origin_config":[],"vpc_origin_config":[]}],"origin_group":[{"failover_criteria":[{"status_codes":[false,false,false,false]}],"member":[{},{}]}],"restrictions":[{"geo_restriction":[{"locations":[false,false,false,false]}]}],"tags":{},"tags_all":{},"trusted_key_groups":[{"items":[]}],"trusted_signers":[{"items":[]}],"viewer_certificate":[{}]},"after_sensitive":{"aliases":[],"custom_error_response":[{},{}],"default_cache_behavior":[{"allowed_methods":[false,false,false],"cached_methods":[false,false],"forwarded_values":[],"function_association":[],"grpc_config":[{}],"lambda_function_association":[],"trusted_key_groups":[],"trusted_signers":[]}],"logging_config":[],"ordered_cache_behavior":[{"allowed_methods":[false,false],"cached_methods":[false,false],"forwarded_values":[{"cookies":[{"whitelisted_names":[]}],"headers":[],"query_string_cache_keys":[]}],"function_association":[{},{}],"grpc_config":[{}],"lambda_function_association":[],"trusted_key_groups":[],"trusted_signers":[]}],"origin":[{"custom_header":[{},{}],"custom_origin_config":[{"origin_ssl_protocols":[false,false,false]}],"origin_shield":[{}],"s3_origin_config":[],"vpc_origin_config":[]},{"custom_header":[],"custom_origin_config":[],"origin_shield":[],"s3_origin_config":[{}],"vpc_origin_config":[]},{"custom_header":[],"custom_origin_config":[],"origin_shield":[],"s3_origin_config":[],"vpc_origin_config":[]}],"origin_group":[{"failover_criteria":[{"status_codes":[false,false,false,false]}],"member":[{},{}]}],"restrictions":[{"geo_restriction":[{"locations":[false,false,false,false]}]}],"tags":{},"tags_all":{},"trusted_key_groups":[{"items":[]}],"trusted_signers":[{"items":[]}],"viewer_certificate":[{}]}}},{"address":"module.heritage[0].module.cloudfront.aws_cloudfront_monitoring_subscription.this[0]","module_address":"module.heritage[0].module.cloudfront","mode":"managed","type":"aws_cloudfront_monitoring_subscription","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"distribution_id":"EX4HFUQMZ2ULI","id":"EX4HFUQMZ2ULI","monitoring_subscription":[{"realtime_metrics_subscription_config":[{"realtime_metrics_subscription_status":"Enabled"}]}]},"after":{"distribution_id":"EX4HFUQMZ2ULI","id":"EX4HFUQMZ2ULI","monitoring_subscription":[{"realtime_metrics_subscription_config":[{"realtime_metrics_subscription_status":"Enabled"}]}]},"after_unknown":{},"before_sensitive":{"monitoring_subscription":[{"realtime_metrics_subscription_config":[{}]}]},"after_sensitive":{"monitoring_subscription":[{"realtime_metrics_subscription_config":[{}]}]}}},{"address":"module.heritage[0].module.cloudfront.aws_cloudfront_origin_access_control.this[\"terraform-example\"]","module_address":"module.heritage[0].module.cloudfront","mode":"managed","type":"aws_cloudfront_origin_access_control","name":"this","index":"terraform-example","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:cloudfront::540044833068:origin-access-control/E3F5P5J73PT9IJ","description":"CloudFront access to S3","etag":"ETVPDKIKX0DER","id":"E3F5P5J73PT9IJ","name":"terraform-example","origin_access_control_origin_type":"s3","signing_behavior":"always","signing_protocol":"sigv4"},"after":{"arn":"arn:aws:cloudfront::540044833068:origin-access-control/E3F5P5J73PT9IJ","description":"CloudFront access to S3","etag":"ETVPDKIKX0DER","id":"E3F5P5J73PT9IJ","name":"terraform-example","origin_access_control_origin_type":"s3","signing_behavior":"always","signing_protocol":"sigv4"},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.heritage[0].module.cloudfront.aws_cloudfront_origin_access_identity.this[\"s3_bucket_one\"]","module_address":"module.heritage[0].module.cloudfront","mode":"managed","type":"aws_cloudfront_origin_access_identity","name":"this","index":"s3_bucket_one","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:cloudfront::540044833068:origin-access-identity/E3773WNTKP0C2U","caller_reference":"terraform-20251117232021315100000003","cloudfront_access_identity_path":"origin-access-identity/cloudfront/E3773WNTKP0C2U","comment":"My awesome CloudFront can access","etag":"E3UN6WX5RRO2AG","iam_arn":"arn:aws:iam::cloudfront:user/CloudFront Origin Access Identity E3773WNTKP0C2U","id":"E3773WNTKP0C2U","s3_canonical_user_id":"616f6d6f237db229bb2fc63daa66b9c72a42691aca85621db17121ce20b0234705366f98cdd64601d82ef4ca0ca396ef"},"after":{"arn":"arn:aws:cloudfront::540044833068:origin-access-identity/E3773WNTKP0C2U","caller_reference":"terraform-20251117232021315100000003","cloudfront_access_identity_path":"origin-access-identity/cloudfront/E3773WNTKP0C2U","comment":"My awesome CloudFront can access","etag":"E3UN6WX5RRO2AG","iam_arn":"arn:aws:iam::cloudfront:user/CloudFront Origin Access Identity E3773WNTKP0C2U","id":"E3773WNTKP0C2U","s3_canonical_user_id":"616f6d6f237db229bb2fc63daa66b9c72a42691aca85621db17121ce20b0234705366f98cdd64601d82ef4ca0ca396ef"},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.heritage[0].module.memory_optimization.aws_cloudwatch_log_group.app[0]","module_address":"module.heritage[0].module.memory_optimization","mode":"managed","type":"aws_cloudwatch_log_group","name":"app","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:logs:eu-west-2:540044833068:log-group:/ecs/scenarios--27e78067","id":"/ecs/scenarios--27e78067","kms_key_id":"","log_group_class":"STANDARD","name":"/ecs/scenarios--27e78067","name_prefix":"","retention_in_days":1,"skip_destroy":false,"tags":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"Logs will show OOM kills when memory is reduced to 1024MB","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-logs","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"tags_all":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"Logs will show OOM kills when memory is reduced to 1024MB","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-logs","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"}},"after":{"arn":"arn:aws:logs:eu-west-2:540044833068:log-group:/ecs/scenarios--27e78067","id":"/ecs/scenarios--27e78067","kms_key_id":"","log_group_class":"STANDARD","name":"/ecs/scenarios--27e78067","name_prefix":"","retention_in_days":1,"skip_destroy":false,"tags":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"Logs will show OOM kills when memory is reduced to 1024MB","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-logs","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"tags_all":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"Logs will show OOM kills when memory is reduced to 1024MB","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-logs","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"}},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.heritage[0].module.memory_optimization.aws_cloudwatch_log_metric_filter.memory_pressure[0]","module_address":"module.heritage[0].module.memory_optimization","mode":"managed","type":"aws_cloudwatch_log_metric_filter","name":"memory_pressure","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"id":"scenarios--27e78067-memory-pressure","log_group_name":"/ecs/scenarios--27e78067","metric_transformation":[{"default_value":"","dimensions":{},"name":"JavaOOMErrors","namespace":"MemoryOptimization/Demo","unit":"None","value":"1"}],"name":"scenarios--27e78067-memory-pressure","pattern":"[timestamp, requestId, level=\"ERROR\", message=\"*OutOfMemoryError*\"]"},"after":{"id":"scenarios--27e78067-memory-pressure","log_group_name":"/ecs/scenarios--27e78067","metric_transformation":[{"default_value":"","dimensions":{},"name":"JavaOOMErrors","namespace":"MemoryOptimization/Demo","unit":"None","value":"1"}],"name":"scenarios--27e78067-memory-pressure","pattern":"[timestamp, requestId, level=\"ERROR\", message=\"*OutOfMemoryError*\"]"},"after_unknown":{},"before_sensitive":{"metric_transformation":[{"dimensions":{}}]},"after_sensitive":{"metric_transformation":[{"dimensions":{}}]}}},{"address":"module.heritage[0].module.memory_optimization.aws_cloudwatch_metric_alarm.high_cpu_utilization[0]","module_address":"module.heritage[0].module.memory_optimization","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"high_cpu_utilization","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"actions_enabled":true,"alarm_actions":["arn:aws:sns:eu-west-2:540044833068:scenarios--27e78067-alerts"],"alarm_description":"This metric monitors ECS CPU utilization - will spike when JVM struggles with insufficient memory","alarm_name":"scenarios--27e78067-high-cpu","arn":"arn:aws:cloudwatch:eu-west-2:540044833068:alarm:scenarios--27e78067-high-cpu","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":0,"dimensions":{"ClusterName":"scenarios--27e78067-cluster","ServiceName":"scenarios--27e78067-service"},"evaluate_low_sample_count_percentiles":"","evaluation_periods":3,"extended_statistic":"","id":"scenarios--27e78067-high-cpu","insufficient_data_actions":[],"metric_name":"CPUUtilization","metric_query":[],"namespace":"AWS/ECS","ok_actions":[],"period":300,"statistic":"Average","tags":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"CPU utilization alarm for Java application performance","Environment":"demo","GCPressure":"high-when-heap-approaches-limit","JVMBehavior":"CPU-spikes-before-OOM","JavaHeapMB":"1536","MemoryMB":"2048","MemoryThrashing":"frequent-GC-when-constrained","Name":"scenarios--27e78067-cpu-alarm","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"tags_all":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"CPU utilization alarm for Java application performance","Environment":"demo","GCPressure":"high-when-heap-approaches-limit","JVMBehavior":"CPU-spikes-before-OOM","JavaHeapMB":"1536","MemoryMB":"2048","MemoryThrashing":"frequent-GC-when-constrained","Name":"scenarios--27e78067-cpu-alarm","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"threshold":80,"threshold_metric_id":"","treat_missing_data":"missing","unit":""},"after":{"actions_enabled":true,"alarm_actions":["arn:aws:sns:eu-west-2:540044833068:scenarios--27e78067-alerts"],"alarm_description":"This metric monitors ECS CPU utilization - will spike when JVM struggles with insufficient memory","alarm_name":"scenarios--27e78067-high-cpu","arn":"arn:aws:cloudwatch:eu-west-2:540044833068:alarm:scenarios--27e78067-high-cpu","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":0,"dimensions":{"ClusterName":"scenarios--27e78067-cluster","ServiceName":"scenarios--27e78067-service"},"evaluate_low_sample_count_percentiles":"","evaluation_periods":3,"extended_statistic":"","id":"scenarios--27e78067-high-cpu","insufficient_data_actions":[],"metric_name":"CPUUtilization","metric_query":[],"namespace":"AWS/ECS","ok_actions":[],"period":300,"statistic":"Average","tags":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"CPU utilization alarm for Java application performance","Environment":"demo","GCPressure":"high-when-heap-approaches-limit","JVMBehavior":"CPU-spikes-before-OOM","JavaHeapMB":"1536","MemoryMB":"2048","MemoryThrashing":"frequent-GC-when-constrained","Name":"scenarios--27e78067-cpu-alarm","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"tags_all":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"CPU utilization alarm for Java application performance","Environment":"demo","GCPressure":"high-when-heap-approaches-limit","JVMBehavior":"CPU-spikes-before-OOM","JavaHeapMB":"1536","MemoryMB":"2048","MemoryThrashing":"frequent-GC-when-constrained","Name":"scenarios--27e78067-cpu-alarm","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"threshold":80,"threshold_metric_id":"","treat_missing_data":"missing","unit":""},"after_unknown":{},"before_sensitive":{"alarm_actions":[false],"dimensions":{},"insufficient_data_actions":[],"metric_query":[],"ok_actions":[],"tags":{},"tags_all":{}},"after_sensitive":{"alarm_actions":[false],"dimensions":{},"insufficient_data_actions":[],"metric_query":[],"ok_actions":[],"tags":{},"tags_all":{}}}},{"address":"module.heritage[0].module.memory_optimization.aws_cloudwatch_metric_alarm.high_memory_utilization[0]","module_address":"module.heritage[0].module.memory_optimization","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"high_memory_utilization","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"actions_enabled":true,"alarm_actions":["arn:aws:sns:eu-west-2:540044833068:scenarios--27e78067-alerts"],"alarm_description":"This metric monitors ECS memory utilization - WILL FIRE when containers run out of memory","alarm_name":"scenarios--27e78067-high-memory","arn":"arn:aws:cloudwatch:eu-west-2:540044833068:alarm:scenarios--27e78067-high-memory","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":0,"dimensions":{"ClusterName":"scenarios--27e78067-cluster","ServiceName":"scenarios--27e78067-service"},"evaluate_low_sample_count_percentiles":"","evaluation_periods":2,"extended_statistic":"","id":"scenarios--27e78067-high-memory","insufficient_data_actions":[],"metric_name":"MemoryUtilization","metric_query":[],"namespace":"AWS/ECS","ok_actions":["arn:aws:sns:eu-west-2:540044833068:scenarios--27e78067-alerts"],"period":300,"statistic":"Average","tags":{"AlarmTrigger":"memory-over-80-percent","ContainerMemoryMB":"2048","CreatedBy":"terraform","DaysUntilBF":"7","Description":"Memory utilization alarm for Java application","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-memory-alarm","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction","WillFireAfterChange":"false"},"tags_all":{"AlarmTrigger":"memory-over-80-percent","ContainerMemoryMB":"2048","CreatedBy":"terraform","DaysUntilBF":"7","Description":"Memory utilization alarm for Java application","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-memory-alarm","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction","WillFireAfterChange":"false"},"threshold":80,"threshold_metric_id":"","treat_missing_data":"missing","unit":""},"after":{"actions_enabled":true,"alarm_actions":["arn:aws:sns:eu-west-2:540044833068:scenarios--27e78067-alerts"],"alarm_description":"This metric monitors ECS memory utilization - WILL FIRE when containers run out of memory","alarm_name":"scenarios--27e78067-high-memory","arn":"arn:aws:cloudwatch:eu-west-2:540044833068:alarm:scenarios--27e78067-high-memory","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":0,"dimensions":{"ClusterName":"scenarios--27e78067-cluster","ServiceName":"scenarios--27e78067-service"},"evaluate_low_sample_count_percentiles":"","evaluation_periods":2,"extended_statistic":"","id":"scenarios--27e78067-high-memory","insufficient_data_actions":[],"metric_name":"MemoryUtilization","metric_query":[],"namespace":"AWS/ECS","ok_actions":["arn:aws:sns:eu-west-2:540044833068:scenarios--27e78067-alerts"],"period":300,"statistic":"Average","tags":{"AlarmTrigger":"memory-over-80-percent","ContainerMemoryMB":"2048","CreatedBy":"terraform","DaysUntilBF":"7","Description":"Memory utilization alarm for Java application","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-memory-alarm","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction","WillFireAfterChange":"false"},"tags_all":{"AlarmTrigger":"memory-over-80-percent","ContainerMemoryMB":"2048","CreatedBy":"terraform","DaysUntilBF":"7","Description":"Memory utilization alarm for Java application","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-memory-alarm","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction","WillFireAfterChange":"false"},"threshold":80,"threshold_metric_id":"","treat_missing_data":"missing","unit":""},"after_unknown":{},"before_sensitive":{"alarm_actions":[false],"dimensions":{},"insufficient_data_actions":[],"metric_query":[],"ok_actions":[false],"tags":{},"tags_all":{}},"after_sensitive":{"alarm_actions":[false],"dimensions":{},"insufficient_data_actions":[],"metric_query":[],"ok_actions":[false],"tags":{},"tags_all":{}}}},{"address":"module.heritage[0].module.memory_optimization.aws_cloudwatch_metric_alarm.low_task_count[0]","module_address":"module.heritage[0].module.memory_optimization","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"low_task_count","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"actions_enabled":true,"alarm_actions":["arn:aws:sns:eu-west-2:540044833068:scenarios--27e78067-alerts"],"alarm_description":"This metric monitors ECS running task count - WILL FIRE when containers crash due to OOM","alarm_name":"scenarios--27e78067-low-task-count","arn":"arn:aws:cloudwatch:eu-west-2:540044833068:alarm:scenarios--27e78067-low-task-count","comparison_operator":"LessThanThreshold","datapoints_to_alarm":0,"dimensions":{"ClusterName":"scenarios--27e78067-cluster","ServiceName":"scenarios--27e78067-service"},"evaluate_low_sample_count_percentiles":"","evaluation_periods":2,"extended_statistic":"","id":"scenarios--27e78067-low-task-count","insufficient_data_actions":[],"metric_name":"RunningTaskCount","metric_query":[],"namespace":"AWS/ECS","ok_actions":["arn:aws:sns:eu-west-2:540044833068:scenarios--27e78067-alerts"],"period":300,"statistic":"Average","tags":{"BusinessImpact":"service-degradation","CrashCause":"OOM-when-memory-reduced","CreatedBy":"terraform","DaysUntilBF":"7","Description":"Task count alarm for container health monitoring","Environment":"demo","ExpectedTasks":"3","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-task-count-alarm","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction","ThresholdTasks":"2.4"},"tags_all":{"BusinessImpact":"service-degradation","CrashCause":"OOM-when-memory-reduced","CreatedBy":"terraform","DaysUntilBF":"7","Description":"Task count alarm for container health monitoring","Environment":"demo","ExpectedTasks":"3","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-task-count-alarm","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction","ThresholdTasks":"2.4"},"threshold":2.4,"threshold_metric_id":"","treat_missing_data":"missing","unit":""},"after":{"actions_enabled":true,"alarm_actions":["arn:aws:sns:eu-west-2:540044833068:scenarios--27e78067-alerts"],"alarm_description":"This metric monitors ECS running task count - WILL FIRE when containers crash due to OOM","alarm_name":"scenarios--27e78067-low-task-count","arn":"arn:aws:cloudwatch:eu-west-2:540044833068:alarm:scenarios--27e78067-low-task-count","comparison_operator":"LessThanThreshold","datapoints_to_alarm":0,"dimensions":{"ClusterName":"scenarios--27e78067-cluster","ServiceName":"scenarios--27e78067-service"},"evaluate_low_sample_count_percentiles":"","evaluation_periods":2,"extended_statistic":"","id":"scenarios--27e78067-low-task-count","insufficient_data_actions":[],"metric_name":"RunningTaskCount","metric_query":[],"namespace":"AWS/ECS","ok_actions":["arn:aws:sns:eu-west-2:540044833068:scenarios--27e78067-alerts"],"period":300,"statistic":"Average","tags":{"BusinessImpact":"service-degradation","CrashCause":"OOM-when-memory-reduced","CreatedBy":"terraform","DaysUntilBF":"7","Description":"Task count alarm for container health monitoring","Environment":"demo","ExpectedTasks":"3","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-task-count-alarm","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction","ThresholdTasks":"2.4"},"tags_all":{"BusinessImpact":"service-degradation","CrashCause":"OOM-when-memory-reduced","CreatedBy":"terraform","DaysUntilBF":"7","Description":"Task count alarm for container health monitoring","Environment":"demo","ExpectedTasks":"3","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-task-count-alarm","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction","ThresholdTasks":"2.4"},"threshold":2.4,"threshold_metric_id":"","treat_missing_data":"missing","unit":""},"after_unknown":{},"before_sensitive":{"alarm_actions":[false],"dimensions":{},"insufficient_data_actions":[],"metric_query":[],"ok_actions":[false],"tags":{},"tags_all":{}},"after_sensitive":{"alarm_actions":[false],"dimensions":{},"insufficient_data_actions":[],"metric_query":[],"ok_actions":[false],"tags":{},"tags_all":{}}}},{"address":"module.heritage[0].module.memory_optimization.aws_cloudwatch_metric_alarm.unhealthy_targets[0]","module_address":"module.heritage[0].module.memory_optimization","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"unhealthy_targets","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"actions_enabled":true,"alarm_actions":["arn:aws:sns:eu-west-2:540044833068:scenarios--27e78067-alerts"],"alarm_description":"This metric monitors ALB unhealthy targets - will fire when containers become unresponsive","alarm_name":"scenarios--27e78067-unhealthy-targets","arn":"arn:aws:cloudwatch:eu-west-2:540044833068:alarm:scenarios--27e78067-unhealthy-targets","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":0,"dimensions":{"LoadBalancer":"app/scenarios--27e78067-alb/d1465e8f5a619f26","TargetGroup":"targetgroup/scenarios--27e78067-tg/0ce05c8cfec9e2f1"},"evaluate_low_sample_count_percentiles":"","evaluation_periods":2,"extended_statistic":"","id":"scenarios--27e78067-unhealthy-targets","insufficient_data_actions":[],"metric_name":"UnHealthyHostCount","metric_query":[],"namespace":"AWS/ApplicationELB","ok_actions":[],"period":60,"statistic":"Average","tags":{"BusinessRisk":"outage-before-peak-season","CreatedBy":"terraform","DaysUntilBF":"7","DeregistrationTime":"5s","Description":"ALB target health monitoring for application availability","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-unhealthy-targets-alarm","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","RollbackCapability":"insufficient","Scenario":"cost-reduction","UserExperience":"failed-requests-during-crashes"},"tags_all":{"BusinessRisk":"outage-before-peak-season","CreatedBy":"terraform","DaysUntilBF":"7","DeregistrationTime":"5s","Description":"ALB target health monitoring for application availability","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-unhealthy-targets-alarm","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","RollbackCapability":"insufficient","Scenario":"cost-reduction","UserExperience":"failed-requests-during-crashes"},"threshold":0,"threshold_metric_id":"","treat_missing_data":"missing","unit":""},"after":{"actions_enabled":true,"alarm_actions":["arn:aws:sns:eu-west-2:540044833068:scenarios--27e78067-alerts"],"alarm_description":"This metric monitors ALB unhealthy targets - will fire when containers become unresponsive","alarm_name":"scenarios--27e78067-unhealthy-targets","arn":"arn:aws:cloudwatch:eu-west-2:540044833068:alarm:scenarios--27e78067-unhealthy-targets","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":0,"dimensions":{"LoadBalancer":"app/scenarios--27e78067-alb/d1465e8f5a619f26","TargetGroup":"targetgroup/scenarios--27e78067-tg/0ce05c8cfec9e2f1"},"evaluate_low_sample_count_percentiles":"","evaluation_periods":2,"extended_statistic":"","id":"scenarios--27e78067-unhealthy-targets","insufficient_data_actions":[],"metric_name":"UnHealthyHostCount","metric_query":[],"namespace":"AWS/ApplicationELB","ok_actions":[],"period":60,"statistic":"Average","tags":{"BusinessRisk":"outage-before-peak-season","CreatedBy":"terraform","DaysUntilBF":"7","DeregistrationTime":"5s","Description":"ALB target health monitoring for application availability","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-unhealthy-targets-alarm","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","RollbackCapability":"insufficient","Scenario":"cost-reduction","UserExperience":"failed-requests-during-crashes"},"tags_all":{"BusinessRisk":"outage-before-peak-season","CreatedBy":"terraform","DaysUntilBF":"7","DeregistrationTime":"5s","Description":"ALB target health monitoring for application availability","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-unhealthy-targets-alarm","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","RollbackCapability":"insufficient","Scenario":"cost-reduction","UserExperience":"failed-requests-during-crashes"},"threshold":0,"threshold_metric_id":"","treat_missing_data":"missing","unit":""},"after_unknown":{},"before_sensitive":{"alarm_actions":[false],"dimensions":{},"insufficient_data_actions":[],"metric_query":[],"ok_actions":[],"tags":{},"tags_all":{}},"after_sensitive":{"alarm_actions":[false],"dimensions":{},"insufficient_data_actions":[],"metric_query":[],"ok_actions":[],"tags":{},"tags_all":{}}}},{"address":"module.heritage[0].module.memory_optimization.aws_cloudwatch_query_definition.oom_events[0]","module_address":"module.heritage[0].module.memory_optimization","mode":"managed","type":"aws_cloudwatch_query_definition","name":"oom_events","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"id":"8d2b4d24-f4de-4ace-965a-54d45e1ad99e","log_group_names":["/ecs/scenarios--27e78067"],"name":"scenarios--27e78067-oom-analysis","query_definition_id":"8d2b4d24-f4de-4ace-965a-54d45e1ad99e","query_string":"fields @timestamp, @message\n| filter @message like /OutOfMemoryError/\n| sort @timestamp desc\n| limit 100\n"},"after":{"id":"8d2b4d24-f4de-4ace-965a-54d45e1ad99e","log_group_names":["/ecs/scenarios--27e78067"],"name":"scenarios--27e78067-oom-analysis","query_definition_id":"8d2b4d24-f4de-4ace-965a-54d45e1ad99e","query_string":"fields @timestamp, @message\n| filter @message like /OutOfMemoryError/\n| sort @timestamp desc\n| limit 100\n"},"after_unknown":{},"before_sensitive":{"log_group_names":[false]},"after_sensitive":{"log_group_names":[false]}}},{"address":"module.heritage[0].module.memory_optimization.aws_ecs_cluster.main[0]","module_address":"module.heritage[0].module.memory_optimization","mode":"managed","type":"aws_ecs_cluster","name":"main","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ecs:eu-west-2:540044833068:cluster/scenarios--27e78067-cluster","configuration":[],"id":"arn:aws:ecs:eu-west-2:540044833068:cluster/scenarios--27e78067-cluster","name":"scenarios--27e78067-cluster","service_connect_defaults":[],"setting":[{"name":"containerInsights","value":"disabled"}],"tags":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"ECS cluster for memory optimization demo - all 3 containers will restart on memory change","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-cluster","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"tags_all":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"ECS cluster for memory optimization demo - all 3 containers will restart on memory change","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-cluster","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"}},"after":{"arn":"arn:aws:ecs:eu-west-2:540044833068:cluster/scenarios--27e78067-cluster","configuration":[],"id":"arn:aws:ecs:eu-west-2:540044833068:cluster/scenarios--27e78067-cluster","name":"scenarios--27e78067-cluster","service_connect_defaults":[],"setting":[{"name":"containerInsights","value":"disabled"}],"tags":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"ECS cluster for memory optimization demo - all 3 containers will restart on memory change","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-cluster","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"tags_all":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"ECS cluster for memory optimization demo - all 3 containers will restart on memory change","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-cluster","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"}},"after_unknown":{},"before_sensitive":{"configuration":[],"service_connect_defaults":[],"setting":[{}],"tags":{},"tags_all":{}},"after_sensitive":{"configuration":[],"service_connect_defaults":[],"setting":[{}],"tags":{},"tags_all":{}}}},{"address":"module.heritage[0].module.memory_optimization.aws_ecs_service.app[0]","module_address":"module.heritage[0].module.memory_optimization","mode":"managed","type":"aws_ecs_service","name":"app","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"alarms":[],"availability_zone_rebalancing":"DISABLED","capacity_provider_strategy":[],"cluster":"arn:aws:ecs:eu-west-2:540044833068:cluster/scenarios--27e78067-cluster","deployment_circuit_breaker":[{"enable":false,"rollback":false}],"deployment_controller":[{"type":"ECS"}],"deployment_maximum_percent":200,"deployment_minimum_healthy_percent":100,"desired_count":3,"enable_ecs_managed_tags":false,"enable_execute_command":false,"force_delete":null,"force_new_deployment":null,"health_check_grace_period_seconds":0,"iam_role":"/aws-service-role/ecs.amazonaws.com/AWSServiceRoleForECS","id":"arn:aws:ecs:eu-west-2:540044833068:service/scenarios--27e78067-cluster/scenarios--27e78067-service","launch_type":"FARGATE","load_balancer":[{"container_name":"tomcat-app","container_port":8080,"elb_name":"","target_group_arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/scenarios--27e78067-tg/0ce05c8cfec9e2f1"}],"name":"scenarios--27e78067-service","network_configuration":[{"assign_public_ip":true,"security_groups":["sg-07496007262e8cd03"],"subnets":["subnet-07fc72cf57c70e4f0","subnet-0a1b287732e8ad0b7"]}],"ordered_placement_strategy":[],"placement_constraints":[],"platform_version":"LATEST","propagate_tags":"NONE","scheduling_strategy":"REPLICA","service_connect_configuration":[],"service_registries":[],"tags":{"BusinessContext":"cost-optimization","ContainersAffected":"3","CreatedBy":"terraform","DaysUntilBF":"7","DeploymentType":"rolling","Description":"ECS service running Java application containers","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-service","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"tags_all":{"BusinessContext":"cost-optimization","ContainersAffected":"3","CreatedBy":"terraform","DaysUntilBF":"7","DeploymentType":"rolling","Description":"ECS service running Java application containers","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-service","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"task_definition":"arn:aws:ecs:eu-west-2:540044833068:task-definition/scenarios--27e78067-task:1","timeouts":null,"triggers":{},"volume_configuration":[],"vpc_lattice_configurations":[],"wait_for_steady_state":false},"after":{"alarms":[],"availability_zone_rebalancing":"DISABLED","capacity_provider_strategy":[],"cluster":"arn:aws:ecs:eu-west-2:540044833068:cluster/scenarios--27e78067-cluster","deployment_circuit_breaker":[{"enable":false,"rollback":false}],"deployment_controller":[{"type":"ECS"}],"deployment_maximum_percent":200,"deployment_minimum_healthy_percent":100,"desired_count":3,"enable_ecs_managed_tags":false,"enable_execute_command":false,"force_delete":null,"force_new_deployment":null,"health_check_grace_period_seconds":0,"iam_role":"/aws-service-role/ecs.amazonaws.com/AWSServiceRoleForECS","id":"arn:aws:ecs:eu-west-2:540044833068:service/scenarios--27e78067-cluster/scenarios--27e78067-service","launch_type":"FARGATE","load_balancer":[{"container_name":"tomcat-app","container_port":8080,"elb_name":"","target_group_arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/scenarios--27e78067-tg/0ce05c8cfec9e2f1"}],"name":"scenarios--27e78067-service","network_configuration":[{"assign_public_ip":true,"security_groups":["sg-07496007262e8cd03"],"subnets":["subnet-07fc72cf57c70e4f0","subnet-0a1b287732e8ad0b7"]}],"ordered_placement_strategy":[],"placement_constraints":[],"platform_version":"LATEST","propagate_tags":"NONE","scheduling_strategy":"REPLICA","service_connect_configuration":[],"service_registries":[],"tags":{"BusinessContext":"cost-optimization","ContainersAffected":"3","CreatedBy":"terraform","DaysUntilBF":"7","DeploymentType":"rolling","Description":"ECS service running Java application containers","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-service","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"tags_all":{"BusinessContext":"cost-optimization","ContainersAffected":"3","CreatedBy":"terraform","DaysUntilBF":"7","DeploymentType":"rolling","Description":"ECS service running Java application containers","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-service","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"task_definition":"arn:aws:ecs:eu-west-2:540044833068:task-definition/scenarios--27e78067-task:1","timeouts":null,"triggers":{},"volume_configuration":[],"vpc_lattice_configurations":[],"wait_for_steady_state":false},"after_unknown":{},"before_sensitive":{"alarms":[],"capacity_provider_strategy":[],"deployment_circuit_breaker":[{}],"deployment_controller":[{}],"load_balancer":[{}],"network_configuration":[{"security_groups":[false],"subnets":[false,false]}],"ordered_placement_strategy":[],"placement_constraints":[],"service_connect_configuration":[],"service_registries":[],"tags":{},"tags_all":{},"triggers":{},"volume_configuration":[],"vpc_lattice_configurations":[]},"after_sensitive":{"alarms":[],"capacity_provider_strategy":[],"deployment_circuit_breaker":[{}],"deployment_controller":[{}],"load_balancer":[{}],"network_configuration":[{"security_groups":[false],"subnets":[false,false]}],"ordered_placement_strategy":[],"placement_constraints":[],"service_connect_configuration":[],"service_registries":[],"tags":{},"tags_all":{},"triggers":{},"volume_configuration":[],"vpc_lattice_configurations":[]}}},{"address":"module.heritage[0].module.memory_optimization.aws_ecs_task_definition.app[0]","module_address":"module.heritage[0].module.memory_optimization","mode":"managed","type":"aws_ecs_task_definition","name":"app","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ecs:eu-west-2:540044833068:task-definition/scenarios--27e78067-task:1","arn_without_revision":"arn:aws:ecs:eu-west-2:540044833068:task-definition/scenarios--27e78067-task","container_definitions":"[{\"environment\":[{\"name\":\"CATALINA_OPTS\",\"value\":\"-Djava.security.egd=file:/dev/./urandom\"},{\"name\":\"JAVA_OPTS\",\"value\":\"-Xmx1536m -Xms1536m -XX:+UseG1GC -XX:MaxGCPauseMillis=200\"}],\"essential\":true,\"healthCheck\":{\"command\":[\"CMD-SHELL\",\"curl -f http://localhost:8080/ || exit 1\"],\"interval\":30,\"retries\":3,\"startPeriod\":120,\"timeout\":5},\"image\":\"tomcat:9-jre11\",\"logConfiguration\":{\"logDriver\":\"awslogs\",\"options\":{\"awslogs-group\":\"/ecs/scenarios--27e78067\",\"awslogs-region\":\"eu-west-2\",\"awslogs-stream-prefix\":\"ecs\"}},\"memoryReservation\":800,\"mountPoints\":[],\"name\":\"tomcat-app\",\"portMappings\":[{\"containerPort\":8080,\"hostPort\":8080,\"protocol\":\"tcp\"}],\"systemControls\":[],\"volumesFrom\":[]}]","cpu":"512","enable_fault_injection":false,"ephemeral_storage":[],"execution_role_arn":"arn:aws:iam::540044833068:role/scenarios--27e78067-ecs-execution-role","family":"scenarios--27e78067-task","id":"scenarios--27e78067-task","inference_accelerator":[],"ipc_mode":"","memory":"2048","network_mode":"awsvpc","pid_mode":"","placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":["FARGATE"],"revision":1,"runtime_platform":[],"skip_destroy":false,"tags":{"ContainerMemoryMB":"2048","CreatedBy":"terraform","DaysUntilBF":"7","Description":"ECS task definition with Java heap configuration","Environment":"demo","JavaHeapMB":"1536","JavaHeapSizeMB":"1536","MemoryMB":"2048","MemoryOptimized":"true","MemoryOverheadMB":"256","Name":"scenarios--27e78067-task","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction","TotalRequiredMB":"1792"},"tags_all":{"ContainerMemoryMB":"2048","CreatedBy":"terraform","DaysUntilBF":"7","Description":"ECS task definition with Java heap configuration","Environment":"demo","JavaHeapMB":"1536","JavaHeapSizeMB":"1536","MemoryMB":"2048","MemoryOptimized":"true","MemoryOverheadMB":"256","Name":"scenarios--27e78067-task","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction","TotalRequiredMB":"1792"},"task_role_arn":"arn:aws:iam::540044833068:role/scenarios--27e78067-ecs-task-role","track_latest":false,"volume":[]},"after":{"arn":"arn:aws:ecs:eu-west-2:540044833068:task-definition/scenarios--27e78067-task:1","arn_without_revision":"arn:aws:ecs:eu-west-2:540044833068:task-definition/scenarios--27e78067-task","container_definitions":"[{\"environment\":[{\"name\":\"CATALINA_OPTS\",\"value\":\"-Djava.security.egd=file:/dev/./urandom\"},{\"name\":\"JAVA_OPTS\",\"value\":\"-Xmx1536m -Xms1536m -XX:+UseG1GC -XX:MaxGCPauseMillis=200\"}],\"essential\":true,\"healthCheck\":{\"command\":[\"CMD-SHELL\",\"curl -f http://localhost:8080/ || exit 1\"],\"interval\":30,\"retries\":3,\"startPeriod\":120,\"timeout\":5},\"image\":\"tomcat:9-jre11\",\"logConfiguration\":{\"logDriver\":\"awslogs\",\"options\":{\"awslogs-group\":\"/ecs/scenarios--27e78067\",\"awslogs-region\":\"eu-west-2\",\"awslogs-stream-prefix\":\"ecs\"}},\"memoryReservation\":800,\"mountPoints\":[],\"name\":\"tomcat-app\",\"portMappings\":[{\"containerPort\":8080,\"hostPort\":8080,\"protocol\":\"tcp\"}],\"systemControls\":[],\"volumesFrom\":[]}]","cpu":"512","enable_fault_injection":false,"ephemeral_storage":[],"execution_role_arn":"arn:aws:iam::540044833068:role/scenarios--27e78067-ecs-execution-role","family":"scenarios--27e78067-task","id":"scenarios--27e78067-task","inference_accelerator":[],"ipc_mode":"","memory":"2048","network_mode":"awsvpc","pid_mode":"","placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":["FARGATE"],"revision":1,"runtime_platform":[],"skip_destroy":false,"tags":{"ContainerMemoryMB":"2048","CreatedBy":"terraform","DaysUntilBF":"7","Description":"ECS task definition with Java heap configuration","Environment":"demo","JavaHeapMB":"1536","JavaHeapSizeMB":"1536","MemoryMB":"2048","MemoryOptimized":"true","MemoryOverheadMB":"256","Name":"scenarios--27e78067-task","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction","TotalRequiredMB":"1792"},"tags_all":{"ContainerMemoryMB":"2048","CreatedBy":"terraform","DaysUntilBF":"7","Description":"ECS task definition with Java heap configuration","Environment":"demo","JavaHeapMB":"1536","JavaHeapSizeMB":"1536","MemoryMB":"2048","MemoryOptimized":"true","MemoryOverheadMB":"256","Name":"scenarios--27e78067-task","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction","TotalRequiredMB":"1792"},"task_role_arn":"arn:aws:iam::540044833068:role/scenarios--27e78067-ecs-task-role","track_latest":false,"volume":[]},"after_unknown":{},"before_sensitive":{"ephemeral_storage":[],"inference_accelerator":[],"placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":[false],"runtime_platform":[],"tags":{},"tags_all":{},"volume":[]},"after_sensitive":{"ephemeral_storage":[],"inference_accelerator":[],"placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":[false],"runtime_platform":[],"tags":{},"tags_all":{},"volume":[]}}},{"address":"module.heritage[0].module.memory_optimization.aws_iam_role.ecs_execution_role[0]","module_address":"module.heritage[0].module.memory_optimization","mode":"managed","type":"aws_iam_role","name":"ecs_execution_role","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:iam::540044833068:role/scenarios--27e78067-ecs-execution-role","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ecs-tasks.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","create_date":"2025-11-17T23:20:20Z","description":"","force_detach_policies":false,"id":"scenarios--27e78067-ecs-execution-role","inline_policy":[],"managed_policy_arns":["arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy"],"max_session_duration":3600,"name":"scenarios--27e78067-ecs-execution-role","name_prefix":"","path":"/","permissions_boundary":"","tags":{"CreatedBy":"terraform","DaysUntilBF":"7","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"tags_all":{"CreatedBy":"terraform","DaysUntilBF":"7","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"unique_id":"AROAX3PJOGEWEKKJ5H6OA"},"after":{"arn":"arn:aws:iam::540044833068:role/scenarios--27e78067-ecs-execution-role","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ecs-tasks.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","create_date":"2025-11-17T23:20:20Z","description":"","force_detach_policies":false,"id":"scenarios--27e78067-ecs-execution-role","inline_policy":[],"managed_policy_arns":["arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy"],"max_session_duration":3600,"name":"scenarios--27e78067-ecs-execution-role","name_prefix":"","path":"/","permissions_boundary":"","tags":{"CreatedBy":"terraform","DaysUntilBF":"7","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"tags_all":{"CreatedBy":"terraform","DaysUntilBF":"7","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"unique_id":"AROAX3PJOGEWEKKJ5H6OA"},"after_unknown":{},"before_sensitive":{"inline_policy":[],"managed_policy_arns":[false],"tags":{},"tags_all":{}},"after_sensitive":{"inline_policy":[],"managed_policy_arns":[false],"tags":{},"tags_all":{}}}},{"address":"module.heritage[0].module.memory_optimization.aws_iam_role.ecs_task_role[0]","module_address":"module.heritage[0].module.memory_optimization","mode":"managed","type":"aws_iam_role","name":"ecs_task_role","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:iam::540044833068:role/scenarios--27e78067-ecs-task-role","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ecs-tasks.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","create_date":"2025-11-17T23:20:19Z","description":"","force_detach_policies":false,"id":"scenarios--27e78067-ecs-task-role","inline_policy":[],"managed_policy_arns":[],"max_session_duration":3600,"name":"scenarios--27e78067-ecs-task-role","name_prefix":"","path":"/","permissions_boundary":"","tags":{"CreatedBy":"terraform","DaysUntilBF":"7","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"tags_all":{"CreatedBy":"terraform","DaysUntilBF":"7","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"unique_id":"AROAX3PJOGEWP7USRZI3E"},"after":{"arn":"arn:aws:iam::540044833068:role/scenarios--27e78067-ecs-task-role","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ecs-tasks.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","create_date":"2025-11-17T23:20:19Z","description":"","force_detach_policies":false,"id":"scenarios--27e78067-ecs-task-role","inline_policy":[],"managed_policy_arns":[],"max_session_duration":3600,"name":"scenarios--27e78067-ecs-task-role","name_prefix":"","path":"/","permissions_boundary":"","tags":{"CreatedBy":"terraform","DaysUntilBF":"7","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"tags_all":{"CreatedBy":"terraform","DaysUntilBF":"7","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"unique_id":"AROAX3PJOGEWP7USRZI3E"},"after_unknown":{},"before_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags":{},"tags_all":{}},"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags":{},"tags_all":{}}}},{"address":"module.heritage[0].module.memory_optimization.aws_iam_role_policy_attachment.ecs_execution_role_policy[0]","module_address":"module.heritage[0].module.memory_optimization","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ecs_execution_role_policy","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"id":"scenarios--27e78067-ecs-execution-role-20251117232023483800000005","policy_arn":"arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy","role":"scenarios--27e78067-ecs-execution-role"},"after":{"id":"scenarios--27e78067-ecs-execution-role-20251117232023483800000005","policy_arn":"arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy","role":"scenarios--27e78067-ecs-execution-role"},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.heritage[0].module.memory_optimization.aws_lb.app[0]","module_address":"module.heritage[0].module.memory_optimization","mode":"managed","type":"aws_lb","name":"app","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"access_logs":[{"bucket":"","enabled":false,"prefix":""}],"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:loadbalancer/app/scenarios--27e78067-alb/d1465e8f5a619f26","arn_suffix":"app/scenarios--27e78067-alb/d1465e8f5a619f26","client_keep_alive":3600,"connection_logs":[{"bucket":"","enabled":false,"prefix":""}],"customer_owned_ipv4_pool":"","desync_mitigation_mode":"defensive","dns_name":"scenarios--27e78067-alb-513392904.eu-west-2.elb.amazonaws.com","dns_record_client_routing_policy":null,"drop_invalid_header_fields":false,"enable_cross_zone_load_balancing":true,"enable_deletion_protection":false,"enable_http2":true,"enable_tls_version_and_cipher_suite_headers":false,"enable_waf_fail_open":false,"enable_xff_client_port":false,"enable_zonal_shift":false,"enforce_security_group_inbound_rules_on_private_link_traffic":"","id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:loadbalancer/app/scenarios--27e78067-alb/d1465e8f5a619f26","idle_timeout":60,"internal":false,"ip_address_type":"ipv4","ipam_pools":[],"load_balancer_type":"application","minimum_load_balancer_capacity":[],"name":"scenarios--27e78067-alb","name_prefix":"","preserve_host_header":false,"security_groups":["sg-0b6f7b1aeeca6c2bc"],"subnet_mapping":[{"allocation_id":"","ipv6_address":"","outpost_id":"","private_ipv4_address":"","subnet_id":"subnet-07fc72cf57c70e4f0"},{"allocation_id":"","ipv6_address":"","outpost_id":"","private_ipv4_address":"","subnet_id":"subnet-0a1b287732e8ad0b7"}],"subnets":["subnet-07fc72cf57c70e4f0","subnet-0a1b287732e8ad0b7"],"tags":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"ALB for memory optimization demo - will route to failing containers after memory change","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-alb","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction","context:black-friday-traffic":"10x normal load expected","context:capacity-planning":"load balancer configured for high traffic"},"tags_all":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"ALB for memory optimization demo - will route to failing containers after memory change","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-alb","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction","context:black-friday-traffic":"10x normal load expected","context:capacity-planning":"load balancer configured for high traffic"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298","xff_header_processing_mode":"append","zone_id":"ZHURV8PSTC4K8"},"after":{"access_logs":[{"bucket":"","enabled":false,"prefix":""}],"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:loadbalancer/app/scenarios--27e78067-alb/d1465e8f5a619f26","arn_suffix":"app/scenarios--27e78067-alb/d1465e8f5a619f26","client_keep_alive":3600,"connection_logs":[{"bucket":"","enabled":false,"prefix":""}],"customer_owned_ipv4_pool":"","desync_mitigation_mode":"defensive","dns_name":"scenarios--27e78067-alb-513392904.eu-west-2.elb.amazonaws.com","dns_record_client_routing_policy":null,"drop_invalid_header_fields":false,"enable_cross_zone_load_balancing":true,"enable_deletion_protection":false,"enable_http2":true,"enable_tls_version_and_cipher_suite_headers":false,"enable_waf_fail_open":false,"enable_xff_client_port":false,"enable_zonal_shift":false,"enforce_security_group_inbound_rules_on_private_link_traffic":"","id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:loadbalancer/app/scenarios--27e78067-alb/d1465e8f5a619f26","idle_timeout":60,"internal":false,"ip_address_type":"ipv4","ipam_pools":[],"load_balancer_type":"application","minimum_load_balancer_capacity":[],"name":"scenarios--27e78067-alb","name_prefix":"","preserve_host_header":false,"security_groups":["sg-0b6f7b1aeeca6c2bc"],"subnet_mapping":[{"allocation_id":"","ipv6_address":"","outpost_id":"","private_ipv4_address":"","subnet_id":"subnet-07fc72cf57c70e4f0"},{"allocation_id":"","ipv6_address":"","outpost_id":"","private_ipv4_address":"","subnet_id":"subnet-0a1b287732e8ad0b7"}],"subnets":["subnet-07fc72cf57c70e4f0","subnet-0a1b287732e8ad0b7"],"tags":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"ALB for memory optimization demo - will route to failing containers after memory change","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-alb","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction","context:black-friday-traffic":"10x normal load expected","context:capacity-planning":"load balancer configured for high traffic"},"tags_all":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"ALB for memory optimization demo - will route to failing containers after memory change","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-alb","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction","context:black-friday-traffic":"10x normal load expected","context:capacity-planning":"load balancer configured for high traffic"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298","xff_header_processing_mode":"append","zone_id":"ZHURV8PSTC4K8"},"after_unknown":{},"before_sensitive":{"access_logs":[{}],"connection_logs":[{}],"ipam_pools":[],"minimum_load_balancer_capacity":[],"security_groups":[false],"subnet_mapping":[{},{}],"subnets":[false,false],"tags":{},"tags_all":{}},"after_sensitive":{"access_logs":[{}],"connection_logs":[{}],"ipam_pools":[],"minimum_load_balancer_capacity":[],"security_groups":[false],"subnet_mapping":[{},{}],"subnets":[false,false],"tags":{},"tags_all":{}}}},{"address":"module.heritage[0].module.memory_optimization.aws_lb_listener.app[0]","module_address":"module.heritage[0].module.memory_optimization","mode":"managed","type":"aws_lb_listener","name":"app","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"alpn_policy":null,"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:listener/app/scenarios--27e78067-alb/d1465e8f5a619f26/424adbb0b1b5a6ce","certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[{"stickiness":[{"duration":0,"enabled":false}],"target_group":[{"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/scenarios--27e78067-tg/0ce05c8cfec9e2f1","weight":1}]}],"order":1,"redirect":[],"target_group_arn":"","type":"forward"}],"id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:listener/app/scenarios--27e78067-alb/d1465e8f5a619f26/424adbb0b1b5a6ce","load_balancer_arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:loadbalancer/app/scenarios--27e78067-alb/d1465e8f5a619f26","mutual_authentication":[],"port":80,"protocol":"HTTP","routing_http_request_x_amzn_mtls_clientcert_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_issuer_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_leaf_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_serial_number_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_subject_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_validity_header_name":null,"routing_http_request_x_amzn_tls_cipher_suite_header_name":null,"routing_http_request_x_amzn_tls_version_header_name":null,"routing_http_response_access_control_allow_credentials_header_value":"","routing_http_response_access_control_allow_headers_header_value":"","routing_http_response_access_control_allow_methods_header_value":"","routing_http_response_access_control_allow_origin_header_value":"","routing_http_response_access_control_expose_headers_header_value":"","routing_http_response_access_control_max_age_header_value":"","routing_http_response_content_security_policy_header_value":"","routing_http_response_server_enabled":true,"routing_http_response_strict_transport_security_header_value":"","routing_http_response_x_content_type_options_header_value":"","routing_http_response_x_frame_options_header_value":"","ssl_policy":"","tags":{"CreatedBy":"terraform","DaysUntilBF":"7","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-listener","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"tags_all":{"CreatedBy":"terraform","DaysUntilBF":"7","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-listener","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"tcp_idle_timeout_seconds":null,"timeouts":null},"after":{"alpn_policy":null,"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:listener/app/scenarios--27e78067-alb/d1465e8f5a619f26/424adbb0b1b5a6ce","certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[{"stickiness":[{"duration":0,"enabled":false}],"target_group":[{"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/scenarios--27e78067-tg/0ce05c8cfec9e2f1","weight":1}]}],"order":1,"redirect":[],"target_group_arn":"","type":"forward"}],"id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:listener/app/scenarios--27e78067-alb/d1465e8f5a619f26/424adbb0b1b5a6ce","load_balancer_arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:loadbalancer/app/scenarios--27e78067-alb/d1465e8f5a619f26","mutual_authentication":[],"port":80,"protocol":"HTTP","routing_http_request_x_amzn_mtls_clientcert_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_issuer_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_leaf_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_serial_number_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_subject_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_validity_header_name":null,"routing_http_request_x_amzn_tls_cipher_suite_header_name":null,"routing_http_request_x_amzn_tls_version_header_name":null,"routing_http_response_access_control_allow_credentials_header_value":"","routing_http_response_access_control_allow_headers_header_value":"","routing_http_response_access_control_allow_methods_header_value":"","routing_http_response_access_control_allow_origin_header_value":"","routing_http_response_access_control_expose_headers_header_value":"","routing_http_response_access_control_max_age_header_value":"","routing_http_response_content_security_policy_header_value":"","routing_http_response_server_enabled":true,"routing_http_response_strict_transport_security_header_value":"","routing_http_response_x_content_type_options_header_value":"","routing_http_response_x_frame_options_header_value":"","ssl_policy":"","tags":{"CreatedBy":"terraform","DaysUntilBF":"7","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-listener","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"tags_all":{"CreatedBy":"terraform","DaysUntilBF":"7","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-listener","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"tcp_idle_timeout_seconds":null,"timeouts":null},"after_unknown":{},"before_sensitive":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[{"stickiness":[{}],"target_group":[{}]}],"redirect":[]}],"mutual_authentication":[],"tags":{},"tags_all":{}},"after_sensitive":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[{"stickiness":[{}],"target_group":[{}]}],"redirect":[]}],"mutual_authentication":[],"tags":{},"tags_all":{}}}},{"address":"module.heritage[0].module.memory_optimization.aws_lb_target_group.app[0]","module_address":"module.heritage[0].module.memory_optimization","mode":"managed","type":"aws_lb_target_group","name":"app","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/scenarios--27e78067-tg/0ce05c8cfec9e2f1","arn_suffix":"targetgroup/scenarios--27e78067-tg/0ce05c8cfec9e2f1","connection_termination":null,"deregistration_delay":"5","health_check":[{"enabled":true,"healthy_threshold":2,"interval":30,"matcher":"200","path":"/","port":"traffic-port","protocol":"HTTP","timeout":5,"unhealthy_threshold":2}],"id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/scenarios--27e78067-tg/0ce05c8cfec9e2f1","ip_address_type":"ipv4","lambda_multi_value_headers_enabled":false,"load_balancer_arns":["arn:aws:elasticloadbalancing:eu-west-2:540044833068:loadbalancer/app/scenarios--27e78067-alb/d1465e8f5a619f26"],"load_balancing_algorithm_type":"round_robin","load_balancing_anomaly_mitigation":"off","load_balancing_cross_zone_enabled":"use_load_balancer_configuration","name":"scenarios--27e78067-tg","name_prefix":"","port":8080,"preserve_client_ip":null,"protocol":"HTTP","protocol_version":"HTTP1","proxy_protocol_v2":false,"slow_start":0,"stickiness":[{"cookie_duration":86400,"cookie_name":"","enabled":false,"type":"lb_cookie"}],"tags":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"Target group with 5s deregistration - NO TIME FOR ROLLBACK","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-tg","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction","risk:black-friday-timing":"change 7 days before peak","risk:deregistration-delay":"5s","risk:rollback-capability":"none"},"tags_all":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"Target group with 5s deregistration - NO TIME FOR ROLLBACK","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-tg","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction","risk:black-friday-timing":"change 7 days before peak","risk:deregistration-delay":"5s","risk:rollback-capability":"none"},"target_failover":[{"on_deregistration":null,"on_unhealthy":null}],"target_group_health":[{"dns_failover":[{"minimum_healthy_targets_count":"1","minimum_healthy_targets_percentage":"off"}],"unhealthy_state_routing":[{"minimum_healthy_targets_count":1,"minimum_healthy_targets_percentage":"off"}]}],"target_health_state":[{"enable_unhealthy_connection_termination":null,"unhealthy_draining_interval":null}],"target_type":"ip","vpc_id":"vpc-02901bcbb89561298"},"after":{"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/scenarios--27e78067-tg/0ce05c8cfec9e2f1","arn_suffix":"targetgroup/scenarios--27e78067-tg/0ce05c8cfec9e2f1","connection_termination":null,"deregistration_delay":"5","health_check":[{"enabled":true,"healthy_threshold":2,"interval":30,"matcher":"200","path":"/","port":"traffic-port","protocol":"HTTP","timeout":5,"unhealthy_threshold":2}],"id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/scenarios--27e78067-tg/0ce05c8cfec9e2f1","ip_address_type":"ipv4","lambda_multi_value_headers_enabled":false,"load_balancer_arns":["arn:aws:elasticloadbalancing:eu-west-2:540044833068:loadbalancer/app/scenarios--27e78067-alb/d1465e8f5a619f26"],"load_balancing_algorithm_type":"round_robin","load_balancing_anomaly_mitigation":"off","load_balancing_cross_zone_enabled":"use_load_balancer_configuration","name":"scenarios--27e78067-tg","name_prefix":"","port":8080,"preserve_client_ip":null,"protocol":"HTTP","protocol_version":"HTTP1","proxy_protocol_v2":false,"slow_start":0,"stickiness":[{"cookie_duration":86400,"cookie_name":"","enabled":false,"type":"lb_cookie"}],"tags":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"Target group with 5s deregistration - NO TIME FOR ROLLBACK","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-tg","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction","risk:black-friday-timing":"change 7 days before peak","risk:deregistration-delay":"5s","risk:rollback-capability":"none"},"tags_all":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"Target group with 5s deregistration - NO TIME FOR ROLLBACK","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-tg","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction","risk:black-friday-timing":"change 7 days before peak","risk:deregistration-delay":"5s","risk:rollback-capability":"none"},"target_failover":[{"on_deregistration":null,"on_unhealthy":null}],"target_group_health":[{"dns_failover":[{"minimum_healthy_targets_count":"1","minimum_healthy_targets_percentage":"off"}],"unhealthy_state_routing":[{"minimum_healthy_targets_count":1,"minimum_healthy_targets_percentage":"off"}]}],"target_health_state":[{"enable_unhealthy_connection_termination":null,"unhealthy_draining_interval":null}],"target_type":"ip","vpc_id":"vpc-02901bcbb89561298"},"after_unknown":{},"before_sensitive":{"health_check":[{}],"load_balancer_arns":[false],"stickiness":[{}],"tags":{},"tags_all":{},"target_failover":[{}],"target_group_health":[{"dns_failover":[{}],"unhealthy_state_routing":[{}]}],"target_health_state":[{}]},"after_sensitive":{"health_check":[{}],"load_balancer_arns":[false],"stickiness":[{}],"tags":{},"tags_all":{},"target_failover":[{}],"target_group_health":[{"dns_failover":[{}],"unhealthy_state_routing":[{}]}],"target_health_state":[{}]}}},{"address":"module.heritage[0].module.memory_optimization.aws_security_group.alb[0]","module_address":"module.heritage[0].module.memory_optimization","mode":"managed","type":"aws_security_group","name":"alb","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:eu-west-2:540044833068:security-group/sg-0b6f7b1aeeca6c2bc","description":"Security group for ALB - allows public HTTP access","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"All outbound traffic","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-0b6f7b1aeeca6c2bc","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"HTTP from internet","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":80}],"name":"scenarios--27e78067-alb-sg","name_prefix":"","owner_id":"540044833068","revoke_rules_on_delete":false,"tags":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"ALB security group - public access for Black Friday capacity testing","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-alb-sg","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"tags_all":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"ALB security group - public access for Black Friday capacity testing","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-alb-sg","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"after":{"arn":"arn:aws:ec2:eu-west-2:540044833068:security-group/sg-0b6f7b1aeeca6c2bc","description":"Security group for ALB - allows public HTTP access","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"All outbound traffic","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-0b6f7b1aeeca6c2bc","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"HTTP from internet","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":80}],"name":"scenarios--27e78067-alb-sg","name_prefix":"","owner_id":"540044833068","revoke_rules_on_delete":false,"tags":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"ALB security group - public access for Black Friday capacity testing","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-alb-sg","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"tags_all":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"ALB security group - public access for Black Friday capacity testing","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-alb-sg","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"after_unknown":{},"before_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}},"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}},{"address":"module.heritage[0].module.memory_optimization.aws_security_group.ecs_tasks[0]","module_address":"module.heritage[0].module.memory_optimization","mode":"managed","type":"aws_security_group","name":"ecs_tasks","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:eu-west-2:540044833068:security-group/sg-07496007262e8cd03","description":"Security group for ECS tasks - allows ALB access","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"All outbound traffic","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-07496007262e8cd03","ingress":[{"cidr_blocks":[],"description":"HTTP from ALB","from_port":8080,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":["sg-0b6f7b1aeeca6c2bc"],"self":false,"to_port":8080}],"name":"scenarios--27e78067-ecs-sg","name_prefix":"","owner_id":"540044833068","revoke_rules_on_delete":false,"tags":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"ECS tasks security group - containers will crash after memory optimization","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-ecs-sg","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction","warning:containers-affected":"3 containers","warning:crash-behavior":"immediate OOM after memory reduction"},"tags_all":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"ECS tasks security group - containers will crash after memory optimization","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-ecs-sg","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction","warning:containers-affected":"3 containers","warning:crash-behavior":"immediate OOM after memory reduction"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"after":{"arn":"arn:aws:ec2:eu-west-2:540044833068:security-group/sg-07496007262e8cd03","description":"Security group for ECS tasks - allows ALB access","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"All outbound traffic","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-07496007262e8cd03","ingress":[{"cidr_blocks":[],"description":"HTTP from ALB","from_port":8080,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":["sg-0b6f7b1aeeca6c2bc"],"self":false,"to_port":8080}],"name":"scenarios--27e78067-ecs-sg","name_prefix":"","owner_id":"540044833068","revoke_rules_on_delete":false,"tags":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"ECS tasks security group - containers will crash after memory optimization","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-ecs-sg","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction","warning:containers-affected":"3 containers","warning:crash-behavior":"immediate OOM after memory reduction"},"tags_all":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"ECS tasks security group - containers will crash after memory optimization","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-ecs-sg","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction","warning:containers-affected":"3 containers","warning:crash-behavior":"immediate OOM after memory reduction"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"after_unknown":{},"before_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[false]}],"tags":{},"tags_all":{}},"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[false]}],"tags":{},"tags_all":{}}}},{"address":"module.heritage[0].module.memory_optimization.aws_sns_topic.alerts[0]","module_address":"module.heritage[0].module.memory_optimization","mode":"managed","type":"aws_sns_topic","name":"alerts","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"application_failure_feedback_role_arn":"","application_success_feedback_role_arn":"","application_success_feedback_sample_rate":0,"archive_policy":"","arn":"arn:aws:sns:eu-west-2:540044833068:scenarios--27e78067-alerts","beginning_archive_time":"","content_based_deduplication":false,"delivery_policy":"","display_name":"","fifo_throughput_scope":"","fifo_topic":false,"firehose_failure_feedback_role_arn":"","firehose_success_feedback_role_arn":"","firehose_success_feedback_sample_rate":0,"http_failure_feedback_role_arn":"","http_success_feedback_role_arn":"","http_success_feedback_sample_rate":0,"id":"arn:aws:sns:eu-west-2:540044833068:scenarios--27e78067-alerts","kms_master_key_id":"","lambda_failure_feedback_role_arn":"","lambda_success_feedback_role_arn":"","lambda_success_feedback_sample_rate":0,"name":"scenarios--27e78067-alerts","name_prefix":"","owner":"540044833068","policy":"{\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Action\":[\"SNS:GetTopicAttributes\",\"SNS:SetTopicAttributes\",\"SNS:AddPermission\",\"SNS:RemovePermission\",\"SNS:DeleteTopic\",\"SNS:Subscribe\",\"SNS:ListSubscriptionsByTopic\",\"SNS:Publish\"],\"Condition\":{\"StringEquals\":{\"AWS:SourceOwner\":\"540044833068\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Resource\":\"arn:aws:sns:eu-west-2:540044833068:scenarios--27e78067-alerts\",\"Sid\":\"__default_statement_ID\"}],\"Version\":\"2008-10-17\"}","signature_version":0,"sqs_failure_feedback_role_arn":"","sqs_success_feedback_role_arn":"","sqs_success_feedback_sample_rate":0,"tags":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"SNS topic for memory optimization demo alerts - will fire when containers OOM","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-alerts","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"tags_all":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"SNS topic for memory optimization demo alerts - will fire when containers OOM","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-alerts","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"tracing_config":""},"after":{"application_failure_feedback_role_arn":"","application_success_feedback_role_arn":"","application_success_feedback_sample_rate":0,"archive_policy":"","arn":"arn:aws:sns:eu-west-2:540044833068:scenarios--27e78067-alerts","beginning_archive_time":"","content_based_deduplication":false,"delivery_policy":"","display_name":"","fifo_throughput_scope":"","fifo_topic":false,"firehose_failure_feedback_role_arn":"","firehose_success_feedback_role_arn":"","firehose_success_feedback_sample_rate":0,"http_failure_feedback_role_arn":"","http_success_feedback_role_arn":"","http_success_feedback_sample_rate":0,"id":"arn:aws:sns:eu-west-2:540044833068:scenarios--27e78067-alerts","kms_master_key_id":"","lambda_failure_feedback_role_arn":"","lambda_success_feedback_role_arn":"","lambda_success_feedback_sample_rate":0,"name":"scenarios--27e78067-alerts","name_prefix":"","owner":"540044833068","policy":"{\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Action\":[\"SNS:GetTopicAttributes\",\"SNS:SetTopicAttributes\",\"SNS:AddPermission\",\"SNS:RemovePermission\",\"SNS:DeleteTopic\",\"SNS:Subscribe\",\"SNS:ListSubscriptionsByTopic\",\"SNS:Publish\"],\"Condition\":{\"StringEquals\":{\"AWS:SourceOwner\":\"540044833068\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Resource\":\"arn:aws:sns:eu-west-2:540044833068:scenarios--27e78067-alerts\",\"Sid\":\"__default_statement_ID\"}],\"Version\":\"2008-10-17\"}","signature_version":0,"sqs_failure_feedback_role_arn":"","sqs_success_feedback_role_arn":"","sqs_success_feedback_sample_rate":0,"tags":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"SNS topic for memory optimization demo alerts - will fire when containers OOM","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-alerts","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"tags_all":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"SNS topic for memory optimization demo alerts - will fire when containers OOM","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-alerts","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"tracing_config":""},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.heritage[0].module.memory_optimization.random_id.suffix[0]","module_address":"module.heritage[0].module.memory_optimization","mode":"managed","type":"random_id","name":"suffix","index":0,"provider_name":"registry.terraform.io/hashicorp/random","change":{"actions":["no-op"],"before":{"b64_std":"J+eAZw==","b64_url":"J-eAZw","byte_length":4,"dec":"669483111","hex":"27e78067","id":"J-eAZw","keepers":null,"prefix":null},"after":{"b64_std":"J+eAZw==","b64_url":"J-eAZw","byte_length":4,"dec":"669483111","hex":"27e78067","id":"J-eAZw","keepers":null,"prefix":null},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.heritage[0].module.message_size_breach[0].aws_cloudwatch_log_group.lambda_logs","module_address":"module.heritage[0].module.message_size_breach[0]","mode":"managed","type":"aws_cloudwatch_log_group","name":"lambda_logs","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:logs:eu-west-2:540044833068:log-group:/aws/lambda/image-processor-terraform-example","id":"/aws/lambda/image-processor-terraform-example","kms_key_id":"","log_group_class":"STANDARD","name":"/aws/lambda/image-processor-terraform-example","name_prefix":"","retention_in_days":14,"skip_destroy":false,"tags":{"Environment":"terraform-example","Name":"Lambda Logs","Scenario":"Message Size Breach"},"tags_all":{"Environment":"terraform-example","Name":"Lambda Logs","Scenario":"Message Size Breach"}},"after":{"arn":"arn:aws:logs:eu-west-2:540044833068:log-group:/aws/lambda/image-processor-terraform-example","id":"/aws/lambda/image-processor-terraform-example","kms_key_id":"","log_group_class":"STANDARD","name":"/aws/lambda/image-processor-terraform-example","name_prefix":"","retention_in_days":14,"skip_destroy":false,"tags":{"Environment":"terraform-example","Name":"Lambda Logs","Scenario":"Message Size Breach"},"tags_all":{"Environment":"terraform-example","Name":"Lambda Logs","Scenario":"Message Size Breach"}},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.heritage[0].module.message_size_breach[0].aws_cloudwatch_metric_alarm.lambda_errors","module_address":"module.heritage[0].module.message_size_breach[0]","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"lambda_errors","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"actions_enabled":true,"alarm_actions":[],"alarm_description":"This alarm monitors Lambda function errors","alarm_name":"lambda-errors-terraform-example","arn":"arn:aws:cloudwatch:eu-west-2:540044833068:alarm:lambda-errors-terraform-example","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":0,"dimensions":{"FunctionName":"image-processor-terraform-example"},"evaluate_low_sample_count_percentiles":"","evaluation_periods":2,"extended_statistic":"","id":"lambda-errors-terraform-example","insufficient_data_actions":[],"metric_name":"Errors","metric_query":[],"namespace":"AWS/Lambda","ok_actions":[],"period":60,"statistic":"Sum","tags":{"Environment":"terraform-example","Name":"Lambda Errors Alarm","Scenario":"Message Size Breach"},"tags_all":{"Environment":"terraform-example","Name":"Lambda Errors Alarm","Scenario":"Message Size Breach"},"threshold":5,"threshold_metric_id":"","treat_missing_data":"missing","unit":""},"after":{"actions_enabled":true,"alarm_actions":[],"alarm_description":"This alarm monitors Lambda function errors","alarm_name":"lambda-errors-terraform-example","arn":"arn:aws:cloudwatch:eu-west-2:540044833068:alarm:lambda-errors-terraform-example","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":0,"dimensions":{"FunctionName":"image-processor-terraform-example"},"evaluate_low_sample_count_percentiles":"","evaluation_periods":2,"extended_statistic":"","id":"lambda-errors-terraform-example","insufficient_data_actions":[],"metric_name":"Errors","metric_query":[],"namespace":"AWS/Lambda","ok_actions":[],"period":60,"statistic":"Sum","tags":{"Environment":"terraform-example","Name":"Lambda Errors Alarm","Scenario":"Message Size Breach"},"tags_all":{"Environment":"terraform-example","Name":"Lambda Errors Alarm","Scenario":"Message Size Breach"},"threshold":5,"threshold_metric_id":"","treat_missing_data":"missing","unit":""},"after_unknown":{},"before_sensitive":{"alarm_actions":[],"dimensions":{},"insufficient_data_actions":[],"metric_query":[],"ok_actions":[],"tags":{},"tags_all":{}},"after_sensitive":{"alarm_actions":[],"dimensions":{},"insufficient_data_actions":[],"metric_query":[],"ok_actions":[],"tags":{},"tags_all":{}}}},{"address":"module.heritage[0].module.message_size_breach[0].aws_cloudwatch_metric_alarm.sqs_queue_depth","module_address":"module.heritage[0].module.message_size_breach[0]","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"sqs_queue_depth","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"actions_enabled":true,"alarm_actions":[],"alarm_description":"This alarm monitors SQS queue depth","alarm_name":"sqs-queue-depth-terraform-example","arn":"arn:aws:cloudwatch:eu-west-2:540044833068:alarm:sqs-queue-depth-terraform-example","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":0,"dimensions":{"QueueName":"image-processing-terraform-example"},"evaluate_low_sample_count_percentiles":"","evaluation_periods":2,"extended_statistic":"","id":"sqs-queue-depth-terraform-example","insufficient_data_actions":[],"metric_name":"ApproximateNumberOfVisibleMessages","metric_query":[],"namespace":"AWS/SQS","ok_actions":[],"period":60,"statistic":"Average","tags":{"Environment":"terraform-example","Name":"SQS Queue Depth Alarm","Scenario":"Message Size Breach"},"tags_all":{"Environment":"terraform-example","Name":"SQS Queue Depth Alarm","Scenario":"Message Size Breach"},"threshold":100,"threshold_metric_id":"","treat_missing_data":"missing","unit":""},"after":{"actions_enabled":true,"alarm_actions":[],"alarm_description":"This alarm monitors SQS queue depth","alarm_name":"sqs-queue-depth-terraform-example","arn":"arn:aws:cloudwatch:eu-west-2:540044833068:alarm:sqs-queue-depth-terraform-example","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":0,"dimensions":{"QueueName":"image-processing-terraform-example"},"evaluate_low_sample_count_percentiles":"","evaluation_periods":2,"extended_statistic":"","id":"sqs-queue-depth-terraform-example","insufficient_data_actions":[],"metric_name":"ApproximateNumberOfVisibleMessages","metric_query":[],"namespace":"AWS/SQS","ok_actions":[],"period":60,"statistic":"Average","tags":{"Environment":"terraform-example","Name":"SQS Queue Depth Alarm","Scenario":"Message Size Breach"},"tags_all":{"Environment":"terraform-example","Name":"SQS Queue Depth Alarm","Scenario":"Message Size Breach"},"threshold":100,"threshold_metric_id":"","treat_missing_data":"missing","unit":""},"after_unknown":{},"before_sensitive":{"alarm_actions":[],"dimensions":{},"insufficient_data_actions":[],"metric_query":[],"ok_actions":[],"tags":{},"tags_all":{}},"after_sensitive":{"alarm_actions":[],"dimensions":{},"insufficient_data_actions":[],"metric_query":[],"ok_actions":[],"tags":{},"tags_all":{}}}},{"address":"module.heritage[0].module.message_size_breach[0].aws_iam_role.lambda_role","module_address":"module.heritage[0].module.message_size_breach[0]","mode":"managed","type":"aws_iam_role","name":"lambda_role","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:iam::540044833068:role/image-processor-lambda-role-terraform-example","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","create_date":"2025-11-17T23:20:22Z","description":"","force_detach_policies":false,"id":"image-processor-lambda-role-terraform-example","inline_policy":[{"name":"lambda-logs-policy-terraform-example","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"logs:CreateLogGroup\",\"logs:CreateLogStream\",\"logs:PutLogEvents\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:logs:eu-west-2:540044833068:log-group:/aws/lambda/image-processor-terraform-example:*\"}]}"}],"managed_policy_arns":["arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole","arn:aws:iam::aws:policy/service-role/AWSLambdaSQSQueueExecutionRole"],"max_session_duration":3600,"name":"image-processor-lambda-role-terraform-example","name_prefix":"","path":"/","permissions_boundary":"","tags":{"Environment":"terraform-example","Name":"Lambda Execution Role","Scenario":"Message Size Breach"},"tags_all":{"Environment":"terraform-example","Name":"Lambda Execution Role","Scenario":"Message Size Breach"},"unique_id":"AROAX3PJOGEWFCMQCXV45"},"after":{"arn":"arn:aws:iam::540044833068:role/image-processor-lambda-role-terraform-example","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","create_date":"2025-11-17T23:20:22Z","description":"","force_detach_policies":false,"id":"image-processor-lambda-role-terraform-example","inline_policy":[{"name":"lambda-logs-policy-terraform-example","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"logs:CreateLogGroup\",\"logs:CreateLogStream\",\"logs:PutLogEvents\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:logs:eu-west-2:540044833068:log-group:/aws/lambda/image-processor-terraform-example:*\"}]}"}],"managed_policy_arns":["arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole","arn:aws:iam::aws:policy/service-role/AWSLambdaSQSQueueExecutionRole"],"max_session_duration":3600,"name":"image-processor-lambda-role-terraform-example","name_prefix":"","path":"/","permissions_boundary":"","tags":{"Environment":"terraform-example","Name":"Lambda Execution Role","Scenario":"Message Size Breach"},"tags_all":{"Environment":"terraform-example","Name":"Lambda Execution Role","Scenario":"Message Size Breach"},"unique_id":"AROAX3PJOGEWFCMQCXV45"},"after_unknown":{},"before_sensitive":{"inline_policy":[{}],"managed_policy_arns":[false,false],"tags":{},"tags_all":{}},"after_sensitive":{"inline_policy":[{}],"managed_policy_arns":[false,false],"tags":{},"tags_all":{}}}},{"address":"module.heritage[0].module.message_size_breach[0].aws_iam_role_policy.lambda_logs_policy","module_address":"module.heritage[0].module.message_size_breach[0]","mode":"managed","type":"aws_iam_role_policy","name":"lambda_logs_policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"id":"image-processor-lambda-role-terraform-example:lambda-logs-policy-terraform-example","name":"lambda-logs-policy-terraform-example","name_prefix":"","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"logs:CreateLogGroup\",\"logs:CreateLogStream\",\"logs:PutLogEvents\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:logs:eu-west-2:540044833068:log-group:/aws/lambda/image-processor-terraform-example:*\"}]}","role":"image-processor-lambda-role-terraform-example"},"after":{"id":"image-processor-lambda-role-terraform-example:lambda-logs-policy-terraform-example","name":"lambda-logs-policy-terraform-example","name_prefix":"","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"logs:CreateLogGroup\",\"logs:CreateLogStream\",\"logs:PutLogEvents\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:logs:eu-west-2:540044833068:log-group:/aws/lambda/image-processor-terraform-example:*\"}]}","role":"image-processor-lambda-role-terraform-example"},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.heritage[0].module.message_size_breach[0].aws_iam_role_policy_attachment.lambda_basic_execution","module_address":"module.heritage[0].module.message_size_breach[0]","mode":"managed","type":"aws_iam_role_policy_attachment","name":"lambda_basic_execution","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"id":"image-processor-lambda-role-terraform-example-20251117232024175700000006","policy_arn":"arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole","role":"image-processor-lambda-role-terraform-example"},"after":{"id":"image-processor-lambda-role-terraform-example-20251117232024175700000006","policy_arn":"arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole","role":"image-processor-lambda-role-terraform-example"},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.heritage[0].module.message_size_breach[0].aws_iam_role_policy_attachment.lambda_sqs_policy","module_address":"module.heritage[0].module.message_size_breach[0]","mode":"managed","type":"aws_iam_role_policy_attachment","name":"lambda_sqs_policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"id":"image-processor-lambda-role-terraform-example-20251117232024470000000007","policy_arn":"arn:aws:iam::aws:policy/service-role/AWSLambdaSQSQueueExecutionRole","role":"image-processor-lambda-role-terraform-example"},"after":{"id":"image-processor-lambda-role-terraform-example-20251117232024470000000007","policy_arn":"arn:aws:iam::aws:policy/service-role/AWSLambdaSQSQueueExecutionRole","role":"image-processor-lambda-role-terraform-example"},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.heritage[0].module.message_size_breach[0].aws_lambda_event_source_mapping.sqs_trigger","module_address":"module.heritage[0].module.message_size_breach[0]","mode":"managed","type":"aws_lambda_event_source_mapping","name":"sqs_trigger","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"amazon_managed_kafka_event_source_config":[],"arn":"arn:aws:lambda:eu-west-2:540044833068:event-source-mapping:8feec500-57de-435d-b185-bc3e9d076225","batch_size":10,"bisect_batch_on_function_error":false,"destination_config":[],"document_db_event_source_config":[],"enabled":true,"event_source_arn":"arn:aws:sqs:eu-west-2:540044833068:image-processing-terraform-example","filter_criteria":[],"function_arn":"arn:aws:lambda:eu-west-2:540044833068:function:image-processor-terraform-example","function_name":"arn:aws:lambda:eu-west-2:540044833068:function:image-processor-terraform-example","function_response_types":[],"id":"8feec500-57de-435d-b185-bc3e9d076225","kms_key_arn":"","last_modified":"2025-11-17T23:21:15Z","last_processing_result":"","maximum_batching_window_in_seconds":5,"maximum_record_age_in_seconds":0,"maximum_retry_attempts":0,"metrics_config":[],"parallelization_factor":0,"provisioned_poller_config":[],"queues":[],"scaling_config":[],"self_managed_event_source":[],"self_managed_kafka_event_source_config":[],"source_access_configuration":[],"starting_position":"","starting_position_timestamp":"","state":"Enabled","state_transition_reason":"USER_INITIATED","tags":{},"tags_all":{},"topics":[],"tumbling_window_in_seconds":0,"uuid":"8feec500-57de-435d-b185-bc3e9d076225"},"after":{"amazon_managed_kafka_event_source_config":[],"arn":"arn:aws:lambda:eu-west-2:540044833068:event-source-mapping:8feec500-57de-435d-b185-bc3e9d076225","batch_size":10,"bisect_batch_on_function_error":false,"destination_config":[],"document_db_event_source_config":[],"enabled":true,"event_source_arn":"arn:aws:sqs:eu-west-2:540044833068:image-processing-terraform-example","filter_criteria":[],"function_arn":"arn:aws:lambda:eu-west-2:540044833068:function:image-processor-terraform-example","function_name":"arn:aws:lambda:eu-west-2:540044833068:function:image-processor-terraform-example","function_response_types":[],"id":"8feec500-57de-435d-b185-bc3e9d076225","kms_key_arn":"","last_modified":"2025-11-17T23:21:15Z","last_processing_result":"","maximum_batching_window_in_seconds":5,"maximum_record_age_in_seconds":0,"maximum_retry_attempts":0,"metrics_config":[],"parallelization_factor":0,"provisioned_poller_config":[],"queues":[],"scaling_config":[],"self_managed_event_source":[],"self_managed_kafka_event_source_config":[],"source_access_configuration":[],"starting_position":"","starting_position_timestamp":"","state":"Enabled","state_transition_reason":"USER_INITIATED","tags":{},"tags_all":{},"topics":[],"tumbling_window_in_seconds":0,"uuid":"8feec500-57de-435d-b185-bc3e9d076225"},"after_unknown":{},"before_sensitive":{"amazon_managed_kafka_event_source_config":[],"destination_config":[],"document_db_event_source_config":[],"filter_criteria":[],"function_response_types":[],"metrics_config":[],"provisioned_poller_config":[],"queues":[],"scaling_config":[],"self_managed_event_source":[],"self_managed_kafka_event_source_config":[],"source_access_configuration":[],"tags":{},"tags_all":{},"topics":[]},"after_sensitive":{"amazon_managed_kafka_event_source_config":[],"destination_config":[],"document_db_event_source_config":[],"filter_criteria":[],"function_response_types":[],"metrics_config":[],"provisioned_poller_config":[],"queues":[],"scaling_config":[],"self_managed_event_source":[],"self_managed_kafka_event_source_config":[],"source_access_configuration":[],"tags":{},"tags_all":{},"topics":[]}}},{"address":"module.heritage[0].module.message_size_breach[0].aws_lambda_function.image_processor","module_address":"module.heritage[0].module.message_size_breach[0]","mode":"managed","type":"aws_lambda_function","name":"image_processor","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"architectures":["x86_64"],"arn":"arn:aws:lambda:eu-west-2:540044833068:function:image-processor-terraform-example","code_sha256":"mMMwfSINMw8K3MiGaVuM4l2UHmgB+qZqX+Y26IWJut0=","code_signing_config_arn":"","dead_letter_config":[],"description":"","environment":[],"ephemeral_storage":[{"size":512}],"file_system_config":[],"filename":"modules/heritage/message-size-breach/lambda_function.zip","function_name":"image-processor-terraform-example","handler":"lambda_function.lambda_handler","id":"image-processor-terraform-example","image_config":[],"image_uri":"","invoke_arn":"arn:aws:apigateway:eu-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-2:540044833068:function:image-processor-terraform-example/invocations","kms_key_arn":"","last_modified":"2025-12-09T19:44:11.000+0000","layers":[],"logging_config":[{"application_log_level":"","log_format":"Text","log_group":"/aws/lambda/image-processor-terraform-example","system_log_level":""}],"memory_size":1024,"package_type":"Zip","publish":false,"qualified_arn":"arn:aws:lambda:eu-west-2:540044833068:function:image-processor-terraform-example:$LATEST","qualified_invoke_arn":"arn:aws:apigateway:eu-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-2:540044833068:function:image-processor-terraform-example:$LATEST/invocations","replace_security_groups_on_destroy":null,"replacement_security_group_ids":null,"reserved_concurrent_executions":-1,"role":"arn:aws:iam::540044833068:role/image-processor-lambda-role-terraform-example","runtime":"python3.13","s3_bucket":null,"s3_key":null,"s3_object_version":null,"signing_job_arn":"","signing_profile_version_arn":"","skip_destroy":false,"snap_start":[],"source_code_hash":"mMMwfSINMw8K3MiGaVuM4l2UHmgB+qZqX+Y26IWJut0=","source_code_size":404,"tags":{"Environment":"terraform-example","Name":"Image Processor","Scenario":"Message Size Breach"},"tags_all":{"Environment":"terraform-example","Name":"Image Processor","Scenario":"Message Size Breach"},"timeout":180,"timeouts":null,"tracing_config":[{"mode":"PassThrough"}],"version":"$LATEST","vpc_config":[]},"after":{"architectures":["x86_64"],"arn":"arn:aws:lambda:eu-west-2:540044833068:function:image-processor-terraform-example","code_sha256":"mMMwfSINMw8K3MiGaVuM4l2UHmgB+qZqX+Y26IWJut0=","code_signing_config_arn":"","dead_letter_config":[],"description":"","environment":[],"ephemeral_storage":[{"size":512}],"file_system_config":[],"filename":"modules/heritage/message-size-breach/lambda_function.zip","function_name":"image-processor-terraform-example","handler":"lambda_function.lambda_handler","id":"image-processor-terraform-example","image_config":[],"image_uri":"","invoke_arn":"arn:aws:apigateway:eu-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-2:540044833068:function:image-processor-terraform-example/invocations","kms_key_arn":"","last_modified":"2025-12-09T19:44:11.000+0000","layers":[],"logging_config":[{"application_log_level":"","log_format":"Text","log_group":"/aws/lambda/image-processor-terraform-example","system_log_level":""}],"memory_size":1024,"package_type":"Zip","publish":false,"qualified_arn":"arn:aws:lambda:eu-west-2:540044833068:function:image-processor-terraform-example:$LATEST","qualified_invoke_arn":"arn:aws:apigateway:eu-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-2:540044833068:function:image-processor-terraform-example:$LATEST/invocations","replace_security_groups_on_destroy":null,"replacement_security_group_ids":null,"reserved_concurrent_executions":-1,"role":"arn:aws:iam::540044833068:role/image-processor-lambda-role-terraform-example","runtime":"python3.13","s3_bucket":null,"s3_key":null,"s3_object_version":null,"signing_job_arn":"","signing_profile_version_arn":"","skip_destroy":false,"snap_start":[],"source_code_hash":"mMMwfSINMw8K3MiGaVuM4l2UHmgB+qZqX+Y26IWJut0=","source_code_size":404,"tags":{"Environment":"terraform-example","Name":"Image Processor","Scenario":"Message Size Breach"},"tags_all":{"Environment":"terraform-example","Name":"Image Processor","Scenario":"Message Size Breach"},"timeout":180,"timeouts":null,"tracing_config":[{"mode":"PassThrough"}],"version":"$LATEST","vpc_config":[]},"after_unknown":{},"before_sensitive":{"architectures":[false],"dead_letter_config":[],"environment":[],"ephemeral_storage":[{}],"file_system_config":[],"image_config":[],"layers":[],"logging_config":[{}],"snap_start":[],"tags":{},"tags_all":{},"tracing_config":[{}],"vpc_config":[]},"after_sensitive":{"architectures":[false],"dead_letter_config":[],"environment":[],"ephemeral_storage":[{}],"file_system_config":[],"image_config":[],"layers":[],"logging_config":[{}],"snap_start":[],"tags":{},"tags_all":{},"tracing_config":[{}],"vpc_config":[]}}},{"address":"module.heritage[0].module.message_size_breach[0].aws_sqs_queue.image_processing_dlq","module_address":"module.heritage[0].module.message_size_breach[0]","mode":"managed","type":"aws_sqs_queue","name":"image_processing_dlq","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:sqs:eu-west-2:540044833068:image-processing-dlq-terraform-example","content_based_deduplication":false,"deduplication_scope":"","delay_seconds":0,"fifo_queue":false,"fifo_throughput_limit":"","id":"https://sqs.eu-west-2.amazonaws.com/540044833068/image-processing-dlq-terraform-example","kms_data_key_reuse_period_seconds":300,"kms_master_key_id":"","max_message_size":262144,"message_retention_seconds":1209600,"name":"image-processing-dlq-terraform-example","name_prefix":"","policy":"","receive_wait_time_seconds":0,"redrive_allow_policy":"","redrive_policy":"","sqs_managed_sse_enabled":true,"tags":{"Environment":"terraform-example","Name":"Image Processing DLQ","Scenario":"Message Size Breach"},"tags_all":{"Environment":"terraform-example","Name":"Image Processing DLQ","Scenario":"Message Size Breach"},"timeouts":null,"url":"https://sqs.eu-west-2.amazonaws.com/540044833068/image-processing-dlq-terraform-example","visibility_timeout_seconds":30},"after":{"arn":"arn:aws:sqs:eu-west-2:540044833068:image-processing-dlq-terraform-example","content_based_deduplication":false,"deduplication_scope":"","delay_seconds":0,"fifo_queue":false,"fifo_throughput_limit":"","id":"https://sqs.eu-west-2.amazonaws.com/540044833068/image-processing-dlq-terraform-example","kms_data_key_reuse_period_seconds":300,"kms_master_key_id":"","max_message_size":262144,"message_retention_seconds":1209600,"name":"image-processing-dlq-terraform-example","name_prefix":"","policy":"","receive_wait_time_seconds":0,"redrive_allow_policy":"","redrive_policy":"","sqs_managed_sse_enabled":true,"tags":{"Environment":"terraform-example","Name":"Image Processing DLQ","Scenario":"Message Size Breach"},"tags_all":{"Environment":"terraform-example","Name":"Image Processing DLQ","Scenario":"Message Size Breach"},"timeouts":null,"url":"https://sqs.eu-west-2.amazonaws.com/540044833068/image-processing-dlq-terraform-example","visibility_timeout_seconds":30},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.heritage[0].module.message_size_breach[0].aws_sqs_queue.image_processing_queue","module_address":"module.heritage[0].module.message_size_breach[0]","mode":"managed","type":"aws_sqs_queue","name":"image_processing_queue","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:sqs:eu-west-2:540044833068:image-processing-terraform-example","content_based_deduplication":false,"deduplication_scope":"","delay_seconds":0,"fifo_queue":false,"fifo_throughput_limit":"","id":"https://sqs.eu-west-2.amazonaws.com/540044833068/image-processing-terraform-example","kms_data_key_reuse_period_seconds":300,"kms_master_key_id":"","max_message_size":25600,"message_retention_seconds":1209600,"name":"image-processing-terraform-example","name_prefix":"","policy":"","receive_wait_time_seconds":20,"redrive_allow_policy":"","redrive_policy":"{\"deadLetterTargetArn\":\"arn:aws:sqs:eu-west-2:540044833068:image-processing-dlq-terraform-example\",\"maxReceiveCount\":3}","sqs_managed_sse_enabled":true,"tags":{"Environment":"terraform-example","Name":"Image Processing Queue","Scenario":"Message Size Breach"},"tags_all":{"Environment":"terraform-example","Name":"Image Processing Queue","Scenario":"Message Size Breach"},"timeouts":null,"url":"https://sqs.eu-west-2.amazonaws.com/540044833068/image-processing-terraform-example","visibility_timeout_seconds":1080},"after":{"arn":"arn:aws:sqs:eu-west-2:540044833068:image-processing-terraform-example","content_based_deduplication":false,"deduplication_scope":"","delay_seconds":0,"fifo_queue":false,"fifo_throughput_limit":"","id":"https://sqs.eu-west-2.amazonaws.com/540044833068/image-processing-terraform-example","kms_data_key_reuse_period_seconds":300,"kms_master_key_id":"","max_message_size":25600,"message_retention_seconds":1209600,"name":"image-processing-terraform-example","name_prefix":"","policy":"","receive_wait_time_seconds":20,"redrive_allow_policy":"","redrive_policy":"{\"deadLetterTargetArn\":\"arn:aws:sqs:eu-west-2:540044833068:image-processing-dlq-terraform-example\",\"maxReceiveCount\":3}","sqs_managed_sse_enabled":true,"tags":{"Environment":"terraform-example","Name":"Image Processing Queue","Scenario":"Message Size Breach"},"tags_all":{"Environment":"terraform-example","Name":"Image Processing Queue","Scenario":"Message Size Breach"},"timeouts":null,"url":"https://sqs.eu-west-2.amazonaws.com/540044833068/image-processing-terraform-example","visibility_timeout_seconds":1080},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.heritage[0].module.s3_one.aws_s3_bucket.this[0]","module_address":"module.heritage[0].module.s3_one","mode":"managed","type":"aws_s3_bucket","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"acceleration_status":"","acl":null,"arn":"arn:aws:s3:::s3-one-adequate-gibbon20251117232020021100000002","bucket":"s3-one-adequate-gibbon20251117232020021100000002","bucket_domain_name":"s3-one-adequate-gibbon20251117232020021100000002.s3.amazonaws.com","bucket_prefix":"s3-one-adequate-gibbon","bucket_regional_domain_name":"s3-one-adequate-gibbon20251117232020021100000002.s3.eu-west-2.amazonaws.com","cors_rule":[],"force_destroy":true,"grant":[{"id":"05d918fa182ad8f3fa915436354b8657e3c2c59b326ecbfc43e6c00451268d0a","permissions":["FULL_CONTROL"],"type":"CanonicalUser","uri":""}],"hosted_zone_id":"Z3GKZC51ZF0DB4","id":"s3-one-adequate-gibbon20251117232020021100000002","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"object_lock_enabled":false,"policy":"{\"Statement\":[{\"Action\":\"s3:GetObject\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::cloudfront:user/CloudFront Origin Access Identity E3773WNTKP0C2U\"},\"Resource\":\"arn:aws:s3:::s3-one-adequate-gibbon20251117232020021100000002/static/*\"},{\"Action\":\"s3:GetObject\",\"Condition\":{\"StringEquals\":{\"aws:SourceArn\":\"arn:aws:cloudfront::540044833068:distribution/EX4HFUQMZ2ULI\"}},\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"cloudfront.amazonaws.com\"},\"Resource\":\"arn:aws:s3:::s3-one-adequate-gibbon20251117232020021100000002/static/*\"}],\"Version\":\"2012-10-17\"}","region":"eu-west-2","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"","sse_algorithm":"AES256"}],"bucket_key_enabled":false}]}],"tags":{},"tags_all":{},"timeouts":null,"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"after":{"acceleration_status":"","acl":null,"arn":"arn:aws:s3:::s3-one-adequate-gibbon20251117232020021100000002","bucket":"s3-one-adequate-gibbon20251117232020021100000002","bucket_domain_name":"s3-one-adequate-gibbon20251117232020021100000002.s3.amazonaws.com","bucket_prefix":"s3-one-adequate-gibbon","bucket_regional_domain_name":"s3-one-adequate-gibbon20251117232020021100000002.s3.eu-west-2.amazonaws.com","cors_rule":[],"force_destroy":true,"grant":[{"id":"05d918fa182ad8f3fa915436354b8657e3c2c59b326ecbfc43e6c00451268d0a","permissions":["FULL_CONTROL"],"type":"CanonicalUser","uri":""}],"hosted_zone_id":"Z3GKZC51ZF0DB4","id":"s3-one-adequate-gibbon20251117232020021100000002","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"object_lock_enabled":false,"policy":"{\"Statement\":[{\"Action\":\"s3:GetObject\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::cloudfront:user/CloudFront Origin Access Identity E3773WNTKP0C2U\"},\"Resource\":\"arn:aws:s3:::s3-one-adequate-gibbon20251117232020021100000002/static/*\"},{\"Action\":\"s3:GetObject\",\"Condition\":{\"StringEquals\":{\"aws:SourceArn\":\"arn:aws:cloudfront::540044833068:distribution/EX4HFUQMZ2ULI\"}},\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"cloudfront.amazonaws.com\"},\"Resource\":\"arn:aws:s3:::s3-one-adequate-gibbon20251117232020021100000002/static/*\"}],\"Version\":\"2012-10-17\"}","region":"eu-west-2","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"","sse_algorithm":"AES256"}],"bucket_key_enabled":false}]}],"tags":{},"tags_all":{},"timeouts":null,"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"after_unknown":{},"before_sensitive":{"cors_rule":[],"grant":[{"permissions":[false]}],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}],"tags":{},"tags_all":{},"versioning":[{}],"website":[]},"after_sensitive":{"cors_rule":[],"grant":[{"permissions":[false]}],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}],"tags":{},"tags_all":{},"versioning":[{}],"website":[]}}},{"address":"module.heritage[0].module.s3_one.aws_s3_bucket_public_access_block.this[0]","module_address":"module.heritage[0].module.s3_one","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"block_public_acls":true,"block_public_policy":true,"bucket":"s3-one-adequate-gibbon20251117232020021100000002","id":"s3-one-adequate-gibbon20251117232020021100000002","ignore_public_acls":true,"restrict_public_buckets":true},"after":{"block_public_acls":true,"block_public_policy":true,"bucket":"s3-one-adequate-gibbon20251117232020021100000002","id":"s3-one-adequate-gibbon20251117232020021100000002","ignore_public_acls":true,"restrict_public_buckets":true},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.heritage[0].module.ecs.module.cluster.aws_cloudwatch_log_group.this[0]","module_address":"module.heritage[0].module.ecs.module.cluster","mode":"managed","type":"aws_cloudwatch_log_group","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:logs:eu-west-2:540044833068:log-group:/aws/ecs/example-terraform-example","id":"/aws/ecs/example-terraform-example","kms_key_id":"","log_group_class":"STANDARD","name":"/aws/ecs/example-terraform-example","name_prefix":"","retention_in_days":90,"skip_destroy":false,"tags":{},"tags_all":{}},"after":{"arn":"arn:aws:logs:eu-west-2:540044833068:log-group:/aws/ecs/example-terraform-example","id":"/aws/ecs/example-terraform-example","kms_key_id":"","log_group_class":"STANDARD","name":"/aws/ecs/example-terraform-example","name_prefix":"","retention_in_days":90,"skip_destroy":false,"tags":{},"tags_all":{}},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.heritage[0].module.ecs.module.cluster.aws_ecs_cluster.this[0]","module_address":"module.heritage[0].module.ecs.module.cluster","mode":"managed","type":"aws_ecs_cluster","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ecs:eu-west-2:540044833068:cluster/example-terraform-example","configuration":[{"execute_command_configuration":[{"kms_key_id":"","log_configuration":[],"logging":"DEFAULT"}],"managed_storage_configuration":[]}],"id":"arn:aws:ecs:eu-west-2:540044833068:cluster/example-terraform-example","name":"example-terraform-example","service_connect_defaults":[],"setting":[{"name":"containerInsights","value":"enabled"}],"tags":{},"tags_all":{}},"after":{"arn":"arn:aws:ecs:eu-west-2:540044833068:cluster/example-terraform-example","configuration":[{"execute_command_configuration":[{"kms_key_id":"","log_configuration":[],"logging":"DEFAULT"}],"managed_storage_configuration":[]}],"id":"arn:aws:ecs:eu-west-2:540044833068:cluster/example-terraform-example","name":"example-terraform-example","service_connect_defaults":[],"setting":[{"name":"containerInsights","value":"enabled"}],"tags":{},"tags_all":{}},"after_unknown":{},"before_sensitive":{"configuration":[{"execute_command_configuration":[{"log_configuration":[]}],"managed_storage_configuration":[]}],"service_connect_defaults":[],"setting":[{}],"tags":{},"tags_all":{}},"after_sensitive":{"configuration":[{"execute_command_configuration":[{"log_configuration":[]}],"managed_storage_configuration":[]}],"service_connect_defaults":[],"setting":[{}],"tags":{},"tags_all":{}}}},{"address":"module.heritage[0].module.ecs.module.cluster.aws_ecs_cluster_capacity_providers.this[0]","module_address":"module.heritage[0].module.ecs.module.cluster","mode":"managed","type":"aws_ecs_cluster_capacity_providers","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"capacity_providers":["FARGATE"],"cluster_name":"example-terraform-example","default_capacity_provider_strategy":[{"base":0,"capacity_provider":"FARGATE","weight":100}],"id":"example-terraform-example"},"after":{"capacity_providers":["FARGATE"],"cluster_name":"example-terraform-example","default_capacity_provider_strategy":[{"base":0,"capacity_provider":"FARGATE","weight":100}],"id":"example-terraform-example"},"after_unknown":{},"before_sensitive":{"capacity_providers":[false],"default_capacity_provider_strategy":[{}]},"after_sensitive":{"capacity_providers":[false],"default_capacity_provider_strategy":[{}]}}}],"output_changes":{"api_server_instance_id":{"actions":["no-op"],"before":"i-0d1d4384862781a22","after":"i-0d1d4384862781a22","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"api_server_url":{"actions":["no-op"],"before":"http://api-51c748b4-alb-1999780759.eu-west-2.elb.amazonaws.com","after":"http://api-51c748b4-alb-1999780759.eu-west-2.elb.amazonaws.com","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"shared_sg_api_server_id":{"actions":["no-op"],"before":"i-0e205109677d47e83","after":"i-0e205109677d47e83","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"shared_sg_manual_instance_command":{"actions":["no-op"],"before":"aws ec2 run-instances --image-id ami-02a95139d1d364420 --instance-type t3.nano --subnet-id subnet-0a1b287732e8ad0b7 --security-group-ids sg-0437857de45b640ce --tag-specifications 'ResourceType=instance,Tags=[{Key=Name,Value=data-processor},{Key=Team,Value=data-engineering},{Key=CreatedBy,Value=console}]' --region eu-west-2","after":"aws ec2 run-instances --image-id ami-02a95139d1d364420 --instance-type t3.nano --subnet-id subnet-0a1b287732e8ad0b7 --security-group-ids sg-0437857de45b640ce --tag-specifications 'ResourceType=instance,Tags=[{Key=Name,Value=data-processor},{Key=Team,Value=data-engineering},{Key=CreatedBy,Value=console}]' --region eu-west-2","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"shared_sg_security_group_id":{"actions":["no-op"],"before":"sg-0437857de45b640ce","after":"sg-0437857de45b640ce","after_unknown":false,"before_sensitive":false,"after_sensitive":false}},"prior_state":{"format_version":"1.0","terraform_version":"1.14.2","values":{"outputs":{"api_server_instance_id":{"sensitive":false,"value":"i-0d1d4384862781a22","type":"string"},"api_server_url":{"sensitive":false,"value":"http://api-51c748b4-alb-1999780759.eu-west-2.elb.amazonaws.com","type":"string"},"shared_sg_api_server_id":{"sensitive":false,"value":"i-0e205109677d47e83","type":"string"},"shared_sg_manual_instance_command":{"sensitive":false,"value":"aws ec2 run-instances --image-id ami-02a95139d1d364420 --instance-type t3.nano --subnet-id subnet-0a1b287732e8ad0b7 --security-group-ids sg-0437857de45b640ce --tag-specifications 'ResourceType=instance,Tags=[{Key=Name,Value=data-processor},{Key=Team,Value=data-engineering},{Key=CreatedBy,Value=console}]' --region eu-west-2","type":"string"},"shared_sg_security_group_id":{"sensitive":false,"value":"sg-0437857de45b640ce","type":"string"}},"root_module":{"resources":[{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"account_id":"540044833068","arn":"arn:aws:sts::540044833068:assumed-role/AWSReservedSSO_AWSAdministratorAccess_6166336551098275/dylan@overmind.tech","id":"540044833068","user_id":"AROAX3PJOGEWG2R7JO72P:dylan@overmind.tech"},"sensitive_values":{}},{"address":"data.tls_certificate.env0","mode":"data","type":"tls_certificate","name":"env0","provider_name":"registry.terraform.io/hashicorp/tls","schema_version":0,"values":{"certificates":[{"cert_pem":"-----BEGIN CERTIFICATE-----\nMIIEkjCCA3qgAwIBAgITBn+USionzfP6wq4rAfkI7rnExjANBgkqhkiG9w0BAQsF\nADCBmDELMAkGA1UEBhMCVVMxEDAOBgNVBAgTB0FyaXpvbmExEzARBgNVBAcTClNj\nb3R0c2RhbGUxJTAjBgNVBAoTHFN0YXJmaWVsZCBUZWNobm9sb2dpZXMsIEluYy4x\nOzA5BgNVBAMTMlN0YXJmaWVsZCBTZXJ2aWNlcyBSb290IENlcnRpZmljYXRlIEF1\ndGhvcml0eSAtIEcyMB4XDTE1MDUyNTEyMDAwMFoXDTM3MTIzMTAxMDAwMFowOTEL\nMAkGA1UEBhMCVVMxDzANBgNVBAoTBkFtYXpvbjEZMBcGA1UEAxMQQW1hem9uIFJv\nb3QgQ0EgMTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALJ4gHHKeNXj\nca9HgFB0fW7Y14h29Jlo91ghYPl0hAEvrAIthtOgQ3pOsqTQNroBvo3bSMgHFzZM\n9O6II8c+6zf1tRn4SWiw3te5djgdYZ6k/oI2peVKVuRF4fn9tBb6dNqcmzU5L/qw\nIFAGbHrQgLKm+a/sRxmPUDgH3KKHOVj4utWp+UhnMJbulHheb4mjUcAwhmahRWa6\nVOujw5H5SNz/0egwLX0tdHA114gk957EWW67c4cX8jJGKLhD+rcdqsq08p8kDi1L\n93FcXmn/6pUCyziKrlA4b9v7LWIbxcceVOF34GfID5yHI9Y/QCB/IIDEgEw+OyQm\njgSubJrIqg0CAwEAAaOCATEwggEtMA8GA1UdEwEB/wQFMAMBAf8wDgYDVR0PAQH/\nBAQDAgGGMB0GA1UdDgQWBBSEGMyFNOy8DJSULghZnMeyEE4KCDAfBgNVHSMEGDAW\ngBScXwDfqgHXMCs4iKK4bUqc8hGRgzB4BggrBgEFBQcBAQRsMGowLgYIKwYBBQUH\nMAGGImh0dHA6Ly9vY3NwLnJvb3RnMi5hbWF6b250cnVzdC5jb20wOAYIKwYBBQUH\nMAKGLGh0dHA6Ly9jcnQucm9vdGcyLmFtYXpvbnRydXN0LmNvbS9yb290ZzIuY2Vy\nMD0GA1UdHwQ2MDQwMqAwoC6GLGh0dHA6Ly9jcmwucm9vdGcyLmFtYXpvbnRydXN0\nLmNvbS9yb290ZzIuY3JsMBEGA1UdIAQKMAgwBgYEVR0gADANBgkqhkiG9w0BAQsF\nAAOCAQEAYjdCXLwQtT6LLOkMm2xF4gcAevnFWAu5CIw+7bMlPLVvUOTNNWqnkzSW\nMiGpSESrnO09tKpzbeR/FoCJbM8oAxiDR3mjEH4wW6w7sGDgd9QIpuEdfF7Au/ma\neyKdpwAJfqxGF4PcnCZXmTA5YpaP7dreqsXMGz7KQ2hsVxa81Q4gLv7/wmpdLqBK\nbRRYh5TmOTFffHPLkIhqhBGWJ6bt2YFGpn6jcgAKUj6DiAdjd4lpFw85hdKrCEVN\n0FE6/V1dN2RMfjCyVSRCnTawXZwXgWHxyvkQAiSr6w10kY17RSlQOYiypok1JR4U\nakcjMS9cmvqtmg5iUaQqqcT5NJ0hGA==\n-----END CERTIFICATE-----\n","is_ca":true,"issuer":"CN=Starfield Services Root Certificate Authority - G2,O=Starfield Technologies\\, Inc.,L=Scottsdale,ST=Arizona,C=US","not_after":"2037-12-31T01:00:00Z","not_before":"2015-05-25T12:00:00Z","public_key_algorithm":"RSA","serial_number":"144918191876577076464031512351042010504348870","sha1_fingerprint":"06b25927c42a721631c1efd9431e648fa62e1e39","signature_algorithm":"SHA256-RSA","subject":"CN=Amazon Root CA 1,O=Amazon,C=US","version":3},{"cert_pem":"-----BEGIN CERTIFICATE-----\nMIIEXjCCA0agAwIBAgITB3MSTyqVLj7Rili9uF0bwM5fJzANBgkqhkiG9w0BAQsF\nADA5MQswCQYDVQQGEwJVUzEPMA0GA1UEChMGQW1hem9uMRkwFwYDVQQDExBBbWF6\nb24gUm9vdCBDQSAxMB4XDTIyMDgyMzIyMjYzNVoXDTMwMDgyMzIyMjYzNVowPDEL\nMAkGA1UEBhMCVVMxDzANBgNVBAoTBkFtYXpvbjEcMBoGA1UEAxMTQW1hem9uIFJT\nQSAyMDQ4IE0wNDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAM3pVR6A\nlQOp4xe776FdePXyejgA38mYx1ou9/jrpV6Sfn+/oqBKgwhY6ePsQHHQayWBJdBn\nv4Wz363qRI4XUh9swBFJ11TnZ3LqOMvHmWq2+loA0QPtOfXdJ2fHBLrBrngtJ/GB\n0p5olAVYrSZgvQGP16Rf8ddtNyxEEhYm3HuhmNi+vSeAq1tLYJPAvRCXonTpWdSD\nxY6hvdmxlqTYi82AtBXSfpGQ58HHM0hw0C6aQakghrwWi5fGslLOqzpimNMIsT7c\nqa0GJx6JfKqJqmQQNplO2h8n9ZsFJgBowof01ppdoLAWg6caMOM0om/VILKaa30F\n9W/r8Qjah7ltGVkCAwEAAaOCAVowggFWMBIGA1UdEwEB/wQIMAYBAf8CAQAwDgYD\nVR0PAQH/BAQDAgGGMB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAdBgNV\nHQ4EFgQUH1KSYVaCVH+BZtgdPQqqMlyH3QgwHwYDVR0jBBgwFoAUhBjMhTTsvAyU\nlC4IWZzHshBOCggwewYIKwYBBQUHAQEEbzBtMC8GCCsGAQUFBzABhiNodHRwOi8v\nb2NzcC5yb290Y2ExLmFtYXpvbnRydXN0LmNvbTA6BggrBgEFBQcwAoYuaHR0cDov\nL2NydC5yb290Y2ExLmFtYXpvbnRydXN0LmNvbS9yb290Y2ExLmNlcjA/BgNVHR8E\nODA2MDSgMqAwhi5odHRwOi8vY3JsLnJvb3RjYTEuYW1hem9udHJ1c3QuY29tL3Jv\nb3RjYTEuY3JsMBMGA1UdIAQMMAowCAYGZ4EMAQIBMA0GCSqGSIb3DQEBCwUAA4IB\nAQA+1O5UsAaNuW3lHzJtpNGwBnZd9QEYFtxpiAnIaV4qApnGS9OCw5ZPwie7YSlD\nZF5yyFPsFhUC2Q9uJHY/CRV1b5hIiGH0+6+w5PgKiY1MWuWT8VAaJjFxvuhM7a/e\nfN2TIw1Wd6WCl6YRisunjQOrSP+unqC8A540JNyZ1JOE3jVqat3OZBGgMvihdj2w\nY23EpwesrKiQzkHzmvSH67PVW4ycbPy08HVZnBxZ5NrlGG9bwXR3fNTaz+c+Ej6c\n5AnwI3qkOFgSkg3Y75cdFz6pO/olK+e3AqygAcv0WjzmkDPuBjssuZjCHMC56oH3\nGJkV29Di2j5prHJbwZjG1inU\n-----END CERTIFICATE-----\n","is_ca":true,"issuer":"CN=Amazon Root CA 1,O=Amazon,C=US","not_after":"2030-08-23T22:26:35Z","not_before":"2022-08-23T22:26:35Z","public_key_algorithm":"RSA","serial_number":"166129359584585245282080020727744908546170663","sha1_fingerprint":"e7b8b5a6743ce1b2f17b041de59558a41472d70c","signature_algorithm":"SHA256-RSA","subject":"CN=Amazon RSA 2048 M04,O=Amazon,C=US","version":3},{"cert_pem":"-----BEGIN CERTIFICATE-----\nMIIFuzCCBKOgAwIBAgIQCsxZbEwuFOaS0X73gVP4dzANBgkqhkiG9w0BAQsFADA8\nMQswCQYDVQQGEwJVUzEPMA0GA1UEChMGQW1hem9uMRwwGgYDVQQDExNBbWF6b24g\nUlNBIDIwNDggTTA0MB4XDTI1MDYyOTAwMDAwMFoXDTI2MDcyNzIzNTk1OVowFzEV\nMBMGA1UEAxMMYXBwLmVudjAuY29tMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIB\nCgKCAQEAriUeV3TdmNJKKiP8rNaK/PUuNfYSInDK5CFWxBbDaQUblUT8oIsoVQS4\n5rK2jRVIcmMm91u+kZmNwU0D8HY0WkGlXY9RpJacu0OebmY85R3nVt4F+M5a0VF1\nFGP+Kcb/nil8VrBO2E6VtDE2X1ziM17MADUU72hYle0X6q83JfoteRoplWb4LCmL\n44TqMPYFnqvxWrHTQDLqB9hFiARhxpSIcZ8CbA8lz0BqfOw9vV7Hn07AKoK9aPQZ\nH/pXTZsoFbRn6oq8rJvVYrJyjJ/3fMoMZ08ncVvH8P2d3xK27geiiuIMQXFh+1jV\noYlFBg2Wcvih1lHLOxP5XaUU8fLIFwIDAQABo4IC3DCCAtgwHwYDVR0jBBgwFoAU\nH1KSYVaCVH+BZtgdPQqqMlyH3QgwHQYDVR0OBBYEFE+RtMJi89WMW7hKOtqqyvxF\nNQwiMBcGA1UdEQQQMA6CDGFwcC5lbnYwLmNvbTATBgNVHSAEDDAKMAgGBmeBDAEC\nATAOBgNVHQ8BAf8EBAMCBaAwEwYDVR0lBAwwCgYIKwYBBQUHAwEwOwYDVR0fBDQw\nMjAwoC6gLIYqaHR0cDovL2NybC5yMm0wNC5hbWF6b250cnVzdC5jb20vcjJtMDQu\nY3JsMHUGCCsGAQUFBwEBBGkwZzAtBggrBgEFBQcwAYYhaHR0cDovL29jc3AucjJt\nMDQuYW1hem9udHJ1c3QuY29tMDYGCCsGAQUFBzAChipodHRwOi8vY3J0LnIybTA0\nLmFtYXpvbnRydXN0LmNvbS9yMm0wNC5jZXIwDAYDVR0TAQH/BAIwADCCAX8GCisG\nAQQB1nkCBAIEggFvBIIBawFpAHUA1219ENGn9XfCx+lf1wC/+YLJM1pl4dCzAXMX\nwMjFaXcAAAGXub1nnAAABAMARjBEAiBWPPmcWoNjiBmsTrGVxyII7vqPpM1HDhDo\n/ysOqFIUCwIgWwfpCP8VJy1Sqh+3DVp4DBIx+1tQCr2qza552uBdpxUAdwDCMX5X\nRRmjRe5/ON6ykEHrx8IhWiK/f9W1rXaa2Q5SzQAAAZe5vWfKAAAEAwBIMEYCIQDv\nlmqeOQnQO9QdpdI2mL9QMjq/QBDwNniCorIy20ujZQIhANwLsblklrpGhZRWiNa6\nY+Ziu/GGvXrG+uF3VfUdtzY8AHcAlE5Dh/rswe+B8xkkJqgYZQHH0184AgE/cmd9\nVTcuGdgAAAGXub1n3wAABAMASDBGAiEAyolPGATEnftlXyplmrU4eLUhGNzUWXju\nQpOXNQXKpnsCIQDRfaAXOkNZlOkxytPdjVoQiwZUbEBrCKLjEgBDbKBKBjANBgkq\nhkiG9w0BAQsFAAOCAQEAc3pOZtdw6qyasT4KBAxec1qJaQnQjnhSw4InPsFUvFsY\ncqezJNS4mmNZtt5+z003pEQMfNS5iJfesckPVxEaNfCXgupXyyf/kKgLwaTwgfVZ\nCs+r0CzR/J0sPtpteFHRdP+p9bBp+9OA3UCDuakFaby6AEogxQaKDsb/sPAHRrRn\nc/XZWPitpaqZNPKKJnYpG+oJKg/uIWW+kYosqNTE3N+8Z7ytZcuR3K2AS3vIIZ07\naWT6X8s7mO1mLFfyLrXTndDwTlmRljqIRTlwq97gucp9dvtb3XEuxGMxZafNnQDe\nh/ojaclHNQwhgVqdsF48nWeWYzn6gvHHjRavDrH9/w==\n-----END CERTIFICATE-----\n","is_ca":false,"issuer":"CN=Amazon RSA 2048 M04,O=Amazon,C=US","not_after":"2026-07-27T23:59:59Z","not_before":"2025-06-29T00:00:00Z","public_key_algorithm":"RSA","serial_number":"14353322231663110139259152374458218615","sha1_fingerprint":"24a17f671b7c1da4c9191c4d7f348b1e48b6904a","signature_algorithm":"SHA256-RSA","subject":"CN=app.env0.com","version":3}],"content":null,"id":"8e64df10e0ba4ad0031887515f827585e6440183","url":"https://login.app.env0.com","verify_chain":true},"sensitive_values":{"certificates":[{},{},{}]}},{"address":"data.tls_certificate.tfc_certificate","mode":"data","type":"tls_certificate","name":"tfc_certificate","provider_name":"registry.terraform.io/hashicorp/tls","schema_version":0,"values":{"certificates":[{"cert_pem":"-----BEGIN CERTIFICATE-----\nMIIEkjCCA3qgAwIBAgITBn+USionzfP6wq4rAfkI7rnExjANBgkqhkiG9w0BAQsF\nADCBmDELMAkGA1UEBhMCVVMxEDAOBgNVBAgTB0FyaXpvbmExEzARBgNVBAcTClNj\nb3R0c2RhbGUxJTAjBgNVBAoTHFN0YXJmaWVsZCBUZWNobm9sb2dpZXMsIEluYy4x\nOzA5BgNVBAMTMlN0YXJmaWVsZCBTZXJ2aWNlcyBSb290IENlcnRpZmljYXRlIEF1\ndGhvcml0eSAtIEcyMB4XDTE1MDUyNTEyMDAwMFoXDTM3MTIzMTAxMDAwMFowOTEL\nMAkGA1UEBhMCVVMxDzANBgNVBAoTBkFtYXpvbjEZMBcGA1UEAxMQQW1hem9uIFJv\nb3QgQ0EgMTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALJ4gHHKeNXj\nca9HgFB0fW7Y14h29Jlo91ghYPl0hAEvrAIthtOgQ3pOsqTQNroBvo3bSMgHFzZM\n9O6II8c+6zf1tRn4SWiw3te5djgdYZ6k/oI2peVKVuRF4fn9tBb6dNqcmzU5L/qw\nIFAGbHrQgLKm+a/sRxmPUDgH3KKHOVj4utWp+UhnMJbulHheb4mjUcAwhmahRWa6\nVOujw5H5SNz/0egwLX0tdHA114gk957EWW67c4cX8jJGKLhD+rcdqsq08p8kDi1L\n93FcXmn/6pUCyziKrlA4b9v7LWIbxcceVOF34GfID5yHI9Y/QCB/IIDEgEw+OyQm\njgSubJrIqg0CAwEAAaOCATEwggEtMA8GA1UdEwEB/wQFMAMBAf8wDgYDVR0PAQH/\nBAQDAgGGMB0GA1UdDgQWBBSEGMyFNOy8DJSULghZnMeyEE4KCDAfBgNVHSMEGDAW\ngBScXwDfqgHXMCs4iKK4bUqc8hGRgzB4BggrBgEFBQcBAQRsMGowLgYIKwYBBQUH\nMAGGImh0dHA6Ly9vY3NwLnJvb3RnMi5hbWF6b250cnVzdC5jb20wOAYIKwYBBQUH\nMAKGLGh0dHA6Ly9jcnQucm9vdGcyLmFtYXpvbnRydXN0LmNvbS9yb290ZzIuY2Vy\nMD0GA1UdHwQ2MDQwMqAwoC6GLGh0dHA6Ly9jcmwucm9vdGcyLmFtYXpvbnRydXN0\nLmNvbS9yb290ZzIuY3JsMBEGA1UdIAQKMAgwBgYEVR0gADANBgkqhkiG9w0BAQsF\nAAOCAQEAYjdCXLwQtT6LLOkMm2xF4gcAevnFWAu5CIw+7bMlPLVvUOTNNWqnkzSW\nMiGpSESrnO09tKpzbeR/FoCJbM8oAxiDR3mjEH4wW6w7sGDgd9QIpuEdfF7Au/ma\neyKdpwAJfqxGF4PcnCZXmTA5YpaP7dreqsXMGz7KQ2hsVxa81Q4gLv7/wmpdLqBK\nbRRYh5TmOTFffHPLkIhqhBGWJ6bt2YFGpn6jcgAKUj6DiAdjd4lpFw85hdKrCEVN\n0FE6/V1dN2RMfjCyVSRCnTawXZwXgWHxyvkQAiSr6w10kY17RSlQOYiypok1JR4U\nakcjMS9cmvqtmg5iUaQqqcT5NJ0hGA==\n-----END CERTIFICATE-----\n","is_ca":true,"issuer":"CN=Starfield Services Root Certificate Authority - G2,O=Starfield Technologies\\, Inc.,L=Scottsdale,ST=Arizona,C=US","not_after":"2037-12-31T01:00:00Z","not_before":"2015-05-25T12:00:00Z","public_key_algorithm":"RSA","serial_number":"144918191876577076464031512351042010504348870","sha1_fingerprint":"06b25927c42a721631c1efd9431e648fa62e1e39","signature_algorithm":"SHA256-RSA","subject":"CN=Amazon Root CA 1,O=Amazon,C=US","version":3},{"cert_pem":"-----BEGIN CERTIFICATE-----\nMIIEXjCCA0agAwIBAgITB3MSSkvL1E7HtTvq8ZSELToPoTANBgkqhkiG9w0BAQsF\nADA5MQswCQYDVQQGEwJVUzEPMA0GA1UEChMGQW1hem9uMRkwFwYDVQQDExBBbWF6\nb24gUm9vdCBDQSAxMB4XDTIyMDgyMzIyMjUzMFoXDTMwMDgyMzIyMjUzMFowPDEL\nMAkGA1UEBhMCVVMxDzANBgNVBAoTBkFtYXpvbjEcMBoGA1UEAxMTQW1hem9uIFJT\nQSAyMDQ4IE0wMjCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALtDGMZa\nqHneKei1by6+pUPPLljTB143Si6VpEWPc6mSkFhZb/6qrkZyoHlQLbDYnI2D7hD0\nsdzEqfnuAjIsuXQLG3A8TvX6V3oFNBFVe8NlLJHvBseKY88saLwufxkZVwk74g4n\nWlNMXzla9Y5F3wwRHwMVH443xGz6UtGSZSqQ94eFx5X7Tlqt8whi8qCaKdZ5rNak\n+r9nUThOeClqFd4oXych//Rc7Y0eX1KNWHYSI1Nk31mYgiK3JvH063g+K9tHA63Z\neTgKgndlh+WI+zv7i44HepRZjA1FYwYZ9Vv/9UkC5Yz8/yU65fgjaE+wVHM4e/Yy\nC2osrPWE7gJ+dXMCAwEAAaOCAVowggFWMBIGA1UdEwEB/wQIMAYBAf8CAQAwDgYD\nVR0PAQH/BAQDAgGGMB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAdBgNV\nHQ4EFgQUwDFSzVpQw4J8dHHOy+mc+XrrguIwHwYDVR0jBBgwFoAUhBjMhTTsvAyU\nlC4IWZzHshBOCggwewYIKwYBBQUHAQEEbzBtMC8GCCsGAQUFBzABhiNodHRwOi8v\nb2NzcC5yb290Y2ExLmFtYXpvbnRydXN0LmNvbTA6BggrBgEFBQcwAoYuaHR0cDov\nL2NydC5yb290Y2ExLmFtYXpvbnRydXN0LmNvbS9yb290Y2ExLmNlcjA/BgNVHR8E\nODA2MDSgMqAwhi5odHRwOi8vY3JsLnJvb3RjYTEuYW1hem9udHJ1c3QuY29tL3Jv\nb3RjYTEuY3JsMBMGA1UdIAQMMAowCAYGZ4EMAQIBMA0GCSqGSIb3DQEBCwUAA4IB\nAQAtTi6Fs0Azfi+iwm7jrz+CSxHH+uHl7Law3MQSXVtR8RV53PtR6r/6gNpqlzdo\nZq4FKbADi1v9Bun8RY8D51uedRfjsbeodizeBB8nXmeyD33Ep7VATj4ozcd31YFV\nfgRhvTSxNrrTlNpWkUk0m3BMPv8sg381HhA6uEYokE5q9uws/3YkKqRiEz3TsaWm\nJqIRZhMbgAfp7O7FUwFIb7UIspogZSKxPIWJpxiPo3TcBambbVtQOcNRWz5qCQdD\nslI2yayq0n2TXoHyNCLEH8rpsJRVILFsg0jc7BaFrMnF462+ajSehgj12IidNeRN\n4zl+EoNaWdpnWndvSpAEkq2P\n-----END CERTIFICATE-----\n","is_ca":true,"issuer":"CN=Amazon Root CA 1,O=Amazon,C=US","not_after":"2030-08-23T22:25:30Z","not_before":"2022-08-23T22:25:30Z","public_key_algorithm":"RSA","serial_number":"166129353110899469622597955040406457904926625","sha1_fingerprint":"414a2060b738c635cc7fc243e052615592830c53","signature_algorithm":"SHA256-RSA","subject":"CN=Amazon RSA 2048 M02,O=Amazon,C=US","version":3},{"cert_pem":"-----BEGIN CERTIFICATE-----\nMIIGXTCCBUWgAwIBAgIQCRDFzD7+rVQUHeI1WOfxnTANBgkqhkiG9w0BAQsFADA8\nMQswCQYDVQQGEwJVUzEPMA0GA1UEChMGQW1hem9uMRwwGgYDVQQDExNBbWF6b24g\nUlNBIDIwNDggTTAyMB4XDTI1MDMwNDAwMDAwMFoXDTI2MDQwMjIzNTk1OVowGzEZ\nMBcGA1UEAxMQYXBwLnRlcnJhZm9ybS5pbzCCASIwDQYJKoZIhvcNAQEBBQADggEP\nADCCAQoCggEBAMyHRUTQAmQybP/qvcMcZXjlotuJ9r6dzYcnOxtJeGRXBitIOIZ7\n5Bm5URJ9AG6FQVk0Bcxyn2SE1pgujLbZbdJQ5YK6ex/G2sYvGtlz61p1zwL1d0j+\nVX0oyzMNOazvP4Qs6i8LOD1gxelqq1LXu1In3d4Lw2l7y6TVa5Znn+4W7+Mrkapm\nARqkpFaDbAUu0pIKY8UeM4duOjOMUoG/e6/ADHld+87XCL/Ye5V9BgJ9cg9zbSSU\no0gZxZp577kK2FcZ4U93p9Vg5aWta5Xy7OPh1Acnv1sFGun3StFgd+etdz75btrx\nafJd9FeRxuZthOsu1jTu0ulfxjIzj4Z6mAsCAwEAAaOCA3owggN2MB8GA1UdIwQY\nMBaAFMAxUs1aUMOCfHRxzsvpnPl664LiMB0GA1UdDgQWBBSpbG0CIE3V84i3ir0L\nbCyCRT411zCBrAYDVR0RBIGkMIGhghBhcHAudGVycmFmb3JtLmlvghNhZ2VudHMu\ndGVycmFmb3JtLmlvghRiaWxsaW5nLnRlcnJhZm9ybS5pb4IcdHJhZWZpay1zaWRl\nY2FyLnRlcnJhZm9ybS5pb4IXYXJjaGl2aXN0Lmhhc2hpY29ycC5jb22CE2F0bGFz\nLmhhc2hpY29ycC5jb22CFmFyY2hpdmlzdC50ZXJyYWZvcm0uaW8wEwYDVR0gBAww\nCjAIBgZngQwBAgEwDgYDVR0PAQH/BAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMB\nBggrBgEFBQcDAjA7BgNVHR8ENDAyMDCgLqAshipodHRwOi8vY3JsLnIybTAyLmFt\nYXpvbnRydXN0LmNvbS9yMm0wMi5jcmwwdQYIKwYBBQUHAQEEaTBnMC0GCCsGAQUF\nBzABhiFodHRwOi8vb2NzcC5yMm0wMi5hbWF6b250cnVzdC5jb20wNgYIKwYBBQUH\nMAKGKmh0dHA6Ly9jcnQucjJtMDIuYW1hem9udHJ1c3QuY29tL3IybTAyLmNlcjAM\nBgNVHRMBAf8EAjAAMIIBfQYKKwYBBAHWeQIEAgSCAW0EggFpAWcAdgAOV5S8866p\nPjMbLJkHs/eQ35vCPXEyJd0hqSWsYcVOIQAAAZVijsP7AAAEAwBHMEUCIGGNWuIE\nXNsmVzwdXovVs9dO7Ulu526hWkPlwVQugObuAiEA0YvY5tjfi6ILS1JGSTjJk2cj\n+R9IYdDcn8OrAyO9554AdQBkEcRspBLsp4kcogIuALyrTygH1B41J6vq/tUDyX3N\n8AAAAZVijsQ7AAAEAwBGMEQCIFu+oXuyKnisMAfFnITFg4PYIBb/xhAgCbsL6KWI\nYwOaAiA51e+kPz/vBT8+WVMpD60wsMwhnINHXNf0eMxkDEHgewB2AEmcm2neHXzs\n/DbezYdkprhbrwqHgBnRVVL76esp3fjDAAABlWKOxFIAAAQDAEcwRQIgU4mkj7kC\n8NDyk2t7TAPDnvPwEOHgy3s/XLAGfOvJwicCIQCZ8ob4uKmgNBOR8Zoqd0lZrajh\nPiNYx+o7WsSGgbpChDANBgkqhkiG9w0BAQsFAAOCAQEAm3IR5SJHAUT/rPNS0WjG\ndn210SagT9mn+lotvKnEW8I7KO44ZrBy91WrZs3bd1PmCfgzWErJ/8zatOCqNArV\nBIzXBBYGEXlGIxPqMU9G0sn2ay1fSatrWuLIn2XWbyoLfXL1vI9Gx3bjIVw4AaH6\nGbcrgJjtxxgawsFnaaDspn9v+4fbD4Xid0yCkaHujZ6tX6T7F5+5IcRLgLetBAPU\nm34LwYAea90Bc5mzHiwnHaqwAcZz+wHlK55C9xJi5bc/4TgJebKe3Xmtzb2Gq/oI\n2o8vb7bT7kdJOXVN8qo9BZwXL2fxY+0S0i8od9tPSd2FuQML1uWXRrssAV8PSTuJ\nag==\n-----END CERTIFICATE-----\n","is_ca":false,"issuer":"CN=Amazon RSA 2048 M02,O=Amazon,C=US","not_after":"2026-04-02T23:59:59Z","not_before":"2025-03-04T00:00:00Z","public_key_algorithm":"RSA","serial_number":"12050140528533828674672250260631843229","sha1_fingerprint":"291124b977c99ac0400a90e3123de4ad86f76e99","signature_algorithm":"SHA256-RSA","subject":"CN=app.terraform.io","version":3}],"content":null,"id":"3a13b16c17a073ccb9e3f16ded8b29e7dc14631a","url":"https://app.terraform.io","verify_chain":true},"sensitive_values":{"certificates":[{},{},{}]}},{"address":"aws_dynamodb_table.terraform-example-lock-table","mode":"managed","type":"aws_dynamodb_table","name":"terraform-example-lock-table","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:dynamodb:eu-west-2:540044833068:table/overmind-tf-example-state","attribute":[{"name":"LockID","type":"S"}],"billing_mode":"PAY_PER_REQUEST","deletion_protection_enabled":false,"global_secondary_index":[],"hash_key":"LockID","id":"overmind-tf-example-state","import_table":[],"local_secondary_index":[],"name":"overmind-tf-example-state","on_demand_throughput":[],"point_in_time_recovery":[{"enabled":false,"recovery_period_in_days":0}],"range_key":null,"read_capacity":0,"replica":[],"restore_date_time":null,"restore_source_name":null,"restore_source_table_arn":null,"restore_to_latest_time":null,"server_side_encryption":[],"stream_arn":"","stream_enabled":false,"stream_label":"","stream_view_type":"","table_class":"STANDARD","tags":{},"tags_all":{},"timeouts":null,"ttl":[{"attribute_name":"","enabled":false}],"write_capacity":0},"sensitive_values":{"attribute":[{}],"global_secondary_index":[],"import_table":[],"local_secondary_index":[],"on_demand_throughput":[],"point_in_time_recovery":[{}],"replica":[],"server_side_encryption":[],"tags":{},"tags_all":{},"ttl":[{}]}},{"address":"aws_iam_openid_connect_provider.env0[0]","mode":"managed","type":"aws_iam_openid_connect_provider","name":"env0","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::540044833068:oidc-provider/login.app.env0.com/","client_id_list":["hoMiq9PdkRh9LUvVpH4wIErWg50VSG1b"],"id":"arn:aws:iam::540044833068:oidc-provider/login.app.env0.com/","tags":{},"tags_all":{},"thumbprint_list":["06b25927c42a721631c1efd9431e648fa62e1e39"],"url":"login.app.env0.com/"},"sensitive_values":{"client_id_list":[false],"tags":{},"tags_all":{},"thumbprint_list":[false]},"depends_on":["data.tls_certificate.env0"]},{"address":"aws_iam_openid_connect_provider.github[0]","mode":"managed","type":"aws_iam_openid_connect_provider","name":"github","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::540044833068:oidc-provider/token.actions.githubusercontent.com","client_id_list":["sts.amazonaws.com"],"id":"arn:aws:iam::540044833068:oidc-provider/token.actions.githubusercontent.com","tags":{},"tags_all":{},"thumbprint_list":["6938fd4d98bab03faadb97b34396831e3780aea1"],"url":"token.actions.githubusercontent.com"},"sensitive_values":{"client_id_list":[false],"tags":{},"tags_all":{},"thumbprint_list":[false]}},{"address":"aws_iam_openid_connect_provider.tfc_provider[0]","mode":"managed","type":"aws_iam_openid_connect_provider","name":"tfc_provider","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::540044833068:oidc-provider/app.terraform.io","client_id_list":["aws.workload.identity"],"id":"arn:aws:iam::540044833068:oidc-provider/app.terraform.io","tags":{},"tags_all":{},"thumbprint_list":["06b25927c42a721631c1efd9431e648fa62e1e39"],"url":"app.terraform.io"},"sensitive_values":{"client_id_list":[false],"tags":{},"tags_all":{},"thumbprint_list":[false]},"depends_on":["data.tls_certificate.tfc_certificate"]},{"address":"aws_iam_policy.state_access","mode":"managed","type":"aws_iam_policy","name":"state_access","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::540044833068:policy/TerraformStateAccess-terraform-example","attachment_count":1,"description":"Allows access to everything terraform needs (state, lock, deploy role) to deploy","id":"arn:aws:iam::540044833068:policy/TerraformStateAccess-terraform-example","name":"TerraformStateAccess-terraform-example","name_prefix":"","path":"/","policy":"{\"Statement\":[{\"Action\":[\"sts:AssumeRole\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:iam::540044833068:role/terraform-example\",\"Sid\":\"Deploy\"},{\"Action\":[\"s3:ListBucket\",\"s3:GetEncryptionConfiguration\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::replaceme-with-a-unique-bucket-name\",\"Sid\":\"TFStateList\"},{\"Action\":[\"s3:PutObject\",\"s3:GetObject\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::replaceme-with-a-unique-bucket-name/*\",\"Sid\":\"TFStateAccess\"},{\"Action\":[\"dynamodb:PutItem\",\"dynamodb:DeleteItem\",\"dynamodb:GetItem\",\"dynamodb:Query\",\"dynamodb:UpdateItem\"],\"Condition\":{\"ForAllValues:StringEquals\":{\"dynamodb:LeadingKeys\":[\"replaceme-with-a-unique-bucket-name/env:/terraform-example/terraform-example.tfstate\",\"replaceme-with-a-unique-bucket-name/env:/terraform-example/terraform-example.tfstate-md5\"]}},\"Effect\":\"Allow\",\"Resource\":\"arn:aws:dynamodb:*:*:table/overmind-tf-example-state\",\"Sid\":\"TFLock\"}],\"Version\":\"2012-10-17\"}","policy_id":"ANPAX3PJOGEWCPJ4F4MT7","tags":{},"tags_all":{}},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["aws_s3_bucket.terraform-example-state-bucket","data.aws_caller_identity.current"]},{"address":"aws_iam_role.deploy_role","mode":"managed","type":"aws_iam_role","name":"deploy_role","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::540044833068:role/terraform-example","assume_role_policy":"{\"Statement\":[{\"Action\":[\"sts:AssumeRoleWithWebIdentity\"],\"Condition\":{\"StringEquals\":{\"token.actions.githubusercontent.com:aud\":\"sts.amazonaws.com\"},\"StringLike\":{\"token.actions.githubusercontent.com:sub\":\"repo:overmindtech/terraform-example:*\"}},\"Effect\":\"Allow\",\"Principal\":{\"Federated\":\"arn:aws:iam::540044833068:oidc-provider/token.actions.githubusercontent.com\"},\"Sid\":\"AllowGithubOIDC\"},{\"Action\":[\"sts:AssumeRoleWithWebIdentity\"],\"Condition\":{\"StringEquals\":{\"app.terraform.io:aud\":\"aws.workload.identity\"},\"StringLike\":{\"app.terraform.io:sub\":\"organization:Overmind:project:Example:workspace:terraform-example:run_phase:*\"}},\"Effect\":\"Allow\",\"Principal\":{\"Federated\":\"arn:aws:iam::540044833068:oidc-provider/app.terraform.io\"},\"Sid\":\"AllowTerraformOIDC\"},{\"Action\":[\"sts:AssumeRoleWithWebIdentity\",\"sts:TagSession\"],\"Condition\":{\"StringEquals\":{\"login.app.env0.com/:aud\":\"hoMiq9PdkRh9LUvVpH4wIErWg50VSG1b\",\"login.app.env0.com/:sub\":\"auth0|691b8530eba074a8989d8726\"}},\"Effect\":\"Allow\",\"Principal\":{\"Federated\":\"arn:aws:iam::540044833068:oidc-provider/login.app.env0.com/\"},\"Sid\":\"AllowEnv0OIDC\"},{\"Action\":[\"sts:AssumeRole\"],\"Condition\":{\"StringLike\":{\"sts:ExternalId\":\"overmind-demo@*\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"324880187172\"},\"Sid\":\"AllowSpacelift\"}],\"Version\":\"2012-10-17\"}","create_date":"2025-11-17T23:20:28Z","description":"This is the role used by terraform running on github actions or Terraform Cloud to deploy.","force_detach_policies":false,"id":"terraform-example","inline_policy":[{"name":"AllowPublicECR","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"ecr-public:GetAuthorizationToken\",\"sts:GetServiceBearerToken\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}"}],"managed_policy_arns":["arn:aws:iam::540044833068:policy/TerraformStateAccess-terraform-example","arn:aws:iam::aws:policy/AdministratorAccess"],"max_session_duration":3600,"name":"terraform-example","name_prefix":"","path":"/","permissions_boundary":"","tags":{},"tags_all":{},"unique_id":"AROAX3PJOGEWIPNS5Y4JH"},"sensitive_values":{"inline_policy":[{}],"managed_policy_arns":[false,false],"tags":{},"tags_all":{}},"depends_on":["aws_iam_openid_connect_provider.env0","aws_iam_openid_connect_provider.tfc_provider","aws_iam_policy.state_access","aws_s3_bucket.terraform-example-state-bucket","data.aws_caller_identity.current","data.tls_certificate.env0","data.tls_certificate.tfc_certificate"]},{"address":"aws_s3_bucket.terraform-example-state-bucket","mode":"managed","type":"aws_s3_bucket","name":"terraform-example-state-bucket","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"acceleration_status":"","acl":null,"arn":"arn:aws:s3:::replaceme-with-a-unique-bucket-name","bucket":"replaceme-with-a-unique-bucket-name","bucket_domain_name":"replaceme-with-a-unique-bucket-name.s3.amazonaws.com","bucket_prefix":"","bucket_regional_domain_name":"replaceme-with-a-unique-bucket-name.s3.eu-west-2.amazonaws.com","cors_rule":[],"force_destroy":false,"grant":[{"id":"05d918fa182ad8f3fa915436354b8657e3c2c59b326ecbfc43e6c00451268d0a","permissions":["FULL_CONTROL"],"type":"CanonicalUser","uri":""}],"hosted_zone_id":"Z3GKZC51ZF0DB4","id":"replaceme-with-a-unique-bucket-name","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"object_lock_enabled":false,"policy":"","region":"eu-west-2","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"","sse_algorithm":"AES256"}],"bucket_key_enabled":false}]}],"tags":{},"tags_all":{},"timeouts":null,"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"sensitive_values":{"cors_rule":[],"grant":[{"permissions":[false]}],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}],"tags":{},"tags_all":{},"versioning":[{}],"website":[]}}],"child_modules":[{"resources":[{"address":"module.api_access[0].data.aws_ami.amazon_linux_2023","mode":"data","type":"aws_ami","name":"amazon_linux_2023","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"architecture":"arm64","arn":"arn:aws:ec2:eu-west-2::image/ami-021f9b1d0460d2e30","block_device_mappings":[{"device_name":"/dev/xvda","ebs":{"delete_on_termination":"true","encrypted":"false","iops":"3000","snapshot_id":"snap-0d8adb792b6646fd5","throughput":"125","volume_initialization_rate":"0","volume_size":"30","volume_type":"gp3"},"no_device":"","virtual_name":""}],"boot_mode":"uefi","creation_date":"2025-12-09T22:10:52.000Z","deprecation_time":"2027-12-09T22:10:52.000Z","description":"Amazon Linux AMI 2023.0.20251209 arm64 ECS HVM EBS","ena_support":true,"executable_users":null,"filter":[{"name":"name","values":["al2023-ami-*-arm64"]},{"name":"state","values":["available"]},{"name":"virtualization-type","values":["hvm"]}],"hypervisor":"xen","id":"ami-021f9b1d0460d2e30","image_id":"ami-021f9b1d0460d2e30","image_location":"amazon/al2023-ami-ecs-hvm-2023.0.20251209-kernel-6.1-arm64","image_owner_alias":"amazon","image_type":"machine","imds_support":"v2.0","include_deprecated":false,"kernel_id":"","last_launched_time":"","most_recent":true,"name":"al2023-ami-ecs-hvm-2023.0.20251209-kernel-6.1-arm64","name_regex":null,"owner_id":"591542846629","owners":["amazon"],"platform":"","platform_details":"Linux/UNIX","product_codes":[],"public":true,"ramdisk_id":"","root_device_name":"/dev/xvda","root_device_type":"ebs","root_snapshot_id":"snap-0d8adb792b6646fd5","sriov_net_support":"simple","state":"available","state_reason":{"code":"UNSET","message":"UNSET"},"tags":{},"timeouts":null,"tpm_support":"","uefi_data":null,"usage_operation":"RunInstances","virtualization_type":"hvm"},"sensitive_values":{"block_device_mappings":[{"ebs":{}}],"filter":[{"values":[false]},{"values":[false]},{"values":[false]}],"owners":[false],"product_codes":[],"state_reason":{},"tags":{}}},{"address":"module.api_access[0].data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"account_id":"540044833068","arn":"arn:aws:sts::540044833068:assumed-role/AWSReservedSSO_AWSAdministratorAccess_6166336551098275/dylan@overmind.tech","id":"540044833068","user_id":"AROAX3PJOGEWG2R7JO72P:dylan@overmind.tech"},"sensitive_values":{}},{"address":"module.api_access[0].data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"Europe (London)","endpoint":"ec2.eu-west-2.amazonaws.com","id":"eu-west-2","name":"eu-west-2"},"sensitive_values":{}},{"address":"module.api_access[0].aws_cloudwatch_metric_alarm.api_health","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"api_health","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"actions_enabled":true,"alarm_actions":["arn:aws:sns:eu-west-2:540044833068:production-api-alerts"],"alarm_description":"Production API health check failing - pages on-call team","alarm_name":"production-api-health-check-failed","arn":"arn:aws:cloudwatch:eu-west-2:540044833068:alarm:production-api-health-check-failed","comparison_operator":"LessThanThreshold","datapoints_to_alarm":0,"dimensions":{"HealthCheckId":"2161fd41-d21d-4021-8337-13a621cec290"},"evaluate_low_sample_count_percentiles":"","evaluation_periods":2,"extended_statistic":"","id":"production-api-health-check-failed","insufficient_data_actions":[],"metric_name":"HealthCheckStatus","metric_query":[],"namespace":"AWS/Route53","ok_actions":["arn:aws:sns:eu-west-2:540044833068:production-api-alerts"],"period":60,"statistic":"Minimum","tags":{"Environment":"production","Service":"core-api","Severity":"critical"},"tags_all":{"Environment":"production","Service":"core-api","Severity":"critical"},"threshold":1,"threshold_metric_id":"","treat_missing_data":"missing","unit":""},"sensitive_values":{"alarm_actions":[false],"dimensions":{},"insufficient_data_actions":[],"metric_query":[],"ok_actions":[false],"tags":{},"tags_all":{}},"depends_on":["module.api_access.aws_eip.api_server","module.api_access.aws_instance.api_server","module.api_access.aws_route53_health_check.api","module.api_access.aws_security_group.customer_access","module.api_access.aws_security_group.internal_services","module.api_access.aws_sns_topic.alerts","module.api_access.data.aws_ami.amazon_linux_2023","module.api_access.data.aws_subnets.selected","module.api_access.data.aws_vpc.selected","module.baseline.module.vpc.aws_subnet.public","module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this"]},{"address":"module.api_access[0].aws_eip.api_server","mode":"managed","type":"aws_eip","name":"api_server","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"address":null,"allocation_id":"eipalloc-0dba2be7032e76458","arn":"arn:aws:ec2:eu-west-2:540044833068:elastic-ip/eipalloc-0dba2be7032e76458","associate_with_private_ip":null,"association_id":"eipassoc-065e352e6eb2f0fc4","carrier_ip":"","customer_owned_ip":"","customer_owned_ipv4_pool":"","domain":"vpc","id":"eipalloc-0dba2be7032e76458","instance":"i-0355d048569c5d522","ipam_pool_id":null,"network_border_group":"eu-west-2","network_interface":"eni-08b9e3b07fe6ddd2b","private_dns":"ip-10-0-101-81.eu-west-2.compute.internal","private_ip":"10.0.101.81","ptr_record":"","public_dns":"ec2-18-132-149-19.eu-west-2.compute.amazonaws.com","public_ip":"18.132.149.19","public_ipv4_pool":"amazon","tags":{"Environment":"production","Name":"production-api-eip","Service":"core-api"},"tags_all":{"Environment":"production","Name":"production-api-eip","Service":"core-api"},"timeouts":null,"vpc":true},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.api_access.aws_instance.api_server","module.api_access.aws_security_group.customer_access","module.api_access.aws_security_group.internal_services","module.api_access.data.aws_ami.amazon_linux_2023","module.api_access.data.aws_subnets.selected","module.api_access.data.aws_vpc.selected","module.baseline.module.vpc.aws_subnet.public","module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this"]},{"address":"module.api_access[0].aws_instance.api_server","mode":"managed","type":"aws_instance","name":"api_server","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"ami":"ami-021f9b1d0460d2e30","arn":"arn:aws:ec2:eu-west-2:540044833068:instance/i-0355d048569c5d522","associate_public_ip_address":true,"availability_zone":"eu-west-2a","capacity_reservation_specification":[{"capacity_reservation_preference":"open","capacity_reservation_target":[]}],"cpu_core_count":2,"cpu_options":[{"amd_sev_snp":"","core_count":2,"threads_per_core":1}],"cpu_threads_per_core":1,"credit_specification":[{"cpu_credits":"unlimited"}],"disable_api_stop":false,"disable_api_termination":false,"ebs_block_device":[],"ebs_optimized":false,"enable_primary_ipv6":null,"enclave_options":[{"enabled":false}],"ephemeral_block_device":[],"get_password_data":false,"hibernation":false,"host_id":"","host_resource_group_arn":null,"iam_instance_profile":"","id":"i-0355d048569c5d522","instance_initiated_shutdown_behavior":"stop","instance_lifecycle":"","instance_market_options":[],"instance_state":"running","instance_type":"t4g.nano","ipv6_address_count":0,"ipv6_addresses":[],"key_name":"","launch_template":[],"maintenance_options":[{"auto_recovery":"default"}],"metadata_options":[{"http_endpoint":"enabled","http_protocol_ipv6":"disabled","http_put_response_hop_limit":2,"http_tokens":"required","instance_metadata_tags":"disabled"}],"monitoring":false,"network_interface":[],"outpost_arn":"","password_data":"","placement_group":"","placement_partition_number":0,"primary_network_interface_id":"eni-08b9e3b07fe6ddd2b","private_dns":"ip-10-0-101-81.eu-west-2.compute.internal","private_dns_name_options":[{"enable_resource_name_dns_a_record":false,"enable_resource_name_dns_aaaa_record":false,"hostname_type":"ip-name"}],"private_ip":"10.0.101.81","public_dns":"ec2-18-132-149-19.eu-west-2.compute.amazonaws.com","public_ip":"18.132.149.19","root_block_device":[{"delete_on_termination":true,"device_name":"/dev/xvda","encrypted":false,"iops":3000,"kms_key_id":"","tags":{},"tags_all":{},"throughput":125,"volume_id":"vol-0b3f1b2cd8cfee137","volume_size":30,"volume_type":"gp3"}],"secondary_private_ips":[],"security_groups":[],"source_dest_check":true,"spot_instance_request_id":"","subnet_id":"subnet-0a1b287732e8ad0b7","tags":{"CostCenter":"engineering","Environment":"production","Name":"production-api-server","OnCall":"platform-oncall@company.com","Service":"core-api","Team":"platform"},"tags_all":{"CostCenter":"engineering","Environment":"production","Name":"production-api-server","OnCall":"platform-oncall@company.com","Service":"core-api","Team":"platform"},"tenancy":"default","timeouts":null,"user_data":null,"user_data_base64":null,"user_data_replace_on_change":false,"volume_tags":null,"vpc_security_group_ids":["sg-085ee012c9855643f","sg-08c3767d4eeede7b5"]},"sensitive_values":{"capacity_reservation_specification":[{"capacity_reservation_target":[]}],"cpu_options":[{}],"credit_specification":[{}],"ebs_block_device":[],"enclave_options":[{}],"ephemeral_block_device":[],"instance_market_options":[],"ipv6_addresses":[],"launch_template":[],"maintenance_options":[{}],"metadata_options":[{}],"network_interface":[],"private_dns_name_options":[{}],"root_block_device":[{"tags":{},"tags_all":{}}],"secondary_private_ips":[],"security_groups":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[false,false]},"depends_on":["module.api_access.aws_security_group.customer_access","module.api_access.aws_security_group.internal_services","module.api_access.data.aws_ami.amazon_linux_2023","module.api_access.data.aws_subnets.selected","module.api_access.data.aws_vpc.selected","module.baseline.module.vpc.aws_subnet.public","module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this"]},{"address":"module.api_access[0].aws_route53_health_check.api","mode":"managed","type":"aws_route53_health_check","name":"api","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:route53:::healthcheck/2161fd41-d21d-4021-8337-13a621cec290","child_health_threshold":0,"child_healthchecks":[],"cloudwatch_alarm_name":null,"cloudwatch_alarm_region":null,"disabled":false,"enable_sni":true,"failure_threshold":3,"fqdn":"","id":"2161fd41-d21d-4021-8337-13a621cec290","insufficient_data_health_status":"","invert_healthcheck":false,"ip_address":"18.132.149.19","measure_latency":false,"port":443,"reference_name":null,"regions":[],"request_interval":30,"resource_path":"/health","routing_control_arn":"","search_string":"","tags":{"Environment":"production","Name":"production-api-health","Service":"core-api"},"tags_all":{"Environment":"production","Name":"production-api-health","Service":"core-api"},"triggers":{},"type":"HTTPS"},"sensitive_values":{"child_healthchecks":[],"regions":[],"tags":{},"tags_all":{},"triggers":{}},"depends_on":["module.api_access.aws_eip.api_server","module.api_access.aws_instance.api_server","module.api_access.aws_security_group.customer_access","module.api_access.aws_security_group.internal_services","module.api_access.data.aws_ami.amazon_linux_2023","module.api_access.data.aws_subnets.selected","module.api_access.data.aws_vpc.selected","module.baseline.module.vpc.aws_subnet.public","module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this"]},{"address":"module.api_access[0].aws_security_group.customer_access","mode":"managed","type":"aws_security_group","name":"customer_access","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:eu-west-2:540044833068:security-group/sg-085ee012c9855643f","description":"Customer IP whitelist for API access - updated frequently","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"Allow all outbound","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-085ee012c9855643f","ingress":[{"cidr_blocks":["100.64.0.0/29"],"description":"Cyberdyne Systems","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443},{"cidr_blocks":["192.0.2.50/32"],"description":"Initech","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443},{"cidr_blocks":["198.18.100.0/24"],"description":"Umbrella Corp","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443},{"cidr_blocks":["198.51.100.0/29"],"description":"Globex Industries","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443},{"cidr_blocks":["203.0.113.10/32"],"description":"Acme Corp","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443}],"name":"customer-api-access","name_prefix":"","owner_id":"540044833068","revoke_rules_on_delete":false,"tags":{"Environment":"production","Name":"customer-api-access","Purpose":"customer-whitelist","Team":"platform","UpdateFrequency":"high"},"tags_all":{"Environment":"production","Name":"customer-api-access","Purpose":"customer-whitelist","Team":"platform","UpdateFrequency":"high"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}},"depends_on":["module.api_access.data.aws_vpc.selected","module.baseline.module.vpc.aws_vpc.this"]},{"address":"module.api_access[0].aws_security_group.internal_services","mode":"managed","type":"aws_security_group","name":"internal_services","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:eu-west-2:540044833068:security-group/sg-08c3767d4eeede7b5","description":"Internal service mesh, monitoring, and health check access - rarely modified","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"Allow all outbound","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-08c3767d4eeede7b5","ingress":[{"cidr_blocks":["10.0.0.0/8"],"description":"Health check endpoint","from_port":8080,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":8080},{"cidr_blocks":["10.0.0.0/8"],"description":"Internal HTTPS - monitoring, service mesh, internal tools","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443},{"cidr_blocks":["10.0.0.0/8"],"description":"Prometheus metrics scraping","from_port":9090,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":9090}],"name":"internal-services","name_prefix":"","owner_id":"540044833068","revoke_rules_on_delete":false,"tags":{"Critical":"true","Environment":"production","Name":"internal-services","Purpose":"internal-mesh","Team":"platform","UpdateFrequency":"low"},"tags_all":{"Critical":"true","Environment":"production","Name":"internal-services","Purpose":"internal-mesh","Team":"platform","UpdateFrequency":"low"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}},"depends_on":["module.api_access.data.aws_vpc.selected","module.baseline.module.vpc.aws_vpc.this"]},{"address":"module.api_access[0].aws_sns_topic.alerts","mode":"managed","type":"aws_sns_topic","name":"alerts","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"application_failure_feedback_role_arn":"","application_success_feedback_role_arn":"","application_success_feedback_sample_rate":0,"archive_policy":"","arn":"arn:aws:sns:eu-west-2:540044833068:production-api-alerts","beginning_archive_time":"","content_based_deduplication":false,"delivery_policy":"","display_name":"","fifo_throughput_scope":"","fifo_topic":false,"firehose_failure_feedback_role_arn":"","firehose_success_feedback_role_arn":"","firehose_success_feedback_sample_rate":0,"http_failure_feedback_role_arn":"","http_success_feedback_role_arn":"","http_success_feedback_sample_rate":0,"id":"arn:aws:sns:eu-west-2:540044833068:production-api-alerts","kms_master_key_id":"","lambda_failure_feedback_role_arn":"","lambda_success_feedback_role_arn":"","lambda_success_feedback_sample_rate":0,"name":"production-api-alerts","name_prefix":"","owner":"540044833068","policy":"{\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Action\":[\"SNS:GetTopicAttributes\",\"SNS:SetTopicAttributes\",\"SNS:AddPermission\",\"SNS:RemovePermission\",\"SNS:DeleteTopic\",\"SNS:Subscribe\",\"SNS:ListSubscriptionsByTopic\",\"SNS:Publish\"],\"Condition\":{\"StringEquals\":{\"AWS:SourceOwner\":\"540044833068\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Resource\":\"arn:aws:sns:eu-west-2:540044833068:production-api-alerts\",\"Sid\":\"__default_statement_ID\"}],\"Version\":\"2008-10-17\"}","signature_version":0,"sqs_failure_feedback_role_arn":"","sqs_success_feedback_role_arn":"","sqs_success_feedback_sample_rate":0,"tags":{"Environment":"production","Purpose":"oncall-alerts","Severity":"critical"},"tags_all":{"Environment":"production","Purpose":"oncall-alerts","Severity":"critical"},"tracing_config":""},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.api_access[0].aws_sns_topic_subscription.oncall_email","mode":"managed","type":"aws_sns_topic_subscription","name":"oncall_email","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:sns:eu-west-2:540044833068:production-api-alerts:33d3ad1c-91bb-4926-8c9f-9cb546486ff7","confirmation_timeout_in_minutes":1,"confirmation_was_authenticated":false,"delivery_policy":"","endpoint":"alerts@example.com","endpoint_auto_confirms":false,"filter_policy":"","filter_policy_scope":"","id":"arn:aws:sns:eu-west-2:540044833068:production-api-alerts:33d3ad1c-91bb-4926-8c9f-9cb546486ff7","owner_id":"540044833068","pending_confirmation":true,"protocol":"email","raw_message_delivery":false,"redrive_policy":"","replay_policy":"","subscription_role_arn":"","topic_arn":"arn:aws:sns:eu-west-2:540044833068:production-api-alerts"},"sensitive_values":{},"depends_on":["module.api_access.aws_sns_topic.alerts"]}],"address":"module.api_access[0]"},{"resources":[{"address":"module.api_server.data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"Europe (London)","endpoint":"ec2.eu-west-2.amazonaws.com","id":"eu-west-2","name":"eu-west-2"},"sensitive_values":{}},{"address":"module.api_server.aws_cloudwatch_metric_alarm.high_cpu[0]","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"high_cpu","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"actions_enabled":true,"alarm_actions":["arn:aws:sns:eu-west-2:540044833068:api-51c748b4-alerts"],"alarm_description":"CPU utilization exceeds 80%","alarm_name":"api-51c748b4-high-cpu","arn":"arn:aws:cloudwatch:eu-west-2:540044833068:alarm:api-51c748b4-high-cpu","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":0,"dimensions":{"InstanceId":"i-0d1d4384862781a22"},"evaluate_low_sample_count_percentiles":"","evaluation_periods":2,"extended_statistic":"","id":"api-51c748b4-high-cpu","insufficient_data_actions":[],"metric_name":"CPUUtilization","metric_query":[],"namespace":"AWS/EC2","ok_actions":["arn:aws:sns:eu-west-2:540044833068:api-51c748b4-alerts"],"period":300,"statistic":"Average","tags":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-cpu-alarm","Project":"api-platform","Workload":"cpu-intensive"},"tags_all":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-cpu-alarm","Project":"api-platform","Workload":"cpu-intensive"},"threshold":80,"threshold_metric_id":"","treat_missing_data":"missing","unit":""},"sensitive_values":{"alarm_actions":[false],"dimensions":{},"insufficient_data_actions":[],"metric_query":[],"ok_actions":[false],"tags":{},"tags_all":{}},"depends_on":["module.api_server.aws_iam_instance_profile.api_server","module.api_server.aws_iam_role.api_server","module.api_server.aws_instance.api_server","module.api_server.aws_security_group.alb","module.api_server.aws_security_group.api_server","module.api_server.aws_security_group.database","module.api_server.aws_sns_topic.alerts","module.api_server.random_id.suffix","module.baseline.data.aws_ami.amazon_linux","module.baseline.module.vpc.aws_subnet.public","module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this"]},{"address":"module.api_server.aws_cloudwatch_metric_alarm.unhealthy_targets[0]","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"unhealthy_targets","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"actions_enabled":true,"alarm_actions":["arn:aws:sns:eu-west-2:540044833068:api-51c748b4-alerts"],"alarm_description":"Load balancer has unhealthy targets","alarm_name":"api-51c748b4-unhealthy-targets","arn":"arn:aws:cloudwatch:eu-west-2:540044833068:alarm:api-51c748b4-unhealthy-targets","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":0,"dimensions":{"LoadBalancer":"app/api-51c748b4-alb/5006497ce35b7ecd","TargetGroup":"targetgroup/api-51c748b4-tg/fa0513c079206e1e"},"evaluate_low_sample_count_percentiles":"","evaluation_periods":2,"extended_statistic":"","id":"api-51c748b4-unhealthy-targets","insufficient_data_actions":[],"metric_name":"UnHealthyHostCount","metric_query":[],"namespace":"AWS/ApplicationELB","ok_actions":["arn:aws:sns:eu-west-2:540044833068:api-51c748b4-alerts"],"period":60,"statistic":"Average","tags":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-health-alarm","Project":"api-platform","Workload":"cpu-intensive"},"tags_all":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-health-alarm","Project":"api-platform","Workload":"cpu-intensive"},"threshold":0,"threshold_metric_id":"","treat_missing_data":"missing","unit":""},"sensitive_values":{"alarm_actions":[false],"dimensions":{},"insufficient_data_actions":[],"metric_query":[],"ok_actions":[false],"tags":{},"tags_all":{}},"depends_on":["module.api_server.aws_lb.api","module.api_server.aws_lb_target_group.api","module.api_server.aws_security_group.alb","module.api_server.aws_sns_topic.alerts","module.api_server.random_id.suffix","module.baseline.module.vpc.aws_subnet.public","module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this"]},{"address":"module.api_server.aws_iam_instance_profile.api_server[0]","mode":"managed","type":"aws_iam_instance_profile","name":"api_server","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::540044833068:instance-profile/api-51c748b4-api-profile","create_date":"2025-12-09T23:43:28Z","id":"api-51c748b4-api-profile","name":"api-51c748b4-api-profile","name_prefix":"","path":"/","role":"api-51c748b4-api-role","tags":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-api-profile","Project":"api-platform","Workload":"cpu-intensive"},"tags_all":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-api-profile","Project":"api-platform","Workload":"cpu-intensive"},"unique_id":"AIPAX3PJOGEWDK52XMNRS"},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.api_server.aws_iam_role.api_server","module.api_server.random_id.suffix"]},{"address":"module.api_server.aws_iam_role.api_server[0]","mode":"managed","type":"aws_iam_role","name":"api_server","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::540044833068:role/api-51c748b4-api-role","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","create_date":"2025-12-09T23:43:28Z","description":"","force_detach_policies":false,"id":"api-51c748b4-api-role","inline_policy":[],"managed_policy_arns":["arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore","arn:aws:iam::aws:policy/CloudWatchAgentServerPolicy"],"max_session_duration":3600,"name":"api-51c748b4-api-role","name_prefix":"","path":"/","permissions_boundary":"","tags":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-api-role","Project":"api-platform","Workload":"cpu-intensive"},"tags_all":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-api-role","Project":"api-platform","Workload":"cpu-intensive"},"unique_id":"AROAX3PJOGEWDTMWQ5E7F"},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[false,false],"tags":{},"tags_all":{}},"depends_on":["module.api_server.random_id.suffix"]},{"address":"module.api_server.aws_iam_role_policy_attachment.cloudwatch_agent[0]","mode":"managed","type":"aws_iam_role_policy_attachment","name":"cloudwatch_agent","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"api-51c748b4-api-role-20251209234328560800000001","policy_arn":"arn:aws:iam::aws:policy/CloudWatchAgentServerPolicy","role":"api-51c748b4-api-role"},"sensitive_values":{},"depends_on":["module.api_server.aws_iam_role.api_server","module.api_server.random_id.suffix"]},{"address":"module.api_server.aws_iam_role_policy_attachment.ssm[0]","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ssm","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"api-51c748b4-api-role-20251209234328620600000002","policy_arn":"arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore","role":"api-51c748b4-api-role"},"sensitive_values":{},"depends_on":["module.api_server.aws_iam_role.api_server","module.api_server.random_id.suffix"]},{"address":"module.api_server.aws_instance.api_server[0]","mode":"managed","type":"aws_instance","name":"api_server","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"ami":"ami-02a95139d1d364420","arn":"arn:aws:ec2:eu-west-2:540044833068:instance/i-0d1d4384862781a22","associate_public_ip_address":true,"availability_zone":"eu-west-2a","capacity_reservation_specification":[{"capacity_reservation_preference":"open","capacity_reservation_target":[]}],"cpu_core_count":1,"cpu_options":[{"amd_sev_snp":"","core_count":1,"threads_per_core":2}],"cpu_threads_per_core":2,"credit_specification":[],"disable_api_stop":false,"disable_api_termination":false,"ebs_block_device":[],"ebs_optimized":false,"enable_primary_ipv6":null,"enclave_options":[{"enabled":false}],"ephemeral_block_device":[],"get_password_data":false,"hibernation":false,"host_id":"","host_resource_group_arn":null,"iam_instance_profile":"api-51c748b4-api-profile","id":"i-0d1d4384862781a22","instance_initiated_shutdown_behavior":"stop","instance_lifecycle":"","instance_market_options":[],"instance_state":"running","instance_type":"c5.large","ipv6_address_count":0,"ipv6_addresses":[],"key_name":"","launch_template":[],"maintenance_options":[{"auto_recovery":"default"}],"metadata_options":[{"http_endpoint":"enabled","http_protocol_ipv6":"disabled","http_put_response_hop_limit":1,"http_tokens":"optional","instance_metadata_tags":"disabled"}],"monitoring":false,"network_interface":[],"outpost_arn":"","password_data":"","placement_group":"","placement_partition_number":0,"primary_network_interface_id":"eni-0c732e6544f94d4fe","private_dns":"ip-10-0-101-249.eu-west-2.compute.internal","private_dns_name_options":[{"enable_resource_name_dns_a_record":false,"enable_resource_name_dns_aaaa_record":false,"hostname_type":"ip-name"}],"private_ip":"10.0.101.249","public_dns":"ec2-35-178-48-219.eu-west-2.compute.amazonaws.com","public_ip":"35.178.48.219","root_block_device":[{"delete_on_termination":true,"device_name":"/dev/xvda","encrypted":false,"iops":3000,"kms_key_id":"","tags":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-root-volume","Project":"api-platform","Workload":"cpu-intensive"},"tags_all":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-root-volume","Project":"api-platform","Workload":"cpu-intensive"},"throughput":125,"volume_id":"vol-084fb1fcaad21f25b","volume_size":8,"volume_type":"gp3"}],"secondary_private_ips":[],"security_groups":[],"source_dest_check":true,"spot_instance_request_id":"","subnet_id":"subnet-0a1b287732e8ad0b7","tags":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-api-server","Project":"api-platform","Workload":"cpu-intensive"},"tags_all":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-api-server","Project":"api-platform","Workload":"cpu-intensive"},"tenancy":"default","timeouts":null,"user_data":"627f06eeee1e41f87d9e55ae56203ae81058d890","user_data_base64":null,"user_data_replace_on_change":false,"volume_tags":null,"vpc_security_group_ids":["sg-0bf5d5df489e89796"]},"sensitive_values":{"capacity_reservation_specification":[{"capacity_reservation_target":[]}],"cpu_options":[{}],"credit_specification":[],"ebs_block_device":[],"enclave_options":[{}],"ephemeral_block_device":[],"instance_market_options":[],"ipv6_addresses":[],"launch_template":[],"maintenance_options":[{}],"metadata_options":[{}],"network_interface":[],"private_dns_name_options":[{}],"root_block_device":[{"tags":{},"tags_all":{}}],"secondary_private_ips":[],"security_groups":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[false]},"depends_on":["module.api_server.aws_iam_instance_profile.api_server","module.api_server.aws_iam_role.api_server","module.api_server.aws_security_group.alb","module.api_server.aws_security_group.api_server","module.api_server.aws_security_group.database","module.api_server.random_id.suffix","module.baseline.data.aws_ami.amazon_linux","module.baseline.module.vpc.aws_subnet.public","module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this"]},{"address":"module.api_server.aws_lb.api[0]","mode":"managed","type":"aws_lb","name":"api","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"access_logs":[{"bucket":"","enabled":false,"prefix":""}],"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:loadbalancer/app/api-51c748b4-alb/5006497ce35b7ecd","arn_suffix":"app/api-51c748b4-alb/5006497ce35b7ecd","client_keep_alive":3600,"connection_logs":[{"bucket":"","enabled":false,"prefix":""}],"customer_owned_ipv4_pool":"","desync_mitigation_mode":"defensive","dns_name":"api-51c748b4-alb-1999780759.eu-west-2.elb.amazonaws.com","dns_record_client_routing_policy":null,"drop_invalid_header_fields":false,"enable_cross_zone_load_balancing":true,"enable_deletion_protection":false,"enable_http2":true,"enable_tls_version_and_cipher_suite_headers":false,"enable_waf_fail_open":false,"enable_xff_client_port":false,"enable_zonal_shift":false,"enforce_security_group_inbound_rules_on_private_link_traffic":"","id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:loadbalancer/app/api-51c748b4-alb/5006497ce35b7ecd","idle_timeout":60,"internal":false,"ip_address_type":"ipv4","ipam_pools":[],"load_balancer_type":"application","minimum_load_balancer_capacity":[],"name":"api-51c748b4-alb","name_prefix":"","preserve_host_header":false,"security_groups":["sg-0874eb9069f386e2b"],"subnet_mapping":[{"allocation_id":"","ipv6_address":"","outpost_id":"","private_ipv4_address":"","subnet_id":"subnet-07fc72cf57c70e4f0"},{"allocation_id":"","ipv6_address":"","outpost_id":"","private_ipv4_address":"","subnet_id":"subnet-0a1b287732e8ad0b7"}],"subnets":["subnet-07fc72cf57c70e4f0","subnet-0a1b287732e8ad0b7"],"tags":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-alb","Project":"api-platform","Workload":"cpu-intensive"},"tags_all":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-alb","Project":"api-platform","Workload":"cpu-intensive"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298","xff_header_processing_mode":"append","zone_id":"ZHURV8PSTC4K8"},"sensitive_values":{"access_logs":[{}],"connection_logs":[{}],"ipam_pools":[],"minimum_load_balancer_capacity":[],"security_groups":[false],"subnet_mapping":[{},{}],"subnets":[false,false],"tags":{},"tags_all":{}},"depends_on":["module.api_server.aws_security_group.alb","module.api_server.random_id.suffix","module.baseline.module.vpc.aws_subnet.public","module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this"]},{"address":"module.api_server.aws_lb_listener.http[0]","mode":"managed","type":"aws_lb_listener","name":"http","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"alpn_policy":null,"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:listener/app/api-51c748b4-alb/5006497ce35b7ecd/50b208cdabb9cb4d","certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":1,"redirect":[],"target_group_arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/api-51c748b4-tg/fa0513c079206e1e","type":"forward"}],"id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:listener/app/api-51c748b4-alb/5006497ce35b7ecd/50b208cdabb9cb4d","load_balancer_arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:loadbalancer/app/api-51c748b4-alb/5006497ce35b7ecd","mutual_authentication":[],"port":80,"protocol":"HTTP","routing_http_request_x_amzn_mtls_clientcert_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_issuer_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_leaf_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_serial_number_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_subject_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_validity_header_name":null,"routing_http_request_x_amzn_tls_cipher_suite_header_name":null,"routing_http_request_x_amzn_tls_version_header_name":null,"routing_http_response_access_control_allow_credentials_header_value":"","routing_http_response_access_control_allow_headers_header_value":"","routing_http_response_access_control_allow_methods_header_value":"","routing_http_response_access_control_allow_origin_header_value":"","routing_http_response_access_control_expose_headers_header_value":"","routing_http_response_access_control_max_age_header_value":"","routing_http_response_content_security_policy_header_value":"","routing_http_response_server_enabled":true,"routing_http_response_strict_transport_security_header_value":"","routing_http_response_x_content_type_options_header_value":"","routing_http_response_x_frame_options_header_value":"","ssl_policy":"","tags":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-http-listener","Project":"api-platform","Workload":"cpu-intensive"},"tags_all":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-http-listener","Project":"api-platform","Workload":"cpu-intensive"},"tcp_idle_timeout_seconds":null,"timeouts":null},"sensitive_values":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[]}],"mutual_authentication":[],"tags":{},"tags_all":{}},"depends_on":["module.api_server.aws_lb.api","module.api_server.aws_lb_target_group.api","module.api_server.aws_security_group.alb","module.api_server.random_id.suffix","module.baseline.module.vpc.aws_subnet.public","module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this"]},{"address":"module.api_server.aws_lb_target_group.api[0]","mode":"managed","type":"aws_lb_target_group","name":"api","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/api-51c748b4-tg/fa0513c079206e1e","arn_suffix":"targetgroup/api-51c748b4-tg/fa0513c079206e1e","connection_termination":null,"deregistration_delay":"30","health_check":[{"enabled":true,"healthy_threshold":2,"interval":30,"matcher":"200","path":"/health","port":"traffic-port","protocol":"HTTP","timeout":5,"unhealthy_threshold":3}],"id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/api-51c748b4-tg/fa0513c079206e1e","ip_address_type":"ipv4","lambda_multi_value_headers_enabled":false,"load_balancer_arns":["arn:aws:elasticloadbalancing:eu-west-2:540044833068:loadbalancer/app/api-51c748b4-alb/5006497ce35b7ecd"],"load_balancing_algorithm_type":"round_robin","load_balancing_anomaly_mitigation":"off","load_balancing_cross_zone_enabled":"use_load_balancer_configuration","name":"api-51c748b4-tg","name_prefix":"","port":80,"preserve_client_ip":null,"protocol":"HTTP","protocol_version":"HTTP1","proxy_protocol_v2":false,"slow_start":0,"stickiness":[{"cookie_duration":86400,"cookie_name":"","enabled":false,"type":"lb_cookie"}],"tags":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-tg","Project":"api-platform","Workload":"cpu-intensive"},"tags_all":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-tg","Project":"api-platform","Workload":"cpu-intensive"},"target_failover":[{"on_deregistration":null,"on_unhealthy":null}],"target_group_health":[{"dns_failover":[{"minimum_healthy_targets_count":"1","minimum_healthy_targets_percentage":"off"}],"unhealthy_state_routing":[{"minimum_healthy_targets_count":1,"minimum_healthy_targets_percentage":"off"}]}],"target_health_state":[{"enable_unhealthy_connection_termination":null,"unhealthy_draining_interval":null}],"target_type":"instance","vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"health_check":[{}],"load_balancer_arns":[false],"stickiness":[{}],"tags":{},"tags_all":{},"target_failover":[{}],"target_group_health":[{"dns_failover":[{}],"unhealthy_state_routing":[{}]}],"target_health_state":[{}]},"depends_on":["module.api_server.random_id.suffix","module.baseline.module.vpc.aws_vpc.this"]},{"address":"module.api_server.aws_lb_target_group_attachment.api[0]","mode":"managed","type":"aws_lb_target_group_attachment","name":"api","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"availability_zone":null,"id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/api-51c748b4-tg/fa0513c079206e1e-20251211003254874300000004","port":80,"target_group_arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/api-51c748b4-tg/fa0513c079206e1e","target_id":"i-0d1d4384862781a22"},"sensitive_values":{},"depends_on":["module.api_server.aws_iam_instance_profile.api_server","module.api_server.aws_iam_role.api_server","module.api_server.aws_instance.api_server","module.api_server.aws_lb_target_group.api","module.api_server.aws_security_group.alb","module.api_server.aws_security_group.api_server","module.api_server.aws_security_group.database","module.api_server.random_id.suffix","module.baseline.data.aws_ami.amazon_linux","module.baseline.module.vpc.aws_subnet.public","module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this"]},{"address":"module.api_server.aws_security_group.alb[0]","mode":"managed","type":"aws_security_group","name":"alb","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:eu-west-2:540044833068:security-group/sg-0874eb9069f386e2b","description":"Security group for Application Load Balancer","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"All outbound","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-0874eb9069f386e2b","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"HTTP from internet","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":80}],"name":"api-51c748b4-alb-sg","name_prefix":"","owner_id":"540044833068","revoke_rules_on_delete":false,"tags":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-alb-sg","Project":"api-platform","Workload":"cpu-intensive"},"tags_all":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-alb-sg","Project":"api-platform","Workload":"cpu-intensive"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}},"depends_on":["module.api_server.random_id.suffix","module.baseline.module.vpc.aws_vpc.this"]},{"address":"module.api_server.aws_security_group.api_server[0]","mode":"managed","type":"aws_security_group","name":"api_server","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:eu-west-2:540044833068:security-group/sg-0bf5d5df489e89796","description":"Security group for API server","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"All outbound","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0},{"cidr_blocks":[],"description":"Database access","from_port":5432,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":["sg-03c9420d0652e5719"],"self":false,"to_port":5432}],"id":"sg-0bf5d5df489e89796","ingress":[{"cidr_blocks":[],"description":"HTTP from ALB","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":["sg-0874eb9069f386e2b"],"self":false,"to_port":80}],"name":"api-51c748b4-api-sg","name_prefix":"","owner_id":"540044833068","revoke_rules_on_delete":false,"tags":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-api-sg","Project":"api-platform","Workload":"cpu-intensive"},"tags_all":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-api-sg","Project":"api-platform","Workload":"cpu-intensive"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[false]}],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[false]}],"tags":{},"tags_all":{}},"depends_on":["module.api_server.aws_security_group.alb","module.api_server.aws_security_group.database","module.api_server.random_id.suffix","module.baseline.module.vpc.aws_vpc.this"]},{"address":"module.api_server.aws_security_group.database[0]","mode":"managed","type":"aws_security_group","name":"database","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:eu-west-2:540044833068:security-group/sg-03c9420d0652e5719","description":"Security group for database tier","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"All outbound","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-03c9420d0652e5719","ingress":[{"cidr_blocks":[],"description":"PostgreSQL from API servers","from_port":5432,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":["sg-0bf5d5df489e89796"],"self":false,"to_port":5432}],"name":"api-51c748b4-database-sg","name_prefix":"","owner_id":"540044833068","revoke_rules_on_delete":false,"tags":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-database-sg","Project":"api-platform","Workload":"cpu-intensive"},"tags_all":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-database-sg","Project":"api-platform","Workload":"cpu-intensive"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[false]}],"tags":{},"tags_all":{}},"depends_on":["module.api_server.random_id.suffix","module.baseline.module.vpc.aws_vpc.this"]},{"address":"module.api_server.aws_security_group_rule.database_from_api[0]","mode":"managed","type":"aws_security_group_rule","name":"database_from_api","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":null,"description":"PostgreSQL from API servers","from_port":5432,"id":"sgrule-3024000087","ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_group_id":"sg-03c9420d0652e5719","security_group_rule_id":"sgr-0471b318daf4376c1","self":false,"source_security_group_id":"sg-0bf5d5df489e89796","timeouts":null,"to_port":5432,"type":"ingress"},"sensitive_values":{},"depends_on":["module.api_server.aws_security_group.alb","module.api_server.aws_security_group.api_server","module.api_server.aws_security_group.database","module.api_server.random_id.suffix","module.baseline.module.vpc.aws_vpc.this"]},{"address":"module.api_server.aws_sns_topic.alerts[0]","mode":"managed","type":"aws_sns_topic","name":"alerts","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"application_failure_feedback_role_arn":"","application_success_feedback_role_arn":"","application_success_feedback_sample_rate":0,"archive_policy":"","arn":"arn:aws:sns:eu-west-2:540044833068:api-51c748b4-alerts","beginning_archive_time":"","content_based_deduplication":false,"delivery_policy":"","display_name":"","fifo_throughput_scope":"","fifo_topic":false,"firehose_failure_feedback_role_arn":"","firehose_success_feedback_role_arn":"","firehose_success_feedback_sample_rate":0,"http_failure_feedback_role_arn":"","http_success_feedback_role_arn":"","http_success_feedback_sample_rate":0,"id":"arn:aws:sns:eu-west-2:540044833068:api-51c748b4-alerts","kms_master_key_id":"","lambda_failure_feedback_role_arn":"","lambda_success_feedback_role_arn":"","lambda_success_feedback_sample_rate":0,"name":"api-51c748b4-alerts","name_prefix":"","owner":"540044833068","policy":"{\"Statement\":[{\"Action\":\"sns:Publish\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"cloudwatch.amazonaws.com\"},\"Resource\":\"arn:aws:sns:eu-west-2:540044833068:api-51c748b4-alerts\",\"Sid\":\"AllowCloudWatchAlarms\"}],\"Version\":\"2012-10-17\"}","signature_version":0,"sqs_failure_feedback_role_arn":"","sqs_success_feedback_role_arn":"","sqs_success_feedback_sample_rate":0,"tags":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-alerts","Project":"api-platform","Workload":"cpu-intensive"},"tags_all":{"CostCenter":"engineering","Environment":"production","ManagedBy":"terraform","Name":"api-51c748b4-alerts","Project":"api-platform","Workload":"cpu-intensive"},"tracing_config":""},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.api_server.random_id.suffix"]},{"address":"module.api_server.aws_sns_topic_policy.alerts[0]","mode":"managed","type":"aws_sns_topic_policy","name":"alerts","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:sns:eu-west-2:540044833068:api-51c748b4-alerts","id":"arn:aws:sns:eu-west-2:540044833068:api-51c748b4-alerts","owner":"540044833068","policy":"{\"Statement\":[{\"Action\":\"sns:Publish\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"cloudwatch.amazonaws.com\"},\"Resource\":\"arn:aws:sns:eu-west-2:540044833068:api-51c748b4-alerts\",\"Sid\":\"AllowCloudWatchAlarms\"}],\"Version\":\"2012-10-17\"}"},"sensitive_values":{},"depends_on":["module.api_server.aws_sns_topic.alerts","module.api_server.random_id.suffix"]},{"address":"module.api_server.random_id.suffix[0]","mode":"managed","type":"random_id","name":"suffix","index":0,"provider_name":"registry.terraform.io/hashicorp/random","schema_version":0,"values":{"b64_std":"UcdItA==","b64_url":"UcdItA","byte_length":4,"dec":"1372014772","hex":"51c748b4","id":"UcdItA","keepers":null,"prefix":null},"sensitive_values":{}}],"address":"module.api_server"},{"resources":[{"address":"module.baseline.data.aws_ami.amazon_linux","mode":"data","type":"aws_ami","name":"amazon_linux","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"architecture":"x86_64","arn":"arn:aws:ec2:eu-west-2::image/ami-02a95139d1d364420","block_device_mappings":[{"device_name":"/dev/xvda","ebs":{"delete_on_termination":"true","encrypted":"false","iops":"0","snapshot_id":"snap-06f9f115e82d4b5e0","throughput":"0","volume_initialization_rate":"0","volume_size":"8","volume_type":"standard"},"no_device":"","virtual_name":""}],"boot_mode":"","creation_date":"2025-12-03T22:48:37.000Z","deprecation_time":"2026-03-03T00:00:00.000Z","description":"Amazon Linux 2 AMI 2.0.20251208.0 x86_64 HVM ebs","ena_support":true,"executable_users":null,"filter":[{"name":"name","values":["amzn2-ami-hvm-*-x86_64-ebs"]},{"name":"owner-alias","values":["amazon"]}],"hypervisor":"xen","id":"ami-02a95139d1d364420","image_id":"ami-02a95139d1d364420","image_location":"amazon/amzn2-ami-hvm-2.0.20251208.0-x86_64-ebs","image_owner_alias":"amazon","image_type":"machine","imds_support":"","include_deprecated":false,"kernel_id":"","last_launched_time":"","most_recent":true,"name":"amzn2-ami-hvm-2.0.20251208.0-x86_64-ebs","name_regex":null,"owner_id":"137112412989","owners":null,"platform":"","platform_details":"Linux/UNIX","product_codes":[],"public":true,"ramdisk_id":"","root_device_name":"/dev/xvda","root_device_type":"ebs","root_snapshot_id":"snap-06f9f115e82d4b5e0","sriov_net_support":"simple","state":"available","state_reason":{"code":"UNSET","message":"UNSET"},"tags":{},"timeouts":null,"tpm_support":"","uefi_data":null,"usage_operation":"RunInstances","virtualization_type":"hvm"},"sensitive_values":{"block_device_mappings":[{"ebs":{}}],"filter":[{"values":[false]},{"values":[false]}],"product_codes":[],"state_reason":{},"tags":{}}}],"address":"module.baseline","child_modules":[{"resources":[{"address":"module.baseline.module.vpc.aws_default_network_acl.this[0]","mode":"managed","type":"aws_default_network_acl","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:eu-west-2:540044833068:network-acl/acl-088dc8f9998dacc6b","default_network_acl_id":"acl-088dc8f9998dacc6b","egress":[{"action":"allow","cidr_block":"","from_port":0,"icmp_code":0,"icmp_type":0,"ipv6_cidr_block":"::/0","protocol":"-1","rule_no":101,"to_port":0},{"action":"allow","cidr_block":"0.0.0.0/0","from_port":0,"icmp_code":0,"icmp_type":0,"ipv6_cidr_block":"","protocol":"-1","rule_no":100,"to_port":0}],"id":"acl-088dc8f9998dacc6b","ingress":[{"action":"allow","cidr_block":"","from_port":0,"icmp_code":0,"icmp_type":0,"ipv6_cidr_block":"::/0","protocol":"-1","rule_no":101,"to_port":0},{"action":"allow","cidr_block":"0.0.0.0/0","from_port":0,"icmp_code":0,"icmp_type":0,"ipv6_cidr_block":"","protocol":"-1","rule_no":100,"to_port":0}],"owner_id":"540044833068","subnet_ids":["subnet-07fc72cf57c70e4f0","subnet-09605cfe202ef69e7","subnet-0a1b287732e8ad0b7","subnet-0eae990ebecf2d640"],"tags":{"Environment":"development","Name":"workloads-terraform-example-default","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-default","Terraform":"true"},"vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"egress":[{},{}],"ingress":[{},{}],"subnet_ids":[false,false,false,false],"tags":{},"tags_all":{}},"depends_on":["module.baseline.module.vpc.aws_vpc.this"]},{"address":"module.baseline.module.vpc.aws_default_route_table.default[0]","mode":"managed","type":"aws_default_route_table","name":"default","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:eu-west-2:540044833068:route-table/rtb-0551700a1aabf64c9","default_route_table_id":"rtb-0551700a1aabf64c9","id":"rtb-0551700a1aabf64c9","owner_id":"540044833068","propagating_vgws":[],"route":[],"tags":{"Environment":"development","Name":"workloads-terraform-example-default","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-default","Terraform":"true"},"timeouts":{"create":"5m","update":"5m"},"vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"propagating_vgws":[],"route":[],"tags":{},"tags_all":{},"timeouts":{}},"depends_on":["module.baseline.module.vpc.aws_vpc.this"]},{"address":"module.baseline.module.vpc.aws_default_security_group.this[0]","mode":"managed","type":"aws_default_security_group","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:eu-west-2:540044833068:security-group/sg-0159f0e3d8224d441","description":"default VPC security group","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-0159f0e3d8224d441","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":1234,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":1234},{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443},{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":80}],"name":"default","name_prefix":"","owner_id":"540044833068","revoke_rules_on_delete":false,"tags":{"Environment":"development","Name":"workloads-terraform-example-default","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-default","Terraform":"true"},"vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}},"depends_on":["module.baseline.module.vpc.aws_vpc.this"]},{"address":"module.baseline.module.vpc.aws_eip.nat[0]","mode":"managed","type":"aws_eip","name":"nat","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"address":null,"allocation_id":"eipalloc-07cc93e43d376b5e9","arn":"arn:aws:ec2:eu-west-2:540044833068:elastic-ip/eipalloc-07cc93e43d376b5e9","associate_with_private_ip":null,"association_id":"eipassoc-0a0433c17d9475350","carrier_ip":"","customer_owned_ip":"","customer_owned_ipv4_pool":"","domain":"vpc","id":"eipalloc-07cc93e43d376b5e9","instance":"","ipam_pool_id":null,"network_border_group":"eu-west-2","network_interface":"eni-0e80adc87987d3aa7","private_dns":"ip-10-0-101-133.eu-west-2.compute.internal","private_ip":"10.0.101.133","ptr_record":"","public_dns":"ec2-18-169-200-25.eu-west-2.compute.amazonaws.com","public_ip":"18.169.200.25","public_ipv4_pool":"amazon","tags":{"Environment":"development","Name":"workloads-terraform-example-eu-west-2a","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-eu-west-2a","Terraform":"true"},"timeouts":null,"vpc":true},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.baseline.module.vpc.aws_internet_gateway.this","module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this"]},{"address":"module.baseline.module.vpc.aws_eip.nat[1]","mode":"managed","type":"aws_eip","name":"nat","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"address":null,"allocation_id":"eipalloc-0646301f7a4de4912","arn":"arn:aws:ec2:eu-west-2:540044833068:elastic-ip/eipalloc-0646301f7a4de4912","associate_with_private_ip":null,"association_id":"eipassoc-0d47f720125d78947","carrier_ip":"","customer_owned_ip":"","customer_owned_ipv4_pool":"","domain":"vpc","id":"eipalloc-0646301f7a4de4912","instance":"","ipam_pool_id":null,"network_border_group":"eu-west-2","network_interface":"eni-04149f872cf764621","private_dns":"ip-10-0-102-193.eu-west-2.compute.internal","private_ip":"10.0.102.193","ptr_record":"","public_dns":"ec2-13-134-130-46.eu-west-2.compute.amazonaws.com","public_ip":"13.134.130.46","public_ipv4_pool":"amazon","tags":{"Environment":"development","Name":"workloads-terraform-example-eu-west-2b","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-eu-west-2b","Terraform":"true"},"timeouts":null,"vpc":true},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.baseline.module.vpc.aws_internet_gateway.this","module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this"]},{"address":"module.baseline.module.vpc.aws_internet_gateway.this[0]","mode":"managed","type":"aws_internet_gateway","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:eu-west-2:540044833068:internet-gateway/igw-01cea3cff43162407","id":"igw-01cea3cff43162407","owner_id":"540044833068","tags":{"Environment":"development","Name":"workloads-terraform-example","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example","Terraform":"true"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this"]},{"address":"module.baseline.module.vpc.aws_nat_gateway.this[0]","mode":"managed","type":"aws_nat_gateway","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"allocation_id":"eipalloc-07cc93e43d376b5e9","association_id":"eipassoc-0a0433c17d9475350","connectivity_type":"public","id":"nat-038cdf7bebbe06e18","network_interface_id":"eni-0e80adc87987d3aa7","private_ip":"10.0.101.133","public_ip":"18.169.200.25","secondary_allocation_ids":[],"secondary_private_ip_address_count":0,"secondary_private_ip_addresses":[],"subnet_id":"subnet-0a1b287732e8ad0b7","tags":{"Environment":"development","Name":"workloads-terraform-example-eu-west-2a","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-eu-west-2a","Terraform":"true"},"timeouts":null},"sensitive_values":{"secondary_allocation_ids":[],"secondary_private_ip_addresses":[],"tags":{},"tags_all":{}},"depends_on":["module.baseline.module.vpc.aws_eip.nat","module.baseline.module.vpc.aws_internet_gateway.this","module.baseline.module.vpc.aws_subnet.public","module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this"]},{"address":"module.baseline.module.vpc.aws_nat_gateway.this[1]","mode":"managed","type":"aws_nat_gateway","name":"this","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"allocation_id":"eipalloc-0646301f7a4de4912","association_id":"eipassoc-0d47f720125d78947","connectivity_type":"public","id":"nat-08567ba3cecdcfda4","network_interface_id":"eni-04149f872cf764621","private_ip":"10.0.102.193","public_ip":"13.134.130.46","secondary_allocation_ids":[],"secondary_private_ip_address_count":0,"secondary_private_ip_addresses":[],"subnet_id":"subnet-07fc72cf57c70e4f0","tags":{"Environment":"development","Name":"workloads-terraform-example-eu-west-2b","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-eu-west-2b","Terraform":"true"},"timeouts":null},"sensitive_values":{"secondary_allocation_ids":[],"secondary_private_ip_addresses":[],"tags":{},"tags_all":{}},"depends_on":["module.baseline.module.vpc.aws_eip.nat","module.baseline.module.vpc.aws_internet_gateway.this","module.baseline.module.vpc.aws_subnet.public","module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this"]},{"address":"module.baseline.module.vpc.aws_route.private_nat_gateway[0]","mode":"managed","type":"aws_route","name":"private_nat_gateway","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"carrier_gateway_id":"","core_network_arn":"","destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","id":"r-rtb-00d53afc4950c3e9a1080289494","instance_id":"","instance_owner_id":"","local_gateway_id":"","nat_gateway_id":"nat-038cdf7bebbe06e18","network_interface_id":"","origin":"CreateRoute","route_table_id":"rtb-00d53afc4950c3e9a","state":"active","timeouts":{"create":"5m","delete":null,"update":null},"transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""},"sensitive_values":{"timeouts":{}},"depends_on":["module.baseline.module.vpc.aws_eip.nat","module.baseline.module.vpc.aws_internet_gateway.this","module.baseline.module.vpc.aws_nat_gateway.this","module.baseline.module.vpc.aws_route_table.private","module.baseline.module.vpc.aws_subnet.public","module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this"]},{"address":"module.baseline.module.vpc.aws_route.private_nat_gateway[1]","mode":"managed","type":"aws_route","name":"private_nat_gateway","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"carrier_gateway_id":"","core_network_arn":"","destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","id":"r-rtb-06193a3194e6d8cf21080289494","instance_id":"","instance_owner_id":"","local_gateway_id":"","nat_gateway_id":"nat-08567ba3cecdcfda4","network_interface_id":"","origin":"CreateRoute","route_table_id":"rtb-06193a3194e6d8cf2","state":"active","timeouts":{"create":"5m","delete":null,"update":null},"transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""},"sensitive_values":{"timeouts":{}},"depends_on":["module.baseline.module.vpc.aws_eip.nat","module.baseline.module.vpc.aws_internet_gateway.this","module.baseline.module.vpc.aws_nat_gateway.this","module.baseline.module.vpc.aws_route_table.private","module.baseline.module.vpc.aws_subnet.public","module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this"]},{"address":"module.baseline.module.vpc.aws_route.public_internet_gateway[0]","mode":"managed","type":"aws_route","name":"public_internet_gateway","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"carrier_gateway_id":"","core_network_arn":"","destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"igw-01cea3cff43162407","id":"r-rtb-073519b951ac0afb51080289494","instance_id":"","instance_owner_id":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","origin":"CreateRoute","route_table_id":"rtb-073519b951ac0afb5","state":"active","timeouts":{"create":"5m","delete":null,"update":null},"transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""},"sensitive_values":{"timeouts":{}},"depends_on":["module.baseline.module.vpc.aws_internet_gateway.this","module.baseline.module.vpc.aws_route_table.public","module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this"]},{"address":"module.baseline.module.vpc.aws_route_table.private[0]","mode":"managed","type":"aws_route_table","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:eu-west-2:540044833068:route-table/rtb-00d53afc4950c3e9a","id":"rtb-00d53afc4950c3e9a","owner_id":"540044833068","propagating_vgws":[],"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"nat-038cdf7bebbe06e18","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Environment":"development","Name":"workloads-terraform-example-private-eu-west-2a","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-private-eu-west-2a","Terraform":"true"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}},"depends_on":["module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this"]},{"address":"module.baseline.module.vpc.aws_route_table.private[1]","mode":"managed","type":"aws_route_table","name":"private","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:eu-west-2:540044833068:route-table/rtb-06193a3194e6d8cf2","id":"rtb-06193a3194e6d8cf2","owner_id":"540044833068","propagating_vgws":[],"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"nat-08567ba3cecdcfda4","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Environment":"development","Name":"workloads-terraform-example-private-eu-west-2b","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-private-eu-west-2b","Terraform":"true"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}},"depends_on":["module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this"]},{"address":"module.baseline.module.vpc.aws_route_table.public[0]","mode":"managed","type":"aws_route_table","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:eu-west-2:540044833068:route-table/rtb-073519b951ac0afb5","id":"rtb-073519b951ac0afb5","owner_id":"540044833068","propagating_vgws":[],"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"igw-01cea3cff43162407","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Environment":"development","Name":"workloads-terraform-example-public","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-public","Terraform":"true"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}},"depends_on":["module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this"]},{"address":"module.baseline.module.vpc.aws_route_table_association.private[0]","mode":"managed","type":"aws_route_table_association","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":"","id":"rtbassoc-0557ac7367cfe9d9c","route_table_id":"rtb-00d53afc4950c3e9a","subnet_id":"subnet-09605cfe202ef69e7","timeouts":null},"sensitive_values":{},"depends_on":["module.baseline.module.vpc.aws_route_table.private","module.baseline.module.vpc.aws_subnet.private","module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this"]},{"address":"module.baseline.module.vpc.aws_route_table_association.private[1]","mode":"managed","type":"aws_route_table_association","name":"private","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":"","id":"rtbassoc-03c4cc8adce32d125","route_table_id":"rtb-06193a3194e6d8cf2","subnet_id":"subnet-0eae990ebecf2d640","timeouts":null},"sensitive_values":{},"depends_on":["module.baseline.module.vpc.aws_route_table.private","module.baseline.module.vpc.aws_subnet.private","module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this"]},{"address":"module.baseline.module.vpc.aws_route_table_association.public[0]","mode":"managed","type":"aws_route_table_association","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":"","id":"rtbassoc-0bc7bb20e5bff7b21","route_table_id":"rtb-073519b951ac0afb5","subnet_id":"subnet-0a1b287732e8ad0b7","timeouts":null},"sensitive_values":{},"depends_on":["module.baseline.module.vpc.aws_route_table.public","module.baseline.module.vpc.aws_subnet.public","module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this"]},{"address":"module.baseline.module.vpc.aws_route_table_association.public[1]","mode":"managed","type":"aws_route_table_association","name":"public","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":"","id":"rtbassoc-0f86a1cf1181d93f4","route_table_id":"rtb-073519b951ac0afb5","subnet_id":"subnet-07fc72cf57c70e4f0","timeouts":null},"sensitive_values":{},"depends_on":["module.baseline.module.vpc.aws_route_table.public","module.baseline.module.vpc.aws_subnet.public","module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this"]},{"address":"module.baseline.module.vpc.aws_subnet.private[0]","mode":"managed","type":"aws_subnet","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:eu-west-2:540044833068:subnet/subnet-09605cfe202ef69e7","assign_ipv6_address_on_creation":false,"availability_zone":"eu-west-2a","availability_zone_id":"euw2-az2","cidr_block":"10.0.1.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-09605cfe202ef69e7","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"540044833068","private_dns_hostname_type_on_launch":"ip-name","tags":{"Environment":"development","Name":"workloads-terraform-example-private-eu-west-2a","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-private-eu-west-2a","Terraform":"true"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this"]},{"address":"module.baseline.module.vpc.aws_subnet.private[1]","mode":"managed","type":"aws_subnet","name":"private","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:eu-west-2:540044833068:subnet/subnet-0eae990ebecf2d640","assign_ipv6_address_on_creation":false,"availability_zone":"eu-west-2b","availability_zone_id":"euw2-az3","cidr_block":"10.0.2.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0eae990ebecf2d640","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"540044833068","private_dns_hostname_type_on_launch":"ip-name","tags":{"Environment":"development","Name":"workloads-terraform-example-private-eu-west-2b","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-private-eu-west-2b","Terraform":"true"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this"]},{"address":"module.baseline.module.vpc.aws_subnet.public[0]","mode":"managed","type":"aws_subnet","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:eu-west-2:540044833068:subnet/subnet-0a1b287732e8ad0b7","assign_ipv6_address_on_creation":false,"availability_zone":"eu-west-2a","availability_zone_id":"euw2-az2","cidr_block":"10.0.101.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0a1b287732e8ad0b7","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"540044833068","private_dns_hostname_type_on_launch":"ip-name","tags":{"Environment":"development","Name":"workloads-terraform-example-public-eu-west-2a","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-public-eu-west-2a","Terraform":"true"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this"]},{"address":"module.baseline.module.vpc.aws_subnet.public[1]","mode":"managed","type":"aws_subnet","name":"public","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:eu-west-2:540044833068:subnet/subnet-07fc72cf57c70e4f0","assign_ipv6_address_on_creation":false,"availability_zone":"eu-west-2b","availability_zone_id":"euw2-az3","cidr_block":"10.0.102.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-07fc72cf57c70e4f0","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"540044833068","private_dns_hostname_type_on_launch":"ip-name","tags":{"Environment":"development","Name":"workloads-terraform-example-public-eu-west-2b","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example-public-eu-west-2b","Terraform":"true"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this"]},{"address":"module.baseline.module.vpc.aws_vpc.this[0]","mode":"managed","type":"aws_vpc","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:eu-west-2:540044833068:vpc/vpc-02901bcbb89561298","assign_generated_ipv6_cidr_block":false,"cidr_block":"10.0.0.0/16","default_network_acl_id":"acl-088dc8f9998dacc6b","default_route_table_id":"rtb-0551700a1aabf64c9","default_security_group_id":"sg-0159f0e3d8224d441","dhcp_options_id":"dopt-038753549445222b5","enable_dns_hostnames":true,"enable_dns_support":true,"enable_network_address_usage_metrics":false,"id":"vpc-02901bcbb89561298","instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_association_id":"","ipv6_cidr_block":"","ipv6_cidr_block_network_border_group":"","ipv6_ipam_pool_id":"","ipv6_netmask_length":0,"main_route_table_id":"rtb-0551700a1aabf64c9","owner_id":"540044833068","tags":{"Environment":"development","Name":"workloads-terraform-example","Terraform":"true"},"tags_all":{"Environment":"development","Name":"workloads-terraform-example","Terraform":"true"}},"sensitive_values":{"tags":{},"tags_all":{}}}],"address":"module.baseline.module.vpc"}]},{"resources":[{"address":"module.heritage[0].data.archive_file.lambda_zip","mode":"data","type":"archive_file","name":"lambda_zip","provider_name":"registry.terraform.io/hashicorp/archive","schema_version":0,"values":{"exclude_symlink_directories":null,"excludes":null,"id":"a13e4c84c4877debd7b50fac7f64d4b3fb03de8c","output_base64sha256":"AL+rDzevWkbhiW0wn6Q5AAB5yT4FUg5XY0X1IQvX8y0=","output_base64sha512":"r22Ig/7ZvODa50OlAoSE3a7NFmhcFTS6Z8kwmdLfszIvJWZhK2Pn0XJPxuEy1Xii8ewo+bCQ2sL1MzPeeoSj2Q==","output_file_mode":null,"output_md5":"d2456d9d0d6a19b7398d8c934d641ead","output_path":"modules/heritage/tmp/lambda_function.zip","output_sha":"a13e4c84c4877debd7b50fac7f64d4b3fb03de8c","output_sha256":"00bfab0f37af5a46e1896d309fa439000079c93e05520e576345f5210bd7f32d","output_sha512":"af6d8883fed9bce0dae743a5028484ddaecd16685c1534ba67c93099d2dfb3322f2566612b63e7d1724fc6e132d578a2f1ec28f9b090dac2f53333de7a84a3d9","output_size":270,"source":[{"content":"exports.handler = async (event) =\u003e {\n  console.log(\"Event: \", event);\n  return {\n    statusCode: 200,\n    body: JSON.stringify('Hello from Lambda!'),\n  };\n};\n","filename":"index.js"}],"source_content":null,"source_content_filename":null,"source_dir":null,"source_file":null,"type":"zip"},"sensitive_values":{"source":[{}]}},{"address":"module.heritage[0].data.aws_canonical_user_id.current","mode":"data","type":"aws_canonical_user_id","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"display_name":"","id":"05d918fa182ad8f3fa915436354b8657e3c2c59b326ecbfc43e6c00451268d0a"},"sensitive_values":{}},{"address":"module.heritage[0].data.aws_cloudfront_log_delivery_canonical_user_id.cloudfront","mode":"data","type":"aws_cloudfront_log_delivery_canonical_user_id","name":"cloudfront","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"c4c1ede66af53448b93c283ce9448c4ba468c9432aa01d700d3878632f77d2d0","region":null},"sensitive_values":{}},{"address":"module.heritage[0].data.aws_iam_policy_document.s3_policy","mode":"data","type":"aws_iam_policy_document","name":"s3_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"3168590628","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"s3:GetObject\",\n      \"Resource\": \"arn:aws:s3:::s3-one-adequate-gibbon20251117232020021100000002/static/*\",\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::cloudfront:user/CloudFront Origin Access Identity E3773WNTKP0C2U\"\n      }\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"s3:GetObject\",\n      \"Resource\": \"arn:aws:s3:::s3-one-adequate-gibbon20251117232020021100000002/static/*\",\n      \"Principal\": {\n        \"Service\": \"cloudfront.amazonaws.com\"\n      },\n      \"Condition\": {\n        \"StringEquals\": {\n          \"aws:SourceArn\": \"arn:aws:cloudfront::540044833068:distribution/EX4HFUQMZ2ULI\"\n        }\n      }\n    }\n  ]\n}","minified_json":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Action\":\"s3:GetObject\",\"Resource\":\"arn:aws:s3:::s3-one-adequate-gibbon20251117232020021100000002/static/*\",\"Principal\":{\"AWS\":\"arn:aws:iam::cloudfront:user/CloudFront Origin Access Identity E3773WNTKP0C2U\"}},{\"Effect\":\"Allow\",\"Action\":\"s3:GetObject\",\"Resource\":\"arn:aws:s3:::s3-one-adequate-gibbon20251117232020021100000002/static/*\",\"Principal\":{\"Service\":\"cloudfront.amazonaws.com\"},\"Condition\":{\"StringEquals\":{\"aws:SourceArn\":\"arn:aws:cloudfront::540044833068:distribution/EX4HFUQMZ2ULI\"}}}]}","override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["s3:GetObject"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":["arn:aws:iam::cloudfront:user/CloudFront Origin Access Identity E3773WNTKP0C2U"],"type":"AWS"}],"resources":["arn:aws:s3:::s3-one-adequate-gibbon20251117232020021100000002/static/*"],"sid":""},{"actions":["s3:GetObject"],"condition":[{"test":"StringEquals","values":["arn:aws:cloudfront::540044833068:distribution/EX4HFUQMZ2ULI"],"variable":"aws:SourceArn"}],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":["cloudfront.amazonaws.com"],"type":"Service"}],"resources":["arn:aws:s3:::s3-one-adequate-gibbon20251117232020021100000002/static/*"],"sid":""}],"version":"2012-10-17"},"sensitive_values":{"statement":[{"actions":[false],"condition":[],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":[false]}],"resources":[false]},{"actions":[false],"condition":[{"values":[false]}],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":[false]}],"resources":[false]}]}},{"address":"module.heritage[0].data.aws_route53_zone.demo","mode":"data","type":"aws_route53_zone","name":"demo","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:route53:::hostedzone/Z0909695IU5SU6N8UFON","caller_reference":"4b9fee1a-de83-46b9-b31b-97c5109d6fe2","comment":"","id":"Z0909695IU5SU6N8UFON","linked_service_description":null,"linked_service_principal":null,"name":"overmind-terraform-example.com","name_servers":["ns-1821.awsdns-35.co.uk","ns-736.awsdns-28.net","ns-1148.awsdns-15.org","ns-490.awsdns-61.com"],"primary_name_server":"ns-1821.awsdns-35.co.uk","private_zone":false,"resource_record_set_count":4,"tags":{},"vpc_id":null,"zone_id":"Z0909695IU5SU6N8UFON"},"sensitive_values":{"name_servers":[false,false,false,false],"tags":{}}},{"address":"module.heritage[0].data.aws_ssm_parameter.amzn2_latest","mode":"data","type":"aws_ssm_parameter","name":"amzn2_latest","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ssm:eu-west-2::parameter/aws/service/ami-amazon-linux-latest/amzn2-ami-hvm-x86_64-gp2","id":"/aws/service/ami-amazon-linux-latest/amzn2-ami-hvm-x86_64-gp2","insecure_value":"ami-0ad8de99ac93341e7","name":"/aws/service/ami-amazon-linux-latest/amzn2-ami-hvm-x86_64-gp2","type":"String","value":"ami-0ad8de99ac93341e7","version":172,"with_decryption":true},"sensitive_values":{"value":true}},{"address":"module.heritage[0].aws_autoscaling_group.my_asg","mode":"managed","type":"aws_autoscaling_group","name":"my_asg","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:autoscaling:eu-west-2:540044833068:autoScalingGroup:f58ef987-cb0b-45e2-92fa-de63356d33f4:autoScalingGroupName/asg-change-test-asg-terraform-example","availability_zone_distribution":[{"capacity_distribution_strategy":"balanced-best-effort"}],"availability_zones":["eu-west-2a","eu-west-2b"],"capacity_rebalance":false,"capacity_reservation_specification":[{"capacity_reservation_preference":"default","capacity_reservation_target":[]}],"context":"","default_cooldown":300,"default_instance_warmup":0,"desired_capacity":1,"desired_capacity_type":"","enabled_metrics":[],"force_delete":false,"force_delete_warm_pool":false,"health_check_grace_period":300,"health_check_type":"EC2","id":"asg-change-test-asg-terraform-example","ignore_failed_scaling_activities":false,"initial_lifecycle_hook":[],"instance_maintenance_policy":[],"instance_refresh":[],"launch_configuration":"","launch_template":[{"id":"lt-04dc7394984712fe8","name":"asg-change-launch-template-terraform-example2025111723203932490000000b","version":"$Latest"}],"load_balancers":[],"max_instance_lifetime":0,"max_size":2,"metrics_granularity":"1Minute","min_elb_capacity":null,"min_size":0,"mixed_instances_policy":[],"name":"asg-change-test-asg-terraform-example","name_prefix":"","placement_group":"","predicted_capacity":0,"protect_from_scale_in":false,"service_linked_role_arn":"arn:aws:iam::540044833068:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling","suspended_processes":[],"tag":[],"target_group_arns":["arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/asg-change-tg-terraform-example/d9fca32e6f2d362a"],"termination_policies":[],"timeouts":null,"traffic_source":[{"identifier":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/asg-change-tg-terraform-example/d9fca32e6f2d362a","type":"elbv2"}],"vpc_zone_identifier":["subnet-07fc72cf57c70e4f0","subnet-0a1b287732e8ad0b7"],"wait_for_capacity_timeout":"10m","wait_for_elb_capacity":null,"warm_pool":[],"warm_pool_size":0},"sensitive_values":{"availability_zone_distribution":[{}],"availability_zones":[false,false],"capacity_reservation_specification":[{"capacity_reservation_target":[]}],"enabled_metrics":[],"initial_lifecycle_hook":[],"instance_maintenance_policy":[],"instance_refresh":[],"launch_template":[{}],"load_balancers":[],"mixed_instances_policy":[],"suspended_processes":[],"tag":[],"target_group_arns":[false],"termination_policies":[],"traffic_source":[{}],"vpc_zone_identifier":[false,false],"warm_pool":[]},"depends_on":["module.baseline.data.aws_ami.amazon_linux","module.baseline.module.vpc.aws_subnet.public","module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this","module.heritage.aws_launch_template.my_launch_template","module.heritage.aws_lb_target_group.my_target_group"]},{"address":"module.heritage[0].aws_cloudfront_cache_policy.headers_based_policy","mode":"managed","type":"aws_cloudfront_cache_policy","name":"headers_based_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:cloudfront::540044833068:cache-policy/8e5fa4ea-50a6-44f8-86e8-3ca690bd9373","comment":"Cache policy that forwards Authorization and Accept-Language headers","default_ttl":86400,"etag":"E23ZP02F085DFQ","id":"8e5fa4ea-50a6-44f8-86e8-3ca690bd9373","max_ttl":31536000,"min_ttl":60,"name":"CacheHeadersBasedPolicy","parameters_in_cache_key_and_forwarded_to_origin":[{"cookies_config":[{"cookie_behavior":"none","cookies":[]}],"enable_accept_encoding_brotli":true,"enable_accept_encoding_gzip":true,"headers_config":[{"header_behavior":"whitelist","headers":[{"items":["Accept-Language","Authorization"]}]}],"query_strings_config":[{"query_string_behavior":"none","query_strings":[]}]}]},"sensitive_values":{"parameters_in_cache_key_and_forwarded_to_origin":[{"cookies_config":[{"cookies":[]}],"headers_config":[{"headers":[{"items":[false,false]}]}],"query_strings_config":[{"query_strings":[]}]}]}},{"address":"module.heritage[0].aws_cloudfront_distribution.s3_distribution","mode":"managed","type":"aws_cloudfront_distribution","name":"s3_distribution","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"aliases":[],"arn":"arn:aws:cloudfront::540044833068:distribution/E20U4HMGWRXZ4I","caller_reference":"terraform-20251117232026081500000009","comment":"Some comment","continuous_deployment_policy_id":"","custom_error_response":[],"default_cache_behavior":[{"allowed_methods":["DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT"],"cache_policy_id":"8e5fa4ea-50a6-44f8-86e8-3ca690bd9373","cached_methods":["GET","HEAD"],"compress":false,"default_ttl":0,"field_level_encryption_id":"","forwarded_values":[],"function_association":[],"grpc_config":[{"enabled":false}],"lambda_function_association":[],"max_ttl":0,"min_ttl":0,"origin_request_policy_id":"414eb566-4bb3-49d1-a868-0ee739830440","realtime_log_config_arn":"","response_headers_policy_id":"","smooth_streaming":false,"target_origin_id":"myS3Origin","trusted_key_groups":[],"trusted_signers":[],"viewer_protocol_policy":"redirect-to-https"}],"default_root_object":"index.html","domain_name":"d29emlm9rqxoo7.cloudfront.net","enabled":true,"etag":"E239IB0COYAEWZ","hosted_zone_id":"Z2FDTNDATAQYW2","http_version":"http2","id":"E20U4HMGWRXZ4I","in_progress_validation_batches":0,"is_ipv6_enabled":true,"last_modified_time":"2025-11-17 23:20:26.178 +0000 UTC","logging_config":[],"ordered_cache_behavior":[{"allowed_methods":["GET","HEAD","OPTIONS"],"cache_policy_id":"","cached_methods":["GET","HEAD","OPTIONS"],"compress":true,"default_ttl":0,"field_level_encryption_id":"","forwarded_values":[{"cookies":[{"forward":"none","whitelisted_names":[]}],"headers":["Origin"],"query_string":false,"query_string_cache_keys":[]}],"function_association":[],"grpc_config":[{"enabled":false}],"lambda_function_association":[],"max_ttl":0,"min_ttl":0,"origin_request_policy_id":"","path_pattern":"/content/immutable/*","realtime_log_config_arn":"","response_headers_policy_id":"c7fd455f-1fa8-4632-9a22-fef9a58b69a9","smooth_streaming":false,"target_origin_id":"myS3Origin","trusted_key_groups":[],"trusted_signers":[],"viewer_protocol_policy":"redirect-to-https"},{"allowed_methods":["GET","HEAD","OPTIONS"],"cache_policy_id":"8e5fa4ea-50a6-44f8-86e8-3ca690bd9373","cached_methods":["GET","HEAD"],"compress":true,"default_ttl":0,"field_level_encryption_id":"","forwarded_values":[],"function_association":[],"grpc_config":[{"enabled":false}],"lambda_function_association":[],"max_ttl":0,"min_ttl":0,"origin_request_policy_id":"414eb566-4bb3-49d1-a868-0ee739830440","path_pattern":"/content/*","realtime_log_config_arn":"","response_headers_policy_id":"","smooth_streaming":false,"target_origin_id":"myS3Origin","trusted_key_groups":[],"trusted_signers":[],"viewer_protocol_policy":"redirect-to-https"}],"origin":[{"connection_attempts":3,"connection_timeout":10,"custom_header":[],"custom_origin_config":[],"domain_name":"second-example-brave-crappie20251117232021571800000004.s3.eu-west-2.amazonaws.com","origin_access_control_id":"E2Z0P6Y1TOEHYP","origin_id":"myS3Origin","origin_path":"","origin_shield":[],"s3_origin_config":[],"vpc_origin_config":[]}],"origin_group":[],"price_class":"PriceClass_200","restrictions":[{"geo_restriction":[{"locations":["CA","DE","GB","US"],"restriction_type":"whitelist"}]}],"retain_on_delete":false,"staging":false,"status":"Deployed","tags":{"Environment":"production"},"tags_all":{"Environment":"production"},"trusted_key_groups":[{"enabled":false,"items":[]}],"trusted_signers":[{"enabled":false,"items":[]}],"viewer_certificate":[{"acm_certificate_arn":"","cloudfront_default_certificate":true,"iam_certificate_id":"","minimum_protocol_version":"TLSv1","ssl_support_method":""}],"wait_for_deployment":true,"web_acl_id":""},"sensitive_values":{"aliases":[],"custom_error_response":[],"default_cache_behavior":[{"allowed_methods":[false,false,false,false,false,false,false],"cached_methods":[false,false],"forwarded_values":[],"function_association":[],"grpc_config":[{}],"lambda_function_association":[],"trusted_key_groups":[],"trusted_signers":[]}],"logging_config":[],"ordered_cache_behavior":[{"allowed_methods":[false,false,false],"cached_methods":[false,false,false],"forwarded_values":[{"cookies":[{"whitelisted_names":[]}],"headers":[false],"query_string_cache_keys":[]}],"function_association":[],"grpc_config":[{}],"lambda_function_association":[],"trusted_key_groups":[],"trusted_signers":[]},{"allowed_methods":[false,false,false],"cached_methods":[false,false],"forwarded_values":[],"function_association":[],"grpc_config":[{}],"lambda_function_association":[],"trusted_key_groups":[],"trusted_signers":[]}],"origin":[{"custom_header":[],"custom_origin_config":[],"origin_shield":[],"s3_origin_config":[],"vpc_origin_config":[]}],"origin_group":[],"restrictions":[{"geo_restriction":[{"locations":[false,false,false,false]}]}],"tags":{},"tags_all":{},"trusted_key_groups":[{"items":[]}],"trusted_signers":[{"items":[]}],"viewer_certificate":[{}]},"depends_on":["module.heritage.aws_cloudfront_cache_policy.headers_based_policy","module.heritage.aws_cloudfront_origin_access_control.b","module.heritage.aws_cloudfront_origin_request_policy.headers_based_policy","module.heritage.aws_cloudfront_response_headers_policy.headers-policy","module.heritage.aws_s3_bucket.b","module.heritage.random_pet.second"]},{"address":"module.heritage[0].aws_cloudfront_distribution.visit_counter","mode":"managed","type":"aws_cloudfront_distribution","name":"visit_counter","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"aliases":[],"arn":"arn:aws:cloudfront::540044833068:distribution/E3LNWJXM6AF7NY","caller_reference":"terraform-20251117232423282000000017","comment":null,"continuous_deployment_policy_id":"","custom_error_response":[],"default_cache_behavior":[{"allowed_methods":["DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT"],"cache_policy_id":"8e5fa4ea-50a6-44f8-86e8-3ca690bd9373","cached_methods":["GET","HEAD"],"compress":false,"default_ttl":0,"field_level_encryption_id":"","forwarded_values":[],"function_association":[],"grpc_config":[{"enabled":false}],"lambda_function_association":[],"max_ttl":0,"min_ttl":0,"origin_request_policy_id":"414eb566-4bb3-49d1-a868-0ee739830440","realtime_log_config_arn":"","response_headers_policy_id":"c7fd455f-1fa8-4632-9a22-fef9a58b69a9","smooth_streaming":false,"target_origin_id":"visit-counter-ecs","trusted_key_groups":[],"trusted_signers":[],"viewer_protocol_policy":"redirect-to-https"}],"default_root_object":"index.html","domain_name":"d3qzo4ltspunma.cloudfront.net","enabled":true,"etag":"E3BS17IG773009","hosted_zone_id":"Z2FDTNDATAQYW2","http_version":"http2","id":"E3LNWJXM6AF7NY","in_progress_validation_batches":0,"is_ipv6_enabled":true,"last_modified_time":"2025-11-17 23:24:23.581 +0000 UTC","logging_config":[],"ordered_cache_behavior":[],"origin":[{"connection_attempts":3,"connection_timeout":10,"custom_header":[],"custom_origin_config":[{"http_port":80,"https_port":443,"origin_keepalive_timeout":5,"origin_protocol_policy":"http-only","origin_read_timeout":30,"origin_ssl_protocols":["TLSv1.1","TLSv1.2"]}],"domain_name":"visits-terraform-example.overmind-terraform-example.com","origin_access_control_id":"","origin_id":"visit-counter-ecs","origin_path":"","origin_shield":[],"s3_origin_config":[],"vpc_origin_config":[]}],"origin_group":[],"price_class":"PriceClass_All","restrictions":[{"geo_restriction":[{"locations":[],"restriction_type":"none"}]}],"retain_on_delete":false,"staging":false,"status":"Deployed","tags":{},"tags_all":{},"trusted_key_groups":[{"enabled":false,"items":[]}],"trusted_signers":[{"enabled":false,"items":[]}],"viewer_certificate":[{"acm_certificate_arn":"","cloudfront_default_certificate":true,"iam_certificate_id":"","minimum_protocol_version":"TLSv1","ssl_support_method":""}],"wait_for_deployment":true,"web_acl_id":""},"sensitive_values":{"aliases":[],"custom_error_response":[],"default_cache_behavior":[{"allowed_methods":[false,false,false,false,false,false,false],"cached_methods":[false,false],"forwarded_values":[],"function_association":[],"grpc_config":[{}],"lambda_function_association":[],"trusted_key_groups":[],"trusted_signers":[]}],"logging_config":[],"ordered_cache_behavior":[],"origin":[{"custom_header":[],"custom_origin_config":[{"origin_ssl_protocols":[false,false]}],"origin_shield":[],"s3_origin_config":[],"vpc_origin_config":[]}],"origin_group":[],"restrictions":[{"geo_restriction":[{"locations":[]}]}],"tags":{},"tags_all":{},"trusted_key_groups":[{"items":[]}],"trusted_signers":[{"items":[]}],"viewer_certificate":[{}]},"depends_on":["module.baseline.module.vpc.aws_subnet.public","module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this","module.heritage.aws_cloudfront_cache_policy.headers_based_policy","module.heritage.aws_cloudfront_origin_request_policy.headers_based_policy","module.heritage.aws_cloudfront_response_headers_policy.headers-policy","module.heritage.aws_lb.main","module.heritage.aws_route53_record.visit_counter","module.heritage.data.aws_route53_zone.demo"]},{"address":"module.heritage[0].aws_cloudfront_function.example","mode":"managed","type":"aws_cloudfront_function","name":"example","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:cloudfront::540044833068:function/terraform-example-adequate-gibbon","code":"function handler(event) {\n    // NOTE: This example function is for a viewer request event trigger. \n    // Choose viewer request for event trigger when you associate this function with a distribution. \n    var response = {\n        statusCode: 302,\n        statusDescription: 'Found',\n        headers: {\n        'cloudfront-functions': { value: 'generated-by-CloudFront-Functions' },\n        'location': { value: 'https://aws.amazon.com/cloudfront/' }\n        }\n    };\n    return response;\n}","comment":"","etag":"ETVPDKIKX0DER","id":"terraform-example-adequate-gibbon","key_value_store_associations":[],"live_stage_etag":"ETVPDKIKX0DER","name":"terraform-example-adequate-gibbon","publish":true,"runtime":"cloudfront-js-1.0","status":"DEPLOYED"},"sensitive_values":{"key_value_store_associations":[]},"depends_on":["module.heritage.random_pet.this"]},{"address":"module.heritage[0].aws_cloudfront_origin_access_control.b","mode":"managed","type":"aws_cloudfront_origin_access_control","name":"b","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:cloudfront::540044833068:origin-access-control/E2Z0P6Y1TOEHYP","description":"Example Policy","etag":"ETVPDKIKX0DER","id":"E2Z0P6Y1TOEHYP","name":"example-terraform-example","origin_access_control_origin_type":"s3","signing_behavior":"always","signing_protocol":"sigv4"},"sensitive_values":{}},{"address":"module.heritage[0].aws_cloudfront_origin_request_policy.headers_based_policy","mode":"managed","type":"aws_cloudfront_origin_request_policy","name":"headers_based_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:cloudfront::540044833068:origin-request-policy/414eb566-4bb3-49d1-a868-0ee739830440","comment":"This policy forwards specific headers to the origin","cookies_config":[{"cookie_behavior":"none","cookies":[]}],"etag":"E23ZP02F085DFQ","headers_config":[{"header_behavior":"whitelist","headers":[{"items":["User-Agent"]}]}],"id":"414eb566-4bb3-49d1-a868-0ee739830440","name":"OriginHeadersBasedPolicy","query_strings_config":[{"query_string_behavior":"none","query_strings":[]}]},"sensitive_values":{"cookies_config":[{"cookies":[]}],"headers_config":[{"headers":[{"items":[false]}]}],"query_strings_config":[{"query_strings":[]}]}},{"address":"module.heritage[0].aws_cloudfront_response_headers_policy.headers-policy","mode":"managed","type":"aws_cloudfront_response_headers_policy","name":"headers-policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:cloudfront::540044833068:response-headers-policy/c7fd455f-1fa8-4632-9a22-fef9a58b69a9","comment":"This controls which headers are cached for baseline applications. This includes headers that are safe to cache","cors_config":[{"access_control_allow_credentials":false,"access_control_allow_headers":[{"items":["Accept","Accept-Encoding","Content-Encoding","Content-Length","Content-Type"]}],"access_control_allow_methods":[{"items":["GET"]}],"access_control_allow_origins":[{"items":["storage.overmind-demo.com"]}],"access_control_expose_headers":[],"access_control_max_age_sec":0,"origin_override":true}],"custom_headers_config":[],"etag":"E23ZP02F085DFQ","id":"c7fd455f-1fa8-4632-9a22-fef9a58b69a9","name":"baseline-terraform-example","remove_headers_config":[],"security_headers_config":[],"server_timing_headers_config":[]},"sensitive_values":{"cors_config":[{"access_control_allow_headers":[{"items":[false,false,false,false,false]}],"access_control_allow_methods":[{"items":[false]}],"access_control_allow_origins":[{"items":[false]}],"access_control_expose_headers":[]}],"custom_headers_config":[],"remove_headers_config":[],"security_headers_config":[],"server_timing_headers_config":[]}},{"address":"module.heritage[0].aws_db_subnet_group.default","mode":"managed","type":"aws_db_subnet_group","name":"default","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:rds:eu-west-2:540044833068:subgrp:main-terraform-example","description":"Managed by Terraform","id":"main-terraform-example","name":"main-terraform-example","name_prefix":"","subnet_ids":["subnet-09605cfe202ef69e7","subnet-0eae990ebecf2d640"],"supported_network_types":["IPV4"],"tags":{"Name":"Default DB Subnet Group for terraform-example"},"tags_all":{"Name":"Default DB Subnet Group for terraform-example"},"vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"subnet_ids":[false,false],"supported_network_types":[false],"tags":{},"tags_all":{}},"depends_on":["module.baseline.module.vpc.aws_subnet.private","module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this"]},{"address":"module.heritage[0].aws_ecs_service.face","mode":"managed","type":"aws_ecs_service","name":"face","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"alarms":[],"availability_zone_rebalancing":"DISABLED","capacity_provider_strategy":[{"base":0,"capacity_provider":"FARGATE","weight":100}],"cluster":"arn:aws:ecs:eu-west-2:540044833068:cluster/example-terraform-example","deployment_circuit_breaker":[{"enable":false,"rollback":false}],"deployment_controller":[{"type":"ECS"}],"deployment_maximum_percent":200,"deployment_minimum_healthy_percent":100,"desired_count":1,"enable_ecs_managed_tags":false,"enable_execute_command":false,"force_delete":null,"force_new_deployment":null,"health_check_grace_period_seconds":0,"iam_role":"/aws-service-role/ecs.amazonaws.com/AWSServiceRoleForECS","id":"arn:aws:ecs:eu-west-2:540044833068:service/example-terraform-example/facial-recognition","launch_type":"","load_balancer":[{"container_name":"facial-recognition","container_port":1234,"elb_name":"","target_group_arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/facerec-terraform-example/ccde9b5e810e9a5d"}],"name":"facial-recognition","network_configuration":[{"assign_public_ip":false,"security_groups":["sg-0159f0e3d8224d441"],"subnets":["subnet-09605cfe202ef69e7","subnet-0eae990ebecf2d640"]}],"ordered_placement_strategy":[],"placement_constraints":[],"platform_version":"LATEST","propagate_tags":"NONE","scheduling_strategy":"REPLICA","service_connect_configuration":[],"service_registries":[],"tags":{},"tags_all":{},"task_definition":"arn:aws:ecs:eu-west-2:540044833068:task-definition/facial-recognition-terraform-example:9","timeouts":null,"triggers":{},"volume_configuration":[],"vpc_lattice_configurations":[],"wait_for_steady_state":false},"sensitive_values":{"alarms":[],"capacity_provider_strategy":[{}],"deployment_circuit_breaker":[{}],"deployment_controller":[{}],"load_balancer":[{}],"network_configuration":[{"security_groups":[false],"subnets":[false,false]}],"ordered_placement_strategy":[],"placement_constraints":[],"service_connect_configuration":[],"service_registries":[],"tags":{},"tags_all":{},"triggers":{},"volume_configuration":[],"vpc_lattice_configurations":[]},"depends_on":["module.baseline.module.vpc.aws_subnet.private","module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this","module.heritage.aws_db_subnet_group.default","module.heritage.aws_ecs_task_definition.face","module.heritage.aws_lb_target_group.face","module.heritage.aws_rds_cluster.face_database","module.heritage.aws_rds_cluster_instance.face_database","module.heritage.module.ecs.module.cluster.aws_cloudwatch_log_group.this","module.heritage.module.ecs.module.cluster.aws_ecs_cluster.this"]},{"address":"module.heritage[0].aws_ecs_service.visit_counter","mode":"managed","type":"aws_ecs_service","name":"visit_counter","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"alarms":[],"availability_zone_rebalancing":"DISABLED","capacity_provider_strategy":[{"base":0,"capacity_provider":"FARGATE","weight":100}],"cluster":"arn:aws:ecs:eu-west-2:540044833068:cluster/example-terraform-example","deployment_circuit_breaker":[{"enable":false,"rollback":false}],"deployment_controller":[{"type":"ECS"}],"deployment_maximum_percent":200,"deployment_minimum_healthy_percent":100,"desired_count":1,"enable_ecs_managed_tags":false,"enable_execute_command":false,"force_delete":null,"force_new_deployment":null,"health_check_grace_period_seconds":0,"iam_role":"/aws-service-role/ecs.amazonaws.com/AWSServiceRoleForECS","id":"arn:aws:ecs:eu-west-2:540044833068:service/example-terraform-example/visit-counter","launch_type":"","load_balancer":[{"container_name":"visit-counter","container_port":80,"elb_name":"","target_group_arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/visit-counter-terraform-example/5683104d7610bc44"}],"name":"visit-counter","network_configuration":[{"assign_public_ip":false,"security_groups":["sg-0159f0e3d8224d441"],"subnets":["subnet-09605cfe202ef69e7","subnet-0eae990ebecf2d640"]}],"ordered_placement_strategy":[],"placement_constraints":[],"platform_version":"LATEST","propagate_tags":"NONE","scheduling_strategy":"REPLICA","service_connect_configuration":[],"service_registries":[],"tags":{},"tags_all":{},"task_definition":"arn:aws:ecs:eu-west-2:540044833068:task-definition/visit-counter-terraform-example:11","timeouts":null,"triggers":{},"volume_configuration":[],"vpc_lattice_configurations":[],"wait_for_steady_state":false},"sensitive_values":{"alarms":[],"capacity_provider_strategy":[{}],"deployment_circuit_breaker":[{}],"deployment_controller":[{}],"load_balancer":[{}],"network_configuration":[{"security_groups":[false],"subnets":[false,false]}],"ordered_placement_strategy":[],"placement_constraints":[],"service_connect_configuration":[],"service_registries":[],"tags":{},"tags_all":{},"triggers":{},"volume_configuration":[],"vpc_lattice_configurations":[]},"depends_on":["module.baseline.module.vpc.aws_subnet.private","module.baseline.module.vpc.aws_subnet.public","module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this","module.heritage.aws_ecs_task_definition.visit_counter","module.heritage.aws_lb.main","module.heritage.aws_lb_target_group.visit_counter","module.heritage.aws_route53_record.face","module.heritage.data.aws_route53_zone.demo","module.heritage.module.ecs.module.cluster.aws_cloudwatch_log_group.this","module.heritage.module.ecs.module.cluster.aws_ecs_cluster.this"]},{"address":"module.heritage[0].aws_ecs_task_definition.face","mode":"managed","type":"aws_ecs_task_definition","name":"face","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ecs:eu-west-2:540044833068:task-definition/facial-recognition-terraform-example:9","arn_without_revision":"arn:aws:ecs:eu-west-2:540044833068:task-definition/facial-recognition-terraform-example","container_definitions":"[{\"cpu\":1024,\"environment\":[{\"name\":\"DATABASE_URL\",\"value\":\"tf-20251117235257281600000001.cnx7xf6hwmba.eu-west-2.rds.amazonaws.com\"}],\"essential\":true,\"healthCheck\":{\"command\":[\"CMD-SHELL\",\"wget -q --spider localhost:1234\"],\"interval\":30,\"retries\":3,\"timeout\":5},\"image\":\"harshmanvar/face-detection-tensorjs:slim-amd\",\"memory\":2048,\"mountPoints\":[],\"name\":\"facial-recognition\",\"portMappings\":[{\"appProtocol\":\"http\",\"containerPort\":1234,\"hostPort\":1234,\"protocol\":\"tcp\"}],\"systemControls\":[],\"volumesFrom\":[]}]","cpu":"1024","enable_fault_injection":false,"ephemeral_storage":[],"execution_role_arn":"","family":"facial-recognition-terraform-example","id":"facial-recognition-terraform-example","inference_accelerator":[],"ipc_mode":"","memory":"2048","network_mode":"awsvpc","pid_mode":"","placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":["FARGATE"],"revision":9,"runtime_platform":[],"skip_destroy":false,"tags":{},"tags_all":{},"task_role_arn":"","track_latest":false,"volume":[]},"sensitive_values":{"ephemeral_storage":[],"inference_accelerator":[],"placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":[false],"runtime_platform":[],"tags":{},"tags_all":{},"volume":[]},"depends_on":["module.baseline.module.vpc.aws_subnet.private","module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this","module.heritage.aws_db_subnet_group.default","module.heritage.aws_rds_cluster.face_database","module.heritage.aws_rds_cluster_instance.face_database"]},{"address":"module.heritage[0].aws_ecs_task_definition.visit_counter","mode":"managed","type":"aws_ecs_task_definition","name":"visit_counter","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ecs:eu-west-2:540044833068:task-definition/visit-counter-terraform-example:11","arn_without_revision":"arn:aws:ecs:eu-west-2:540044833068:task-definition/visit-counter-terraform-example","container_definitions":"[{\"cpu\":256,\"environment\":[{\"name\":\"FACIAL_RECOGNITION_SERVICE\",\"value\":\"face-terraform-example.overmind-terraform-example.com\"},{\"name\":\"FACIAL_RECOGNITION_SERVICE_USER\",\"value\":\"facerec\"}],\"essential\":true,\"healthCheck\":{\"command\":[\"CMD-SHELL\",\"curl -f http://localhost:80 || exit 1\"],\"interval\":30,\"retries\":3,\"timeout\":5},\"image\":\"yeasy/simple-web:latest\",\"memory\":512,\"mountPoints\":[],\"name\":\"visit-counter\",\"portMappings\":[{\"appProtocol\":\"http\",\"containerPort\":80,\"hostPort\":80,\"protocol\":\"tcp\"}],\"systemControls\":[],\"volumesFrom\":[]}]","cpu":"256","enable_fault_injection":false,"ephemeral_storage":[],"execution_role_arn":"","family":"visit-counter-terraform-example","id":"visit-counter-terraform-example","inference_accelerator":[],"ipc_mode":"","memory":"512","network_mode":"awsvpc","pid_mode":"","placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":["FARGATE"],"revision":11,"runtime_platform":[],"skip_destroy":false,"tags":{},"tags_all":{},"task_role_arn":"","track_latest":false,"volume":[]},"sensitive_values":{"ephemeral_storage":[],"inference_accelerator":[],"placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":[false],"runtime_platform":[],"tags":{},"tags_all":{},"volume":[]},"depends_on":["module.baseline.module.vpc.aws_subnet.public","module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this","module.heritage.aws_lb.main","module.heritage.aws_route53_record.face","module.heritage.data.aws_route53_zone.demo"]},{"address":"module.heritage[0].aws_iam_role.lambda_iam_role","mode":"managed","type":"aws_iam_role","name":"lambda_iam_role","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::540044833068:role/-terraform-example_lambda_iam_role","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}","create_date":"2025-11-17T23:20:21Z","description":"","force_detach_policies":false,"id":"-terraform-example_lambda_iam_role","inline_policy":[],"managed_policy_arns":[],"max_session_duration":3600,"name":"-terraform-example_lambda_iam_role","name_prefix":"","path":"/","permissions_boundary":"","tags":{},"tags_all":{},"unique_id":"AROAX3PJOGEWBYSCV5QFP"},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags":{},"tags_all":{}}},{"address":"module.heritage[0].aws_instance.app_server","mode":"managed","type":"aws_instance","name":"app_server","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"ami":"ami-0ad8de99ac93341e7","arn":"arn:aws:ec2:eu-west-2:540044833068:instance/i-07072e97b42111cc0","associate_public_ip_address":true,"availability_zone":"eu-west-2b","capacity_reservation_specification":[{"capacity_reservation_preference":"open","capacity_reservation_target":[]}],"cpu_core_count":1,"cpu_options":[{"amd_sev_snp":"","core_count":1,"threads_per_core":2}],"cpu_threads_per_core":2,"credit_specification":[{"cpu_credits":"unlimited"}],"disable_api_stop":false,"disable_api_termination":false,"ebs_block_device":[],"ebs_optimized":false,"enable_primary_ipv6":null,"enclave_options":[{"enabled":false}],"ephemeral_block_device":[],"get_password_data":false,"hibernation":false,"host_id":"","host_resource_group_arn":null,"iam_instance_profile":"","id":"i-07072e97b42111cc0","instance_initiated_shutdown_behavior":"stop","instance_lifecycle":"","instance_market_options":[],"instance_state":"running","instance_type":"t3.small","ipv6_address_count":0,"ipv6_addresses":[],"key_name":"Demo Key Pair","launch_template":[],"maintenance_options":[{"auto_recovery":"default"}],"metadata_options":[{"http_endpoint":"enabled","http_protocol_ipv6":"disabled","http_put_response_hop_limit":1,"http_tokens":"optional","instance_metadata_tags":"disabled"}],"monitoring":false,"network_interface":[],"outpost_arn":"","password_data":"","placement_group":"","placement_partition_number":0,"primary_network_interface_id":"eni-04aaec985117a0700","private_dns":"ip-10-0-10-216.eu-west-2.compute.internal","private_dns_name_options":[{"enable_resource_name_dns_a_record":false,"enable_resource_name_dns_aaaa_record":false,"hostname_type":"ip-name"}],"private_ip":"10.0.10.216","public_dns":"ec2-18-133-252-243.eu-west-2.compute.amazonaws.com","public_ip":"18.133.252.243","root_block_device":[{"delete_on_termination":true,"device_name":"/dev/xvda","encrypted":false,"iops":100,"kms_key_id":"","tags":{},"tags_all":{},"throughput":0,"volume_id":"vol-0cbfb7fc868dce7f5","volume_size":8,"volume_type":"gp2"}],"secondary_private_ips":[],"security_groups":[],"source_dest_check":true,"spot_instance_request_id":"","subnet_id":"subnet-0e4cc60d35634e85b","tags":{"Environment":"dev","Name":"App Server"},"tags_all":{"Environment":"dev","Name":"App Server"},"tenancy":"default","timeouts":null,"user_data":null,"user_data_base64":null,"user_data_replace_on_change":false,"volume_tags":null,"vpc_security_group_ids":["sg-057ed2204f81107a5"]},"sensitive_values":{"ami":true,"capacity_reservation_specification":[{"capacity_reservation_target":[]}],"cpu_options":[{}],"credit_specification":[{}],"ebs_block_device":[],"enclave_options":[{}],"ephemeral_block_device":[],"instance_market_options":[],"ipv6_addresses":[],"launch_template":[],"maintenance_options":[{}],"metadata_options":[{}],"network_interface":[],"private_dns_name_options":[{}],"root_block_device":[{"tags":{},"tags_all":{}}],"secondary_private_ips":[],"security_groups":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[false]},"depends_on":["module.baseline.module.vpc.aws_vpc.this","module.heritage.aws_security_group.instance_sg","module.heritage.aws_subnet.restricted-2b","module.heritage.data.aws_ssm_parameter.amzn2_latest"]},{"address":"module.heritage[0].aws_instance.webserver","mode":"managed","type":"aws_instance","name":"webserver","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"ami":"ami-0ad8de99ac93341e7","arn":"arn:aws:ec2:eu-west-2:540044833068:instance/i-012cafc89720d6fb5","associate_public_ip_address":true,"availability_zone":"eu-west-2a","capacity_reservation_specification":[{"capacity_reservation_preference":"open","capacity_reservation_target":[]}],"cpu_core_count":1,"cpu_options":[{"amd_sev_snp":"","core_count":1,"threads_per_core":2}],"cpu_threads_per_core":2,"credit_specification":[{"cpu_credits":"unlimited"}],"disable_api_stop":false,"disable_api_termination":false,"ebs_block_device":[],"ebs_optimized":false,"enable_primary_ipv6":null,"enclave_options":[{"enabled":false}],"ephemeral_block_device":[],"get_password_data":false,"hibernation":false,"host_id":"","host_resource_group_arn":null,"iam_instance_profile":"","id":"i-012cafc89720d6fb5","instance_initiated_shutdown_behavior":"stop","instance_lifecycle":"","instance_market_options":[],"instance_state":"running","instance_type":"t3.small","ipv6_address_count":0,"ipv6_addresses":[],"key_name":"Demo Key Pair","launch_template":[],"maintenance_options":[{"auto_recovery":"default"}],"metadata_options":[{"http_endpoint":"enabled","http_protocol_ipv6":"disabled","http_put_response_hop_limit":1,"http_tokens":"optional","instance_metadata_tags":"disabled"}],"monitoring":false,"network_interface":[],"outpost_arn":"","password_data":"","placement_group":"","placement_partition_number":0,"primary_network_interface_id":"eni-0c2fd58372f61bd60","private_dns":"ip-10-0-9-180.eu-west-2.compute.internal","private_dns_name_options":[{"enable_resource_name_dns_a_record":false,"enable_resource_name_dns_aaaa_record":false,"hostname_type":"ip-name"}],"private_ip":"10.0.9.180","public_dns":"ec2-18-130-74-67.eu-west-2.compute.amazonaws.com","public_ip":"18.130.74.67","root_block_device":[{"delete_on_termination":true,"device_name":"/dev/xvda","encrypted":false,"iops":100,"kms_key_id":"","tags":{},"tags_all":{},"throughput":0,"volume_id":"vol-0073f6dc4599e8523","volume_size":8,"volume_type":"gp2"}],"secondary_private_ips":[],"security_groups":[],"source_dest_check":true,"spot_instance_request_id":"","subnet_id":"subnet-0ec75df66980d2920","tags":{"Environment":"dev","Name":"Webserver"},"tags_all":{"Environment":"dev","Name":"Webserver"},"tenancy":"default","timeouts":null,"user_data":null,"user_data_base64":null,"user_data_replace_on_change":false,"volume_tags":null,"vpc_security_group_ids":["sg-057ed2204f81107a5"]},"sensitive_values":{"ami":true,"capacity_reservation_specification":[{"capacity_reservation_target":[]}],"cpu_options":[{}],"credit_specification":[{}],"ebs_block_device":[],"enclave_options":[{}],"ephemeral_block_device":[],"instance_market_options":[],"ipv6_addresses":[],"launch_template":[],"maintenance_options":[{}],"metadata_options":[{}],"network_interface":[],"private_dns_name_options":[{}],"root_block_device":[{"tags":{},"tags_all":{}}],"secondary_private_ips":[],"security_groups":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[false]},"depends_on":["module.baseline.module.vpc.aws_vpc.this","module.heritage.aws_security_group.instance_sg","module.heritage.aws_subnet.restricted-2a","module.heritage.data.aws_ssm_parameter.amzn2_latest"]},{"address":"module.heritage[0].aws_lambda_function.example","mode":"managed","type":"aws_lambda_function","name":"example","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"architectures":["x86_64"],"arn":"arn:aws:lambda:eu-west-2:540044833068:function:-terraform-example_lambda_function","code_sha256":"AL+rDzevWkbhiW0wn6Q5AAB5yT4FUg5XY0X1IQvX8y0=","code_signing_config_arn":"","dead_letter_config":[],"description":"","environment":[],"ephemeral_storage":[{"size":512}],"file_system_config":[],"filename":"modules/heritage/tmp/lambda_function.zip","function_name":"-terraform-example_lambda_function","handler":"index.handler","id":"-terraform-example_lambda_function","image_config":[],"image_uri":"","invoke_arn":"arn:aws:apigateway:eu-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-2:540044833068:function:-terraform-example_lambda_function/invocations","kms_key_arn":"","last_modified":"2025-12-09T19:44:17.000+0000","layers":[],"logging_config":[{"application_log_level":"","log_format":"Text","log_group":"/aws/lambda/-terraform-example_lambda_function","system_log_level":""}],"memory_size":128,"package_type":"Zip","publish":false,"qualified_arn":"arn:aws:lambda:eu-west-2:540044833068:function:-terraform-example_lambda_function:$LATEST","qualified_invoke_arn":"arn:aws:apigateway:eu-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-2:540044833068:function:-terraform-example_lambda_function:$LATEST/invocations","replace_security_groups_on_destroy":null,"replacement_security_group_ids":null,"reserved_concurrent_executions":-1,"role":"arn:aws:iam::540044833068:role/-terraform-example_lambda_iam_role","runtime":"nodejs20.x","s3_bucket":null,"s3_key":null,"s3_object_version":null,"signing_job_arn":"","signing_profile_version_arn":"","skip_destroy":false,"snap_start":[],"source_code_hash":"AL+rDzevWkbhiW0wn6Q5AAB5yT4FUg5XY0X1IQvX8y0=","source_code_size":270,"tags":{},"tags_all":{},"timeout":3,"timeouts":null,"tracing_config":[{"mode":"PassThrough"}],"version":"$LATEST","vpc_config":[]},"sensitive_values":{"architectures":[false],"dead_letter_config":[],"environment":[],"ephemeral_storage":[{}],"file_system_config":[],"image_config":[],"layers":[],"logging_config":[{}],"snap_start":[],"tags":{},"tags_all":{},"tracing_config":[{}],"vpc_config":[]},"depends_on":["module.heritage.aws_iam_role.lambda_iam_role","module.heritage.data.archive_file.lambda_zip"]},{"address":"module.heritage[0].aws_launch_template.my_launch_template","mode":"managed","type":"aws_launch_template","name":"my_launch_template","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:eu-west-2:540044833068:launch-template/lt-04dc7394984712fe8","block_device_mappings":[],"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"default_version":1,"description":"","disable_api_stop":false,"disable_api_termination":false,"ebs_optimized":"","elastic_gpu_specifications":[],"elastic_inference_accelerator":[],"enclave_options":[],"hibernation_options":[],"iam_instance_profile":[],"id":"lt-04dc7394984712fe8","image_id":"ami-02a95139d1d364420","instance_initiated_shutdown_behavior":"","instance_market_options":[],"instance_requirements":[],"instance_type":"t3.micro","kernel_id":"","key_name":"","latest_version":5,"license_specification":[],"maintenance_options":[],"metadata_options":[],"monitoring":[],"name":"asg-change-launch-template-terraform-example2025111723203932490000000b","name_prefix":"asg-change-launch-template-terraform-example","network_interfaces":[],"placement":[],"private_dns_name_options":[],"ram_disk_id":"","security_group_names":[],"tag_specifications":[],"tags":{},"tags_all":{},"update_default_version":null,"user_data":"","vpc_security_group_ids":["sg-0159f0e3d8224d441"]},"sensitive_values":{"block_device_mappings":[],"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"elastic_gpu_specifications":[],"elastic_inference_accelerator":[],"enclave_options":[],"hibernation_options":[],"iam_instance_profile":[],"instance_market_options":[],"instance_requirements":[],"license_specification":[],"maintenance_options":[],"metadata_options":[],"monitoring":[],"network_interfaces":[],"placement":[],"private_dns_name_options":[],"security_group_names":[],"tag_specifications":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[false]},"depends_on":["module.baseline.data.aws_ami.amazon_linux","module.baseline.module.vpc.aws_vpc.this"]},{"address":"module.heritage[0].aws_lb.main","mode":"managed","type":"aws_lb","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"access_logs":[{"bucket":"","enabled":false,"prefix":""}],"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:loadbalancer/app/terraform-example/16bbb139e6d96ffb","arn_suffix":"app/terraform-example/16bbb139e6d96ffb","client_keep_alive":3600,"connection_logs":[{"bucket":"","enabled":false,"prefix":""}],"customer_owned_ipv4_pool":"","desync_mitigation_mode":"defensive","dns_name":"terraform-example-1993925081.eu-west-2.elb.amazonaws.com","dns_record_client_routing_policy":null,"drop_invalid_header_fields":false,"enable_cross_zone_load_balancing":true,"enable_deletion_protection":false,"enable_http2":true,"enable_tls_version_and_cipher_suite_headers":false,"enable_waf_fail_open":false,"enable_xff_client_port":false,"enable_zonal_shift":false,"enforce_security_group_inbound_rules_on_private_link_traffic":"","id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:loadbalancer/app/terraform-example/16bbb139e6d96ffb","idle_timeout":60,"internal":false,"ip_address_type":"ipv4","ipam_pools":[],"load_balancer_type":"application","minimum_load_balancer_capacity":[],"name":"terraform-example","name_prefix":"","preserve_host_header":false,"security_groups":["sg-0159f0e3d8224d441"],"subnet_mapping":[{"allocation_id":"","ipv6_address":"","outpost_id":"","private_ipv4_address":"","subnet_id":"subnet-07fc72cf57c70e4f0"},{"allocation_id":"","ipv6_address":"","outpost_id":"","private_ipv4_address":"","subnet_id":"subnet-0a1b287732e8ad0b7"}],"subnets":["subnet-07fc72cf57c70e4f0","subnet-0a1b287732e8ad0b7"],"tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298","xff_header_processing_mode":"append","zone_id":"ZHURV8PSTC4K8"},"sensitive_values":{"access_logs":[{}],"connection_logs":[{}],"ipam_pools":[],"minimum_load_balancer_capacity":[],"security_groups":[false],"subnet_mapping":[{},{}],"subnets":[false,false],"tags":{},"tags_all":{}},"depends_on":["module.baseline.module.vpc.aws_subnet.public","module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this"]},{"address":"module.heritage[0].aws_lb_listener.http","mode":"managed","type":"aws_lb_listener","name":"http","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"alpn_policy":null,"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:listener/app/terraform-example/16bbb139e6d96ffb/1e73b4b315bff0f1","certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[{"content_type":"text/plain","message_body":"Nothing here...","status_code":"200"}],"forward":[],"order":1,"redirect":[],"target_group_arn":"","type":"fixed-response"}],"id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:listener/app/terraform-example/16bbb139e6d96ffb/1e73b4b315bff0f1","load_balancer_arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:loadbalancer/app/terraform-example/16bbb139e6d96ffb","mutual_authentication":[],"port":80,"protocol":"HTTP","routing_http_request_x_amzn_mtls_clientcert_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_issuer_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_leaf_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_serial_number_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_subject_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_validity_header_name":null,"routing_http_request_x_amzn_tls_cipher_suite_header_name":null,"routing_http_request_x_amzn_tls_version_header_name":null,"routing_http_response_access_control_allow_credentials_header_value":"","routing_http_response_access_control_allow_headers_header_value":"","routing_http_response_access_control_allow_methods_header_value":"","routing_http_response_access_control_allow_origin_header_value":"","routing_http_response_access_control_expose_headers_header_value":"","routing_http_response_access_control_max_age_header_value":"","routing_http_response_content_security_policy_header_value":"","routing_http_response_server_enabled":true,"routing_http_response_strict_transport_security_header_value":"","routing_http_response_x_content_type_options_header_value":"","routing_http_response_x_frame_options_header_value":"","ssl_policy":"","tags":{},"tags_all":{},"tcp_idle_timeout_seconds":null,"timeouts":null},"sensitive_values":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[{}],"forward":[],"redirect":[]}],"mutual_authentication":[],"tags":{},"tags_all":{}},"depends_on":["module.baseline.module.vpc.aws_subnet.public","module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this","module.heritage.aws_lb.main"]},{"address":"module.heritage[0].aws_lb_listener_rule.face","mode":"managed","type":"aws_lb_listener_rule","name":"face","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":1,"redirect":[],"target_group_arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/facerec-terraform-example/ccde9b5e810e9a5d","type":"forward"}],"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:listener-rule/app/terraform-example/16bbb139e6d96ffb/1e73b4b315bff0f1/b0d2ff0e2982cec8","condition":[{"host_header":[{"values":["face-terraform-example.overmind-terraform-example.com"]}],"http_header":[],"http_request_method":[],"path_pattern":[],"query_string":[],"source_ip":[]}],"id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:listener-rule/app/terraform-example/16bbb139e6d96ffb/1e73b4b315bff0f1/b0d2ff0e2982cec8","listener_arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:listener/app/terraform-example/16bbb139e6d96ffb/1e73b4b315bff0f1","priority":99,"tags":{},"tags_all":{}},"sensitive_values":{"action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[]}],"condition":[{"host_header":[{"values":[false]}],"http_header":[],"http_request_method":[],"path_pattern":[],"query_string":[],"source_ip":[]}],"tags":{},"tags_all":{}},"depends_on":["module.baseline.module.vpc.aws_subnet.public","module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this","module.heritage.aws_lb.main","module.heritage.aws_lb_listener.http","module.heritage.aws_lb_target_group.face","module.heritage.aws_route53_record.face","module.heritage.data.aws_route53_zone.demo"]},{"address":"module.heritage[0].aws_lb_listener_rule.visit_counter","mode":"managed","type":"aws_lb_listener_rule","name":"visit_counter","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":1,"redirect":[],"target_group_arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/visit-counter-terraform-example/5683104d7610bc44","type":"forward"}],"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:listener-rule/app/terraform-example/16bbb139e6d96ffb/1e73b4b315bff0f1/e9d949c11c2c2ffb","condition":[{"host_header":[{"values":["visits-terraform-example.overmind-terraform-example.com"]}],"http_header":[],"http_request_method":[],"path_pattern":[],"query_string":[],"source_ip":[]}],"id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:listener-rule/app/terraform-example/16bbb139e6d96ffb/1e73b4b315bff0f1/e9d949c11c2c2ffb","listener_arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:listener/app/terraform-example/16bbb139e6d96ffb/1e73b4b315bff0f1","priority":100,"tags":{},"tags_all":{}},"sensitive_values":{"action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[]}],"condition":[{"host_header":[{"values":[false]}],"http_header":[],"http_request_method":[],"path_pattern":[],"query_string":[],"source_ip":[]}],"tags":{},"tags_all":{}},"depends_on":["module.baseline.module.vpc.aws_subnet.public","module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this","module.heritage.aws_lb.main","module.heritage.aws_lb_listener.http","module.heritage.aws_lb_target_group.visit_counter","module.heritage.aws_route53_record.visit_counter","module.heritage.data.aws_route53_zone.demo"]},{"address":"module.heritage[0].aws_lb_target_group.face","mode":"managed","type":"aws_lb_target_group","name":"face","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/facerec-terraform-example/ccde9b5e810e9a5d","arn_suffix":"targetgroup/facerec-terraform-example/ccde9b5e810e9a5d","connection_termination":null,"deregistration_delay":"300","health_check":[{"enabled":true,"healthy_threshold":2,"interval":40,"matcher":"200","path":"/","port":"traffic-port","protocol":"HTTP","timeout":30,"unhealthy_threshold":3}],"id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/facerec-terraform-example/ccde9b5e810e9a5d","ip_address_type":"ipv4","lambda_multi_value_headers_enabled":false,"load_balancer_arns":["arn:aws:elasticloadbalancing:eu-west-2:540044833068:loadbalancer/app/terraform-example/16bbb139e6d96ffb"],"load_balancing_algorithm_type":"round_robin","load_balancing_anomaly_mitigation":"off","load_balancing_cross_zone_enabled":"use_load_balancer_configuration","name":"facerec-terraform-example","name_prefix":"","port":1234,"preserve_client_ip":null,"protocol":"HTTP","protocol_version":"HTTP1","proxy_protocol_v2":false,"slow_start":0,"stickiness":[{"cookie_duration":86400,"cookie_name":"","enabled":false,"type":"lb_cookie"}],"tags":{},"tags_all":{},"target_failover":[{"on_deregistration":null,"on_unhealthy":null}],"target_group_health":[{"dns_failover":[{"minimum_healthy_targets_count":"1","minimum_healthy_targets_percentage":"off"}],"unhealthy_state_routing":[{"minimum_healthy_targets_count":1,"minimum_healthy_targets_percentage":"off"}]}],"target_health_state":[{"enable_unhealthy_connection_termination":null,"unhealthy_draining_interval":null}],"target_type":"ip","vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"health_check":[{}],"load_balancer_arns":[false],"stickiness":[{}],"tags":{},"tags_all":{},"target_failover":[{}],"target_group_health":[{"dns_failover":[{}],"unhealthy_state_routing":[{}]}],"target_health_state":[{}]},"depends_on":["module.baseline.module.vpc.aws_vpc.this"]},{"address":"module.heritage[0].aws_lb_target_group.my_new_target_group","mode":"managed","type":"aws_lb_target_group","name":"my_new_target_group","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/asg-new-terraform-example/b25da3bfef43543c","arn_suffix":"targetgroup/asg-new-terraform-example/b25da3bfef43543c","connection_termination":null,"deregistration_delay":"300","health_check":[{"enabled":true,"healthy_threshold":3,"interval":30,"matcher":"200","path":"/","port":"traffic-port","protocol":"HTTP","timeout":5,"unhealthy_threshold":3}],"id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/asg-new-terraform-example/b25da3bfef43543c","ip_address_type":"ipv4","lambda_multi_value_headers_enabled":false,"load_balancer_arns":[],"load_balancing_algorithm_type":"round_robin","load_balancing_anomaly_mitigation":"off","load_balancing_cross_zone_enabled":"use_load_balancer_configuration","name":"asg-new-terraform-example","name_prefix":"","port":80,"preserve_client_ip":null,"protocol":"HTTP","protocol_version":"HTTP1","proxy_protocol_v2":false,"slow_start":0,"stickiness":[{"cookie_duration":86400,"cookie_name":"","enabled":false,"type":"lb_cookie"}],"tags":{},"tags_all":{},"target_failover":[{"on_deregistration":null,"on_unhealthy":null}],"target_group_health":[{"dns_failover":[{"minimum_healthy_targets_count":"1","minimum_healthy_targets_percentage":"off"}],"unhealthy_state_routing":[{"minimum_healthy_targets_count":1,"minimum_healthy_targets_percentage":"off"}]}],"target_health_state":[{"enable_unhealthy_connection_termination":null,"unhealthy_draining_interval":null}],"target_type":"instance","vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"health_check":[{}],"load_balancer_arns":[],"stickiness":[{}],"tags":{},"tags_all":{},"target_failover":[{}],"target_group_health":[{"dns_failover":[{}],"unhealthy_state_routing":[{}]}],"target_health_state":[{}]},"depends_on":["module.baseline.module.vpc.aws_vpc.this"]},{"address":"module.heritage[0].aws_lb_target_group.my_target_group","mode":"managed","type":"aws_lb_target_group","name":"my_target_group","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/asg-change-tg-terraform-example/d9fca32e6f2d362a","arn_suffix":"targetgroup/asg-change-tg-terraform-example/d9fca32e6f2d362a","connection_termination":null,"deregistration_delay":"300","health_check":[{"enabled":true,"healthy_threshold":3,"interval":30,"matcher":"200","path":"/","port":"traffic-port","protocol":"HTTP","timeout":5,"unhealthy_threshold":3}],"id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/asg-change-tg-terraform-example/d9fca32e6f2d362a","ip_address_type":"ipv4","lambda_multi_value_headers_enabled":false,"load_balancer_arns":[],"load_balancing_algorithm_type":"round_robin","load_balancing_anomaly_mitigation":"off","load_balancing_cross_zone_enabled":"use_load_balancer_configuration","name":"asg-change-tg-terraform-example","name_prefix":"","port":80,"preserve_client_ip":null,"protocol":"HTTP","protocol_version":"HTTP1","proxy_protocol_v2":false,"slow_start":0,"stickiness":[{"cookie_duration":86400,"cookie_name":"","enabled":false,"type":"lb_cookie"}],"tags":{},"tags_all":{},"target_failover":[{"on_deregistration":null,"on_unhealthy":null}],"target_group_health":[{"dns_failover":[{"minimum_healthy_targets_count":"1","minimum_healthy_targets_percentage":"off"}],"unhealthy_state_routing":[{"minimum_healthy_targets_count":1,"minimum_healthy_targets_percentage":"off"}]}],"target_health_state":[{"enable_unhealthy_connection_termination":null,"unhealthy_draining_interval":null}],"target_type":"instance","vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"health_check":[{}],"load_balancer_arns":[],"stickiness":[{}],"tags":{},"tags_all":{},"target_failover":[{}],"target_group_health":[{"dns_failover":[{}],"unhealthy_state_routing":[{}]}],"target_health_state":[{}]},"depends_on":["module.baseline.module.vpc.aws_vpc.this"]},{"address":"module.heritage[0].aws_lb_target_group.visit_counter","mode":"managed","type":"aws_lb_target_group","name":"visit_counter","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/visit-counter-terraform-example/5683104d7610bc44","arn_suffix":"targetgroup/visit-counter-terraform-example/5683104d7610bc44","connection_termination":null,"deregistration_delay":"300","health_check":[{"enabled":true,"healthy_threshold":5,"interval":30,"matcher":"200","path":"/","port":"traffic-port","protocol":"HTTP","timeout":5,"unhealthy_threshold":2}],"id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/visit-counter-terraform-example/5683104d7610bc44","ip_address_type":"ipv4","lambda_multi_value_headers_enabled":false,"load_balancer_arns":["arn:aws:elasticloadbalancing:eu-west-2:540044833068:loadbalancer/app/terraform-example/16bbb139e6d96ffb"],"load_balancing_algorithm_type":"round_robin","load_balancing_anomaly_mitigation":"off","load_balancing_cross_zone_enabled":"use_load_balancer_configuration","name":"visit-counter-terraform-example","name_prefix":"","port":80,"preserve_client_ip":null,"protocol":"HTTP","protocol_version":"HTTP1","proxy_protocol_v2":false,"slow_start":0,"stickiness":[{"cookie_duration":86400,"cookie_name":"","enabled":false,"type":"lb_cookie"}],"tags":{},"tags_all":{},"target_failover":[{"on_deregistration":null,"on_unhealthy":null}],"target_group_health":[{"dns_failover":[{"minimum_healthy_targets_count":"1","minimum_healthy_targets_percentage":"off"}],"unhealthy_state_routing":[{"minimum_healthy_targets_count":1,"minimum_healthy_targets_percentage":"off"}]}],"target_health_state":[{"enable_unhealthy_connection_termination":null,"unhealthy_draining_interval":null}],"target_type":"ip","vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"health_check":[{}],"load_balancer_arns":[false],"stickiness":[{}],"tags":{},"tags_all":{},"target_failover":[{}],"target_group_health":[{"dns_failover":[{}],"unhealthy_state_routing":[{}]}],"target_health_state":[{}]},"depends_on":["module.baseline.module.vpc.aws_vpc.this"]},{"address":"module.heritage[0].aws_network_acl.restricted","mode":"managed","type":"aws_network_acl","name":"restricted","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:eu-west-2:540044833068:network-acl/acl-069a798ad4aa03b2c","egress":[{"action":"allow","cidr_block":"0.0.0.0/0","from_port":0,"icmp_code":0,"icmp_type":0,"ipv6_cidr_block":"","protocol":"-1","rule_no":100,"to_port":0}],"id":"acl-069a798ad4aa03b2c","ingress":[{"action":"allow","cidr_block":"0.0.0.0/0","from_port":1024,"icmp_code":0,"icmp_type":0,"ipv6_cidr_block":"","protocol":"6","rule_no":300,"to_port":65535},{"action":"allow","cidr_block":"0.0.0.0/0","from_port":22,"icmp_code":0,"icmp_type":0,"ipv6_cidr_block":"","protocol":"6","rule_no":102,"to_port":22},{"action":"allow","cidr_block":"0.0.0.0/0","from_port":80,"icmp_code":0,"icmp_type":0,"ipv6_cidr_block":"","protocol":"6","rule_no":100,"to_port":80},{"action":"deny","cidr_block":"0.0.0.0/0","from_port":8000,"icmp_code":0,"icmp_type":0,"ipv6_cidr_block":"","protocol":"6","rule_no":200,"to_port":8100}],"owner_id":"540044833068","subnet_ids":["subnet-0e4cc60d35634e85b","subnet-0ec75df66980d2920"],"tags":{"Name":"Restricted Example"},"tags_all":{"Name":"Restricted Example"},"vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"egress":[{}],"ingress":[{},{},{},{}],"subnet_ids":[false,false],"tags":{},"tags_all":{}},"depends_on":["module.baseline.module.vpc.aws_vpc.this","module.heritage.aws_subnet.restricted-2a","module.heritage.aws_subnet.restricted-2b"]},{"address":"module.heritage[0].aws_network_acl_rule.allow_ephemeral","mode":"managed","type":"aws_network_acl_rule","name":"allow_ephemeral","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"cidr_block":"0.0.0.0/0","egress":false,"from_port":1024,"icmp_code":null,"icmp_type":null,"id":"nacl-2257767417","ipv6_cidr_block":"","network_acl_id":"acl-069a798ad4aa03b2c","protocol":"6","rule_action":"allow","rule_number":300,"to_port":65535},"sensitive_values":{},"depends_on":["module.baseline.module.vpc.aws_vpc.this","module.heritage.aws_network_acl.restricted","module.heritage.aws_subnet.restricted-2a","module.heritage.aws_subnet.restricted-2b"]},{"address":"module.heritage[0].aws_network_acl_rule.allow_http","mode":"managed","type":"aws_network_acl_rule","name":"allow_http","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"cidr_block":"0.0.0.0/0","egress":false,"from_port":80,"icmp_code":null,"icmp_type":null,"id":"nacl-1744572244","ipv6_cidr_block":"","network_acl_id":"acl-069a798ad4aa03b2c","protocol":"6","rule_action":"allow","rule_number":100,"to_port":80},"sensitive_values":{},"depends_on":["module.baseline.module.vpc.aws_vpc.this","module.heritage.aws_network_acl.restricted","module.heritage.aws_subnet.restricted-2a","module.heritage.aws_subnet.restricted-2b"]},{"address":"module.heritage[0].aws_network_acl_rule.allow_outbound","mode":"managed","type":"aws_network_acl_rule","name":"allow_outbound","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"cidr_block":"0.0.0.0/0","egress":true,"from_port":null,"icmp_code":null,"icmp_type":null,"id":"nacl-1087552375","ipv6_cidr_block":"","network_acl_id":"acl-069a798ad4aa03b2c","protocol":"-1","rule_action":"allow","rule_number":100,"to_port":null},"sensitive_values":{},"depends_on":["module.baseline.module.vpc.aws_vpc.this","module.heritage.aws_network_acl.restricted","module.heritage.aws_subnet.restricted-2a","module.heritage.aws_subnet.restricted-2b"]},{"address":"module.heritage[0].aws_network_acl_rule.allow_ssh","mode":"managed","type":"aws_network_acl_rule","name":"allow_ssh","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"cidr_block":"0.0.0.0/0","egress":false,"from_port":22,"icmp_code":null,"icmp_type":null,"id":"nacl-2345112011","ipv6_cidr_block":"","network_acl_id":"acl-069a798ad4aa03b2c","protocol":"6","rule_action":"allow","rule_number":102,"to_port":22},"sensitive_values":{},"depends_on":["module.baseline.module.vpc.aws_vpc.this","module.heritage.aws_network_acl.restricted","module.heritage.aws_subnet.restricted-2a","module.heritage.aws_subnet.restricted-2b"]},{"address":"module.heritage[0].aws_network_acl_rule.deny_high_ports","mode":"managed","type":"aws_network_acl_rule","name":"deny_high_ports","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"cidr_block":"0.0.0.0/0","egress":false,"from_port":8000,"icmp_code":null,"icmp_type":null,"id":"nacl-463284879","ipv6_cidr_block":"","network_acl_id":"acl-069a798ad4aa03b2c","protocol":"6","rule_action":"deny","rule_number":200,"to_port":8100},"sensitive_values":{},"depends_on":["module.baseline.module.vpc.aws_vpc.this","module.heritage.aws_network_acl.restricted","module.heritage.aws_subnet.restricted-2a","module.heritage.aws_subnet.restricted-2b"]},{"address":"module.heritage[0].aws_rds_cluster.face_database","mode":"managed","type":"aws_rds_cluster","name":"face_database","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"allocated_storage":1,"allow_major_version_upgrade":null,"apply_immediately":null,"arn":"arn:aws:rds:eu-west-2:540044833068:cluster:facial-recognition-terraform-example","availability_zones":["eu-west-2a","eu-west-2b","eu-west-2c"],"backtrack_window":0,"backup_retention_period":1,"ca_certificate_identifier":null,"ca_certificate_valid_till":null,"cluster_identifier":"facial-recognition-terraform-example","cluster_identifier_prefix":"","cluster_members":["tf-20251117235257281600000001"],"cluster_resource_id":"cluster-N6QYRDLXDK37JQDNBQCUCLZX2I","cluster_scalability_type":"","copy_tags_to_snapshot":false,"database_insights_mode":"standard","database_name":"test","db_cluster_instance_class":"","db_cluster_parameter_group_name":"default.aurora-postgresql16","db_instance_parameter_group_name":null,"db_subnet_group_name":"main-terraform-example","db_system_id":"","delete_automated_backups":true,"deletion_protection":false,"domain":"","domain_iam_role_name":"","enable_global_write_forwarding":false,"enable_http_endpoint":false,"enable_local_write_forwarding":false,"enabled_cloudwatch_logs_exports":[],"endpoint":"facial-recognition-terraform-example.cluster-cnx7xf6hwmba.eu-west-2.rds.amazonaws.com","engine":"aurora-postgresql","engine_lifecycle_support":"open-source-rds-extended-support","engine_mode":"provisioned","engine_version":"16.8","engine_version_actual":"16.8","final_snapshot_identifier":"test","global_cluster_identifier":"","hosted_zone_id":"Z1TTGA775OQIYO","iam_database_authentication_enabled":false,"iam_roles":[],"id":"facial-recognition-terraform-example","iops":0,"kms_key_id":"arn:aws:kms:eu-west-2:540044833068:key/2f30a33a-1c66-4b89-8420-50a4ce8f63f2","manage_master_user_password":null,"master_password":"must_be_eight_characters","master_password_wo":null,"master_password_wo_version":null,"master_user_secret":[],"master_user_secret_kms_key_id":null,"master_username":"test","monitoring_interval":0,"monitoring_role_arn":"","network_type":"IPV4","performance_insights_enabled":false,"performance_insights_kms_key_id":"","performance_insights_retention_period":0,"port":5432,"preferred_backup_window":"22:06-22:36","preferred_maintenance_window":"thu:05:14-thu:05:44","reader_endpoint":"facial-recognition-terraform-example.cluster-ro-cnx7xf6hwmba.eu-west-2.rds.amazonaws.com","replication_source_identifier":"","restore_to_point_in_time":[],"s3_import":[],"scaling_configuration":[],"serverlessv2_scaling_configuration":[{"max_capacity":1,"min_capacity":0.5,"seconds_until_auto_pause":0}],"skip_final_snapshot":true,"snapshot_identifier":null,"source_region":null,"storage_encrypted":true,"storage_type":"","tags":{},"tags_all":{},"timeouts":null,"vpc_security_group_ids":["sg-0159f0e3d8224d441"]},"sensitive_values":{"availability_zones":[false,false,false],"cluster_members":[false],"enabled_cloudwatch_logs_exports":[],"iam_roles":[],"master_password":true,"master_password_wo":true,"master_user_secret":[],"restore_to_point_in_time":[],"s3_import":[],"scaling_configuration":[],"serverlessv2_scaling_configuration":[{}],"tags":{},"tags_all":{},"vpc_security_group_ids":[false]},"depends_on":["module.baseline.module.vpc.aws_subnet.private","module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this","module.heritage.aws_db_subnet_group.default"]},{"address":"module.heritage[0].aws_rds_cluster_instance.face_database","mode":"managed","type":"aws_rds_cluster_instance","name":"face_database","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"apply_immediately":true,"arn":"arn:aws:rds:eu-west-2:540044833068:db:tf-20251117235257281600000001","auto_minor_version_upgrade":true,"availability_zone":"eu-west-2b","ca_cert_identifier":"rds-ca-rsa2048-g1","cluster_identifier":"facial-recognition-terraform-example","copy_tags_to_snapshot":false,"custom_iam_instance_profile":"","db_parameter_group_name":"default.aurora-postgresql16","db_subnet_group_name":"main-terraform-example","dbi_resource_id":"db-5JDUQAUCVWAJGUEVWQDBZUDHPE","endpoint":"tf-20251117235257281600000001.cnx7xf6hwmba.eu-west-2.rds.amazonaws.com","engine":"aurora-postgresql","engine_version":"16.8","engine_version_actual":"16.8","force_destroy":false,"id":"tf-20251117235257281600000001","identifier":"tf-20251117235257281600000001","identifier_prefix":"tf-","instance_class":"db.serverless","kms_key_id":"arn:aws:kms:eu-west-2:540044833068:key/2f30a33a-1c66-4b89-8420-50a4ce8f63f2","monitoring_interval":0,"monitoring_role_arn":"","network_type":"IPV4","performance_insights_enabled":false,"performance_insights_kms_key_id":"","performance_insights_retention_period":0,"port":5432,"preferred_backup_window":"22:06-22:36","preferred_maintenance_window":"wed:02:29-wed:02:59","promotion_tier":0,"publicly_accessible":false,"storage_encrypted":true,"tags":{},"tags_all":{},"timeouts":null,"writer":true},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.baseline.module.vpc.aws_subnet.private","module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this","module.heritage.aws_db_subnet_group.default","module.heritage.aws_rds_cluster.face_database"]},{"address":"module.heritage[0].aws_route53_record.face","mode":"managed","type":"aws_route53_record","name":"face","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"alias":[],"allow_overwrite":null,"cidr_routing_policy":[],"failover_routing_policy":[],"fqdn":"face-terraform-example.overmind-terraform-example.com","geolocation_routing_policy":[],"geoproximity_routing_policy":[],"health_check_id":"","id":"Z0909695IU5SU6N8UFON_face-terraform-example.overmind-terraform-example.com_CNAME","latency_routing_policy":[],"multivalue_answer_routing_policy":false,"name":"face-terraform-example.overmind-terraform-example.com","records":["terraform-example-1993925081.eu-west-2.elb.amazonaws.com"],"set_identifier":"","timeouts":null,"ttl":300,"type":"CNAME","weighted_routing_policy":[],"zone_id":"Z0909695IU5SU6N8UFON"},"sensitive_values":{"alias":[],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"geoproximity_routing_policy":[],"latency_routing_policy":[],"records":[false],"weighted_routing_policy":[]},"depends_on":["module.baseline.module.vpc.aws_subnet.public","module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this","module.heritage.aws_lb.main","module.heritage.data.aws_route53_zone.demo"]},{"address":"module.heritage[0].aws_route53_record.visit_counter","mode":"managed","type":"aws_route53_record","name":"visit_counter","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"alias":[],"allow_overwrite":null,"cidr_routing_policy":[],"failover_routing_policy":[],"fqdn":"visits-terraform-example.overmind-terraform-example.com","geolocation_routing_policy":[],"geoproximity_routing_policy":[],"health_check_id":"","id":"Z0909695IU5SU6N8UFON_visits-terraform-example.overmind-terraform-example.com_CNAME","latency_routing_policy":[],"multivalue_answer_routing_policy":false,"name":"visits-terraform-example.overmind-terraform-example.com","records":["terraform-example-1993925081.eu-west-2.elb.amazonaws.com"],"set_identifier":"","timeouts":null,"ttl":300,"type":"CNAME","weighted_routing_policy":[],"zone_id":"Z0909695IU5SU6N8UFON"},"sensitive_values":{"alias":[],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"geoproximity_routing_policy":[],"latency_routing_policy":[],"records":[false],"weighted_routing_policy":[]},"depends_on":["module.baseline.module.vpc.aws_subnet.public","module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this","module.heritage.aws_lb.main","module.heritage.data.aws_route53_zone.demo"]},{"address":"module.heritage[0].aws_route_table_association.restricted-2a","mode":"managed","type":"aws_route_table_association","name":"restricted-2a","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":"","id":"rtbassoc-0424ae05f399b1fe1","route_table_id":"rtb-073519b951ac0afb5","subnet_id":"subnet-0ec75df66980d2920","timeouts":null},"sensitive_values":{},"depends_on":["module.baseline.module.vpc.aws_route_table.public","module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this","module.heritage.aws_subnet.restricted-2a"]},{"address":"module.heritage[0].aws_route_table_association.restricted-2b","mode":"managed","type":"aws_route_table_association","name":"restricted-2b","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":"","id":"rtbassoc-07a004760c9195770","route_table_id":"rtb-073519b951ac0afb5","subnet_id":"subnet-0e4cc60d35634e85b","timeouts":null},"sensitive_values":{},"depends_on":["module.baseline.module.vpc.aws_route_table.public","module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this","module.heritage.aws_subnet.restricted-2b"]},{"address":"module.heritage[0].aws_s3_bucket.b","mode":"managed","type":"aws_s3_bucket","name":"b","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"acceleration_status":"","acl":null,"arn":"arn:aws:s3:::second-example-brave-crappie20251117232021571800000004","bucket":"second-example-brave-crappie20251117232021571800000004","bucket_domain_name":"second-example-brave-crappie20251117232021571800000004.s3.amazonaws.com","bucket_prefix":"second-example-brave-crappie","bucket_regional_domain_name":"second-example-brave-crappie20251117232021571800000004.s3.eu-west-2.amazonaws.com","cors_rule":[],"force_destroy":false,"grant":[{"id":"05d918fa182ad8f3fa915436354b8657e3c2c59b326ecbfc43e6c00451268d0a","permissions":["FULL_CONTROL"],"type":"CanonicalUser","uri":""}],"hosted_zone_id":"Z3GKZC51ZF0DB4","id":"second-example-brave-crappie20251117232021571800000004","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"object_lock_enabled":false,"policy":"","region":"eu-west-2","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"","sse_algorithm":"AES256"}],"bucket_key_enabled":false}]}],"tags":{"Name":"Second example bucket"},"tags_all":{"Name":"Second example bucket"},"timeouts":null,"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"sensitive_values":{"cors_rule":[],"grant":[{"permissions":[false]}],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}],"tags":{},"tags_all":{},"versioning":[{}],"website":[]},"depends_on":["module.heritage.random_pet.second"]},{"address":"module.heritage[0].aws_s3_bucket.my_bucket","mode":"managed","type":"aws_s3_bucket","name":"my_bucket","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"acceleration_status":"","acl":"private","arn":"arn:aws:s3:::bucket-notification-terraform-example20251117232019549500000001","bucket":"bucket-notification-terraform-example20251117232019549500000001","bucket_domain_name":"bucket-notification-terraform-example20251117232019549500000001.s3.amazonaws.com","bucket_prefix":"bucket-notification-terraform-example","bucket_regional_domain_name":"bucket-notification-terraform-example20251117232019549500000001.s3.eu-west-2.amazonaws.com","cors_rule":[],"force_destroy":false,"grant":[{"id":"05d918fa182ad8f3fa915436354b8657e3c2c59b326ecbfc43e6c00451268d0a","permissions":["FULL_CONTROL"],"type":"CanonicalUser","uri":""}],"hosted_zone_id":"Z3GKZC51ZF0DB4","id":"bucket-notification-terraform-example20251117232019549500000001","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"object_lock_enabled":false,"policy":"","region":"eu-west-2","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"","sse_algorithm":"AES256"}],"bucket_key_enabled":false}]}],"tags":{},"tags_all":{},"timeouts":null,"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"sensitive_values":{"cors_rule":[],"grant":[{"permissions":[false]}],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}],"tags":{},"tags_all":{},"versioning":[{}],"website":[]}},{"address":"module.heritage[0].aws_s3_bucket_acl.b_acl","mode":"managed","type":"aws_s3_bucket_acl","name":"b_acl","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"access_control_policy":[{"grant":[{"grantee":[{"display_name":"","email_address":"","id":"05d918fa182ad8f3fa915436354b8657e3c2c59b326ecbfc43e6c00451268d0a","type":"CanonicalUser","uri":""}],"permission":"FULL_CONTROL"}],"owner":[{"display_name":"","id":"05d918fa182ad8f3fa915436354b8657e3c2c59b326ecbfc43e6c00451268d0a"}]}],"acl":"private","bucket":"second-example-brave-crappie20251117232021571800000004","expected_bucket_owner":"","id":"second-example-brave-crappie20251117232021571800000004,private"},"sensitive_values":{"access_control_policy":[{"grant":[{"grantee":[{}]}],"owner":[{}]}]},"depends_on":["module.heritage.aws_s3_bucket.b","module.heritage.aws_s3_bucket_ownership_controls.b","module.heritage.random_pet.second"]},{"address":"module.heritage[0].aws_s3_bucket_notification.bucket_notification","mode":"managed","type":"aws_s3_bucket_notification","name":"bucket_notification","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"bucket":"bucket-notification-terraform-example20251117232019549500000001","eventbridge":false,"id":"bucket-notification-terraform-example20251117232019549500000001","lambda_function":[],"queue":[{"events":["s3:ObjectCreated:*"],"filter_prefix":"","filter_suffix":"","id":"tf-s3-queue-20251117232048550500000013","queue_arn":"arn:aws:sqs:eu-west-2:540044833068:-terraform-example-notifications-from-s3"}],"topic":[]},"sensitive_values":{"lambda_function":[],"queue":[{"events":[false]}],"topic":[]},"depends_on":["module.heritage.aws_s3_bucket.my_bucket","module.heritage.aws_sqs_queue.my_queue"]},{"address":"module.heritage[0].aws_s3_bucket_ownership_controls.b","mode":"managed","type":"aws_s3_bucket_ownership_controls","name":"b","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"bucket":"second-example-brave-crappie20251117232021571800000004","id":"second-example-brave-crappie20251117232021571800000004","rule":[{"object_ownership":"ObjectWriter"}]},"sensitive_values":{"rule":[{}]},"depends_on":["module.heritage.aws_s3_bucket.b","module.heritage.random_pet.second"]},{"address":"module.heritage[0].aws_s3_bucket_policy.bucket_policy","mode":"managed","type":"aws_s3_bucket_policy","name":"bucket_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"bucket":"s3-one-adequate-gibbon20251117232020021100000002","id":"s3-one-adequate-gibbon20251117232020021100000002","policy":"{\"Statement\":[{\"Action\":\"s3:GetObject\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::cloudfront:user/CloudFront Origin Access Identity E3773WNTKP0C2U\"},\"Resource\":\"arn:aws:s3:::s3-one-adequate-gibbon20251117232020021100000002/static/*\"},{\"Action\":\"s3:GetObject\",\"Condition\":{\"StringEquals\":{\"aws:SourceArn\":\"arn:aws:cloudfront::540044833068:distribution/EX4HFUQMZ2ULI\"}},\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"cloudfront.amazonaws.com\"},\"Resource\":\"arn:aws:s3:::s3-one-adequate-gibbon20251117232020021100000002/static/*\"}],\"Version\":\"2012-10-17\"}"},"sensitive_values":{},"depends_on":["module.heritage.aws_cloudfront_cache_policy.headers_based_policy","module.heritage.aws_cloudfront_function.example","module.heritage.aws_cloudfront_origin_request_policy.headers_based_policy","module.heritage.aws_cloudfront_response_headers_policy.headers-policy","module.heritage.data.aws_iam_policy_document.s3_policy","module.heritage.module.cloudfront.aws_cloudfront_distribution.this","module.heritage.module.cloudfront.aws_cloudfront_origin_access_control.this","module.heritage.module.cloudfront.aws_cloudfront_origin_access_identity.this","module.heritage.module.cloudfront.data.aws_cloudfront_cache_policy.this","module.heritage.module.cloudfront.data.aws_cloudfront_origin_request_policy.this","module.heritage.module.cloudfront.data.aws_cloudfront_response_headers_policy.this","module.heritage.module.s3_one.aws_s3_bucket.this","module.heritage.module.s3_one.aws_s3_directory_bucket.this","module.heritage.random_pet.this"]},{"address":"module.heritage[0].aws_security_group.allow_access","mode":"managed","type":"aws_security_group","name":"allow_access","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:eu-west-2:540044833068:security-group/sg-0c7e72143f1b9c08c","description":"Allow access security group","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-0c7e72143f1b9c08c","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22}],"name":"allow_access-terraform-example","name_prefix":"","owner_id":"540044833068","revoke_rules_on_delete":false,"tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}},"depends_on":["module.baseline.module.vpc.aws_vpc.this"]},{"address":"module.heritage[0].aws_security_group.instance_sg","mode":"managed","type":"aws_security_group","name":"instance_sg","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:eu-west-2:540044833068:security-group/sg-057ed2204f81107a5","description":"Managed by Terraform","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-057ed2204f81107a5","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22},{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":8080,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":8080}],"name":"terraform-2025111723203855250000000a","name_prefix":"terraform-","owner_id":"540044833068","revoke_rules_on_delete":false,"tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}},"depends_on":["module.baseline.module.vpc.aws_vpc.this"]},{"address":"module.heritage[0].aws_sns_topic.example_topic","mode":"managed","type":"aws_sns_topic","name":"example_topic","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"application_failure_feedback_role_arn":"","application_success_feedback_role_arn":"","application_success_feedback_sample_rate":0,"archive_policy":"","arn":"arn:aws:sns:eu-west-2:540044833068:-terraform-example-topic","beginning_archive_time":"","content_based_deduplication":false,"delivery_policy":"","display_name":"","fifo_throughput_scope":"","fifo_topic":false,"firehose_failure_feedback_role_arn":"","firehose_success_feedback_role_arn":"","firehose_success_feedback_sample_rate":0,"http_failure_feedback_role_arn":"","http_success_feedback_role_arn":"","http_success_feedback_sample_rate":0,"id":"arn:aws:sns:eu-west-2:540044833068:-terraform-example-topic","kms_master_key_id":"","lambda_failure_feedback_role_arn":"","lambda_success_feedback_role_arn":"","lambda_success_feedback_sample_rate":0,"name":"-terraform-example-topic","name_prefix":"","owner":"540044833068","policy":"{\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Action\":[\"SNS:GetTopicAttributes\",\"SNS:SetTopicAttributes\",\"SNS:AddPermission\",\"SNS:RemovePermission\",\"SNS:DeleteTopic\",\"SNS:Subscribe\",\"SNS:ListSubscriptionsByTopic\",\"SNS:Publish\"],\"Condition\":{\"StringEquals\":{\"AWS:SourceOwner\":\"540044833068\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Resource\":\"arn:aws:sns:eu-west-2:540044833068:-terraform-example-topic\",\"Sid\":\"__default_statement_ID\"}],\"Version\":\"2008-10-17\"}","signature_version":0,"sqs_failure_feedback_role_arn":"","sqs_success_feedback_role_arn":"","sqs_success_feedback_sample_rate":0,"tags":{},"tags_all":{},"tracing_config":""},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.heritage[0].aws_sqs_queue.my_queue","mode":"managed","type":"aws_sqs_queue","name":"my_queue","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:sqs:eu-west-2:540044833068:-terraform-example-notifications-from-s3","content_based_deduplication":false,"deduplication_scope":"","delay_seconds":0,"fifo_queue":false,"fifo_throughput_limit":"","id":"https://sqs.eu-west-2.amazonaws.com/540044833068/-terraform-example-notifications-from-s3","kms_data_key_reuse_period_seconds":300,"kms_master_key_id":"","max_message_size":262144,"message_retention_seconds":345600,"name":"-terraform-example-notifications-from-s3","name_prefix":"","policy":"{\"Id\":\"arn:aws:sqs:eu-west-2:540044833068:-terraform-example-notifications-from-s3/SQSPolicy\",\"Statement\":[{\"Action\":\"SQS:SendMessage\",\"Condition\":{\"ArnEquals\":{\"aws:SourceArn\":\"arn:aws:s3:::bucket-notification-terraform-example20251117232019549500000001\"}},\"Effect\":\"Allow\",\"Principal\":\"*\",\"Resource\":\"arn:aws:sqs:eu-west-2:540044833068:-terraform-example-notifications-from-s3\",\"Sid\":\"AllowS3BucketNotification\"}],\"Version\":\"2012-10-17\"}","receive_wait_time_seconds":0,"redrive_allow_policy":"","redrive_policy":"","sqs_managed_sse_enabled":true,"tags":{},"tags_all":{},"timeouts":null,"url":"https://sqs.eu-west-2.amazonaws.com/540044833068/-terraform-example-notifications-from-s3","visibility_timeout_seconds":30},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.heritage[0].aws_sqs_queue_policy.my_queue_policy","mode":"managed","type":"aws_sqs_queue_policy","name":"my_queue_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"id":"https://sqs.eu-west-2.amazonaws.com/540044833068/-terraform-example-notifications-from-s3","policy":"{\"Id\":\"arn:aws:sqs:eu-west-2:540044833068:-terraform-example-notifications-from-s3/SQSPolicy\",\"Statement\":[{\"Action\":\"SQS:SendMessage\",\"Condition\":{\"ArnEquals\":{\"aws:SourceArn\":\"arn:aws:s3:::bucket-notification-terraform-example20251117232019549500000001\"}},\"Effect\":\"Allow\",\"Principal\":\"*\",\"Resource\":\"arn:aws:sqs:eu-west-2:540044833068:-terraform-example-notifications-from-s3\",\"Sid\":\"AllowS3BucketNotification\"}],\"Version\":\"2012-10-17\"}","queue_url":"https://sqs.eu-west-2.amazonaws.com/540044833068/-terraform-example-notifications-from-s3"},"sensitive_values":{},"depends_on":["module.heritage.aws_s3_bucket.my_bucket","module.heritage.aws_sqs_queue.my_queue"]},{"address":"module.heritage[0].aws_subnet.restricted-2a","mode":"managed","type":"aws_subnet","name":"restricted-2a","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:eu-west-2:540044833068:subnet/subnet-0ec75df66980d2920","assign_ipv6_address_on_creation":false,"availability_zone":"eu-west-2a","availability_zone_id":"euw2-az2","cidr_block":"10.0.9.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0ec75df66980d2920","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"540044833068","private_dns_hostname_type_on_launch":"ip-name","tags":{"Name":"Restricted 2a"},"tags_all":{"Name":"Restricted 2a"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.baseline.module.vpc.aws_vpc.this"]},{"address":"module.heritage[0].aws_subnet.restricted-2b","mode":"managed","type":"aws_subnet","name":"restricted-2b","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:eu-west-2:540044833068:subnet/subnet-0e4cc60d35634e85b","assign_ipv6_address_on_creation":false,"availability_zone":"eu-west-2b","availability_zone_id":"euw2-az3","cidr_block":"10.0.10.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0e4cc60d35634e85b","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"540044833068","private_dns_hostname_type_on_launch":"ip-name","tags":{"Name":"Restricted 2b"},"tags_all":{"Name":"Restricted 2b"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.baseline.module.vpc.aws_vpc.this"]},{"address":"module.heritage[0].random_pet.second","mode":"managed","type":"random_pet","name":"second","provider_name":"registry.terraform.io/hashicorp/random","schema_version":0,"values":{"id":"brave-crappie","keepers":null,"length":2,"prefix":null,"separator":"-"},"sensitive_values":{}},{"address":"module.heritage[0].random_pet.this","mode":"managed","type":"random_pet","name":"this","provider_name":"registry.terraform.io/hashicorp/random","schema_version":0,"values":{"id":"adequate-gibbon","keepers":null,"length":2,"prefix":null,"separator":"-"},"sensitive_values":{}}],"address":"module.heritage[0]","child_modules":[{"resources":[{"address":"module.heritage[0].module.cloudfront.aws_cloudfront_distribution.this[0]","mode":"managed","type":"aws_cloudfront_distribution","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"aliases":[],"arn":"arn:aws:cloudfront::540044833068:distribution/EX4HFUQMZ2ULI","caller_reference":"terraform-20251117232025598600000008","comment":"My awesome CloudFront","continuous_deployment_policy_id":"","custom_error_response":[{"error_caching_min_ttl":0,"error_code":403,"response_code":403,"response_page_path":"/errors/403.html"},{"error_caching_min_ttl":0,"error_code":404,"response_code":404,"response_page_path":"/errors/404.html"}],"default_cache_behavior":[{"allowed_methods":["GET","HEAD","OPTIONS"],"cache_policy_id":"8e5fa4ea-50a6-44f8-86e8-3ca690bd9373","cached_methods":["GET","HEAD"],"compress":true,"default_ttl":0,"field_level_encryption_id":"","forwarded_values":[],"function_association":[],"grpc_config":[{"enabled":false}],"lambda_function_association":[],"max_ttl":0,"min_ttl":0,"origin_request_policy_id":"414eb566-4bb3-49d1-a868-0ee739830440","realtime_log_config_arn":"","response_headers_policy_id":"67f7725c-6f97-4210-82d7-5512b31e9d03","smooth_streaming":false,"target_origin_id":"appsync","trusted_key_groups":[],"trusted_signers":[],"viewer_protocol_policy":"allow-all"}],"default_root_object":"","domain_name":"d3lsh8pjb3h0ub.cloudfront.net","enabled":true,"etag":"E1IXRQLQL1O86R","hosted_zone_id":"Z2FDTNDATAQYW2","http_version":"http2and3","id":"EX4HFUQMZ2ULI","in_progress_validation_batches":0,"is_ipv6_enabled":true,"last_modified_time":"2025-11-17 23:20:25.716 +0000 UTC","logging_config":[],"ordered_cache_behavior":[{"allowed_methods":["GET","HEAD"],"cache_policy_id":"","cached_methods":["GET","HEAD"],"compress":true,"default_ttl":0,"field_level_encryption_id":"","forwarded_values":[{"cookies":[{"forward":"none","whitelisted_names":[]}],"headers":[],"query_string":true,"query_string_cache_keys":[]}],"function_association":[{"event_type":"viewer-request","function_arn":"arn:aws:cloudfront::540044833068:function/terraform-example-adequate-gibbon"},{"event_type":"viewer-response","function_arn":"arn:aws:cloudfront::540044833068:function/terraform-example-adequate-gibbon"}],"grpc_config":[{"enabled":false}],"lambda_function_association":[],"max_ttl":0,"min_ttl":0,"origin_request_policy_id":"","path_pattern":"/static/*","realtime_log_config_arn":"","response_headers_policy_id":"c7fd455f-1fa8-4632-9a22-fef9a58b69a9","smooth_streaming":false,"target_origin_id":"s3_one","trusted_key_groups":[],"trusted_signers":[],"viewer_protocol_policy":"redirect-to-https"}],"origin":[{"connection_attempts":3,"connection_timeout":10,"custom_header":[{"name":"X-Forwarded-Scheme","value":"https"},{"name":"X-Frame-Options","value":"SAMEORIGIN"}],"custom_origin_config":[{"http_port":80,"https_port":443,"origin_keepalive_timeout":5,"origin_protocol_policy":"match-viewer","origin_read_timeout":30,"origin_ssl_protocols":["TLSv1","TLSv1.1","TLSv1.2"]}],"domain_name":"appsync.terraform-example.modules.tf","origin_access_control_id":"","origin_id":"appsync","origin_path":"","origin_shield":[{"enabled":true,"origin_shield_region":"us-east-1"}],"s3_origin_config":[],"vpc_origin_config":[]},{"connection_attempts":3,"connection_timeout":10,"custom_header":[],"custom_origin_config":[],"domain_name":"s3-one-adequate-gibbon20251117232020021100000002.s3.eu-west-2.amazonaws.com","origin_access_control_id":"","origin_id":"s3_one","origin_path":"","origin_shield":[],"s3_origin_config":[{"origin_access_identity":"origin-access-identity/cloudfront/E3773WNTKP0C2U"}],"vpc_origin_config":[]},{"connection_attempts":3,"connection_timeout":10,"custom_header":[],"custom_origin_config":[],"domain_name":"s3-one-adequate-gibbon20251117232020021100000002.s3.eu-west-2.amazonaws.com","origin_access_control_id":"E3F5P5J73PT9IJ","origin_id":"s3_oac","origin_path":"","origin_shield":[],"s3_origin_config":[],"vpc_origin_config":[]}],"origin_group":[{"failover_criteria":[{"status_codes":[403,404,500,502]}],"member":[{"origin_id":"appsync"},{"origin_id":"s3_one"}],"origin_id":"group_one"}],"price_class":"PriceClass_All","restrictions":[{"geo_restriction":[{"locations":["GB","NO","UA","US"],"restriction_type":"whitelist"}]}],"retain_on_delete":false,"staging":false,"status":"Deployed","tags":{},"tags_all":{},"trusted_key_groups":[{"enabled":false,"items":[]}],"trusted_signers":[{"enabled":false,"items":[]}],"viewer_certificate":[{"acm_certificate_arn":"","cloudfront_default_certificate":true,"iam_certificate_id":"","minimum_protocol_version":"TLSv1","ssl_support_method":""}],"wait_for_deployment":false,"web_acl_id":""},"sensitive_values":{"aliases":[],"custom_error_response":[{},{}],"default_cache_behavior":[{"allowed_methods":[false,false,false],"cached_methods":[false,false],"forwarded_values":[],"function_association":[],"grpc_config":[{}],"lambda_function_association":[],"trusted_key_groups":[],"trusted_signers":[]}],"logging_config":[],"ordered_cache_behavior":[{"allowed_methods":[false,false],"cached_methods":[false,false],"forwarded_values":[{"cookies":[{"whitelisted_names":[]}],"headers":[],"query_string_cache_keys":[]}],"function_association":[{},{}],"grpc_config":[{}],"lambda_function_association":[],"trusted_key_groups":[],"trusted_signers":[]}],"origin":[{"custom_header":[{},{}],"custom_origin_config":[{"origin_ssl_protocols":[false,false,false]}],"origin_shield":[{}],"s3_origin_config":[],"vpc_origin_config":[]},{"custom_header":[],"custom_origin_config":[],"origin_shield":[],"s3_origin_config":[{}],"vpc_origin_config":[]},{"custom_header":[],"custom_origin_config":[],"origin_shield":[],"s3_origin_config":[],"vpc_origin_config":[]}],"origin_group":[{"failover_criteria":[{"status_codes":[false,false,false,false]}],"member":[{},{}]}],"restrictions":[{"geo_restriction":[{"locations":[false,false,false,false]}]}],"tags":{},"tags_all":{},"trusted_key_groups":[{"items":[]}],"trusted_signers":[{"items":[]}],"viewer_certificate":[{}]},"depends_on":["module.heritage.aws_cloudfront_cache_policy.headers_based_policy","module.heritage.aws_cloudfront_function.example","module.heritage.aws_cloudfront_origin_request_policy.headers_based_policy","module.heritage.aws_cloudfront_response_headers_policy.headers-policy","module.heritage.module.cloudfront.aws_cloudfront_origin_access_control.this","module.heritage.module.cloudfront.aws_cloudfront_origin_access_identity.this","module.heritage.module.cloudfront.data.aws_cloudfront_cache_policy.this","module.heritage.module.cloudfront.data.aws_cloudfront_origin_request_policy.this","module.heritage.module.cloudfront.data.aws_cloudfront_response_headers_policy.this","module.heritage.module.s3_one.aws_s3_bucket.this","module.heritage.random_pet.this"]},{"address":"module.heritage[0].module.cloudfront.aws_cloudfront_monitoring_subscription.this[0]","mode":"managed","type":"aws_cloudfront_monitoring_subscription","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"distribution_id":"EX4HFUQMZ2ULI","id":"EX4HFUQMZ2ULI","monitoring_subscription":[{"realtime_metrics_subscription_config":[{"realtime_metrics_subscription_status":"Enabled"}]}]},"sensitive_values":{"monitoring_subscription":[{"realtime_metrics_subscription_config":[{}]}]},"depends_on":["module.heritage.aws_cloudfront_cache_policy.headers_based_policy","module.heritage.aws_cloudfront_function.example","module.heritage.aws_cloudfront_origin_request_policy.headers_based_policy","module.heritage.aws_cloudfront_response_headers_policy.headers-policy","module.heritage.module.cloudfront.aws_cloudfront_distribution.this","module.heritage.module.cloudfront.aws_cloudfront_origin_access_control.this","module.heritage.module.cloudfront.aws_cloudfront_origin_access_identity.this","module.heritage.module.cloudfront.data.aws_cloudfront_cache_policy.this","module.heritage.module.cloudfront.data.aws_cloudfront_origin_request_policy.this","module.heritage.module.cloudfront.data.aws_cloudfront_response_headers_policy.this","module.heritage.module.s3_one.aws_s3_bucket.this","module.heritage.random_pet.this"]},{"address":"module.heritage[0].module.cloudfront.aws_cloudfront_origin_access_control.this[\"terraform-example\"]","mode":"managed","type":"aws_cloudfront_origin_access_control","name":"this","index":"terraform-example","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:cloudfront::540044833068:origin-access-control/E3F5P5J73PT9IJ","description":"CloudFront access to S3","etag":"ETVPDKIKX0DER","id":"E3F5P5J73PT9IJ","name":"terraform-example","origin_access_control_origin_type":"s3","signing_behavior":"always","signing_protocol":"sigv4"},"sensitive_values":{}},{"address":"module.heritage[0].module.cloudfront.aws_cloudfront_origin_access_identity.this[\"s3_bucket_one\"]","mode":"managed","type":"aws_cloudfront_origin_access_identity","name":"this","index":"s3_bucket_one","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:cloudfront::540044833068:origin-access-identity/E3773WNTKP0C2U","caller_reference":"terraform-20251117232021315100000003","cloudfront_access_identity_path":"origin-access-identity/cloudfront/E3773WNTKP0C2U","comment":"My awesome CloudFront can access","etag":"E3UN6WX5RRO2AG","iam_arn":"arn:aws:iam::cloudfront:user/CloudFront Origin Access Identity E3773WNTKP0C2U","id":"E3773WNTKP0C2U","s3_canonical_user_id":"616f6d6f237db229bb2fc63daa66b9c72a42691aca85621db17121ce20b0234705366f98cdd64601d82ef4ca0ca396ef"},"sensitive_values":{}}],"address":"module.heritage[0].module.cloudfront"},{"address":"module.heritage[0].module.ecs","child_modules":[{"resources":[{"address":"module.heritage[0].module.ecs.module.cluster.aws_cloudwatch_log_group.this[0]","mode":"managed","type":"aws_cloudwatch_log_group","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:logs:eu-west-2:540044833068:log-group:/aws/ecs/example-terraform-example","id":"/aws/ecs/example-terraform-example","kms_key_id":"","log_group_class":"STANDARD","name":"/aws/ecs/example-terraform-example","name_prefix":"","retention_in_days":90,"skip_destroy":false,"tags":{},"tags_all":{}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.heritage[0].module.ecs.module.cluster.aws_ecs_cluster.this[0]","mode":"managed","type":"aws_ecs_cluster","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ecs:eu-west-2:540044833068:cluster/example-terraform-example","configuration":[{"execute_command_configuration":[{"kms_key_id":"","log_configuration":[],"logging":"DEFAULT"}],"managed_storage_configuration":[]}],"id":"arn:aws:ecs:eu-west-2:540044833068:cluster/example-terraform-example","name":"example-terraform-example","service_connect_defaults":[],"setting":[{"name":"containerInsights","value":"enabled"}],"tags":{},"tags_all":{}},"sensitive_values":{"configuration":[{"execute_command_configuration":[{"log_configuration":[]}],"managed_storage_configuration":[]}],"service_connect_defaults":[],"setting":[{}],"tags":{},"tags_all":{}},"depends_on":["module.heritage.module.ecs.module.cluster.aws_cloudwatch_log_group.this"]},{"address":"module.heritage[0].module.ecs.module.cluster.aws_ecs_cluster_capacity_providers.this[0]","mode":"managed","type":"aws_ecs_cluster_capacity_providers","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"capacity_providers":["FARGATE"],"cluster_name":"example-terraform-example","default_capacity_provider_strategy":[{"base":0,"capacity_provider":"FARGATE","weight":100}],"id":"example-terraform-example"},"sensitive_values":{"capacity_providers":[false],"default_capacity_provider_strategy":[{}]},"depends_on":["module.heritage.module.ecs.module.cluster.aws_cloudwatch_log_group.this","module.heritage.module.ecs.module.cluster.aws_ecs_capacity_provider.this","module.heritage.module.ecs.module.cluster.aws_ecs_cluster.this"]}],"address":"module.heritage[0].module.ecs.module.cluster"}]},{"resources":[{"address":"module.heritage[0].module.memory_optimization.data.aws_availability_zones.available[0]","mode":"data","type":"aws_availability_zones","name":"available","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"all_availability_zones":null,"exclude_names":null,"exclude_zone_ids":null,"filter":null,"group_names":["eu-west-2-zg-1"],"id":"eu-west-2","names":["eu-west-2a","eu-west-2b","eu-west-2c"],"state":"available","timeouts":null,"zone_ids":["euw2-az2","euw2-az3","euw2-az1"]},"sensitive_values":{"group_names":[false],"names":[false,false,false],"zone_ids":[false,false,false]}},{"address":"module.heritage[0].module.memory_optimization.data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"Europe (London)","endpoint":"ec2.eu-west-2.amazonaws.com","id":"eu-west-2","name":"eu-west-2"},"sensitive_values":{}},{"address":"module.heritage[0].module.memory_optimization.aws_cloudwatch_log_group.app[0]","mode":"managed","type":"aws_cloudwatch_log_group","name":"app","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:logs:eu-west-2:540044833068:log-group:/ecs/scenarios--27e78067","id":"/ecs/scenarios--27e78067","kms_key_id":"","log_group_class":"STANDARD","name":"/ecs/scenarios--27e78067","name_prefix":"","retention_in_days":1,"skip_destroy":false,"tags":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"Logs will show OOM kills when memory is reduced to 1024MB","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-logs","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"tags_all":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"Logs will show OOM kills when memory is reduced to 1024MB","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-logs","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"}},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.heritage.module.memory_optimization.random_id.suffix"]},{"address":"module.heritage[0].module.memory_optimization.aws_cloudwatch_log_metric_filter.memory_pressure[0]","mode":"managed","type":"aws_cloudwatch_log_metric_filter","name":"memory_pressure","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"scenarios--27e78067-memory-pressure","log_group_name":"/ecs/scenarios--27e78067","metric_transformation":[{"default_value":"","dimensions":{},"name":"JavaOOMErrors","namespace":"MemoryOptimization/Demo","unit":"None","value":"1"}],"name":"scenarios--27e78067-memory-pressure","pattern":"[timestamp, requestId, level=\"ERROR\", message=\"*OutOfMemoryError*\"]"},"sensitive_values":{"metric_transformation":[{"dimensions":{}}]},"depends_on":["module.heritage.module.memory_optimization.aws_cloudwatch_log_group.app","module.heritage.module.memory_optimization.random_id.suffix"]},{"address":"module.heritage[0].module.memory_optimization.aws_cloudwatch_metric_alarm.high_cpu_utilization[0]","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"high_cpu_utilization","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"actions_enabled":true,"alarm_actions":["arn:aws:sns:eu-west-2:540044833068:scenarios--27e78067-alerts"],"alarm_description":"This metric monitors ECS CPU utilization - will spike when JVM struggles with insufficient memory","alarm_name":"scenarios--27e78067-high-cpu","arn":"arn:aws:cloudwatch:eu-west-2:540044833068:alarm:scenarios--27e78067-high-cpu","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":0,"dimensions":{"ClusterName":"scenarios--27e78067-cluster","ServiceName":"scenarios--27e78067-service"},"evaluate_low_sample_count_percentiles":"","evaluation_periods":3,"extended_statistic":"","id":"scenarios--27e78067-high-cpu","insufficient_data_actions":[],"metric_name":"CPUUtilization","metric_query":[],"namespace":"AWS/ECS","ok_actions":[],"period":300,"statistic":"Average","tags":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"CPU utilization alarm for Java application performance","Environment":"demo","GCPressure":"high-when-heap-approaches-limit","JVMBehavior":"CPU-spikes-before-OOM","JavaHeapMB":"1536","MemoryMB":"2048","MemoryThrashing":"frequent-GC-when-constrained","Name":"scenarios--27e78067-cpu-alarm","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"tags_all":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"CPU utilization alarm for Java application performance","Environment":"demo","GCPressure":"high-when-heap-approaches-limit","JVMBehavior":"CPU-spikes-before-OOM","JavaHeapMB":"1536","MemoryMB":"2048","MemoryThrashing":"frequent-GC-when-constrained","Name":"scenarios--27e78067-cpu-alarm","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"threshold":80,"threshold_metric_id":"","treat_missing_data":"missing","unit":""},"sensitive_values":{"alarm_actions":[false],"dimensions":{},"insufficient_data_actions":[],"metric_query":[],"ok_actions":[],"tags":{},"tags_all":{}},"depends_on":["module.baseline.module.vpc.aws_subnet.public","module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this","module.heritage.module.memory_optimization.aws_cloudwatch_log_group.app","module.heritage.module.memory_optimization.aws_ecs_cluster.main","module.heritage.module.memory_optimization.aws_ecs_service.app","module.heritage.module.memory_optimization.aws_ecs_task_definition.app","module.heritage.module.memory_optimization.aws_iam_role.ecs_execution_role","module.heritage.module.memory_optimization.aws_iam_role.ecs_task_role","module.heritage.module.memory_optimization.aws_lb.app","module.heritage.module.memory_optimization.aws_lb_listener.app","module.heritage.module.memory_optimization.aws_lb_target_group.app","module.heritage.module.memory_optimization.aws_security_group.alb","module.heritage.module.memory_optimization.aws_security_group.ecs_tasks","module.heritage.module.memory_optimization.aws_sns_topic.alerts","module.heritage.module.memory_optimization.aws_subnet.standalone","module.heritage.module.memory_optimization.aws_vpc.standalone","module.heritage.module.memory_optimization.data.aws_availability_zones.available","module.heritage.module.memory_optimization.data.aws_region.current","module.heritage.module.memory_optimization.data.aws_subnets.default","module.heritage.module.memory_optimization.data.aws_vpc.default","module.heritage.module.memory_optimization.random_id.suffix"]},{"address":"module.heritage[0].module.memory_optimization.aws_cloudwatch_metric_alarm.high_memory_utilization[0]","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"high_memory_utilization","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"actions_enabled":true,"alarm_actions":["arn:aws:sns:eu-west-2:540044833068:scenarios--27e78067-alerts"],"alarm_description":"This metric monitors ECS memory utilization - WILL FIRE when containers run out of memory","alarm_name":"scenarios--27e78067-high-memory","arn":"arn:aws:cloudwatch:eu-west-2:540044833068:alarm:scenarios--27e78067-high-memory","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":0,"dimensions":{"ClusterName":"scenarios--27e78067-cluster","ServiceName":"scenarios--27e78067-service"},"evaluate_low_sample_count_percentiles":"","evaluation_periods":2,"extended_statistic":"","id":"scenarios--27e78067-high-memory","insufficient_data_actions":[],"metric_name":"MemoryUtilization","metric_query":[],"namespace":"AWS/ECS","ok_actions":["arn:aws:sns:eu-west-2:540044833068:scenarios--27e78067-alerts"],"period":300,"statistic":"Average","tags":{"AlarmTrigger":"memory-over-80-percent","ContainerMemoryMB":"2048","CreatedBy":"terraform","DaysUntilBF":"7","Description":"Memory utilization alarm for Java application","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-memory-alarm","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction","WillFireAfterChange":"false"},"tags_all":{"AlarmTrigger":"memory-over-80-percent","ContainerMemoryMB":"2048","CreatedBy":"terraform","DaysUntilBF":"7","Description":"Memory utilization alarm for Java application","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-memory-alarm","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction","WillFireAfterChange":"false"},"threshold":80,"threshold_metric_id":"","treat_missing_data":"missing","unit":""},"sensitive_values":{"alarm_actions":[false],"dimensions":{},"insufficient_data_actions":[],"metric_query":[],"ok_actions":[false],"tags":{},"tags_all":{}},"depends_on":["module.baseline.module.vpc.aws_subnet.public","module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this","module.heritage.module.memory_optimization.aws_cloudwatch_log_group.app","module.heritage.module.memory_optimization.aws_ecs_cluster.main","module.heritage.module.memory_optimization.aws_ecs_service.app","module.heritage.module.memory_optimization.aws_ecs_task_definition.app","module.heritage.module.memory_optimization.aws_iam_role.ecs_execution_role","module.heritage.module.memory_optimization.aws_iam_role.ecs_task_role","module.heritage.module.memory_optimization.aws_lb.app","module.heritage.module.memory_optimization.aws_lb_listener.app","module.heritage.module.memory_optimization.aws_lb_target_group.app","module.heritage.module.memory_optimization.aws_security_group.alb","module.heritage.module.memory_optimization.aws_security_group.ecs_tasks","module.heritage.module.memory_optimization.aws_sns_topic.alerts","module.heritage.module.memory_optimization.aws_subnet.standalone","module.heritage.module.memory_optimization.aws_vpc.standalone","module.heritage.module.memory_optimization.data.aws_availability_zones.available","module.heritage.module.memory_optimization.data.aws_region.current","module.heritage.module.memory_optimization.data.aws_subnets.default","module.heritage.module.memory_optimization.data.aws_vpc.default","module.heritage.module.memory_optimization.random_id.suffix"]},{"address":"module.heritage[0].module.memory_optimization.aws_cloudwatch_metric_alarm.low_task_count[0]","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"low_task_count","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"actions_enabled":true,"alarm_actions":["arn:aws:sns:eu-west-2:540044833068:scenarios--27e78067-alerts"],"alarm_description":"This metric monitors ECS running task count - WILL FIRE when containers crash due to OOM","alarm_name":"scenarios--27e78067-low-task-count","arn":"arn:aws:cloudwatch:eu-west-2:540044833068:alarm:scenarios--27e78067-low-task-count","comparison_operator":"LessThanThreshold","datapoints_to_alarm":0,"dimensions":{"ClusterName":"scenarios--27e78067-cluster","ServiceName":"scenarios--27e78067-service"},"evaluate_low_sample_count_percentiles":"","evaluation_periods":2,"extended_statistic":"","id":"scenarios--27e78067-low-task-count","insufficient_data_actions":[],"metric_name":"RunningTaskCount","metric_query":[],"namespace":"AWS/ECS","ok_actions":["arn:aws:sns:eu-west-2:540044833068:scenarios--27e78067-alerts"],"period":300,"statistic":"Average","tags":{"BusinessImpact":"service-degradation","CrashCause":"OOM-when-memory-reduced","CreatedBy":"terraform","DaysUntilBF":"7","Description":"Task count alarm for container health monitoring","Environment":"demo","ExpectedTasks":"3","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-task-count-alarm","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction","ThresholdTasks":"2.4"},"tags_all":{"BusinessImpact":"service-degradation","CrashCause":"OOM-when-memory-reduced","CreatedBy":"terraform","DaysUntilBF":"7","Description":"Task count alarm for container health monitoring","Environment":"demo","ExpectedTasks":"3","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-task-count-alarm","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction","ThresholdTasks":"2.4"},"threshold":2.4,"threshold_metric_id":"","treat_missing_data":"missing","unit":""},"sensitive_values":{"alarm_actions":[false],"dimensions":{},"insufficient_data_actions":[],"metric_query":[],"ok_actions":[false],"tags":{},"tags_all":{}},"depends_on":["module.baseline.module.vpc.aws_subnet.public","module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this","module.heritage.module.memory_optimization.aws_cloudwatch_log_group.app","module.heritage.module.memory_optimization.aws_ecs_cluster.main","module.heritage.module.memory_optimization.aws_ecs_service.app","module.heritage.module.memory_optimization.aws_ecs_task_definition.app","module.heritage.module.memory_optimization.aws_iam_role.ecs_execution_role","module.heritage.module.memory_optimization.aws_iam_role.ecs_task_role","module.heritage.module.memory_optimization.aws_lb.app","module.heritage.module.memory_optimization.aws_lb_listener.app","module.heritage.module.memory_optimization.aws_lb_target_group.app","module.heritage.module.memory_optimization.aws_security_group.alb","module.heritage.module.memory_optimization.aws_security_group.ecs_tasks","module.heritage.module.memory_optimization.aws_sns_topic.alerts","module.heritage.module.memory_optimization.aws_subnet.standalone","module.heritage.module.memory_optimization.aws_vpc.standalone","module.heritage.module.memory_optimization.data.aws_availability_zones.available","module.heritage.module.memory_optimization.data.aws_region.current","module.heritage.module.memory_optimization.data.aws_subnets.default","module.heritage.module.memory_optimization.data.aws_vpc.default","module.heritage.module.memory_optimization.random_id.suffix"]},{"address":"module.heritage[0].module.memory_optimization.aws_cloudwatch_metric_alarm.unhealthy_targets[0]","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"unhealthy_targets","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"actions_enabled":true,"alarm_actions":["arn:aws:sns:eu-west-2:540044833068:scenarios--27e78067-alerts"],"alarm_description":"This metric monitors ALB unhealthy targets - will fire when containers become unresponsive","alarm_name":"scenarios--27e78067-unhealthy-targets","arn":"arn:aws:cloudwatch:eu-west-2:540044833068:alarm:scenarios--27e78067-unhealthy-targets","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":0,"dimensions":{"LoadBalancer":"app/scenarios--27e78067-alb/d1465e8f5a619f26","TargetGroup":"targetgroup/scenarios--27e78067-tg/0ce05c8cfec9e2f1"},"evaluate_low_sample_count_percentiles":"","evaluation_periods":2,"extended_statistic":"","id":"scenarios--27e78067-unhealthy-targets","insufficient_data_actions":[],"metric_name":"UnHealthyHostCount","metric_query":[],"namespace":"AWS/ApplicationELB","ok_actions":[],"period":60,"statistic":"Average","tags":{"BusinessRisk":"outage-before-peak-season","CreatedBy":"terraform","DaysUntilBF":"7","DeregistrationTime":"5s","Description":"ALB target health monitoring for application availability","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-unhealthy-targets-alarm","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","RollbackCapability":"insufficient","Scenario":"cost-reduction","UserExperience":"failed-requests-during-crashes"},"tags_all":{"BusinessRisk":"outage-before-peak-season","CreatedBy":"terraform","DaysUntilBF":"7","DeregistrationTime":"5s","Description":"ALB target health monitoring for application availability","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-unhealthy-targets-alarm","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","RollbackCapability":"insufficient","Scenario":"cost-reduction","UserExperience":"failed-requests-during-crashes"},"threshold":0,"threshold_metric_id":"","treat_missing_data":"missing","unit":""},"sensitive_values":{"alarm_actions":[false],"dimensions":{},"insufficient_data_actions":[],"metric_query":[],"ok_actions":[],"tags":{},"tags_all":{}},"depends_on":["module.baseline.module.vpc.aws_subnet.public","module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this","module.heritage.module.memory_optimization.aws_lb.app","module.heritage.module.memory_optimization.aws_lb_target_group.app","module.heritage.module.memory_optimization.aws_security_group.alb","module.heritage.module.memory_optimization.aws_sns_topic.alerts","module.heritage.module.memory_optimization.aws_subnet.standalone","module.heritage.module.memory_optimization.aws_vpc.standalone","module.heritage.module.memory_optimization.data.aws_availability_zones.available","module.heritage.module.memory_optimization.data.aws_subnets.default","module.heritage.module.memory_optimization.data.aws_vpc.default","module.heritage.module.memory_optimization.random_id.suffix"]},{"address":"module.heritage[0].module.memory_optimization.aws_cloudwatch_query_definition.oom_events[0]","mode":"managed","type":"aws_cloudwatch_query_definition","name":"oom_events","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"8d2b4d24-f4de-4ace-965a-54d45e1ad99e","log_group_names":["/ecs/scenarios--27e78067"],"name":"scenarios--27e78067-oom-analysis","query_definition_id":"8d2b4d24-f4de-4ace-965a-54d45e1ad99e","query_string":"fields @timestamp, @message\n| filter @message like /OutOfMemoryError/\n| sort @timestamp desc\n| limit 100\n"},"sensitive_values":{"log_group_names":[false]},"depends_on":["module.heritage.module.memory_optimization.aws_cloudwatch_log_group.app","module.heritage.module.memory_optimization.random_id.suffix"]},{"address":"module.heritage[0].module.memory_optimization.aws_ecs_cluster.main[0]","mode":"managed","type":"aws_ecs_cluster","name":"main","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ecs:eu-west-2:540044833068:cluster/scenarios--27e78067-cluster","configuration":[],"id":"arn:aws:ecs:eu-west-2:540044833068:cluster/scenarios--27e78067-cluster","name":"scenarios--27e78067-cluster","service_connect_defaults":[],"setting":[{"name":"containerInsights","value":"disabled"}],"tags":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"ECS cluster for memory optimization demo - all 3 containers will restart on memory change","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-cluster","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"tags_all":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"ECS cluster for memory optimization demo - all 3 containers will restart on memory change","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-cluster","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"}},"sensitive_values":{"configuration":[],"service_connect_defaults":[],"setting":[{}],"tags":{},"tags_all":{}},"depends_on":["module.heritage.module.memory_optimization.random_id.suffix"]},{"address":"module.heritage[0].module.memory_optimization.aws_ecs_service.app[0]","mode":"managed","type":"aws_ecs_service","name":"app","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"alarms":[],"availability_zone_rebalancing":"DISABLED","capacity_provider_strategy":[],"cluster":"arn:aws:ecs:eu-west-2:540044833068:cluster/scenarios--27e78067-cluster","deployment_circuit_breaker":[{"enable":false,"rollback":false}],"deployment_controller":[{"type":"ECS"}],"deployment_maximum_percent":200,"deployment_minimum_healthy_percent":100,"desired_count":3,"enable_ecs_managed_tags":false,"enable_execute_command":false,"force_delete":null,"force_new_deployment":null,"health_check_grace_period_seconds":0,"iam_role":"/aws-service-role/ecs.amazonaws.com/AWSServiceRoleForECS","id":"arn:aws:ecs:eu-west-2:540044833068:service/scenarios--27e78067-cluster/scenarios--27e78067-service","launch_type":"FARGATE","load_balancer":[{"container_name":"tomcat-app","container_port":8080,"elb_name":"","target_group_arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/scenarios--27e78067-tg/0ce05c8cfec9e2f1"}],"name":"scenarios--27e78067-service","network_configuration":[{"assign_public_ip":true,"security_groups":["sg-07496007262e8cd03"],"subnets":["subnet-07fc72cf57c70e4f0","subnet-0a1b287732e8ad0b7"]}],"ordered_placement_strategy":[],"placement_constraints":[],"platform_version":"LATEST","propagate_tags":"NONE","scheduling_strategy":"REPLICA","service_connect_configuration":[],"service_registries":[],"tags":{"BusinessContext":"cost-optimization","ContainersAffected":"3","CreatedBy":"terraform","DaysUntilBF":"7","DeploymentType":"rolling","Description":"ECS service running Java application containers","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-service","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"tags_all":{"BusinessContext":"cost-optimization","ContainersAffected":"3","CreatedBy":"terraform","DaysUntilBF":"7","DeploymentType":"rolling","Description":"ECS service running Java application containers","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-service","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"task_definition":"arn:aws:ecs:eu-west-2:540044833068:task-definition/scenarios--27e78067-task:1","timeouts":null,"triggers":{},"volume_configuration":[],"vpc_lattice_configurations":[],"wait_for_steady_state":false},"sensitive_values":{"alarms":[],"capacity_provider_strategy":[],"deployment_circuit_breaker":[{}],"deployment_controller":[{}],"load_balancer":[{}],"network_configuration":[{"security_groups":[false],"subnets":[false,false]}],"ordered_placement_strategy":[],"placement_constraints":[],"service_connect_configuration":[],"service_registries":[],"tags":{},"tags_all":{},"triggers":{},"volume_configuration":[],"vpc_lattice_configurations":[]},"depends_on":["module.baseline.module.vpc.aws_subnet.public","module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this","module.heritage.module.memory_optimization.aws_cloudwatch_log_group.app","module.heritage.module.memory_optimization.aws_ecs_cluster.main","module.heritage.module.memory_optimization.aws_ecs_task_definition.app","module.heritage.module.memory_optimization.aws_iam_role.ecs_execution_role","module.heritage.module.memory_optimization.aws_iam_role.ecs_task_role","module.heritage.module.memory_optimization.aws_lb.app","module.heritage.module.memory_optimization.aws_lb_listener.app","module.heritage.module.memory_optimization.aws_lb_target_group.app","module.heritage.module.memory_optimization.aws_security_group.alb","module.heritage.module.memory_optimization.aws_security_group.ecs_tasks","module.heritage.module.memory_optimization.aws_subnet.standalone","module.heritage.module.memory_optimization.aws_vpc.standalone","module.heritage.module.memory_optimization.data.aws_availability_zones.available","module.heritage.module.memory_optimization.data.aws_region.current","module.heritage.module.memory_optimization.data.aws_subnets.default","module.heritage.module.memory_optimization.data.aws_vpc.default","module.heritage.module.memory_optimization.random_id.suffix"]},{"address":"module.heritage[0].module.memory_optimization.aws_ecs_task_definition.app[0]","mode":"managed","type":"aws_ecs_task_definition","name":"app","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ecs:eu-west-2:540044833068:task-definition/scenarios--27e78067-task:1","arn_without_revision":"arn:aws:ecs:eu-west-2:540044833068:task-definition/scenarios--27e78067-task","container_definitions":"[{\"environment\":[{\"name\":\"CATALINA_OPTS\",\"value\":\"-Djava.security.egd=file:/dev/./urandom\"},{\"name\":\"JAVA_OPTS\",\"value\":\"-Xmx1536m -Xms1536m -XX:+UseG1GC -XX:MaxGCPauseMillis=200\"}],\"essential\":true,\"healthCheck\":{\"command\":[\"CMD-SHELL\",\"curl -f http://localhost:8080/ || exit 1\"],\"interval\":30,\"retries\":3,\"startPeriod\":120,\"timeout\":5},\"image\":\"tomcat:9-jre11\",\"logConfiguration\":{\"logDriver\":\"awslogs\",\"options\":{\"awslogs-group\":\"/ecs/scenarios--27e78067\",\"awslogs-region\":\"eu-west-2\",\"awslogs-stream-prefix\":\"ecs\"}},\"memoryReservation\":800,\"mountPoints\":[],\"name\":\"tomcat-app\",\"portMappings\":[{\"containerPort\":8080,\"hostPort\":8080,\"protocol\":\"tcp\"}],\"systemControls\":[],\"volumesFrom\":[]}]","cpu":"512","enable_fault_injection":false,"ephemeral_storage":[],"execution_role_arn":"arn:aws:iam::540044833068:role/scenarios--27e78067-ecs-execution-role","family":"scenarios--27e78067-task","id":"scenarios--27e78067-task","inference_accelerator":[],"ipc_mode":"","memory":"2048","network_mode":"awsvpc","pid_mode":"","placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":["FARGATE"],"revision":1,"runtime_platform":[],"skip_destroy":false,"tags":{"ContainerMemoryMB":"2048","CreatedBy":"terraform","DaysUntilBF":"7","Description":"ECS task definition with Java heap configuration","Environment":"demo","JavaHeapMB":"1536","JavaHeapSizeMB":"1536","MemoryMB":"2048","MemoryOptimized":"true","MemoryOverheadMB":"256","Name":"scenarios--27e78067-task","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction","TotalRequiredMB":"1792"},"tags_all":{"ContainerMemoryMB":"2048","CreatedBy":"terraform","DaysUntilBF":"7","Description":"ECS task definition with Java heap configuration","Environment":"demo","JavaHeapMB":"1536","JavaHeapSizeMB":"1536","MemoryMB":"2048","MemoryOptimized":"true","MemoryOverheadMB":"256","Name":"scenarios--27e78067-task","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction","TotalRequiredMB":"1792"},"task_role_arn":"arn:aws:iam::540044833068:role/scenarios--27e78067-ecs-task-role","track_latest":false,"volume":[]},"sensitive_values":{"ephemeral_storage":[],"inference_accelerator":[],"placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":[false],"runtime_platform":[],"tags":{},"tags_all":{},"volume":[]},"depends_on":["module.heritage.module.memory_optimization.aws_cloudwatch_log_group.app","module.heritage.module.memory_optimization.aws_iam_role.ecs_execution_role","module.heritage.module.memory_optimization.aws_iam_role.ecs_task_role","module.heritage.module.memory_optimization.data.aws_region.current","module.heritage.module.memory_optimization.random_id.suffix"]},{"address":"module.heritage[0].module.memory_optimization.aws_iam_role.ecs_execution_role[0]","mode":"managed","type":"aws_iam_role","name":"ecs_execution_role","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::540044833068:role/scenarios--27e78067-ecs-execution-role","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ecs-tasks.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","create_date":"2025-11-17T23:20:20Z","description":"","force_detach_policies":false,"id":"scenarios--27e78067-ecs-execution-role","inline_policy":[],"managed_policy_arns":["arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy"],"max_session_duration":3600,"name":"scenarios--27e78067-ecs-execution-role","name_prefix":"","path":"/","permissions_boundary":"","tags":{"CreatedBy":"terraform","DaysUntilBF":"7","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"tags_all":{"CreatedBy":"terraform","DaysUntilBF":"7","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"unique_id":"AROAX3PJOGEWEKKJ5H6OA"},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[false],"tags":{},"tags_all":{}},"depends_on":["module.heritage.module.memory_optimization.random_id.suffix"]},{"address":"module.heritage[0].module.memory_optimization.aws_iam_role.ecs_task_role[0]","mode":"managed","type":"aws_iam_role","name":"ecs_task_role","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::540044833068:role/scenarios--27e78067-ecs-task-role","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ecs-tasks.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","create_date":"2025-11-17T23:20:19Z","description":"","force_detach_policies":false,"id":"scenarios--27e78067-ecs-task-role","inline_policy":[],"managed_policy_arns":[],"max_session_duration":3600,"name":"scenarios--27e78067-ecs-task-role","name_prefix":"","path":"/","permissions_boundary":"","tags":{"CreatedBy":"terraform","DaysUntilBF":"7","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"tags_all":{"CreatedBy":"terraform","DaysUntilBF":"7","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"unique_id":"AROAX3PJOGEWP7USRZI3E"},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags":{},"tags_all":{}},"depends_on":["module.heritage.module.memory_optimization.random_id.suffix"]},{"address":"module.heritage[0].module.memory_optimization.aws_iam_role_policy_attachment.ecs_execution_role_policy[0]","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ecs_execution_role_policy","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"scenarios--27e78067-ecs-execution-role-20251117232023483800000005","policy_arn":"arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy","role":"scenarios--27e78067-ecs-execution-role"},"sensitive_values":{},"depends_on":["module.heritage.module.memory_optimization.aws_iam_role.ecs_execution_role","module.heritage.module.memory_optimization.random_id.suffix"]},{"address":"module.heritage[0].module.memory_optimization.aws_lb.app[0]","mode":"managed","type":"aws_lb","name":"app","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"access_logs":[{"bucket":"","enabled":false,"prefix":""}],"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:loadbalancer/app/scenarios--27e78067-alb/d1465e8f5a619f26","arn_suffix":"app/scenarios--27e78067-alb/d1465e8f5a619f26","client_keep_alive":3600,"connection_logs":[{"bucket":"","enabled":false,"prefix":""}],"customer_owned_ipv4_pool":"","desync_mitigation_mode":"defensive","dns_name":"scenarios--27e78067-alb-513392904.eu-west-2.elb.amazonaws.com","dns_record_client_routing_policy":null,"drop_invalid_header_fields":false,"enable_cross_zone_load_balancing":true,"enable_deletion_protection":false,"enable_http2":true,"enable_tls_version_and_cipher_suite_headers":false,"enable_waf_fail_open":false,"enable_xff_client_port":false,"enable_zonal_shift":false,"enforce_security_group_inbound_rules_on_private_link_traffic":"","id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:loadbalancer/app/scenarios--27e78067-alb/d1465e8f5a619f26","idle_timeout":60,"internal":false,"ip_address_type":"ipv4","ipam_pools":[],"load_balancer_type":"application","minimum_load_balancer_capacity":[],"name":"scenarios--27e78067-alb","name_prefix":"","preserve_host_header":false,"security_groups":["sg-0b6f7b1aeeca6c2bc"],"subnet_mapping":[{"allocation_id":"","ipv6_address":"","outpost_id":"","private_ipv4_address":"","subnet_id":"subnet-07fc72cf57c70e4f0"},{"allocation_id":"","ipv6_address":"","outpost_id":"","private_ipv4_address":"","subnet_id":"subnet-0a1b287732e8ad0b7"}],"subnets":["subnet-07fc72cf57c70e4f0","subnet-0a1b287732e8ad0b7"],"tags":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"ALB for memory optimization demo - will route to failing containers after memory change","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-alb","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction","context:black-friday-traffic":"10x normal load expected","context:capacity-planning":"load balancer configured for high traffic"},"tags_all":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"ALB for memory optimization demo - will route to failing containers after memory change","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-alb","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction","context:black-friday-traffic":"10x normal load expected","context:capacity-planning":"load balancer configured for high traffic"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298","xff_header_processing_mode":"append","zone_id":"ZHURV8PSTC4K8"},"sensitive_values":{"access_logs":[{}],"connection_logs":[{}],"ipam_pools":[],"minimum_load_balancer_capacity":[],"security_groups":[false],"subnet_mapping":[{},{}],"subnets":[false,false],"tags":{},"tags_all":{}},"depends_on":["module.baseline.module.vpc.aws_subnet.public","module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this","module.heritage.module.memory_optimization.aws_security_group.alb","module.heritage.module.memory_optimization.aws_subnet.standalone","module.heritage.module.memory_optimization.aws_vpc.standalone","module.heritage.module.memory_optimization.data.aws_availability_zones.available","module.heritage.module.memory_optimization.data.aws_subnets.default","module.heritage.module.memory_optimization.data.aws_vpc.default","module.heritage.module.memory_optimization.random_id.suffix"]},{"address":"module.heritage[0].module.memory_optimization.aws_lb_listener.app[0]","mode":"managed","type":"aws_lb_listener","name":"app","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"alpn_policy":null,"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:listener/app/scenarios--27e78067-alb/d1465e8f5a619f26/424adbb0b1b5a6ce","certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[{"stickiness":[{"duration":0,"enabled":false}],"target_group":[{"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/scenarios--27e78067-tg/0ce05c8cfec9e2f1","weight":1}]}],"order":1,"redirect":[],"target_group_arn":"","type":"forward"}],"id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:listener/app/scenarios--27e78067-alb/d1465e8f5a619f26/424adbb0b1b5a6ce","load_balancer_arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:loadbalancer/app/scenarios--27e78067-alb/d1465e8f5a619f26","mutual_authentication":[],"port":80,"protocol":"HTTP","routing_http_request_x_amzn_mtls_clientcert_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_issuer_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_leaf_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_serial_number_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_subject_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_validity_header_name":null,"routing_http_request_x_amzn_tls_cipher_suite_header_name":null,"routing_http_request_x_amzn_tls_version_header_name":null,"routing_http_response_access_control_allow_credentials_header_value":"","routing_http_response_access_control_allow_headers_header_value":"","routing_http_response_access_control_allow_methods_header_value":"","routing_http_response_access_control_allow_origin_header_value":"","routing_http_response_access_control_expose_headers_header_value":"","routing_http_response_access_control_max_age_header_value":"","routing_http_response_content_security_policy_header_value":"","routing_http_response_server_enabled":true,"routing_http_response_strict_transport_security_header_value":"","routing_http_response_x_content_type_options_header_value":"","routing_http_response_x_frame_options_header_value":"","ssl_policy":"","tags":{"CreatedBy":"terraform","DaysUntilBF":"7","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-listener","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"tags_all":{"CreatedBy":"terraform","DaysUntilBF":"7","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-listener","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"tcp_idle_timeout_seconds":null,"timeouts":null},"sensitive_values":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[{"stickiness":[{}],"target_group":[{}]}],"redirect":[]}],"mutual_authentication":[],"tags":{},"tags_all":{}},"depends_on":["module.baseline.module.vpc.aws_subnet.public","module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this","module.heritage.module.memory_optimization.aws_lb.app","module.heritage.module.memory_optimization.aws_lb_target_group.app","module.heritage.module.memory_optimization.aws_security_group.alb","module.heritage.module.memory_optimization.aws_subnet.standalone","module.heritage.module.memory_optimization.aws_vpc.standalone","module.heritage.module.memory_optimization.data.aws_availability_zones.available","module.heritage.module.memory_optimization.data.aws_subnets.default","module.heritage.module.memory_optimization.data.aws_vpc.default","module.heritage.module.memory_optimization.random_id.suffix"]},{"address":"module.heritage[0].module.memory_optimization.aws_lb_target_group.app[0]","mode":"managed","type":"aws_lb_target_group","name":"app","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/scenarios--27e78067-tg/0ce05c8cfec9e2f1","arn_suffix":"targetgroup/scenarios--27e78067-tg/0ce05c8cfec9e2f1","connection_termination":null,"deregistration_delay":"5","health_check":[{"enabled":true,"healthy_threshold":2,"interval":30,"matcher":"200","path":"/","port":"traffic-port","protocol":"HTTP","timeout":5,"unhealthy_threshold":2}],"id":"arn:aws:elasticloadbalancing:eu-west-2:540044833068:targetgroup/scenarios--27e78067-tg/0ce05c8cfec9e2f1","ip_address_type":"ipv4","lambda_multi_value_headers_enabled":false,"load_balancer_arns":["arn:aws:elasticloadbalancing:eu-west-2:540044833068:loadbalancer/app/scenarios--27e78067-alb/d1465e8f5a619f26"],"load_balancing_algorithm_type":"round_robin","load_balancing_anomaly_mitigation":"off","load_balancing_cross_zone_enabled":"use_load_balancer_configuration","name":"scenarios--27e78067-tg","name_prefix":"","port":8080,"preserve_client_ip":null,"protocol":"HTTP","protocol_version":"HTTP1","proxy_protocol_v2":false,"slow_start":0,"stickiness":[{"cookie_duration":86400,"cookie_name":"","enabled":false,"type":"lb_cookie"}],"tags":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"Target group with 5s deregistration - NO TIME FOR ROLLBACK","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-tg","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction","risk:black-friday-timing":"change 7 days before peak","risk:deregistration-delay":"5s","risk:rollback-capability":"none"},"tags_all":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"Target group with 5s deregistration - NO TIME FOR ROLLBACK","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-tg","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction","risk:black-friday-timing":"change 7 days before peak","risk:deregistration-delay":"5s","risk:rollback-capability":"none"},"target_failover":[{"on_deregistration":null,"on_unhealthy":null}],"target_group_health":[{"dns_failover":[{"minimum_healthy_targets_count":"1","minimum_healthy_targets_percentage":"off"}],"unhealthy_state_routing":[{"minimum_healthy_targets_count":1,"minimum_healthy_targets_percentage":"off"}]}],"target_health_state":[{"enable_unhealthy_connection_termination":null,"unhealthy_draining_interval":null}],"target_type":"ip","vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"health_check":[{}],"load_balancer_arns":[false],"stickiness":[{}],"tags":{},"tags_all":{},"target_failover":[{}],"target_group_health":[{"dns_failover":[{}],"unhealthy_state_routing":[{}]}],"target_health_state":[{}]},"depends_on":["module.baseline.module.vpc.aws_vpc.this","module.heritage.module.memory_optimization.aws_vpc.standalone","module.heritage.module.memory_optimization.data.aws_vpc.default","module.heritage.module.memory_optimization.random_id.suffix"]},{"address":"module.heritage[0].module.memory_optimization.aws_security_group.alb[0]","mode":"managed","type":"aws_security_group","name":"alb","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:eu-west-2:540044833068:security-group/sg-0b6f7b1aeeca6c2bc","description":"Security group for ALB - allows public HTTP access","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"All outbound traffic","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-0b6f7b1aeeca6c2bc","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"HTTP from internet","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":80}],"name":"scenarios--27e78067-alb-sg","name_prefix":"","owner_id":"540044833068","revoke_rules_on_delete":false,"tags":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"ALB security group - public access for Black Friday capacity testing","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-alb-sg","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"tags_all":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"ALB security group - public access for Black Friday capacity testing","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-alb-sg","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}},"depends_on":["module.baseline.module.vpc.aws_vpc.this","module.heritage.module.memory_optimization.aws_vpc.standalone","module.heritage.module.memory_optimization.data.aws_vpc.default","module.heritage.module.memory_optimization.random_id.suffix"]},{"address":"module.heritage[0].module.memory_optimization.aws_security_group.ecs_tasks[0]","mode":"managed","type":"aws_security_group","name":"ecs_tasks","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:eu-west-2:540044833068:security-group/sg-07496007262e8cd03","description":"Security group for ECS tasks - allows ALB access","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"All outbound traffic","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-07496007262e8cd03","ingress":[{"cidr_blocks":[],"description":"HTTP from ALB","from_port":8080,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":["sg-0b6f7b1aeeca6c2bc"],"self":false,"to_port":8080}],"name":"scenarios--27e78067-ecs-sg","name_prefix":"","owner_id":"540044833068","revoke_rules_on_delete":false,"tags":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"ECS tasks security group - containers will crash after memory optimization","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-ecs-sg","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction","warning:containers-affected":"3 containers","warning:crash-behavior":"immediate OOM after memory reduction"},"tags_all":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"ECS tasks security group - containers will crash after memory optimization","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-ecs-sg","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction","warning:containers-affected":"3 containers","warning:crash-behavior":"immediate OOM after memory reduction"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[false]}],"tags":{},"tags_all":{}},"depends_on":["module.baseline.module.vpc.aws_vpc.this","module.heritage.module.memory_optimization.aws_security_group.alb","module.heritage.module.memory_optimization.aws_vpc.standalone","module.heritage.module.memory_optimization.data.aws_vpc.default","module.heritage.module.memory_optimization.random_id.suffix"]},{"address":"module.heritage[0].module.memory_optimization.aws_sns_topic.alerts[0]","mode":"managed","type":"aws_sns_topic","name":"alerts","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"application_failure_feedback_role_arn":"","application_success_feedback_role_arn":"","application_success_feedback_sample_rate":0,"archive_policy":"","arn":"arn:aws:sns:eu-west-2:540044833068:scenarios--27e78067-alerts","beginning_archive_time":"","content_based_deduplication":false,"delivery_policy":"","display_name":"","fifo_throughput_scope":"","fifo_topic":false,"firehose_failure_feedback_role_arn":"","firehose_success_feedback_role_arn":"","firehose_success_feedback_sample_rate":0,"http_failure_feedback_role_arn":"","http_success_feedback_role_arn":"","http_success_feedback_sample_rate":0,"id":"arn:aws:sns:eu-west-2:540044833068:scenarios--27e78067-alerts","kms_master_key_id":"","lambda_failure_feedback_role_arn":"","lambda_success_feedback_role_arn":"","lambda_success_feedback_sample_rate":0,"name":"scenarios--27e78067-alerts","name_prefix":"","owner":"540044833068","policy":"{\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Action\":[\"SNS:GetTopicAttributes\",\"SNS:SetTopicAttributes\",\"SNS:AddPermission\",\"SNS:RemovePermission\",\"SNS:DeleteTopic\",\"SNS:Subscribe\",\"SNS:ListSubscriptionsByTopic\",\"SNS:Publish\"],\"Condition\":{\"StringEquals\":{\"AWS:SourceOwner\":\"540044833068\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Resource\":\"arn:aws:sns:eu-west-2:540044833068:scenarios--27e78067-alerts\",\"Sid\":\"__default_statement_ID\"}],\"Version\":\"2008-10-17\"}","signature_version":0,"sqs_failure_feedback_role_arn":"","sqs_success_feedback_role_arn":"","sqs_success_feedback_sample_rate":0,"tags":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"SNS topic for memory optimization demo alerts - will fire when containers OOM","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-alerts","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"tags_all":{"CreatedBy":"terraform","DaysUntilBF":"7","Description":"SNS topic for memory optimization demo alerts - will fire when containers OOM","Environment":"demo","JavaHeapMB":"1536","MemoryMB":"2048","Name":"scenarios--27e78067-alerts","OptimizationWorks":"true","Project":"memory-optimization","Purpose":"production-optimization","RequiredMemoryMB":"1792","RiskLevel":"low","Scenario":"cost-reduction"},"tracing_config":""},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.heritage.module.memory_optimization.random_id.suffix"]},{"address":"module.heritage[0].module.memory_optimization.random_id.suffix[0]","mode":"managed","type":"random_id","name":"suffix","index":0,"provider_name":"registry.terraform.io/hashicorp/random","schema_version":0,"values":{"b64_std":"J+eAZw==","b64_url":"J-eAZw","byte_length":4,"dec":"669483111","hex":"27e78067","id":"J-eAZw","keepers":null,"prefix":null},"sensitive_values":{}}],"address":"module.heritage[0].module.memory_optimization"},{"resources":[{"address":"module.heritage[0].module.message_size_breach[0].aws_cloudwatch_log_group.lambda_logs","mode":"managed","type":"aws_cloudwatch_log_group","name":"lambda_logs","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:logs:eu-west-2:540044833068:log-group:/aws/lambda/image-processor-terraform-example","id":"/aws/lambda/image-processor-terraform-example","kms_key_id":"","log_group_class":"STANDARD","name":"/aws/lambda/image-processor-terraform-example","name_prefix":"","retention_in_days":14,"skip_destroy":false,"tags":{"Environment":"terraform-example","Name":"Lambda Logs","Scenario":"Message Size Breach"},"tags_all":{"Environment":"terraform-example","Name":"Lambda Logs","Scenario":"Message Size Breach"}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.heritage[0].module.message_size_breach[0].aws_cloudwatch_metric_alarm.lambda_errors","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"lambda_errors","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"actions_enabled":true,"alarm_actions":[],"alarm_description":"This alarm monitors Lambda function errors","alarm_name":"lambda-errors-terraform-example","arn":"arn:aws:cloudwatch:eu-west-2:540044833068:alarm:lambda-errors-terraform-example","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":0,"dimensions":{"FunctionName":"image-processor-terraform-example"},"evaluate_low_sample_count_percentiles":"","evaluation_periods":2,"extended_statistic":"","id":"lambda-errors-terraform-example","insufficient_data_actions":[],"metric_name":"Errors","metric_query":[],"namespace":"AWS/Lambda","ok_actions":[],"period":60,"statistic":"Sum","tags":{"Environment":"terraform-example","Name":"Lambda Errors Alarm","Scenario":"Message Size Breach"},"tags_all":{"Environment":"terraform-example","Name":"Lambda Errors Alarm","Scenario":"Message Size Breach"},"threshold":5,"threshold_metric_id":"","treat_missing_data":"missing","unit":""},"sensitive_values":{"alarm_actions":[],"dimensions":{},"insufficient_data_actions":[],"metric_query":[],"ok_actions":[],"tags":{},"tags_all":{}},"depends_on":["module.heritage.module.message_size_breach.aws_iam_role.lambda_role","module.heritage.module.message_size_breach.aws_lambda_function.image_processor"]},{"address":"module.heritage[0].module.message_size_breach[0].aws_cloudwatch_metric_alarm.sqs_queue_depth","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"sqs_queue_depth","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"actions_enabled":true,"alarm_actions":[],"alarm_description":"This alarm monitors SQS queue depth","alarm_name":"sqs-queue-depth-terraform-example","arn":"arn:aws:cloudwatch:eu-west-2:540044833068:alarm:sqs-queue-depth-terraform-example","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":0,"dimensions":{"QueueName":"image-processing-terraform-example"},"evaluate_low_sample_count_percentiles":"","evaluation_periods":2,"extended_statistic":"","id":"sqs-queue-depth-terraform-example","insufficient_data_actions":[],"metric_name":"ApproximateNumberOfVisibleMessages","metric_query":[],"namespace":"AWS/SQS","ok_actions":[],"period":60,"statistic":"Average","tags":{"Environment":"terraform-example","Name":"SQS Queue Depth Alarm","Scenario":"Message Size Breach"},"tags_all":{"Environment":"terraform-example","Name":"SQS Queue Depth Alarm","Scenario":"Message Size Breach"},"threshold":100,"threshold_metric_id":"","treat_missing_data":"missing","unit":""},"sensitive_values":{"alarm_actions":[],"dimensions":{},"insufficient_data_actions":[],"metric_query":[],"ok_actions":[],"tags":{},"tags_all":{}},"depends_on":["module.heritage.module.message_size_breach.aws_sqs_queue.image_processing_dlq","module.heritage.module.message_size_breach.aws_sqs_queue.image_processing_queue"]},{"address":"module.heritage[0].module.message_size_breach[0].aws_iam_role.lambda_role","mode":"managed","type":"aws_iam_role","name":"lambda_role","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::540044833068:role/image-processor-lambda-role-terraform-example","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","create_date":"2025-11-17T23:20:22Z","description":"","force_detach_policies":false,"id":"image-processor-lambda-role-terraform-example","inline_policy":[{"name":"lambda-logs-policy-terraform-example","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"logs:CreateLogGroup\",\"logs:CreateLogStream\",\"logs:PutLogEvents\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:logs:eu-west-2:540044833068:log-group:/aws/lambda/image-processor-terraform-example:*\"}]}"}],"managed_policy_arns":["arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole","arn:aws:iam::aws:policy/service-role/AWSLambdaSQSQueueExecutionRole"],"max_session_duration":3600,"name":"image-processor-lambda-role-terraform-example","name_prefix":"","path":"/","permissions_boundary":"","tags":{"Environment":"terraform-example","Name":"Lambda Execution Role","Scenario":"Message Size Breach"},"tags_all":{"Environment":"terraform-example","Name":"Lambda Execution Role","Scenario":"Message Size Breach"},"unique_id":"AROAX3PJOGEWFCMQCXV45"},"sensitive_values":{"inline_policy":[{}],"managed_policy_arns":[false,false],"tags":{},"tags_all":{}}},{"address":"module.heritage[0].module.message_size_breach[0].aws_iam_role_policy.lambda_logs_policy","mode":"managed","type":"aws_iam_role_policy","name":"lambda_logs_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"image-processor-lambda-role-terraform-example:lambda-logs-policy-terraform-example","name":"lambda-logs-policy-terraform-example","name_prefix":"","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"logs:CreateLogGroup\",\"logs:CreateLogStream\",\"logs:PutLogEvents\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:logs:eu-west-2:540044833068:log-group:/aws/lambda/image-processor-terraform-example:*\"}]}","role":"image-processor-lambda-role-terraform-example"},"sensitive_values":{},"depends_on":["module.heritage.module.message_size_breach.aws_cloudwatch_log_group.lambda_logs","module.heritage.module.message_size_breach.aws_iam_role.lambda_role"]},{"address":"module.heritage[0].module.message_size_breach[0].aws_iam_role_policy_attachment.lambda_basic_execution","mode":"managed","type":"aws_iam_role_policy_attachment","name":"lambda_basic_execution","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"image-processor-lambda-role-terraform-example-20251117232024175700000006","policy_arn":"arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole","role":"image-processor-lambda-role-terraform-example"},"sensitive_values":{},"depends_on":["module.heritage.module.message_size_breach.aws_iam_role.lambda_role"]},{"address":"module.heritage[0].module.message_size_breach[0].aws_iam_role_policy_attachment.lambda_sqs_policy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"lambda_sqs_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"image-processor-lambda-role-terraform-example-20251117232024470000000007","policy_arn":"arn:aws:iam::aws:policy/service-role/AWSLambdaSQSQueueExecutionRole","role":"image-processor-lambda-role-terraform-example"},"sensitive_values":{},"depends_on":["module.heritage.module.message_size_breach.aws_iam_role.lambda_role"]},{"address":"module.heritage[0].module.message_size_breach[0].aws_lambda_event_source_mapping.sqs_trigger","mode":"managed","type":"aws_lambda_event_source_mapping","name":"sqs_trigger","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"amazon_managed_kafka_event_source_config":[],"arn":"arn:aws:lambda:eu-west-2:540044833068:event-source-mapping:8feec500-57de-435d-b185-bc3e9d076225","batch_size":10,"bisect_batch_on_function_error":false,"destination_config":[],"document_db_event_source_config":[],"enabled":true,"event_source_arn":"arn:aws:sqs:eu-west-2:540044833068:image-processing-terraform-example","filter_criteria":[],"function_arn":"arn:aws:lambda:eu-west-2:540044833068:function:image-processor-terraform-example","function_name":"arn:aws:lambda:eu-west-2:540044833068:function:image-processor-terraform-example","function_response_types":[],"id":"8feec500-57de-435d-b185-bc3e9d076225","kms_key_arn":"","last_modified":"2025-11-17T23:21:15Z","last_processing_result":"","maximum_batching_window_in_seconds":5,"maximum_record_age_in_seconds":0,"maximum_retry_attempts":0,"metrics_config":[],"parallelization_factor":0,"provisioned_poller_config":[],"queues":[],"scaling_config":[],"self_managed_event_source":[],"self_managed_kafka_event_source_config":[],"source_access_configuration":[],"starting_position":"","starting_position_timestamp":"","state":"Enabled","state_transition_reason":"USER_INITIATED","tags":{},"tags_all":{},"topics":[],"tumbling_window_in_seconds":0,"uuid":"8feec500-57de-435d-b185-bc3e9d076225"},"sensitive_values":{"amazon_managed_kafka_event_source_config":[],"destination_config":[],"document_db_event_source_config":[],"filter_criteria":[],"function_response_types":[],"metrics_config":[],"provisioned_poller_config":[],"queues":[],"scaling_config":[],"self_managed_event_source":[],"self_managed_kafka_event_source_config":[],"source_access_configuration":[],"tags":{},"tags_all":{},"topics":[]},"depends_on":["module.heritage.module.message_size_breach.aws_iam_role.lambda_role","module.heritage.module.message_size_breach.aws_iam_role_policy_attachment.lambda_sqs_policy","module.heritage.module.message_size_breach.aws_lambda_function.image_processor","module.heritage.module.message_size_breach.aws_sqs_queue.image_processing_dlq","module.heritage.module.message_size_breach.aws_sqs_queue.image_processing_queue"]},{"address":"module.heritage[0].module.message_size_breach[0].aws_lambda_function.image_processor","mode":"managed","type":"aws_lambda_function","name":"image_processor","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"architectures":["x86_64"],"arn":"arn:aws:lambda:eu-west-2:540044833068:function:image-processor-terraform-example","code_sha256":"mMMwfSINMw8K3MiGaVuM4l2UHmgB+qZqX+Y26IWJut0=","code_signing_config_arn":"","dead_letter_config":[],"description":"","environment":[],"ephemeral_storage":[{"size":512}],"file_system_config":[],"filename":"modules/heritage/message-size-breach/lambda_function.zip","function_name":"image-processor-terraform-example","handler":"lambda_function.lambda_handler","id":"image-processor-terraform-example","image_config":[],"image_uri":"","invoke_arn":"arn:aws:apigateway:eu-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-2:540044833068:function:image-processor-terraform-example/invocations","kms_key_arn":"","last_modified":"2025-12-09T19:44:11.000+0000","layers":[],"logging_config":[{"application_log_level":"","log_format":"Text","log_group":"/aws/lambda/image-processor-terraform-example","system_log_level":""}],"memory_size":1024,"package_type":"Zip","publish":false,"qualified_arn":"arn:aws:lambda:eu-west-2:540044833068:function:image-processor-terraform-example:$LATEST","qualified_invoke_arn":"arn:aws:apigateway:eu-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-2:540044833068:function:image-processor-terraform-example:$LATEST/invocations","replace_security_groups_on_destroy":null,"replacement_security_group_ids":null,"reserved_concurrent_executions":-1,"role":"arn:aws:iam::540044833068:role/image-processor-lambda-role-terraform-example","runtime":"python3.13","s3_bucket":null,"s3_key":null,"s3_object_version":null,"signing_job_arn":"","signing_profile_version_arn":"","skip_destroy":false,"snap_start":[],"source_code_hash":"mMMwfSINMw8K3MiGaVuM4l2UHmgB+qZqX+Y26IWJut0=","source_code_size":404,"tags":{"Environment":"terraform-example","Name":"Image Processor","Scenario":"Message Size Breach"},"tags_all":{"Environment":"terraform-example","Name":"Image Processor","Scenario":"Message Size Breach"},"timeout":180,"timeouts":null,"tracing_config":[{"mode":"PassThrough"}],"version":"$LATEST","vpc_config":[]},"sensitive_values":{"architectures":[false],"dead_letter_config":[],"environment":[],"ephemeral_storage":[{}],"file_system_config":[],"image_config":[],"layers":[],"logging_config":[{}],"snap_start":[],"tags":{},"tags_all":{},"tracing_config":[{}],"vpc_config":[]},"depends_on":["module.heritage.module.message_size_breach.aws_iam_role.lambda_role"]},{"address":"module.heritage[0].module.message_size_breach[0].aws_sqs_queue.image_processing_dlq","mode":"managed","type":"aws_sqs_queue","name":"image_processing_dlq","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:sqs:eu-west-2:540044833068:image-processing-dlq-terraform-example","content_based_deduplication":false,"deduplication_scope":"","delay_seconds":0,"fifo_queue":false,"fifo_throughput_limit":"","id":"https://sqs.eu-west-2.amazonaws.com/540044833068/image-processing-dlq-terraform-example","kms_data_key_reuse_period_seconds":300,"kms_master_key_id":"","max_message_size":262144,"message_retention_seconds":1209600,"name":"image-processing-dlq-terraform-example","name_prefix":"","policy":"","receive_wait_time_seconds":0,"redrive_allow_policy":"","redrive_policy":"","sqs_managed_sse_enabled":true,"tags":{"Environment":"terraform-example","Name":"Image Processing DLQ","Scenario":"Message Size Breach"},"tags_all":{"Environment":"terraform-example","Name":"Image Processing DLQ","Scenario":"Message Size Breach"},"timeouts":null,"url":"https://sqs.eu-west-2.amazonaws.com/540044833068/image-processing-dlq-terraform-example","visibility_timeout_seconds":30},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.heritage[0].module.message_size_breach[0].aws_sqs_queue.image_processing_queue","mode":"managed","type":"aws_sqs_queue","name":"image_processing_queue","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:sqs:eu-west-2:540044833068:image-processing-terraform-example","content_based_deduplication":false,"deduplication_scope":"","delay_seconds":0,"fifo_queue":false,"fifo_throughput_limit":"","id":"https://sqs.eu-west-2.amazonaws.com/540044833068/image-processing-terraform-example","kms_data_key_reuse_period_seconds":300,"kms_master_key_id":"","max_message_size":25600,"message_retention_seconds":1209600,"name":"image-processing-terraform-example","name_prefix":"","policy":"","receive_wait_time_seconds":20,"redrive_allow_policy":"","redrive_policy":"{\"deadLetterTargetArn\":\"arn:aws:sqs:eu-west-2:540044833068:image-processing-dlq-terraform-example\",\"maxReceiveCount\":3}","sqs_managed_sse_enabled":true,"tags":{"Environment":"terraform-example","Name":"Image Processing Queue","Scenario":"Message Size Breach"},"tags_all":{"Environment":"terraform-example","Name":"Image Processing Queue","Scenario":"Message Size Breach"},"timeouts":null,"url":"https://sqs.eu-west-2.amazonaws.com/540044833068/image-processing-terraform-example","visibility_timeout_seconds":1080},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.heritage.module.message_size_breach.aws_sqs_queue.image_processing_dlq"]}],"address":"module.heritage[0].module.message_size_breach[0]"},{"resources":[{"address":"module.heritage[0].module.s3_one.data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"account_id":"540044833068","arn":"arn:aws:sts::540044833068:assumed-role/AWSReservedSSO_AWSAdministratorAccess_6166336551098275/dylan@overmind.tech","id":"540044833068","user_id":"AROAX3PJOGEWG2R7JO72P:dylan@overmind.tech"},"sensitive_values":{}},{"address":"module.heritage[0].module.s3_one.data.aws_partition.current","mode":"data","type":"aws_partition","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"dns_suffix":"amazonaws.com","id":"aws","partition":"aws","reverse_dns_prefix":"com.amazonaws"},"sensitive_values":{}},{"address":"module.heritage[0].module.s3_one.data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"Europe (London)","endpoint":"ec2.eu-west-2.amazonaws.com","id":"eu-west-2","name":"eu-west-2"},"sensitive_values":{}},{"address":"module.heritage[0].module.s3_one.aws_s3_bucket.this[0]","mode":"managed","type":"aws_s3_bucket","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"acceleration_status":"","acl":null,"arn":"arn:aws:s3:::s3-one-adequate-gibbon20251117232020021100000002","bucket":"s3-one-adequate-gibbon20251117232020021100000002","bucket_domain_name":"s3-one-adequate-gibbon20251117232020021100000002.s3.amazonaws.com","bucket_prefix":"s3-one-adequate-gibbon","bucket_regional_domain_name":"s3-one-adequate-gibbon20251117232020021100000002.s3.eu-west-2.amazonaws.com","cors_rule":[],"force_destroy":true,"grant":[{"id":"05d918fa182ad8f3fa915436354b8657e3c2c59b326ecbfc43e6c00451268d0a","permissions":["FULL_CONTROL"],"type":"CanonicalUser","uri":""}],"hosted_zone_id":"Z3GKZC51ZF0DB4","id":"s3-one-adequate-gibbon20251117232020021100000002","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"object_lock_enabled":false,"policy":"{\"Statement\":[{\"Action\":\"s3:GetObject\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::cloudfront:user/CloudFront Origin Access Identity E3773WNTKP0C2U\"},\"Resource\":\"arn:aws:s3:::s3-one-adequate-gibbon20251117232020021100000002/static/*\"},{\"Action\":\"s3:GetObject\",\"Condition\":{\"StringEquals\":{\"aws:SourceArn\":\"arn:aws:cloudfront::540044833068:distribution/EX4HFUQMZ2ULI\"}},\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"cloudfront.amazonaws.com\"},\"Resource\":\"arn:aws:s3:::s3-one-adequate-gibbon20251117232020021100000002/static/*\"}],\"Version\":\"2012-10-17\"}","region":"eu-west-2","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"","sse_algorithm":"AES256"}],"bucket_key_enabled":false}]}],"tags":{},"tags_all":{},"timeouts":null,"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"sensitive_values":{"cors_rule":[],"grant":[{"permissions":[false]}],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}],"tags":{},"tags_all":{},"versioning":[{}],"website":[]},"depends_on":["module.heritage.random_pet.this"]},{"address":"module.heritage[0].module.s3_one.aws_s3_bucket_public_access_block.this[0]","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"block_public_acls":true,"block_public_policy":true,"bucket":"s3-one-adequate-gibbon20251117232020021100000002","id":"s3-one-adequate-gibbon20251117232020021100000002","ignore_public_acls":true,"restrict_public_buckets":true},"sensitive_values":{},"depends_on":["module.heritage.module.s3_one.aws_s3_bucket.this","module.heritage.random_pet.this"]}],"address":"module.heritage[0].module.s3_one"}]},{"resources":[{"address":"module.shared_security_group.data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"Europe (London)","endpoint":"ec2.eu-west-2.amazonaws.com","id":"eu-west-2","name":"eu-west-2"},"sensitive_values":{}},{"address":"module.shared_security_group.aws_instance.api_server[0]","mode":"managed","type":"aws_instance","name":"api_server","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"ami":"ami-02a95139d1d364420","arn":"arn:aws:ec2:eu-west-2:540044833068:instance/i-0e205109677d47e83","associate_public_ip_address":true,"availability_zone":"eu-west-2a","capacity_reservation_specification":[{"capacity_reservation_preference":"open","capacity_reservation_target":[]}],"cpu_core_count":1,"cpu_options":[{"amd_sev_snp":"","core_count":1,"threads_per_core":2}],"cpu_threads_per_core":2,"credit_specification":[{"cpu_credits":"unlimited"}],"disable_api_stop":false,"disable_api_termination":false,"ebs_block_device":[],"ebs_optimized":false,"enable_primary_ipv6":null,"enclave_options":[{"enabled":false}],"ephemeral_block_device":[],"get_password_data":false,"hibernation":false,"host_id":"","host_resource_group_arn":null,"iam_instance_profile":"","id":"i-0e205109677d47e83","instance_initiated_shutdown_behavior":"stop","instance_lifecycle":"","instance_market_options":[],"instance_state":"running","instance_type":"t3.nano","ipv6_address_count":0,"ipv6_addresses":[],"key_name":"","launch_template":[],"maintenance_options":[{"auto_recovery":"default"}],"metadata_options":[{"http_endpoint":"enabled","http_protocol_ipv6":"disabled","http_put_response_hop_limit":1,"http_tokens":"optional","instance_metadata_tags":"disabled"}],"monitoring":false,"network_interface":[],"outpost_arn":"","password_data":"","placement_group":"","placement_partition_number":0,"primary_network_interface_id":"eni-0c4a8ea224e85896f","private_dns":"ip-10-0-101-39.eu-west-2.compute.internal","private_dns_name_options":[{"enable_resource_name_dns_a_record":false,"enable_resource_name_dns_aaaa_record":false,"hostname_type":"ip-name"}],"private_ip":"10.0.101.39","public_dns":"ec2-3-10-226-1.eu-west-2.compute.amazonaws.com","public_ip":"3.10.226.1","root_block_device":[{"delete_on_termination":true,"device_name":"/dev/xvda","encrypted":false,"iops":3000,"kms_key_id":"","tags":{},"tags_all":{},"throughput":125,"volume_id":"vol-043a55b2884cbcdc4","volume_size":8,"volume_type":"gp3"}],"secondary_private_ips":[],"security_groups":[],"source_dest_check":true,"spot_instance_request_id":"","subnet_id":"subnet-0a1b287732e8ad0b7","tags":{"Environment":"production","ManagedBy":"terraform","Name":"api-server","Project":"platform-services","Team":"platform"},"tags_all":{"Environment":"production","ManagedBy":"terraform","Name":"api-server","Project":"platform-services","Team":"platform"},"tenancy":"default","timeouts":null,"user_data":"146523b0a5c60264146991ccc0576cc1b24e25c3","user_data_base64":null,"user_data_replace_on_change":false,"volume_tags":null,"vpc_security_group_ids":["sg-0437857de45b640ce"]},"sensitive_values":{"capacity_reservation_specification":[{"capacity_reservation_target":[]}],"cpu_options":[{}],"credit_specification":[{}],"ebs_block_device":[],"enclave_options":[{}],"ephemeral_block_device":[],"instance_market_options":[],"ipv6_addresses":[],"launch_template":[],"maintenance_options":[{}],"metadata_options":[{}],"network_interface":[],"private_dns_name_options":[{}],"root_block_device":[{"tags":{},"tags_all":{}}],"secondary_private_ips":[],"security_groups":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[false]},"depends_on":["module.baseline.data.aws_ami.amazon_linux","module.baseline.module.vpc.aws_subnet.public","module.baseline.module.vpc.aws_vpc.this","module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this","module.shared_security_group.aws_security_group.internet_access"]},{"address":"module.shared_security_group.aws_security_group.internet_access[0]","mode":"managed","type":"aws_security_group","name":"internet_access","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:eu-west-2:540044833068:security-group/sg-0437857de45b640ce","description":"Allow outbound internet access","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"Allow all outbound traffic","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-0437857de45b640ce","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"HTTP access","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":80},{"cidr_blocks":["0.0.0.0/0"],"description":"SSH access","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22}],"name":"internet-access","name_prefix":"","owner_id":"540044833068","revoke_rules_on_delete":false,"tags":{"Environment":"production","ManagedBy":"terraform","Name":"internet-access","Project":"platform-services","Purpose":"General outbound access","Team":"platform"},"tags_all":{"Environment":"production","ManagedBy":"terraform","Name":"internet-access","Project":"platform-services","Purpose":"General outbound access","Team":"platform"},"timeouts":null,"vpc_id":"vpc-02901bcbb89561298"},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}},"depends_on":["module.baseline.module.vpc.aws_vpc.this"]},{"address":"module.shared_security_group.random_id.suffix[0]","mode":"managed","type":"random_id","name":"suffix","index":0,"provider_name":"registry.terraform.io/hashicorp/random","schema_version":0,"values":{"b64_std":"oof2Cw==","b64_url":"oof2Cw","byte_length":4,"dec":"2726819339","hex":"a287f60b","id":"oof2Cw","keepers":null,"prefix":null},"sensitive_values":{}}],"address":"module.shared_security_group"}]}}},"configuration":{"provider_config":{"archive":{"name":"archive","full_name":"registry.terraform.io/hashicorp/archive","version_constraint":"~\u003e 2.0"},"aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003c 6.0.0","expressions":{"region":{"constant_value":"eu-west-2"}}},"module.api_server:random":{"name":"random","full_name":"registry.terraform.io/hashicorp/random","version_constraint":"~\u003e 3.1","module_address":"module.api_server"},"module.heritage:random":{"name":"random","full_name":"registry.terraform.io/hashicorp/random","module_address":"module.heritage"},"module.shared_security_group:random":{"name":"random","full_name":"registry.terraform.io/hashicorp/random","version_constraint":"~\u003e 3.1","module_address":"module.shared_security_group"},"tls":{"name":"tls","full_name":"registry.terraform.io/hashicorp/tls"}},"root_module":{"outputs":{"api_server_instance_id":{"expression":{"references":["module.api_server.instance_id","module.api_server"]},"description":"Instance ID for start/stop commands"},"api_server_url":{"expression":{"references":["module.api_server.alb_url","module.api_server"]},"description":"URL to access the API server"},"shared_sg_api_server_id":{"expression":{"references":["module.shared_security_group.api_server_instance_id","module.shared_security_group"]},"description":"Instance ID of the shared SG demo API server"},"shared_sg_manual_instance_command":{"expression":{"references":["module.shared_security_group.manual_instance_command","module.shared_security_group"]},"description":"CLI command to create the manual data-processor instance"},"shared_sg_security_group_id":{"expression":{"references":["module.shared_security_group.security_group_id","module.shared_security_group"]},"description":"ID of the internet-access security group (for manual instance creation)"}},"resources":[{"address":"aws_dynamodb_table.terraform-example-lock-table","mode":"managed","type":"aws_dynamodb_table","name":"terraform-example-lock-table","provider_config_key":"aws","expressions":{"attribute":[{"name":{"constant_value":"LockID"},"type":{"constant_value":"S"}}],"billing_mode":{"constant_value":"PAY_PER_REQUEST"},"hash_key":{"constant_value":"LockID"},"name":{"references":["var.example_env"]}},"schema_version":1},{"address":"aws_iam_openid_connect_provider.env0","mode":"managed","type":"aws_iam_openid_connect_provider","name":"env0","provider_config_key":"aws","expressions":{"client_id_list":{"constant_value":["hoMiq9PdkRh9LUvVpH4wIErWg50VSG1b"]},"thumbprint_list":{"references":["data.tls_certificate.env0.certificates[0].sha1_fingerprint","data.tls_certificate.env0.certificates[0]","data.tls_certificate.env0.certificates","data.tls_certificate.env0"]},"url":{"constant_value":"https://login.app.env0.com/"}},"schema_version":0,"count_expression":{"references":["var.example_env"]}},{"address":"aws_iam_openid_connect_provider.github","mode":"managed","type":"aws_iam_openid_connect_provider","name":"github","provider_config_key":"aws","expressions":{"client_id_list":{"constant_value":["sts.amazonaws.com"]},"thumbprint_list":{"constant_value":["6938fd4d98bab03faadb97b34396831e3780aea1"]},"url":{"constant_value":"https://token.actions.githubusercontent.com"}},"schema_version":0,"count_expression":{"references":["var.example_env"]}},{"address":"aws_iam_openid_connect_provider.tfc_provider","mode":"managed","type":"aws_iam_openid_connect_provider","name":"tfc_provider","provider_config_key":"aws","expressions":{"client_id_list":{"constant_value":["aws.workload.identity"]},"thumbprint_list":{"references":["data.tls_certificate.tfc_certificate.certificates[0].sha1_fingerprint","data.tls_certificate.tfc_certificate.certificates[0]","data.tls_certificate.tfc_certificate.certificates","data.tls_certificate.tfc_certificate"]},"url":{"references":["data.tls_certificate.tfc_certificate.url","data.tls_certificate.tfc_certificate"]}},"schema_version":0,"count_expression":{"references":["var.example_env"]}},{"address":"aws_iam_policy.state_access","mode":"managed","type":"aws_iam_policy","name":"state_access","provider_config_key":"aws","expressions":{"description":{"constant_value":"Allows access to everything terraform needs (state, lock, deploy role) to deploy"},"name":{"references":["var.example_env"]},"path":{"constant_value":"/"},"policy":{"references":["local.account_id","var.example_env","aws_s3_bucket.terraform-example-state-bucket.arn","aws_s3_bucket.terraform-example-state-bucket","aws_s3_bucket.terraform-example-state-bucket.arn","aws_s3_bucket.terraform-example-state-bucket"]}},"schema_version":0},{"address":"aws_iam_role.deploy_role","mode":"managed","type":"aws_iam_role","name":"deploy_role","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["var.example_env","local.account_id","aws_iam_openid_connect_provider.tfc_provider[0].arn","aws_iam_openid_connect_provider.tfc_provider[0]","aws_iam_openid_connect_provider.tfc_provider","aws_iam_openid_connect_provider.env0[0].arn","aws_iam_openid_connect_provider.env0[0]","aws_iam_openid_connect_provider.env0","local.account_id"]},"description":{"constant_value":"This is the role used by terraform running on github actions or Terraform Cloud to deploy."},"inline_policy":[{"name":{"constant_value":"AllowPublicECR"},"policy":{}}],"managed_policy_arns":{"references":["aws_iam_policy.state_access.arn","aws_iam_policy.state_access"]},"max_session_duration":{"constant_value":3600},"name":{"references":["var.example_env"]}},"schema_version":0},{"address":"aws_s3_bucket.terraform-example-state-bucket","mode":"managed","type":"aws_s3_bucket","name":"terraform-example-state-bucket","provider_config_key":"aws","expressions":{"bucket":{"references":["var.example_env"]}},"schema_version":0},{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_config_key":"aws","schema_version":0},{"address":"data.tls_certificate.env0","mode":"data","type":"tls_certificate","name":"env0","provider_config_key":"tls","expressions":{"url":{"constant_value":"https://login.app.env0.com"}},"schema_version":0},{"address":"data.tls_certificate.tfc_certificate","mode":"data","type":"tls_certificate","name":"tfc_certificate","provider_config_key":"tls","expressions":{"url":{"constant_value":"https://app.terraform.io"}},"schema_version":0}],"module_calls":{"api_access":{"source":"./modules/signals-demo","expressions":{"alert_email":{"references":["local.api_alert_email"]},"ami_id":{"references":["module.baseline.ami_id","module.baseline"]},"customer_cidrs":{"references":["local.api_customer_cidrs"]},"domain":{"references":["local.api_domain"]},"internal_cidr":{"references":["local.api_internal_cidr"]},"subnet_ids":{"references":["module.baseline.public_subnets","module.baseline"]},"vpc_id":{"references":["module.baseline.vpc_id","module.baseline"]}},"count_expression":{"references":["var.enable_api_access"]},"module":{"outputs":{"api_endpoint":{"expression":{"references":["var.domain"]},"description":"HTTPS endpoint for the API"},"api_public_ip":{"expression":{"references":["aws_eip.api_server.public_ip","aws_eip.api_server"]},"description":"Public IP (EIP) of the API server"},"api_server_id":{"expression":{"references":["aws_instance.api_server.id","aws_instance.api_server"]},"description":"EC2 instance ID of the API server"},"api_server_private_ip":{"expression":{"references":["aws_instance.api_server.private_ip","aws_instance.api_server"]},"description":"Private IP of the API server"},"customer_sg_id":{"expression":{"references":["aws_security_group.customer_access.id","aws_security_group.customer_access"]},"description":"Security group ID for customer access (frequently modified)"},"health_check_id":{"expression":{"references":["aws_route53_health_check.api.id","aws_route53_health_check.api"]},"description":"Route 53 health check ID"},"internal_sg_id":{"expression":{"references":["aws_security_group.internal_services.id","aws_security_group.internal_services"]},"description":"Security group ID for internal services (rarely modified - the needle)"},"route53_nameservers":{"expression":{"references":["aws_route53_zone.api.name_servers","aws_route53_zone.api"]},"description":"Nameservers for the Route 53 zone (configure at registrar)"},"route53_zone_id":{"expression":{"references":["aws_route53_zone.api.zone_id","aws_route53_zone.api"]},"description":"Route 53 hosted zone ID"},"sns_topic_arn":{"expression":{"references":["aws_sns_topic.alerts.arn","aws_sns_topic.alerts"]},"description":"SNS topic ARN for alerts"}},"resources":[{"address":"aws_cloudwatch_metric_alarm.api_health","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"api_health","provider_config_key":"aws","expressions":{"alarm_actions":{"references":["aws_sns_topic.alerts.arn","aws_sns_topic.alerts"]},"alarm_description":{"constant_value":"Production API health check failing - pages on-call team"},"alarm_name":{"constant_value":"production-api-health-check-failed"},"comparison_operator":{"constant_value":"LessThanThreshold"},"dimensions":{"references":["aws_route53_health_check.api.id","aws_route53_health_check.api"]},"evaluation_periods":{"constant_value":2},"metric_name":{"constant_value":"HealthCheckStatus"},"namespace":{"constant_value":"AWS/Route53"},"ok_actions":{"references":["aws_sns_topic.alerts.arn","aws_sns_topic.alerts"]},"period":{"constant_value":60},"statistic":{"constant_value":"Minimum"},"tags":{"constant_value":{"Environment":"production","Service":"core-api","Severity":"critical"}},"threshold":{"constant_value":1}},"schema_version":1},{"address":"aws_eip.api_server","mode":"managed","type":"aws_eip","name":"api_server","provider_config_key":"aws","expressions":{"domain":{"constant_value":"vpc"},"instance":{"references":["aws_instance.api_server.id","aws_instance.api_server"]},"tags":{"constant_value":{"Environment":"production","Name":"production-api-eip","Service":"core-api"}}},"schema_version":0},{"address":"aws_instance.api_server","mode":"managed","type":"aws_instance","name":"api_server","provider_config_key":"aws","expressions":{"ami":{"references":["local.ami_id_to_use"]},"instance_type":{"constant_value":"t4g.nano"},"subnet_id":{"references":["local.subnet_ids_to_use[0]","local.subnet_ids_to_use"]},"tags":{"constant_value":{"CostCenter":"engineering","Environment":"production","Name":"production-api-server","OnCall":"platform-oncall@company.com","Service":"core-api","Team":"platform"}},"vpc_security_group_ids":{"references":["aws_security_group.customer_access.id","aws_security_group.customer_access","aws_security_group.internal_services.id","aws_security_group.internal_services"]}},"schema_version":1},{"address":"aws_route53_health_check.api","mode":"managed","type":"aws_route53_health_check","name":"api","provider_config_key":"aws","expressions":{"failure_threshold":{"constant_value":3},"ip_address":{"references":["aws_eip.api_server.public_ip","aws_eip.api_server"]},"port":{"constant_value":443},"request_interval":{"constant_value":30},"resource_path":{"constant_value":"/health"},"tags":{"constant_value":{"Environment":"production","Name":"production-api-health","Service":"core-api"}},"type":{"constant_value":"HTTPS"}},"schema_version":0},{"address":"aws_route53_record.api","mode":"managed","type":"aws_route53_record","name":"api","provider_config_key":"aws","expressions":{"name":{"references":["var.domain"]},"records":{"references":["aws_eip.api_server.public_ip","aws_eip.api_server"]},"ttl":{"constant_value":300},"type":{"constant_value":"A"},"zone_id":{"references":["aws_route53_zone.api.zone_id","aws_route53_zone.api"]}},"schema_version":2},{"address":"aws_route53_zone.api","mode":"managed","type":"aws_route53_zone","name":"api","provider_config_key":"aws","expressions":{"name":{"references":["var.domain"]},"tags":{"constant_value":{"Environment":"production","Purpose":"api-endpoint"}}},"schema_version":0},{"address":"aws_security_group.customer_access","mode":"managed","type":"aws_security_group","name":"customer_access","provider_config_key":"aws","expressions":{"description":{"constant_value":"Customer IP whitelist for API access - updated frequently"},"egress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":"Allow all outbound","from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":null,"to_port":0}]},"name":{"constant_value":"customer-api-access"},"tags":{"constant_value":{"Environment":"production","Name":"customer-api-access","Purpose":"customer-whitelist","Team":"platform","UpdateFrequency":"high"}},"vpc_id":{"references":["local.vpc_id_to_use"]}},"schema_version":1},{"address":"aws_security_group.internal_services","mode":"managed","type":"aws_security_group","name":"internal_services","provider_config_key":"aws","expressions":{"description":{"constant_value":"Internal service mesh, monitoring, and health check access - rarely modified"},"egress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":"Allow all outbound","from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":null,"to_port":0}]},"ingress":{"references":["var.internal_cidr","var.internal_cidr","var.internal_cidr"]},"name":{"constant_value":"internal-services"},"tags":{"constant_value":{"Critical":"true","Environment":"production","Name":"internal-services","Purpose":"internal-mesh","Team":"platform","UpdateFrequency":"low"}},"vpc_id":{"references":["local.vpc_id_to_use"]}},"schema_version":1},{"address":"aws_sns_topic.alerts","mode":"managed","type":"aws_sns_topic","name":"alerts","provider_config_key":"aws","expressions":{"name":{"constant_value":"production-api-alerts"},"tags":{"constant_value":{"Environment":"production","Purpose":"oncall-alerts","Severity":"critical"}}},"schema_version":0},{"address":"aws_sns_topic_subscription.oncall_email","mode":"managed","type":"aws_sns_topic_subscription","name":"oncall_email","provider_config_key":"aws","expressions":{"endpoint":{"references":["var.alert_email"]},"protocol":{"constant_value":"email"},"topic_arn":{"references":["aws_sns_topic.alerts.arn","aws_sns_topic.alerts"]}},"schema_version":0},{"address":"data.aws_ami.amazon_linux_2023","mode":"data","type":"aws_ami","name":"amazon_linux_2023","provider_config_key":"aws","expressions":{"filter":[{"name":{"constant_value":"name"},"values":{"constant_value":["al2023-ami-*-arm64"]}},{"name":{"constant_value":"virtualization-type"},"values":{"constant_value":["hvm"]}},{"name":{"constant_value":"state"},"values":{"constant_value":["available"]}}],"most_recent":{"constant_value":true},"owners":{"constant_value":["amazon"]}},"schema_version":0},{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_config_key":"aws","schema_version":0},{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_config_key":"aws","schema_version":0},{"address":"data.aws_subnets.selected","mode":"data","type":"aws_subnets","name":"selected","provider_config_key":"aws","expressions":{"filter":[{"name":{"constant_value":"vpc-id"},"values":{"references":["local.vpc_id_to_use"]}}]},"schema_version":0,"count_expression":{"references":["var.subnet_ids","local.vpc_id_to_use"]}},{"address":"data.aws_vpc.selected","mode":"data","type":"aws_vpc","name":"selected","provider_config_key":"aws","expressions":{"default":{"constant_value":true}},"schema_version":0,"count_expression":{"references":["var.vpc_id"]}}],"variables":{"alert_email":{"default":"alerts@example.com","description":"Email address for CloudWatch alarm notifications"},"ami_id":{"default":null,"description":"AMI ID to use for EC2 instance (from baseline module)"},"customer_cidrs":{"default":{"acme_corp":{"cidr":"203.0.113.10/32","name":"Acme Corp"},"cyberdyne":{"cidr":"100.64.0.0/29","name":"Cyberdyne Systems"},"globex":{"cidr":"198.51.100.0/29","name":"Globex Industries"},"initech":{"cidr":"192.0.2.50/32","name":"Initech"},"umbrella":{"cidr":"198.18.100.0/24","name":"Umbrella Corp"}},"description":"Customer IP allowlist for API access. This changes frequently."},"domain":{"default":"api.example.com","description":"Domain name for the API Route 53 zone"},"internal_cidr":{"default":"10.0.0.0/8","description":"Internal network CIDR for service mesh, monitoring, and health checks. This rarely changes. THE NEEDLE MODIFIES THIS."},"subnet_ids":{"default":[],"description":"Subnet IDs to use for resources (from baseline module)"},"vpc_id":{"default":null,"description":"VPC ID to use for resources (from baseline module)"}}}},"api_server":{"source":"./modules/api-server","expressions":{"ami_id":{"references":["module.baseline.ami_id","module.baseline"]},"enabled":{"constant_value":true},"instance_type":{"constant_value":"c5.large"},"name_prefix":{"constant_value":"api"},"public_subnets":{"references":["module.baseline.public_subnets","module.baseline"]},"vpc_id":{"references":["module.baseline.vpc_id","module.baseline"]}},"module":{"outputs":{"alb_dns_name":{"expression":{"references":["var.enabled","aws_lb.api[0].dns_name","aws_lb.api[0]","aws_lb.api"]},"description":"DNS name of the Application Load Balancer"},"alb_url":{"expression":{"references":["var.enabled","aws_lb.api[0].dns_name","aws_lb.api[0]","aws_lb.api"]},"description":"URL to access the API through the load balancer"},"blast_radius":{"expression":{"references":["var.enabled"]},"description":"Connected resources"},"cpu_analysis":{"expression":{"references":["var.enabled","var.instance_type","local.is_burstable","local.is_burstable","local.t3_baseline_percent","var.typical_cpu_utilization","var.typical_cpu_utilization","local.t3_baseline_percent","local.is_burstable","local.is_burstable","local.net_credit_burn_per_hour","local.hours_until_exhaustion","local.risk_level","local.performance_after_exhaustion"]},"description":"Analysis of CPU behavior for the current instance type"},"enabled":{"expression":{"references":["var.enabled"]},"description":"Whether this module is enabled"},"health_check_url":{"expression":{"references":["var.enabled","aws_lb.api[0].dns_name","aws_lb.api[0]","aws_lb.api"]},"description":"URL for health check endpoint"},"instance_id":{"expression":{"references":["var.enabled","aws_instance.api_server[0].id","aws_instance.api_server[0]","aws_instance.api_server"]},"description":"Instance ID of the API server"},"public_ip":{"expression":{"references":["var.enabled","aws_instance.api_server[0].public_ip","aws_instance.api_server[0]","aws_instance.api_server"]},"description":"Public IP of the API server"},"sns_topic_arn":{"expression":{"references":["var.enabled","aws_sns_topic.alerts[0].arn","aws_sns_topic.alerts[0]","aws_sns_topic.alerts"]},"description":"ARN of the SNS topic for alarm notifications"}},"resources":[{"address":"aws_cloudwatch_metric_alarm.cpu_credits","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"cpu_credits","provider_config_key":"aws","expressions":{"alarm_actions":{"references":["aws_sns_topic.alerts[0].arn","aws_sns_topic.alerts[0]","aws_sns_topic.alerts"]},"alarm_description":{"constant_value":"CPU credit balance is low"},"alarm_name":{"references":["local.name_prefix"]},"comparison_operator":{"constant_value":"LessThanThreshold"},"dimensions":{"references":["aws_instance.api_server[0].id","aws_instance.api_server[0]","aws_instance.api_server"]},"evaluation_periods":{"constant_value":2},"metric_name":{"constant_value":"CPUCreditBalance"},"namespace":{"constant_value":"AWS/EC2"},"ok_actions":{"references":["aws_sns_topic.alerts[0].arn","aws_sns_topic.alerts[0]","aws_sns_topic.alerts"]},"period":{"constant_value":300},"statistic":{"constant_value":"Average"},"tags":{"references":["local.common_tags","local.name_prefix"]},"threshold":{"constant_value":50}},"schema_version":1,"count_expression":{"references":["var.enabled","local.is_burstable"]}},{"address":"aws_cloudwatch_metric_alarm.high_cpu","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"high_cpu","provider_config_key":"aws","expressions":{"alarm_actions":{"references":["aws_sns_topic.alerts[0].arn","aws_sns_topic.alerts[0]","aws_sns_topic.alerts"]},"alarm_description":{"constant_value":"CPU utilization exceeds 80%"},"alarm_name":{"references":["local.name_prefix"]},"comparison_operator":{"constant_value":"GreaterThanThreshold"},"dimensions":{"references":["aws_instance.api_server[0].id","aws_instance.api_server[0]","aws_instance.api_server"]},"evaluation_periods":{"constant_value":2},"metric_name":{"constant_value":"CPUUtilization"},"namespace":{"constant_value":"AWS/EC2"},"ok_actions":{"references":["aws_sns_topic.alerts[0].arn","aws_sns_topic.alerts[0]","aws_sns_topic.alerts"]},"period":{"constant_value":300},"statistic":{"constant_value":"Average"},"tags":{"references":["local.common_tags","local.name_prefix"]},"threshold":{"constant_value":80}},"schema_version":1,"count_expression":{"references":["var.enabled"]}},{"address":"aws_cloudwatch_metric_alarm.unhealthy_targets","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"unhealthy_targets","provider_config_key":"aws","expressions":{"alarm_actions":{"references":["aws_sns_topic.alerts[0].arn","aws_sns_topic.alerts[0]","aws_sns_topic.alerts"]},"alarm_description":{"constant_value":"Load balancer has unhealthy targets"},"alarm_name":{"references":["local.name_prefix"]},"comparison_operator":{"constant_value":"GreaterThanThreshold"},"dimensions":{"references":["aws_lb.api[0].arn_suffix","aws_lb.api[0]","aws_lb.api","aws_lb_target_group.api[0].arn_suffix","aws_lb_target_group.api[0]","aws_lb_target_group.api"]},"evaluation_periods":{"constant_value":2},"metric_name":{"constant_value":"UnHealthyHostCount"},"namespace":{"constant_value":"AWS/ApplicationELB"},"ok_actions":{"references":["aws_sns_topic.alerts[0].arn","aws_sns_topic.alerts[0]","aws_sns_topic.alerts"]},"period":{"constant_value":60},"statistic":{"constant_value":"Average"},"tags":{"references":["local.common_tags","local.name_prefix"]},"threshold":{"constant_value":0}},"schema_version":1,"count_expression":{"references":["var.enabled"]}},{"address":"aws_iam_instance_profile.api_server","mode":"managed","type":"aws_iam_instance_profile","name":"api_server","provider_config_key":"aws","expressions":{"name":{"references":["local.name_prefix"]},"role":{"references":["aws_iam_role.api_server[0].name","aws_iam_role.api_server[0]","aws_iam_role.api_server"]},"tags":{"references":["local.common_tags","local.name_prefix"]}},"schema_version":0,"count_expression":{"references":["var.enabled"]}},{"address":"aws_iam_role.api_server","mode":"managed","type":"aws_iam_role","name":"api_server","provider_config_key":"aws","expressions":{"assume_role_policy":{},"name":{"references":["local.name_prefix"]},"tags":{"references":["local.common_tags","local.name_prefix"]}},"schema_version":0,"count_expression":{"references":["var.enabled"]}},{"address":"aws_iam_role_policy_attachment.cloudwatch_agent","mode":"managed","type":"aws_iam_role_policy_attachment","name":"cloudwatch_agent","provider_config_key":"aws","expressions":{"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/CloudWatchAgentServerPolicy"},"role":{"references":["aws_iam_role.api_server[0].name","aws_iam_role.api_server[0]","aws_iam_role.api_server"]}},"schema_version":0,"count_expression":{"references":["var.enabled"]}},{"address":"aws_iam_role_policy_attachment.ssm","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ssm","provider_config_key":"aws","expressions":{"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore"},"role":{"references":["aws_iam_role.api_server[0].name","aws_iam_role.api_server[0]","aws_iam_role.api_server"]}},"schema_version":0,"count_expression":{"references":["var.enabled"]}},{"address":"aws_instance.api_server","mode":"managed","type":"aws_instance","name":"api_server","provider_config_key":"aws","expressions":{"ami":{"references":["var.ami_id"]},"associate_public_ip_address":{"constant_value":true},"iam_instance_profile":{"references":["aws_iam_instance_profile.api_server[0].name","aws_iam_instance_profile.api_server[0]","aws_iam_instance_profile.api_server"]},"instance_type":{"references":["var.instance_type"]},"root_block_device":[{"delete_on_termination":{"constant_value":true},"tags":{"references":["local.common_tags","local.name_prefix"]},"volume_size":{"constant_value":8},"volume_type":{"constant_value":"gp3"}}],"subnet_id":{"references":["var.public_subnets[0]","var.public_subnets"]},"tags":{"references":["local.common_tags","local.name_prefix"]},"user_data":{"references":["var.typical_cpu_utilization","var.instance_type","var.typical_cpu_utilization","var.workload_description"]},"vpc_security_group_ids":{"references":["aws_security_group.api_server[0].id","aws_security_group.api_server[0]","aws_security_group.api_server"]}},"schema_version":1,"count_expression":{"references":["var.enabled"]}},{"address":"aws_lb.api","mode":"managed","type":"aws_lb","name":"api","provider_config_key":"aws","expressions":{"enable_deletion_protection":{"constant_value":false},"internal":{"constant_value":false},"load_balancer_type":{"constant_value":"application"},"name":{"references":["local.name_prefix"]},"security_groups":{"references":["aws_security_group.alb[0].id","aws_security_group.alb[0]","aws_security_group.alb"]},"subnets":{"references":["var.public_subnets"]},"tags":{"references":["local.common_tags","local.name_prefix"]}},"schema_version":0,"count_expression":{"references":["var.enabled"]}},{"address":"aws_lb_listener.http","mode":"managed","type":"aws_lb_listener","name":"http","provider_config_key":"aws","expressions":{"default_action":[{"target_group_arn":{"references":["aws_lb_target_group.api[0].arn","aws_lb_target_group.api[0]","aws_lb_target_group.api"]},"type":{"constant_value":"forward"}}],"load_balancer_arn":{"references":["aws_lb.api[0].arn","aws_lb.api[0]","aws_lb.api"]},"port":{"constant_value":80},"protocol":{"constant_value":"HTTP"},"tags":{"references":["local.common_tags","local.name_prefix"]}},"schema_version":0,"count_expression":{"references":["var.enabled"]}},{"address":"aws_lb_target_group.api","mode":"managed","type":"aws_lb_target_group","name":"api","provider_config_key":"aws","expressions":{"deregistration_delay":{"constant_value":30},"health_check":[{"enabled":{"constant_value":true},"healthy_threshold":{"constant_value":2},"interval":{"constant_value":30},"matcher":{"constant_value":"200"},"path":{"constant_value":"/health"},"port":{"constant_value":"traffic-port"},"protocol":{"constant_value":"HTTP"},"timeout":{"constant_value":5},"unhealthy_threshold":{"constant_value":3}}],"name":{"references":["local.name_prefix"]},"port":{"constant_value":80},"protocol":{"constant_value":"HTTP"},"tags":{"references":["local.common_tags","local.name_prefix"]},"vpc_id":{"references":["var.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.enabled"]}},{"address":"aws_lb_target_group_attachment.api","mode":"managed","type":"aws_lb_target_group_attachment","name":"api","provider_config_key":"aws","expressions":{"port":{"constant_value":80},"target_group_arn":{"references":["aws_lb_target_group.api[0].arn","aws_lb_target_group.api[0]","aws_lb_target_group.api"]},"target_id":{"references":["aws_instance.api_server[0].id","aws_instance.api_server[0]","aws_instance.api_server"]}},"schema_version":0,"count_expression":{"references":["var.enabled"]}},{"address":"aws_security_group.alb","mode":"managed","type":"aws_security_group","name":"alb","provider_config_key":"aws","expressions":{"description":{"constant_value":"Security group for Application Load Balancer"},"egress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":"All outbound","from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":null,"to_port":0}]},"ingress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":"HTTP from internet","from_port":80,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_groups":null,"self":null,"to_port":80}]},"name":{"references":["local.name_prefix"]},"tags":{"references":["local.common_tags","local.name_prefix"]},"vpc_id":{"references":["var.vpc_id"]}},"schema_version":1,"count_expression":{"references":["var.enabled"]}},{"address":"aws_security_group.api_server","mode":"managed","type":"aws_security_group","name":"api_server","provider_config_key":"aws","expressions":{"description":{"constant_value":"Security group for API server"},"egress":{"references":["aws_security_group.database[0].id","aws_security_group.database[0]","aws_security_group.database"]},"ingress":{"references":["aws_security_group.alb[0].id","aws_security_group.alb[0]","aws_security_group.alb"]},"name":{"references":["local.name_prefix"]},"tags":{"references":["local.common_tags","local.name_prefix"]},"vpc_id":{"references":["var.vpc_id"]}},"schema_version":1,"count_expression":{"references":["var.enabled"]}},{"address":"aws_security_group.database","mode":"managed","type":"aws_security_group","name":"database","provider_config_key":"aws","expressions":{"description":{"constant_value":"Security group for database tier"},"egress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":"All outbound","from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":null,"to_port":0}]},"name":{"references":["local.name_prefix"]},"tags":{"references":["local.common_tags","local.name_prefix"]},"vpc_id":{"references":["var.vpc_id"]}},"schema_version":1,"count_expression":{"references":["var.enabled"]}},{"address":"aws_security_group_rule.database_from_api","mode":"managed","type":"aws_security_group_rule","name":"database_from_api","provider_config_key":"aws","expressions":{"description":{"constant_value":"PostgreSQL from API servers"},"from_port":{"constant_value":5432},"protocol":{"constant_value":"tcp"},"security_group_id":{"references":["aws_security_group.database[0].id","aws_security_group.database[0]","aws_security_group.database"]},"source_security_group_id":{"references":["aws_security_group.api_server[0].id","aws_security_group.api_server[0]","aws_security_group.api_server"]},"to_port":{"constant_value":5432},"type":{"constant_value":"ingress"}},"schema_version":2,"count_expression":{"references":["var.enabled"]}},{"address":"aws_sns_topic.alerts","mode":"managed","type":"aws_sns_topic","name":"alerts","provider_config_key":"aws","expressions":{"name":{"references":["local.name_prefix"]},"tags":{"references":["local.common_tags","local.name_prefix"]}},"schema_version":0,"count_expression":{"references":["var.enabled"]}},{"address":"aws_sns_topic_policy.alerts","mode":"managed","type":"aws_sns_topic_policy","name":"alerts","provider_config_key":"aws","expressions":{"arn":{"references":["aws_sns_topic.alerts[0].arn","aws_sns_topic.alerts[0]","aws_sns_topic.alerts"]},"policy":{"references":["aws_sns_topic.alerts[0].arn","aws_sns_topic.alerts[0]","aws_sns_topic.alerts"]}},"schema_version":0,"count_expression":{"references":["var.enabled"]}},{"address":"random_id.suffix","mode":"managed","type":"random_id","name":"suffix","provider_config_key":"module.api_server:random","expressions":{"byte_length":{"constant_value":4}},"schema_version":0,"count_expression":{"references":["var.enabled"]}},{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_config_key":"aws","schema_version":0}],"variables":{"additional_tags":{"default":{},"description":"Additional tags to apply to resources"},"ami_id":{"description":"AMI ID for the instance"},"enabled":{"default":true,"description":"Enable or disable this module"},"instance_type":{"default":"c5.large","description":"EC2 instance type for the API server"},"name_prefix":{"default":"api","description":"Prefix for resource names"},"public_subnets":{"description":"Public subnet IDs"},"typical_cpu_utilization":{"default":70,"description":"Expected average CPU utilization percentage"},"vpc_id":{"description":"VPC ID"},"workload_description":{"default":"API server handling encryption, real-time analysis, and concurrent requests","description":"Description of the workload"}}}},"baseline":{"source":"./modules/baseline","expressions":{"example_env":{"references":["var.example_env"]}},"module":{"outputs":{"ami_id":{"expression":{"references":["data.aws_ami.amazon_linux.id","data.aws_ami.amazon_linux"]},"description":"ID of the Amazon Linux 2 AMI"},"default_security_group_id":{"expression":{"references":["module.vpc.default_security_group_id","module.vpc"]},"description":"ID of the default security group"},"private_subnets":{"expression":{"references":["module.vpc.private_subnets","module.vpc"]},"description":"IDs of the private subnets"},"public_route_table_ids":{"expression":{"references":["module.vpc.public_route_table_ids","module.vpc"]},"description":"IDs of the public route tables"},"public_subnets":{"expression":{"references":["module.vpc.public_subnets","module.vpc"]},"description":"IDs of the public subnets"},"vpc_id":{"expression":{"references":["module.vpc.vpc_id","module.vpc"]},"description":"ID of the VPC"}},"resources":[{"address":"data.aws_ami.amazon_linux","mode":"data","type":"aws_ami","name":"amazon_linux","provider_config_key":"aws","expressions":{"filter":[{"name":{"constant_value":"name"},"values":{"constant_value":["amzn2-ami-hvm-*-x86_64-ebs"]}},{"name":{"constant_value":"owner-alias"},"values":{"constant_value":["amazon"]}}],"most_recent":{"constant_value":true}},"schema_version":0}],"module_calls":{"vpc":{"source":"terraform-aws-modules/vpc/aws","expressions":{"azs":{"constant_value":["eu-west-2a","eu-west-2b"]},"cidr":{"constant_value":"10.0.0.0/16"},"default_security_group_egress":{"constant_value":[{"cidr_blocks":"0.0.0.0/0","from_port":0,"protocol":"ALL","to_port":0}]},"default_security_group_ingress":{"constant_value":[{"cidr_blocks":"0.0.0.0/0","from_port":80,"protocol":"tcp","to_port":80},{"cidr_blocks":"0.0.0.0/0","from_port":443,"protocol":"tcp","to_port":443},{"cidr_blocks":"0.0.0.0/0","from_port":1234,"protocol":"tcp","to_port":1234}]},"enable_nat_gateway":{"constant_value":true},"enable_vpn_gateway":{"constant_value":false},"name":{"references":["var.example_env"]},"private_subnets":{"constant_value":["10.0.1.0/24","10.0.2.0/24"]},"public_subnets":{"constant_value":["10.0.101.0/24","10.0.102.0/24"]},"tags":{"constant_value":{"Environment":"development","Terraform":"true"}}},"module":{"outputs":{"azs":{"expression":{"references":["var.azs"]},"description":"A list of availability zones specified as argument to this module"},"cgw_arns":{"expression":{"references":["aws_customer_gateway.this"]},"description":"List of ARNs of Customer Gateway"},"cgw_ids":{"expression":{"references":["aws_customer_gateway.this"]},"description":"List of IDs of Customer Gateway"},"database_internet_gateway_route_id":{"expression":{"references":["aws_route.database_internet_gateway[0].id","aws_route.database_internet_gateway[0]","aws_route.database_internet_gateway"]},"description":"ID of the database internet gateway route"},"database_ipv6_egress_route_id":{"expression":{"references":["aws_route.database_ipv6_egress[0].id","aws_route.database_ipv6_egress[0]","aws_route.database_ipv6_egress"]},"description":"ID of the database IPv6 egress route"},"database_nat_gateway_route_ids":{"expression":{"references":["aws_route.database_nat_gateway"]},"description":"List of IDs of the database nat gateway route"},"database_network_acl_arn":{"expression":{"references":["aws_network_acl.database[0].arn","aws_network_acl.database[0]","aws_network_acl.database"]},"description":"ARN of the database network ACL"},"database_network_acl_id":{"expression":{"references":["aws_network_acl.database[0].id","aws_network_acl.database[0]","aws_network_acl.database"]},"description":"ID of the database network ACL"},"database_route_table_association_ids":{"expression":{"references":["aws_route_table_association.database"]},"description":"List of IDs of the database route table association"},"database_route_table_ids":{"expression":{"references":["aws_route_table.database","aws_route_table.database","aws_route_table.private"]},"description":"List of IDs of database route tables"},"database_subnet_arns":{"expression":{"references":["aws_subnet.database"]},"description":"List of ARNs of database subnets"},"database_subnet_group":{"expression":{"references":["aws_db_subnet_group.database[0].id","aws_db_subnet_group.database[0]","aws_db_subnet_group.database"]},"description":"ID of database subnet group"},"database_subnet_group_name":{"expression":{"references":["aws_db_subnet_group.database[0].name","aws_db_subnet_group.database[0]","aws_db_subnet_group.database"]},"description":"Name of database subnet group"},"database_subnet_objects":{"expression":{"references":["aws_subnet.database"]},"description":"A list of all database subnets, containing the full objects."},"database_subnets":{"expression":{"references":["aws_subnet.database"]},"description":"List of IDs of database subnets"},"database_subnets_cidr_blocks":{"expression":{"references":["aws_subnet.database"]},"description":"List of cidr_blocks of database subnets"},"database_subnets_ipv6_cidr_blocks":{"expression":{"references":["aws_subnet.database"]},"description":"List of IPv6 cidr_blocks of database subnets in an IPv6 enabled VPC"},"default_network_acl_id":{"expression":{"references":["aws_vpc.this[0].default_network_acl_id","aws_vpc.this[0]","aws_vpc.this"]},"description":"The ID of the default network ACL"},"default_route_table_id":{"expression":{"references":["aws_vpc.this[0].default_route_table_id","aws_vpc.this[0]","aws_vpc.this"]},"description":"The ID of the default route table"},"default_security_group_id":{"expression":{"references":["aws_vpc.this[0].default_security_group_id","aws_vpc.this[0]","aws_vpc.this"]},"description":"The ID of the security group created by default on VPC creation"},"default_vpc_arn":{"expression":{"references":["aws_default_vpc.this[0].arn","aws_default_vpc.this[0]","aws_default_vpc.this"]},"description":"The ARN of the Default VPC"},"default_vpc_cidr_block":{"expression":{"references":["aws_default_vpc.this[0].cidr_block","aws_default_vpc.this[0]","aws_default_vpc.this"]},"description":"The CIDR block of the Default VPC"},"default_vpc_default_network_acl_id":{"expression":{"references":["aws_default_vpc.this[0].default_network_acl_id","aws_default_vpc.this[0]","aws_default_vpc.this"]},"description":"The ID of the default network ACL of the Default VPC"},"default_vpc_default_route_table_id":{"expression":{"references":["aws_default_vpc.this[0].default_route_table_id","aws_default_vpc.this[0]","aws_default_vpc.this"]},"description":"The ID of the default route table of the Default VPC"},"default_vpc_default_security_group_id":{"expression":{"references":["aws_default_vpc.this[0].default_security_group_id","aws_default_vpc.this[0]","aws_default_vpc.this"]},"description":"The ID of the security group created by default on Default VPC creation"},"default_vpc_enable_dns_hostnames":{"expression":{"references":["aws_default_vpc.this[0].enable_dns_hostnames","aws_default_vpc.this[0]","aws_default_vpc.this"]},"description":"Whether or not the Default VPC has DNS hostname support"},"default_vpc_enable_dns_support":{"expression":{"references":["aws_default_vpc.this[0].enable_dns_support","aws_default_vpc.this[0]","aws_default_vpc.this"]},"description":"Whether or not the Default VPC has DNS support"},"default_vpc_id":{"expression":{"references":["aws_default_vpc.this[0].id","aws_default_vpc.this[0]","aws_default_vpc.this"]},"description":"The ID of the Default VPC"},"default_vpc_instance_tenancy":{"expression":{"references":["aws_default_vpc.this[0].instance_tenancy","aws_default_vpc.this[0]","aws_default_vpc.this"]},"description":"Tenancy of instances spin up within Default VPC"},"default_vpc_main_route_table_id":{"expression":{"references":["aws_default_vpc.this[0].main_route_table_id","aws_default_vpc.this[0]","aws_default_vpc.this"]},"description":"The ID of the main route table associated with the Default VPC"},"dhcp_options_id":{"expression":{"references":["aws_vpc_dhcp_options.this[0].id","aws_vpc_dhcp_options.this[0]","aws_vpc_dhcp_options.this"]},"description":"The ID of the DHCP options"},"egress_only_internet_gateway_id":{"expression":{"references":["aws_egress_only_internet_gateway.this[0].id","aws_egress_only_internet_gateway.this[0]","aws_egress_only_internet_gateway.this"]},"description":"The ID of the egress only Internet Gateway"},"elasticache_network_acl_arn":{"expression":{"references":["aws_network_acl.elasticache[0].arn","aws_network_acl.elasticache[0]","aws_network_acl.elasticache"]},"description":"ARN of the elasticache network ACL"},"elasticache_network_acl_id":{"expression":{"references":["aws_network_acl.elasticache[0].id","aws_network_acl.elasticache[0]","aws_network_acl.elasticache"]},"description":"ID of the elasticache network ACL"},"elasticache_route_table_association_ids":{"expression":{"references":["aws_route_table_association.elasticache"]},"description":"List of IDs of the elasticache route table association"},"elasticache_route_table_ids":{"expression":{"references":["aws_route_table.elasticache","local.private_route_table_ids"]},"description":"List of IDs of elasticache route tables"},"elasticache_subnet_arns":{"expression":{"references":["aws_subnet.elasticache"]},"description":"List of ARNs of elasticache subnets"},"elasticache_subnet_group":{"expression":{"references":["aws_elasticache_subnet_group.elasticache[0].id","aws_elasticache_subnet_group.elasticache[0]","aws_elasticache_subnet_group.elasticache"]},"description":"ID of elasticache subnet group"},"elasticache_subnet_group_name":{"expression":{"references":["aws_elasticache_subnet_group.elasticache[0].name","aws_elasticache_subnet_group.elasticache[0]","aws_elasticache_subnet_group.elasticache"]},"description":"Name of elasticache subnet group"},"elasticache_subnet_objects":{"expression":{"references":["aws_subnet.elasticache"]},"description":"A list of all elasticache subnets, containing the full objects."},"elasticache_subnets":{"expression":{"references":["aws_subnet.elasticache"]},"description":"List of IDs of elasticache subnets"},"elasticache_subnets_cidr_blocks":{"expression":{"references":["aws_subnet.elasticache"]},"description":"List of cidr_blocks of elasticache subnets"},"elasticache_subnets_ipv6_cidr_blocks":{"expression":{"references":["aws_subnet.elasticache"]},"description":"List of IPv6 cidr_blocks of elasticache subnets in an IPv6 enabled VPC"},"igw_arn":{"expression":{"references":["aws_internet_gateway.this[0].arn","aws_internet_gateway.this[0]","aws_internet_gateway.this"]},"description":"The ARN of the Internet Gateway"},"igw_id":{"expression":{"references":["aws_internet_gateway.this[0].id","aws_internet_gateway.this[0]","aws_internet_gateway.this"]},"description":"The ID of the Internet Gateway"},"intra_network_acl_arn":{"expression":{"references":["aws_network_acl.intra[0].arn","aws_network_acl.intra[0]","aws_network_acl.intra"]},"description":"ARN of the intra network ACL"},"intra_network_acl_id":{"expression":{"references":["aws_network_acl.intra[0].id","aws_network_acl.intra[0]","aws_network_acl.intra"]},"description":"ID of the intra network ACL"},"intra_route_table_association_ids":{"expression":{"references":["aws_route_table_association.intra"]},"description":"List of IDs of the intra route table association"},"intra_route_table_ids":{"expression":{"references":["aws_route_table.intra"]},"description":"List of IDs of intra route tables"},"intra_subnet_arns":{"expression":{"references":["aws_subnet.intra"]},"description":"List of ARNs of intra subnets"},"intra_subnet_objects":{"expression":{"references":["aws_subnet.intra"]},"description":"A list of all intra subnets, containing the full objects."},"intra_subnets":{"expression":{"references":["aws_subnet.intra"]},"description":"List of IDs of intra subnets"},"intra_subnets_cidr_blocks":{"expression":{"references":["aws_subnet.intra"]},"description":"List of cidr_blocks of intra subnets"},"intra_subnets_ipv6_cidr_blocks":{"expression":{"references":["aws_subnet.intra"]},"description":"List of IPv6 cidr_blocks of intra subnets in an IPv6 enabled VPC"},"name":{"expression":{"references":["var.name"]},"description":"The name of the VPC specified as argument to this module"},"nat_ids":{"expression":{"references":["aws_eip.nat"]},"description":"List of allocation ID of Elastic IPs created for AWS NAT Gateway"},"nat_public_ips":{"expression":{"references":["var.reuse_nat_ips","var.external_nat_ips","aws_eip.nat"]},"description":"List of public Elastic IPs created for AWS NAT Gateway"},"natgw_ids":{"expression":{"references":["aws_nat_gateway.this"]},"description":"List of NAT Gateway IDs"},"natgw_interface_ids":{"expression":{"references":["aws_nat_gateway.this"]},"description":"List of Network Interface IDs assigned to NAT Gateways"},"outpost_network_acl_arn":{"expression":{"references":["aws_network_acl.outpost[0].arn","aws_network_acl.outpost[0]","aws_network_acl.outpost"]},"description":"ARN of the outpost network ACL"},"outpost_network_acl_id":{"expression":{"references":["aws_network_acl.outpost[0].id","aws_network_acl.outpost[0]","aws_network_acl.outpost"]},"description":"ID of the outpost network ACL"},"outpost_subnet_arns":{"expression":{"references":["aws_subnet.outpost"]},"description":"List of ARNs of outpost subnets"},"outpost_subnet_objects":{"expression":{"references":["aws_subnet.outpost"]},"description":"A list of all outpost subnets, containing the full objects."},"outpost_subnets":{"expression":{"references":["aws_subnet.outpost"]},"description":"List of IDs of outpost subnets"},"outpost_subnets_cidr_blocks":{"expression":{"references":["aws_subnet.outpost"]},"description":"List of cidr_blocks of outpost subnets"},"outpost_subnets_ipv6_cidr_blocks":{"expression":{"references":["aws_subnet.outpost"]},"description":"List of IPv6 cidr_blocks of outpost subnets in an IPv6 enabled VPC"},"private_ipv6_egress_route_ids":{"expression":{"references":["aws_route.private_ipv6_egress"]},"description":"List of IDs of the ipv6 egress route"},"private_nat_gateway_route_ids":{"expression":{"references":["aws_route.private_nat_gateway"]},"description":"List of IDs of the private nat gateway route"},"private_network_acl_arn":{"expression":{"references":["aws_network_acl.private[0].arn","aws_network_acl.private[0]","aws_network_acl.private"]},"description":"ARN of the private network ACL"},"private_network_acl_id":{"expression":{"references":["aws_network_acl.private[0].id","aws_network_acl.private[0]","aws_network_acl.private"]},"description":"ID of the private network ACL"},"private_route_table_association_ids":{"expression":{"references":["aws_route_table_association.private"]},"description":"List of IDs of the private route table association"},"private_route_table_ids":{"expression":{"references":["local.private_route_table_ids"]},"description":"List of IDs of private route tables"},"private_subnet_arns":{"expression":{"references":["aws_subnet.private"]},"description":"List of ARNs of private subnets"},"private_subnet_objects":{"expression":{"references":["aws_subnet.private"]},"description":"A list of all private subnets, containing the full objects."},"private_subnets":{"expression":{"references":["aws_subnet.private"]},"description":"List of IDs of private subnets"},"private_subnets_cidr_blocks":{"expression":{"references":["aws_subnet.private"]},"description":"List of cidr_blocks of private subnets"},"private_subnets_ipv6_cidr_blocks":{"expression":{"references":["aws_subnet.private"]},"description":"List of IPv6 cidr_blocks of private subnets in an IPv6 enabled VPC"},"public_internet_gateway_ipv6_route_id":{"expression":{"references":["aws_route.public_internet_gateway_ipv6[0].id","aws_route.public_internet_gateway_ipv6[0]","aws_route.public_internet_gateway_ipv6"]},"description":"ID of the IPv6 internet gateway route"},"public_internet_gateway_route_id":{"expression":{"references":["aws_route.public_internet_gateway[0].id","aws_route.public_internet_gateway[0]","aws_route.public_internet_gateway"]},"description":"ID of the internet gateway route"},"public_network_acl_arn":{"expression":{"references":["aws_network_acl.public[0].arn","aws_network_acl.public[0]","aws_network_acl.public"]},"description":"ARN of the public network ACL"},"public_network_acl_id":{"expression":{"references":["aws_network_acl.public[0].id","aws_network_acl.public[0]","aws_network_acl.public"]},"description":"ID of the public network ACL"},"public_route_table_association_ids":{"expression":{"references":["aws_route_table_association.public"]},"description":"List of IDs of the public route table association"},"public_route_table_ids":{"expression":{"references":["local.public_route_table_ids"]},"description":"List of IDs of public route tables"},"public_subnet_arns":{"expression":{"references":["aws_subnet.public"]},"description":"List of ARNs of public subnets"},"public_subnet_objects":{"expression":{"references":["aws_subnet.public"]},"description":"A list of all public subnets, containing the full objects."},"public_subnets":{"expression":{"references":["aws_subnet.public"]},"description":"List of IDs of public subnets"},"public_subnets_cidr_blocks":{"expression":{"references":["aws_subnet.public"]},"description":"List of cidr_blocks of public subnets"},"public_subnets_ipv6_cidr_blocks":{"expression":{"references":["aws_subnet.public"]},"description":"List of IPv6 cidr_blocks of public subnets in an IPv6 enabled VPC"},"redshift_network_acl_arn":{"expression":{"references":["aws_network_acl.redshift[0].arn","aws_network_acl.redshift[0]","aws_network_acl.redshift"]},"description":"ARN of the redshift network ACL"},"redshift_network_acl_id":{"expression":{"references":["aws_network_acl.redshift[0].id","aws_network_acl.redshift[0]","aws_network_acl.redshift"]},"description":"ID of the redshift network ACL"},"redshift_public_route_table_association_ids":{"expression":{"references":["aws_route_table_association.redshift_public"]},"description":"List of IDs of the public redshift route table association"},"redshift_route_table_association_ids":{"expression":{"references":["aws_route_table_association.redshift"]},"description":"List of IDs of the redshift route table association"},"redshift_route_table_ids":{"expression":{"references":["local.redshift_route_table_ids","local.redshift_route_table_ids","var.enable_public_redshift","local.public_route_table_ids","local.private_route_table_ids"]},"description":"List of IDs of redshift route tables"},"redshift_subnet_arns":{"expression":{"references":["aws_subnet.redshift"]},"description":"List of ARNs of redshift subnets"},"redshift_subnet_group":{"expression":{"references":["aws_redshift_subnet_group.redshift[0].id","aws_redshift_subnet_group.redshift[0]","aws_redshift_subnet_group.redshift"]},"description":"ID of redshift subnet group"},"redshift_subnet_objects":{"expression":{"references":["aws_subnet.redshift"]},"description":"A list of all redshift subnets, containing the full objects."},"redshift_subnets":{"expression":{"references":["aws_subnet.redshift"]},"description":"List of IDs of redshift subnets"},"redshift_subnets_cidr_blocks":{"expression":{"references":["aws_subnet.redshift"]},"description":"List of cidr_blocks of redshift subnets"},"redshift_subnets_ipv6_cidr_blocks":{"expression":{"references":["aws_subnet.redshift"]},"description":"List of IPv6 cidr_blocks of redshift subnets in an IPv6 enabled VPC"},"this_customer_gateway":{"expression":{"references":["aws_customer_gateway.this"]},"description":"Map of Customer Gateway attributes"},"vgw_arn":{"expression":{"references":["aws_vpn_gateway.this[0].arn","aws_vpn_gateway.this[0]","aws_vpn_gateway.this"]},"description":"The ARN of the VPN Gateway"},"vgw_id":{"expression":{"references":["aws_vpn_gateway.this[0].id","aws_vpn_gateway.this[0]","aws_vpn_gateway.this","aws_vpn_gateway_attachment.this[0].vpn_gateway_id","aws_vpn_gateway_attachment.this[0]","aws_vpn_gateway_attachment.this"]},"description":"The ID of the VPN Gateway"},"vpc_arn":{"expression":{"references":["aws_vpc.this[0].arn","aws_vpc.this[0]","aws_vpc.this"]},"description":"The ARN of the VPC"},"vpc_block_public_access_exclusions":{"expression":{"references":["aws_vpc_block_public_access_exclusion.this"]},"description":"A map of VPC block public access exclusions"},"vpc_cidr_block":{"expression":{"references":["aws_vpc.this[0].cidr_block","aws_vpc.this[0]","aws_vpc.this"]},"description":"The CIDR block of the VPC"},"vpc_enable_dns_hostnames":{"expression":{"references":["aws_vpc.this[0].enable_dns_hostnames","aws_vpc.this[0]","aws_vpc.this"]},"description":"Whether or not the VPC has DNS hostname support"},"vpc_enable_dns_support":{"expression":{"references":["aws_vpc.this[0].enable_dns_support","aws_vpc.this[0]","aws_vpc.this"]},"description":"Whether or not the VPC has DNS support"},"vpc_flow_log_cloudwatch_iam_role_arn":{"expression":{"references":["local.flow_log_iam_role_arn"]},"description":"The ARN of the IAM role used when pushing logs to Cloudwatch log group"},"vpc_flow_log_deliver_cross_account_role":{"expression":{"references":["aws_flow_log.this[0].deliver_cross_account_role","aws_flow_log.this[0]","aws_flow_log.this"]},"description":"The ARN of the IAM role used when pushing logs cross account"},"vpc_flow_log_destination_arn":{"expression":{"references":["local.flow_log_destination_arn"]},"description":"The ARN of the destination for VPC Flow Logs"},"vpc_flow_log_destination_type":{"expression":{"references":["var.flow_log_destination_type"]},"description":"The type of the destination for VPC Flow Logs"},"vpc_flow_log_id":{"expression":{"references":["aws_flow_log.this[0].id","aws_flow_log.this[0]","aws_flow_log.this"]},"description":"The ID of the Flow Log resource"},"vpc_id":{"expression":{"references":["aws_vpc.this[0].id","aws_vpc.this[0]","aws_vpc.this"]},"description":"The ID of the VPC"},"vpc_instance_tenancy":{"expression":{"references":["aws_vpc.this[0].instance_tenancy","aws_vpc.this[0]","aws_vpc.this"]},"description":"Tenancy of instances spin up within VPC"},"vpc_ipv6_association_id":{"expression":{"references":["aws_vpc.this[0].ipv6_association_id","aws_vpc.this[0]","aws_vpc.this"]},"description":"The association ID for the IPv6 CIDR block"},"vpc_ipv6_cidr_block":{"expression":{"references":["aws_vpc.this[0].ipv6_cidr_block","aws_vpc.this[0]","aws_vpc.this"]},"description":"The IPv6 CIDR block"},"vpc_main_route_table_id":{"expression":{"references":["aws_vpc.this[0].main_route_table_id","aws_vpc.this[0]","aws_vpc.this"]},"description":"The ID of the main route table associated with this VPC"},"vpc_owner_id":{"expression":{"references":["aws_vpc.this[0].owner_id","aws_vpc.this[0]","aws_vpc.this"]},"description":"The ID of the AWS account that owns the VPC"},"vpc_secondary_cidr_blocks":{"expression":{"references":["aws_vpc_ipv4_cidr_block_association.this"]},"description":"List of secondary CIDR blocks of the VPC"}},"resources":[{"address":"aws_cloudwatch_log_group.flow_log","mode":"managed","type":"aws_cloudwatch_log_group","name":"flow_log","provider_config_key":"aws","expressions":{"kms_key_id":{"references":["var.flow_log_cloudwatch_log_group_kms_key_id"]},"log_group_class":{"references":["var.flow_log_cloudwatch_log_group_class"]},"name":{"references":["var.flow_log_cloudwatch_log_group_name_prefix","local.flow_log_cloudwatch_log_group_name_suffix"]},"retention_in_days":{"references":["var.flow_log_cloudwatch_log_group_retention_in_days"]},"skip_destroy":{"references":["var.flow_log_cloudwatch_log_group_skip_destroy"]},"tags":{"references":["var.tags","var.vpc_flow_log_tags"]}},"schema_version":0,"count_expression":{"references":["local.create_flow_log_cloudwatch_log_group"]}},{"address":"aws_customer_gateway.this","mode":"managed","type":"aws_customer_gateway","name":"this","provider_config_key":"aws","expressions":{"bgp_asn":{"references":["each.value[\"bgp_asn\"]","each.value"]},"device_name":{"references":["each.value"]},"ip_address":{"references":["each.value[\"ip_address\"]","each.value"]},"tags":{"references":["var.name","each.key","var.tags","var.customer_gateway_tags"]},"type":{"constant_value":"ipsec.1"}},"schema_version":0,"for_each_expression":{"references":["var.customer_gateways"]}},{"address":"aws_db_subnet_group.database","mode":"managed","type":"aws_db_subnet_group","name":"database","provider_config_key":"aws","expressions":{"description":{"references":["var.name"]},"name":{"references":["var.database_subnet_group_name","var.name"]},"subnet_ids":{"references":["aws_subnet.database"]},"tags":{"references":["var.database_subnet_group_name","var.name","var.tags","var.database_subnet_group_tags"]}},"schema_version":0,"count_expression":{"references":["local.create_database_subnets","var.create_database_subnet_group"]}},{"address":"aws_default_network_acl.this","mode":"managed","type":"aws_default_network_acl","name":"this","provider_config_key":"aws","expressions":{"default_network_acl_id":{"references":["aws_vpc.this[0].default_network_acl_id","aws_vpc.this[0]","aws_vpc.this"]},"subnet_ids":{"constant_value":null},"tags":{"references":["var.default_network_acl_name","var.name","var.tags","var.default_network_acl_tags"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.manage_default_network_acl"]}},{"address":"aws_default_route_table.default","mode":"managed","type":"aws_default_route_table","name":"default","provider_config_key":"aws","expressions":{"default_route_table_id":{"references":["aws_vpc.this[0].default_route_table_id","aws_vpc.this[0]","aws_vpc.this"]},"propagating_vgws":{"references":["var.default_route_table_propagating_vgws"]},"tags":{"references":["var.default_route_table_name","var.name","var.tags","var.default_route_table_tags"]},"timeouts":{"create":{"constant_value":"5m"},"update":{"constant_value":"5m"}}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.manage_default_route_table"]}},{"address":"aws_default_security_group.this","mode":"managed","type":"aws_default_security_group","name":"this","provider_config_key":"aws","expressions":{"tags":{"references":["var.default_security_group_name","var.name","var.tags","var.default_security_group_tags"]},"vpc_id":{"references":["aws_vpc.this[0].id","aws_vpc.this[0]","aws_vpc.this"]}},"schema_version":1,"count_expression":{"references":["local.create_vpc","var.manage_default_security_group"]}},{"address":"aws_default_vpc.this","mode":"managed","type":"aws_default_vpc","name":"this","provider_config_key":"aws","expressions":{"enable_dns_hostnames":{"references":["var.default_vpc_enable_dns_hostnames"]},"enable_dns_support":{"references":["var.default_vpc_enable_dns_support"]},"tags":{"references":["var.default_vpc_name","var.tags","var.default_vpc_tags"]}},"schema_version":1,"count_expression":{"references":["var.manage_default_vpc"]}},{"address":"aws_egress_only_internet_gateway.this","mode":"managed","type":"aws_egress_only_internet_gateway","name":"this","provider_config_key":"aws","expressions":{"tags":{"references":["var.name","var.tags","var.igw_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.create_egress_only_igw","var.enable_ipv6","local.max_subnet_length"]}},{"address":"aws_eip.nat","mode":"managed","type":"aws_eip","name":"nat","provider_config_key":"aws","expressions":{"domain":{"constant_value":"vpc"},"tags":{"references":["var.name","var.azs","var.single_nat_gateway","count.index","var.tags","var.nat_eip_tags"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.enable_nat_gateway","var.reuse_nat_ips","local.nat_gateway_count"]},"depends_on":["aws_internet_gateway.this"]},{"address":"aws_elasticache_subnet_group.elasticache","mode":"managed","type":"aws_elasticache_subnet_group","name":"elasticache","provider_config_key":"aws","expressions":{"description":{"references":["var.name"]},"name":{"references":["var.elasticache_subnet_group_name","var.name"]},"subnet_ids":{"references":["aws_subnet.elasticache"]},"tags":{"references":["var.elasticache_subnet_group_name","var.name","var.tags","var.elasticache_subnet_group_tags"]}},"schema_version":0,"count_expression":{"references":["local.create_elasticache_subnets","var.create_elasticache_subnet_group"]}},{"address":"aws_flow_log.this","mode":"managed","type":"aws_flow_log","name":"this","provider_config_key":"aws","expressions":{"deliver_cross_account_role":{"references":["var.flow_log_deliver_cross_account_role"]},"iam_role_arn":{"references":["local.flow_log_iam_role_arn"]},"log_destination":{"references":["local.flow_log_destination_arn"]},"log_destination_type":{"references":["var.flow_log_destination_type"]},"log_format":{"references":["var.flow_log_log_format"]},"max_aggregation_interval":{"references":["var.flow_log_max_aggregation_interval"]},"tags":{"references":["var.tags","var.vpc_flow_log_tags"]},"traffic_type":{"references":["var.flow_log_traffic_type"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["local.enable_flow_log"]}},{"address":"aws_iam_policy.vpc_flow_log_cloudwatch","mode":"managed","type":"aws_iam_policy","name":"vpc_flow_log_cloudwatch","provider_config_key":"aws","expressions":{"name":{"references":["var.vpc_flow_log_iam_policy_use_name_prefix","var.vpc_flow_log_iam_policy_name"]},"name_prefix":{"references":["var.vpc_flow_log_iam_policy_use_name_prefix","var.vpc_flow_log_iam_policy_name"]},"policy":{"references":["data.aws_iam_policy_document.vpc_flow_log_cloudwatch[0].json","data.aws_iam_policy_document.vpc_flow_log_cloudwatch[0]","data.aws_iam_policy_document.vpc_flow_log_cloudwatch"]},"tags":{"references":["var.tags","var.vpc_flow_log_tags"]}},"schema_version":0,"count_expression":{"references":["local.create_flow_log_cloudwatch_iam_role"]}},{"address":"aws_iam_role.vpc_flow_log_cloudwatch","mode":"managed","type":"aws_iam_role","name":"vpc_flow_log_cloudwatch","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.flow_log_cloudwatch_assume_role[0].json","data.aws_iam_policy_document.flow_log_cloudwatch_assume_role[0]","data.aws_iam_policy_document.flow_log_cloudwatch_assume_role"]},"name":{"references":["var.vpc_flow_log_iam_role_use_name_prefix","var.vpc_flow_log_iam_role_name"]},"name_prefix":{"references":["var.vpc_flow_log_iam_role_use_name_prefix","var.vpc_flow_log_iam_role_name"]},"permissions_boundary":{"references":["var.vpc_flow_log_permissions_boundary"]},"tags":{"references":["var.tags","var.vpc_flow_log_tags"]}},"schema_version":0,"count_expression":{"references":["local.create_flow_log_cloudwatch_iam_role"]}},{"address":"aws_iam_role_policy_attachment.vpc_flow_log_cloudwatch","mode":"managed","type":"aws_iam_role_policy_attachment","name":"vpc_flow_log_cloudwatch","provider_config_key":"aws","expressions":{"policy_arn":{"references":["aws_iam_policy.vpc_flow_log_cloudwatch[0].arn","aws_iam_policy.vpc_flow_log_cloudwatch[0]","aws_iam_policy.vpc_flow_log_cloudwatch"]},"role":{"references":["aws_iam_role.vpc_flow_log_cloudwatch[0].name","aws_iam_role.vpc_flow_log_cloudwatch[0]","aws_iam_role.vpc_flow_log_cloudwatch"]}},"schema_version":0,"count_expression":{"references":["local.create_flow_log_cloudwatch_iam_role"]}},{"address":"aws_internet_gateway.this","mode":"managed","type":"aws_internet_gateway","name":"this","provider_config_key":"aws","expressions":{"tags":{"references":["var.name","var.tags","var.igw_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["local.create_public_subnets","var.create_igw"]}},{"address":"aws_nat_gateway.this","mode":"managed","type":"aws_nat_gateway","name":"this","provider_config_key":"aws","expressions":{"allocation_id":{"references":["local.nat_gateway_ips","var.single_nat_gateway","count.index"]},"subnet_id":{"references":["aws_subnet.public","var.single_nat_gateway","count.index"]},"tags":{"references":["var.name","var.azs","var.single_nat_gateway","count.index","var.tags","var.nat_gateway_tags"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.enable_nat_gateway","local.nat_gateway_count"]},"depends_on":["aws_internet_gateway.this"]},{"address":"aws_network_acl.database","mode":"managed","type":"aws_network_acl","name":"database","provider_config_key":"aws","expressions":{"subnet_ids":{"references":["aws_subnet.database"]},"tags":{"references":["var.name","var.database_subnet_suffix","var.tags","var.database_acl_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["local.create_database_network_acl"]}},{"address":"aws_network_acl.elasticache","mode":"managed","type":"aws_network_acl","name":"elasticache","provider_config_key":"aws","expressions":{"subnet_ids":{"references":["aws_subnet.elasticache"]},"tags":{"references":["var.name","var.elasticache_subnet_suffix","var.tags","var.elasticache_acl_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["local.create_elasticache_network_acl"]}},{"address":"aws_network_acl.intra","mode":"managed","type":"aws_network_acl","name":"intra","provider_config_key":"aws","expressions":{"subnet_ids":{"references":["aws_subnet.intra"]},"tags":{"references":["var.name","var.intra_subnet_suffix","var.tags","var.intra_acl_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["local.create_intra_network_acl"]}},{"address":"aws_network_acl.outpost","mode":"managed","type":"aws_network_acl","name":"outpost","provider_config_key":"aws","expressions":{"subnet_ids":{"references":["aws_subnet.outpost"]},"tags":{"references":["var.name","var.outpost_subnet_suffix","var.tags","var.outpost_acl_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["local.create_outpost_network_acl"]}},{"address":"aws_network_acl.private","mode":"managed","type":"aws_network_acl","name":"private","provider_config_key":"aws","expressions":{"subnet_ids":{"references":["aws_subnet.private"]},"tags":{"references":["var.name","var.private_subnet_suffix","var.tags","var.private_acl_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["local.create_private_network_acl"]}},{"address":"aws_network_acl.public","mode":"managed","type":"aws_network_acl","name":"public","provider_config_key":"aws","expressions":{"subnet_ids":{"references":["aws_subnet.public"]},"tags":{"references":["var.name","var.public_subnet_suffix","var.tags","var.public_acl_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["local.create_public_subnets","var.public_dedicated_network_acl"]}},{"address":"aws_network_acl.redshift","mode":"managed","type":"aws_network_acl","name":"redshift","provider_config_key":"aws","expressions":{"subnet_ids":{"references":["aws_subnet.redshift"]},"tags":{"references":["var.name","var.redshift_subnet_suffix","var.tags","var.redshift_acl_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["local.create_redshift_network_acl"]}},{"address":"aws_network_acl_rule.database_inbound","mode":"managed","type":"aws_network_acl_rule","name":"database_inbound","provider_config_key":"aws","expressions":{"cidr_block":{"references":["var.database_inbound_acl_rules","count.index"]},"egress":{"constant_value":false},"from_port":{"references":["var.database_inbound_acl_rules","count.index"]},"icmp_code":{"references":["var.database_inbound_acl_rules","count.index"]},"icmp_type":{"references":["var.database_inbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.database_inbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.database[0].id","aws_network_acl.database[0]","aws_network_acl.database"]},"protocol":{"references":["var.database_inbound_acl_rules","count.index"]},"rule_action":{"references":["var.database_inbound_acl_rules","count.index"]},"rule_number":{"references":["var.database_inbound_acl_rules","count.index"]},"to_port":{"references":["var.database_inbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_database_network_acl","var.database_inbound_acl_rules"]}},{"address":"aws_network_acl_rule.database_outbound","mode":"managed","type":"aws_network_acl_rule","name":"database_outbound","provider_config_key":"aws","expressions":{"cidr_block":{"references":["var.database_outbound_acl_rules","count.index"]},"egress":{"constant_value":true},"from_port":{"references":["var.database_outbound_acl_rules","count.index"]},"icmp_code":{"references":["var.database_outbound_acl_rules","count.index"]},"icmp_type":{"references":["var.database_outbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.database_outbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.database[0].id","aws_network_acl.database[0]","aws_network_acl.database"]},"protocol":{"references":["var.database_outbound_acl_rules","count.index"]},"rule_action":{"references":["var.database_outbound_acl_rules","count.index"]},"rule_number":{"references":["var.database_outbound_acl_rules","count.index"]},"to_port":{"references":["var.database_outbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_database_network_acl","var.database_outbound_acl_rules"]}},{"address":"aws_network_acl_rule.elasticache_inbound","mode":"managed","type":"aws_network_acl_rule","name":"elasticache_inbound","provider_config_key":"aws","expressions":{"cidr_block":{"references":["var.elasticache_inbound_acl_rules","count.index"]},"egress":{"constant_value":false},"from_port":{"references":["var.elasticache_inbound_acl_rules","count.index"]},"icmp_code":{"references":["var.elasticache_inbound_acl_rules","count.index"]},"icmp_type":{"references":["var.elasticache_inbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.elasticache_inbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.elasticache[0].id","aws_network_acl.elasticache[0]","aws_network_acl.elasticache"]},"protocol":{"references":["var.elasticache_inbound_acl_rules","count.index"]},"rule_action":{"references":["var.elasticache_inbound_acl_rules","count.index"]},"rule_number":{"references":["var.elasticache_inbound_acl_rules","count.index"]},"to_port":{"references":["var.elasticache_inbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_elasticache_network_acl","var.elasticache_inbound_acl_rules"]}},{"address":"aws_network_acl_rule.elasticache_outbound","mode":"managed","type":"aws_network_acl_rule","name":"elasticache_outbound","provider_config_key":"aws","expressions":{"cidr_block":{"references":["var.elasticache_outbound_acl_rules","count.index"]},"egress":{"constant_value":true},"from_port":{"references":["var.elasticache_outbound_acl_rules","count.index"]},"icmp_code":{"references":["var.elasticache_outbound_acl_rules","count.index"]},"icmp_type":{"references":["var.elasticache_outbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.elasticache_outbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.elasticache[0].id","aws_network_acl.elasticache[0]","aws_network_acl.elasticache"]},"protocol":{"references":["var.elasticache_outbound_acl_rules","count.index"]},"rule_action":{"references":["var.elasticache_outbound_acl_rules","count.index"]},"rule_number":{"references":["var.elasticache_outbound_acl_rules","count.index"]},"to_port":{"references":["var.elasticache_outbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_elasticache_network_acl","var.elasticache_outbound_acl_rules"]}},{"address":"aws_network_acl_rule.intra_inbound","mode":"managed","type":"aws_network_acl_rule","name":"intra_inbound","provider_config_key":"aws","expressions":{"cidr_block":{"references":["var.intra_inbound_acl_rules","count.index"]},"egress":{"constant_value":false},"from_port":{"references":["var.intra_inbound_acl_rules","count.index"]},"icmp_code":{"references":["var.intra_inbound_acl_rules","count.index"]},"icmp_type":{"references":["var.intra_inbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.intra_inbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.intra[0].id","aws_network_acl.intra[0]","aws_network_acl.intra"]},"protocol":{"references":["var.intra_inbound_acl_rules","count.index"]},"rule_action":{"references":["var.intra_inbound_acl_rules","count.index"]},"rule_number":{"references":["var.intra_inbound_acl_rules","count.index"]},"to_port":{"references":["var.intra_inbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_intra_network_acl","var.intra_inbound_acl_rules"]}},{"address":"aws_network_acl_rule.intra_outbound","mode":"managed","type":"aws_network_acl_rule","name":"intra_outbound","provider_config_key":"aws","expressions":{"cidr_block":{"references":["var.intra_outbound_acl_rules","count.index"]},"egress":{"constant_value":true},"from_port":{"references":["var.intra_outbound_acl_rules","count.index"]},"icmp_code":{"references":["var.intra_outbound_acl_rules","count.index"]},"icmp_type":{"references":["var.intra_outbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.intra_outbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.intra[0].id","aws_network_acl.intra[0]","aws_network_acl.intra"]},"protocol":{"references":["var.intra_outbound_acl_rules","count.index"]},"rule_action":{"references":["var.intra_outbound_acl_rules","count.index"]},"rule_number":{"references":["var.intra_outbound_acl_rules","count.index"]},"to_port":{"references":["var.intra_outbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_intra_network_acl","var.intra_outbound_acl_rules"]}},{"address":"aws_network_acl_rule.outpost_inbound","mode":"managed","type":"aws_network_acl_rule","name":"outpost_inbound","provider_config_key":"aws","expressions":{"cidr_block":{"references":["var.outpost_inbound_acl_rules","count.index"]},"egress":{"constant_value":false},"from_port":{"references":["var.outpost_inbound_acl_rules","count.index"]},"icmp_code":{"references":["var.outpost_inbound_acl_rules","count.index"]},"icmp_type":{"references":["var.outpost_inbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.outpost_inbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.outpost[0].id","aws_network_acl.outpost[0]","aws_network_acl.outpost"]},"protocol":{"references":["var.outpost_inbound_acl_rules","count.index"]},"rule_action":{"references":["var.outpost_inbound_acl_rules","count.index"]},"rule_number":{"references":["var.outpost_inbound_acl_rules","count.index"]},"to_port":{"references":["var.outpost_inbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_outpost_network_acl","var.outpost_inbound_acl_rules"]}},{"address":"aws_network_acl_rule.outpost_outbound","mode":"managed","type":"aws_network_acl_rule","name":"outpost_outbound","provider_config_key":"aws","expressions":{"cidr_block":{"references":["var.outpost_outbound_acl_rules","count.index"]},"egress":{"constant_value":true},"from_port":{"references":["var.outpost_outbound_acl_rules","count.index"]},"icmp_code":{"references":["var.outpost_outbound_acl_rules","count.index"]},"icmp_type":{"references":["var.outpost_outbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.outpost_outbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.outpost[0].id","aws_network_acl.outpost[0]","aws_network_acl.outpost"]},"protocol":{"references":["var.outpost_outbound_acl_rules","count.index"]},"rule_action":{"references":["var.outpost_outbound_acl_rules","count.index"]},"rule_number":{"references":["var.outpost_outbound_acl_rules","count.index"]},"to_port":{"references":["var.outpost_outbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_outpost_network_acl","var.outpost_outbound_acl_rules"]}},{"address":"aws_network_acl_rule.private_inbound","mode":"managed","type":"aws_network_acl_rule","name":"private_inbound","provider_config_key":"aws","expressions":{"cidr_block":{"references":["var.private_inbound_acl_rules","count.index"]},"egress":{"constant_value":false},"from_port":{"references":["var.private_inbound_acl_rules","count.index"]},"icmp_code":{"references":["var.private_inbound_acl_rules","count.index"]},"icmp_type":{"references":["var.private_inbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.private_inbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.private[0].id","aws_network_acl.private[0]","aws_network_acl.private"]},"protocol":{"references":["var.private_inbound_acl_rules","count.index"]},"rule_action":{"references":["var.private_inbound_acl_rules","count.index"]},"rule_number":{"references":["var.private_inbound_acl_rules","count.index"]},"to_port":{"references":["var.private_inbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_private_network_acl","var.private_inbound_acl_rules"]}},{"address":"aws_network_acl_rule.private_outbound","mode":"managed","type":"aws_network_acl_rule","name":"private_outbound","provider_config_key":"aws","expressions":{"cidr_block":{"references":["var.private_outbound_acl_rules","count.index"]},"egress":{"constant_value":true},"from_port":{"references":["var.private_outbound_acl_rules","count.index"]},"icmp_code":{"references":["var.private_outbound_acl_rules","count.index"]},"icmp_type":{"references":["var.private_outbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.private_outbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.private[0].id","aws_network_acl.private[0]","aws_network_acl.private"]},"protocol":{"references":["var.private_outbound_acl_rules","count.index"]},"rule_action":{"references":["var.private_outbound_acl_rules","count.index"]},"rule_number":{"references":["var.private_outbound_acl_rules","count.index"]},"to_port":{"references":["var.private_outbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_private_network_acl","var.private_outbound_acl_rules"]}},{"address":"aws_network_acl_rule.public_inbound","mode":"managed","type":"aws_network_acl_rule","name":"public_inbound","provider_config_key":"aws","expressions":{"cidr_block":{"references":["var.public_inbound_acl_rules","count.index"]},"egress":{"constant_value":false},"from_port":{"references":["var.public_inbound_acl_rules","count.index"]},"icmp_code":{"references":["var.public_inbound_acl_rules","count.index"]},"icmp_type":{"references":["var.public_inbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.public_inbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.public[0].id","aws_network_acl.public[0]","aws_network_acl.public"]},"protocol":{"references":["var.public_inbound_acl_rules","count.index"]},"rule_action":{"references":["var.public_inbound_acl_rules","count.index"]},"rule_number":{"references":["var.public_inbound_acl_rules","count.index"]},"to_port":{"references":["var.public_inbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_public_subnets","var.public_dedicated_network_acl","var.public_inbound_acl_rules"]}},{"address":"aws_network_acl_rule.public_outbound","mode":"managed","type":"aws_network_acl_rule","name":"public_outbound","provider_config_key":"aws","expressions":{"cidr_block":{"references":["var.public_outbound_acl_rules","count.index"]},"egress":{"constant_value":true},"from_port":{"references":["var.public_outbound_acl_rules","count.index"]},"icmp_code":{"references":["var.public_outbound_acl_rules","count.index"]},"icmp_type":{"references":["var.public_outbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.public_outbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.public[0].id","aws_network_acl.public[0]","aws_network_acl.public"]},"protocol":{"references":["var.public_outbound_acl_rules","count.index"]},"rule_action":{"references":["var.public_outbound_acl_rules","count.index"]},"rule_number":{"references":["var.public_outbound_acl_rules","count.index"]},"to_port":{"references":["var.public_outbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_public_subnets","var.public_dedicated_network_acl","var.public_outbound_acl_rules"]}},{"address":"aws_network_acl_rule.redshift_inbound","mode":"managed","type":"aws_network_acl_rule","name":"redshift_inbound","provider_config_key":"aws","expressions":{"cidr_block":{"references":["var.redshift_inbound_acl_rules","count.index"]},"egress":{"constant_value":false},"from_port":{"references":["var.redshift_inbound_acl_rules","count.index"]},"icmp_code":{"references":["var.redshift_inbound_acl_rules","count.index"]},"icmp_type":{"references":["var.redshift_inbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.redshift_inbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.redshift[0].id","aws_network_acl.redshift[0]","aws_network_acl.redshift"]},"protocol":{"references":["var.redshift_inbound_acl_rules","count.index"]},"rule_action":{"references":["var.redshift_inbound_acl_rules","count.index"]},"rule_number":{"references":["var.redshift_inbound_acl_rules","count.index"]},"to_port":{"references":["var.redshift_inbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_redshift_network_acl","var.redshift_inbound_acl_rules"]}},{"address":"aws_network_acl_rule.redshift_outbound","mode":"managed","type":"aws_network_acl_rule","name":"redshift_outbound","provider_config_key":"aws","expressions":{"cidr_block":{"references":["var.redshift_outbound_acl_rules","count.index"]},"egress":{"constant_value":true},"from_port":{"references":["var.redshift_outbound_acl_rules","count.index"]},"icmp_code":{"references":["var.redshift_outbound_acl_rules","count.index"]},"icmp_type":{"references":["var.redshift_outbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.redshift_outbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.redshift[0].id","aws_network_acl.redshift[0]","aws_network_acl.redshift"]},"protocol":{"references":["var.redshift_outbound_acl_rules","count.index"]},"rule_action":{"references":["var.redshift_outbound_acl_rules","count.index"]},"rule_number":{"references":["var.redshift_outbound_acl_rules","count.index"]},"to_port":{"references":["var.redshift_outbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_redshift_network_acl","var.redshift_outbound_acl_rules"]}},{"address":"aws_redshift_subnet_group.redshift","mode":"managed","type":"aws_redshift_subnet_group","name":"redshift","provider_config_key":"aws","expressions":{"description":{"references":["var.name"]},"name":{"references":["var.redshift_subnet_group_name","var.name"]},"subnet_ids":{"references":["aws_subnet.redshift"]},"tags":{"references":["var.redshift_subnet_group_name","var.name","var.tags","var.redshift_subnet_group_tags"]}},"schema_version":0,"count_expression":{"references":["local.create_redshift_subnets","var.create_redshift_subnet_group"]}},{"address":"aws_route.database_dns64_nat_gateway","mode":"managed","type":"aws_route","name":"database_dns64_nat_gateway","provider_config_key":"aws","expressions":{"destination_ipv6_cidr_block":{"constant_value":"64:ff9b::/96"},"nat_gateway_id":{"references":["aws_nat_gateway.this","count.index"]},"route_table_id":{"references":["aws_route_table.database","count.index"]},"timeouts":{"create":{"constant_value":"5m"}}},"schema_version":0,"count_expression":{"references":["local.create_database_route_table","var.create_database_internet_gateway_route","var.create_database_nat_gateway_route","var.enable_nat_gateway","var.enable_ipv6","var.private_subnet_enable_dns64","var.single_nat_gateway","local.len_database_subnets"]}},{"address":"aws_route.database_internet_gateway","mode":"managed","type":"aws_route","name":"database_internet_gateway","provider_config_key":"aws","expressions":{"destination_cidr_block":{"constant_value":"0.0.0.0/0"},"gateway_id":{"references":["aws_internet_gateway.this[0].id","aws_internet_gateway.this[0]","aws_internet_gateway.this"]},"route_table_id":{"references":["aws_route_table.database[0].id","aws_route_table.database[0]","aws_route_table.database"]},"timeouts":{"create":{"constant_value":"5m"}}},"schema_version":0,"count_expression":{"references":["local.create_database_route_table","var.create_igw","var.create_database_internet_gateway_route","var.create_database_nat_gateway_route"]}},{"address":"aws_route.database_ipv6_egress","mode":"managed","type":"aws_route","name":"database_ipv6_egress","provider_config_key":"aws","expressions":{"destination_ipv6_cidr_block":{"constant_value":"::/0"},"egress_only_gateway_id":{"references":["aws_egress_only_internet_gateway.this[0].id","aws_egress_only_internet_gateway.this[0]","aws_egress_only_internet_gateway.this"]},"route_table_id":{"references":["aws_route_table.database[0].id","aws_route_table.database[0]","aws_route_table.database"]},"timeouts":{"create":{"constant_value":"5m"}}},"schema_version":0,"count_expression":{"references":["local.create_database_route_table","var.create_egress_only_igw","var.enable_ipv6","var.create_database_internet_gateway_route"]}},{"address":"aws_route.database_nat_gateway","mode":"managed","type":"aws_route","name":"database_nat_gateway","provider_config_key":"aws","expressions":{"destination_cidr_block":{"constant_value":"0.0.0.0/0"},"nat_gateway_id":{"references":["aws_nat_gateway.this","count.index"]},"route_table_id":{"references":["aws_route_table.database","count.index"]},"timeouts":{"create":{"constant_value":"5m"}}},"schema_version":0,"count_expression":{"references":["local.create_database_route_table","var.create_database_internet_gateway_route","var.create_database_nat_gateway_route","var.enable_nat_gateway","var.single_nat_gateway","local.len_database_subnets"]}},{"address":"aws_route.private_dns64_nat_gateway","mode":"managed","type":"aws_route","name":"private_dns64_nat_gateway","provider_config_key":"aws","expressions":{"destination_ipv6_cidr_block":{"constant_value":"64:ff9b::/96"},"nat_gateway_id":{"references":["aws_nat_gateway.this","count.index"]},"route_table_id":{"references":["aws_route_table.private","count.index"]},"timeouts":{"create":{"constant_value":"5m"}}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.enable_nat_gateway","var.enable_ipv6","var.private_subnet_enable_dns64","local.nat_gateway_count"]}},{"address":"aws_route.private_ipv6_egress","mode":"managed","type":"aws_route","name":"private_ipv6_egress","provider_config_key":"aws","expressions":{"destination_ipv6_cidr_block":{"constant_value":"::/0"},"egress_only_gateway_id":{"references":["aws_egress_only_internet_gateway.this"]},"route_table_id":{"references":["aws_route_table.private","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.create_egress_only_igw","var.enable_ipv6","local.len_private_subnets","local.nat_gateway_count"]}},{"address":"aws_route.private_nat_gateway","mode":"managed","type":"aws_route","name":"private_nat_gateway","provider_config_key":"aws","expressions":{"destination_cidr_block":{"references":["var.nat_gateway_destination_cidr_block"]},"nat_gateway_id":{"references":["aws_nat_gateway.this","count.index"]},"route_table_id":{"references":["aws_route_table.private","count.index"]},"timeouts":{"create":{"constant_value":"5m"}}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.enable_nat_gateway","var.create_private_nat_gateway_route","local.nat_gateway_count"]}},{"address":"aws_route.public_internet_gateway","mode":"managed","type":"aws_route","name":"public_internet_gateway","provider_config_key":"aws","expressions":{"destination_cidr_block":{"constant_value":"0.0.0.0/0"},"gateway_id":{"references":["aws_internet_gateway.this[0].id","aws_internet_gateway.this[0]","aws_internet_gateway.this"]},"route_table_id":{"references":["aws_route_table.public","count.index"]},"timeouts":{"create":{"constant_value":"5m"}}},"schema_version":0,"count_expression":{"references":["local.create_public_subnets","var.create_igw","local.num_public_route_tables"]}},{"address":"aws_route.public_internet_gateway_ipv6","mode":"managed","type":"aws_route","name":"public_internet_gateway_ipv6","provider_config_key":"aws","expressions":{"destination_ipv6_cidr_block":{"constant_value":"::/0"},"gateway_id":{"references":["aws_internet_gateway.this[0].id","aws_internet_gateway.this[0]","aws_internet_gateway.this"]},"route_table_id":{"references":["aws_route_table.public","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_public_subnets","var.create_igw","var.enable_ipv6","local.num_public_route_tables"]}},{"address":"aws_route_table.database","mode":"managed","type":"aws_route_table","name":"database","provider_config_key":"aws","expressions":{"tags":{"references":["var.single_nat_gateway","var.create_database_internet_gateway_route","var.name","var.database_subnet_suffix","var.name","var.database_subnet_suffix","var.azs","count.index","var.tags","var.database_route_table_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["local.create_database_route_table","var.single_nat_gateway","var.create_database_internet_gateway_route","local.len_database_subnets"]}},{"address":"aws_route_table.elasticache","mode":"managed","type":"aws_route_table","name":"elasticache","provider_config_key":"aws","expressions":{"tags":{"references":["var.name","var.elasticache_subnet_suffix","var.tags","var.elasticache_route_table_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["local.create_elasticache_route_table"]}},{"address":"aws_route_table.intra","mode":"managed","type":"aws_route_table","name":"intra","provider_config_key":"aws","expressions":{"tags":{"references":["var.create_multiple_intra_route_tables","var.name","var.intra_subnet_suffix","var.azs","count.index","var.name","var.intra_subnet_suffix","var.tags","var.intra_route_table_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["local.create_intra_subnets","local.num_intra_route_tables"]}},{"address":"aws_route_table.private","mode":"managed","type":"aws_route_table","name":"private","provider_config_key":"aws","expressions":{"tags":{"references":["var.single_nat_gateway","var.name","var.private_subnet_suffix","var.name","var.private_subnet_suffix","var.azs","count.index","var.tags","var.private_route_table_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["local.create_private_subnets","local.max_subnet_length","local.nat_gateway_count"]}},{"address":"aws_route_table.public","mode":"managed","type":"aws_route_table","name":"public","provider_config_key":"aws","expressions":{"tags":{"references":["var.create_multiple_public_route_tables","var.name","var.public_subnet_suffix","var.azs","count.index","var.name","var.public_subnet_suffix","var.tags","var.public_route_table_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["local.create_public_subnets","local.num_public_route_tables"]}},{"address":"aws_route_table.redshift","mode":"managed","type":"aws_route_table","name":"redshift","provider_config_key":"aws","expressions":{"tags":{"references":["var.name","var.redshift_subnet_suffix","var.tags","var.redshift_route_table_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["local.create_redshift_route_table"]}},{"address":"aws_route_table_association.database","mode":"managed","type":"aws_route_table_association","name":"database","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.database","aws_route_table.private","var.create_database_subnet_route_table","var.single_nat_gateway","var.create_database_internet_gateway_route","count.index","count.index"]},"subnet_id":{"references":["aws_subnet.database","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_database_subnets","local.len_database_subnets"]}},{"address":"aws_route_table_association.elasticache","mode":"managed","type":"aws_route_table_association","name":"elasticache","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.elasticache","aws_route_table.private","var.single_nat_gateway","var.create_elasticache_subnet_route_table","count.index"]},"subnet_id":{"references":["aws_subnet.elasticache","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_elasticache_subnets","local.len_elasticache_subnets"]}},{"address":"aws_route_table_association.intra","mode":"managed","type":"aws_route_table_association","name":"intra","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.intra","var.create_multiple_intra_route_tables","count.index"]},"subnet_id":{"references":["aws_subnet.intra","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_intra_subnets","local.len_intra_subnets"]}},{"address":"aws_route_table_association.outpost","mode":"managed","type":"aws_route_table_association","name":"outpost","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.private","var.single_nat_gateway","count.index"]},"subnet_id":{"references":["aws_subnet.outpost","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_outpost_subnets","local.len_outpost_subnets"]}},{"address":"aws_route_table_association.private","mode":"managed","type":"aws_route_table_association","name":"private","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.private","var.single_nat_gateway","count.index"]},"subnet_id":{"references":["aws_subnet.private","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_private_subnets","local.len_private_subnets"]}},{"address":"aws_route_table_association.public","mode":"managed","type":"aws_route_table_association","name":"public","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.public","var.create_multiple_public_route_tables","count.index"]},"subnet_id":{"references":["aws_subnet.public","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_public_subnets","local.len_public_subnets"]}},{"address":"aws_route_table_association.redshift","mode":"managed","type":"aws_route_table_association","name":"redshift","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.redshift","aws_route_table.private","var.single_nat_gateway","var.create_redshift_subnet_route_table","count.index"]},"subnet_id":{"references":["aws_subnet.redshift","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_redshift_subnets","var.enable_public_redshift","local.len_redshift_subnets"]}},{"address":"aws_route_table_association.redshift_public","mode":"managed","type":"aws_route_table_association","name":"redshift_public","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.redshift","aws_route_table.public","var.single_nat_gateway","var.create_redshift_subnet_route_table","count.index"]},"subnet_id":{"references":["aws_subnet.redshift","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_redshift_subnets","var.enable_public_redshift","local.len_redshift_subnets"]}},{"address":"aws_subnet.database","mode":"managed","type":"aws_subnet","name":"database","provider_config_key":"aws","expressions":{"assign_ipv6_address_on_creation":{"references":["var.enable_ipv6","var.database_subnet_ipv6_native","var.database_subnet_assign_ipv6_address_on_creation"]},"availability_zone":{"references":["var.azs","count.index","var.azs","count.index"]},"availability_zone_id":{"references":["var.azs","count.index","var.azs","count.index"]},"cidr_block":{"references":["var.database_subnet_ipv6_native","var.database_subnets","count.index"]},"enable_dns64":{"references":["var.enable_ipv6","var.database_subnet_enable_dns64"]},"enable_resource_name_dns_a_record_on_launch":{"references":["var.database_subnet_ipv6_native","var.database_subnet_enable_resource_name_dns_a_record_on_launch"]},"enable_resource_name_dns_aaaa_record_on_launch":{"references":["var.enable_ipv6","var.database_subnet_enable_resource_name_dns_aaaa_record_on_launch"]},"ipv6_cidr_block":{"references":["var.enable_ipv6","var.database_subnet_ipv6_prefixes","aws_vpc.this[0].ipv6_cidr_block","aws_vpc.this[0]","aws_vpc.this","var.database_subnet_ipv6_prefixes","count.index"]},"ipv6_native":{"references":["var.enable_ipv6","var.database_subnet_ipv6_native"]},"private_dns_hostname_type_on_launch":{"references":["var.database_subnet_private_dns_hostname_type_on_launch"]},"tags":{"references":["var.database_subnet_names","count.index","var.name","var.database_subnet_suffix","var.azs","count.index","var.tags","var.database_subnet_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":1,"count_expression":{"references":["local.create_database_subnets","local.len_database_subnets"]}},{"address":"aws_subnet.elasticache","mode":"managed","type":"aws_subnet","name":"elasticache","provider_config_key":"aws","expressions":{"assign_ipv6_address_on_creation":{"references":["var.enable_ipv6","var.elasticache_subnet_ipv6_native","var.elasticache_subnet_assign_ipv6_address_on_creation"]},"availability_zone":{"references":["var.azs","count.index","var.azs","count.index"]},"availability_zone_id":{"references":["var.azs","count.index","var.azs","count.index"]},"cidr_block":{"references":["var.elasticache_subnet_ipv6_native","var.elasticache_subnets","count.index"]},"enable_dns64":{"references":["var.enable_ipv6","var.elasticache_subnet_enable_dns64"]},"enable_resource_name_dns_a_record_on_launch":{"references":["var.elasticache_subnet_ipv6_native","var.elasticache_subnet_enable_resource_name_dns_a_record_on_launch"]},"enable_resource_name_dns_aaaa_record_on_launch":{"references":["var.enable_ipv6","var.elasticache_subnet_enable_resource_name_dns_aaaa_record_on_launch"]},"ipv6_cidr_block":{"references":["var.enable_ipv6","var.elasticache_subnet_ipv6_prefixes","aws_vpc.this[0].ipv6_cidr_block","aws_vpc.this[0]","aws_vpc.this","var.elasticache_subnet_ipv6_prefixes","count.index"]},"ipv6_native":{"references":["var.enable_ipv6","var.elasticache_subnet_ipv6_native"]},"private_dns_hostname_type_on_launch":{"references":["var.elasticache_subnet_private_dns_hostname_type_on_launch"]},"tags":{"references":["var.elasticache_subnet_names","count.index","var.name","var.elasticache_subnet_suffix","var.azs","count.index","var.tags","var.elasticache_subnet_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":1,"count_expression":{"references":["local.create_elasticache_subnets","local.len_elasticache_subnets"]}},{"address":"aws_subnet.intra","mode":"managed","type":"aws_subnet","name":"intra","provider_config_key":"aws","expressions":{"assign_ipv6_address_on_creation":{"references":["var.enable_ipv6","var.intra_subnet_ipv6_native","var.intra_subnet_assign_ipv6_address_on_creation"]},"availability_zone":{"references":["var.azs","count.index","var.azs","count.index"]},"availability_zone_id":{"references":["var.azs","count.index","var.azs","count.index"]},"cidr_block":{"references":["var.intra_subnet_ipv6_native","var.intra_subnets","count.index"]},"enable_dns64":{"references":["var.enable_ipv6","var.intra_subnet_enable_dns64"]},"enable_resource_name_dns_a_record_on_launch":{"references":["var.intra_subnet_ipv6_native","var.intra_subnet_enable_resource_name_dns_a_record_on_launch"]},"enable_resource_name_dns_aaaa_record_on_launch":{"references":["var.enable_ipv6","var.intra_subnet_enable_resource_name_dns_aaaa_record_on_launch"]},"ipv6_cidr_block":{"references":["var.enable_ipv6","var.intra_subnet_ipv6_prefixes","aws_vpc.this[0].ipv6_cidr_block","aws_vpc.this[0]","aws_vpc.this","var.intra_subnet_ipv6_prefixes","count.index"]},"ipv6_native":{"references":["var.enable_ipv6","var.intra_subnet_ipv6_native"]},"private_dns_hostname_type_on_launch":{"references":["var.intra_subnet_private_dns_hostname_type_on_launch"]},"tags":{"references":["var.intra_subnet_names","count.index","var.name","var.intra_subnet_suffix","var.azs","count.index","var.tags","var.intra_subnet_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":1,"count_expression":{"references":["local.create_intra_subnets","local.len_intra_subnets"]}},{"address":"aws_subnet.outpost","mode":"managed","type":"aws_subnet","name":"outpost","provider_config_key":"aws","expressions":{"assign_ipv6_address_on_creation":{"references":["var.enable_ipv6","var.outpost_subnet_ipv6_native","var.outpost_subnet_assign_ipv6_address_on_creation"]},"availability_zone":{"references":["var.outpost_az"]},"cidr_block":{"references":["var.outpost_subnet_ipv6_native","var.outpost_subnets","count.index"]},"customer_owned_ipv4_pool":{"references":["var.customer_owned_ipv4_pool"]},"enable_dns64":{"references":["var.enable_ipv6","var.outpost_subnet_enable_dns64"]},"enable_resource_name_dns_a_record_on_launch":{"references":["var.outpost_subnet_ipv6_native","var.outpost_subnet_enable_resource_name_dns_a_record_on_launch"]},"enable_resource_name_dns_aaaa_record_on_launch":{"references":["var.enable_ipv6","var.outpost_subnet_enable_resource_name_dns_aaaa_record_on_launch"]},"ipv6_cidr_block":{"references":["var.enable_ipv6","var.outpost_subnet_ipv6_prefixes","aws_vpc.this[0].ipv6_cidr_block","aws_vpc.this[0]","aws_vpc.this","var.outpost_subnet_ipv6_prefixes","count.index"]},"ipv6_native":{"references":["var.enable_ipv6","var.outpost_subnet_ipv6_native"]},"map_customer_owned_ip_on_launch":{"references":["var.map_customer_owned_ip_on_launch"]},"outpost_arn":{"references":["var.outpost_arn"]},"private_dns_hostname_type_on_launch":{"references":["var.outpost_subnet_private_dns_hostname_type_on_launch"]},"tags":{"references":["var.outpost_subnet_names","count.index","var.name","var.outpost_subnet_suffix","var.outpost_az","var.tags","var.outpost_subnet_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":1,"count_expression":{"references":["local.create_outpost_subnets","local.len_outpost_subnets"]}},{"address":"aws_subnet.private","mode":"managed","type":"aws_subnet","name":"private","provider_config_key":"aws","expressions":{"assign_ipv6_address_on_creation":{"references":["var.enable_ipv6","var.private_subnet_ipv6_native","var.private_subnet_assign_ipv6_address_on_creation"]},"availability_zone":{"references":["var.azs","count.index","var.azs","count.index"]},"availability_zone_id":{"references":["var.azs","count.index","var.azs","count.index"]},"cidr_block":{"references":["var.private_subnet_ipv6_native","var.private_subnets","count.index"]},"enable_dns64":{"references":["var.enable_ipv6","var.private_subnet_enable_dns64"]},"enable_resource_name_dns_a_record_on_launch":{"references":["var.private_subnet_ipv6_native","var.private_subnet_enable_resource_name_dns_a_record_on_launch"]},"enable_resource_name_dns_aaaa_record_on_launch":{"references":["var.enable_ipv6","var.private_subnet_enable_resource_name_dns_aaaa_record_on_launch"]},"ipv6_cidr_block":{"references":["var.enable_ipv6","var.private_subnet_ipv6_prefixes","aws_vpc.this[0].ipv6_cidr_block","aws_vpc.this[0]","aws_vpc.this","var.private_subnet_ipv6_prefixes","count.index"]},"ipv6_native":{"references":["var.enable_ipv6","var.private_subnet_ipv6_native"]},"private_dns_hostname_type_on_launch":{"references":["var.private_subnet_private_dns_hostname_type_on_launch"]},"tags":{"references":["var.private_subnet_names","count.index","var.name","var.private_subnet_suffix","var.azs","count.index","var.tags","var.private_subnet_tags","var.private_subnet_tags_per_az","var.azs","count.index"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":1,"count_expression":{"references":["local.create_private_subnets","local.len_private_subnets"]}},{"address":"aws_subnet.public","mode":"managed","type":"aws_subnet","name":"public","provider_config_key":"aws","expressions":{"assign_ipv6_address_on_creation":{"references":["var.enable_ipv6","var.public_subnet_ipv6_native","var.public_subnet_assign_ipv6_address_on_creation"]},"availability_zone":{"references":["var.azs","count.index","var.azs","count.index"]},"availability_zone_id":{"references":["var.azs","count.index","var.azs","count.index"]},"cidr_block":{"references":["var.public_subnet_ipv6_native","var.public_subnets","count.index"]},"enable_dns64":{"references":["var.enable_ipv6","var.public_subnet_enable_dns64"]},"enable_resource_name_dns_a_record_on_launch":{"references":["var.public_subnet_ipv6_native","var.public_subnet_enable_resource_name_dns_a_record_on_launch"]},"enable_resource_name_dns_aaaa_record_on_launch":{"references":["var.enable_ipv6","var.public_subnet_enable_resource_name_dns_aaaa_record_on_launch"]},"ipv6_cidr_block":{"references":["var.enable_ipv6","var.public_subnet_ipv6_prefixes","aws_vpc.this[0].ipv6_cidr_block","aws_vpc.this[0]","aws_vpc.this","var.public_subnet_ipv6_prefixes","count.index"]},"ipv6_native":{"references":["var.enable_ipv6","var.public_subnet_ipv6_native"]},"map_public_ip_on_launch":{"references":["var.map_public_ip_on_launch"]},"private_dns_hostname_type_on_launch":{"references":["var.public_subnet_private_dns_hostname_type_on_launch"]},"tags":{"references":["var.public_subnet_names","count.index","var.name","var.public_subnet_suffix","var.azs","count.index","var.tags","var.public_subnet_tags","var.public_subnet_tags_per_az","var.azs","count.index"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":1,"count_expression":{"references":["local.create_public_subnets","var.one_nat_gateway_per_az","local.len_public_subnets","var.azs","local.len_public_subnets"]}},{"address":"aws_subnet.redshift","mode":"managed","type":"aws_subnet","name":"redshift","provider_config_key":"aws","expressions":{"assign_ipv6_address_on_creation":{"references":["var.enable_ipv6","var.redshift_subnet_ipv6_native","var.redshift_subnet_assign_ipv6_address_on_creation"]},"availability_zone":{"references":["var.azs","count.index","var.azs","count.index"]},"availability_zone_id":{"references":["var.azs","count.index","var.azs","count.index"]},"cidr_block":{"references":["var.redshift_subnet_ipv6_native","var.redshift_subnets","count.index"]},"enable_dns64":{"references":["var.enable_ipv6","var.redshift_subnet_enable_dns64"]},"enable_resource_name_dns_a_record_on_launch":{"references":["var.redshift_subnet_ipv6_native","var.redshift_subnet_enable_resource_name_dns_a_record_on_launch"]},"enable_resource_name_dns_aaaa_record_on_launch":{"references":["var.enable_ipv6","var.redshift_subnet_enable_resource_name_dns_aaaa_record_on_launch"]},"ipv6_cidr_block":{"references":["var.enable_ipv6","var.redshift_subnet_ipv6_prefixes","aws_vpc.this[0].ipv6_cidr_block","aws_vpc.this[0]","aws_vpc.this","var.redshift_subnet_ipv6_prefixes","count.index"]},"ipv6_native":{"references":["var.enable_ipv6","var.redshift_subnet_ipv6_native"]},"private_dns_hostname_type_on_launch":{"references":["var.redshift_subnet_private_dns_hostname_type_on_launch"]},"tags":{"references":["var.redshift_subnet_names","count.index","var.name","var.redshift_subnet_suffix","var.azs","count.index","var.tags","var.redshift_subnet_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":1,"count_expression":{"references":["local.create_redshift_subnets","local.len_redshift_subnets"]}},{"address":"aws_vpc.this","mode":"managed","type":"aws_vpc","name":"this","provider_config_key":"aws","expressions":{"assign_generated_ipv6_cidr_block":{"references":["var.enable_ipv6","var.use_ipam_pool"]},"cidr_block":{"references":["var.use_ipam_pool","var.cidr"]},"enable_dns_hostnames":{"references":["var.enable_dns_hostnames"]},"enable_dns_support":{"references":["var.enable_dns_support"]},"enable_network_address_usage_metrics":{"references":["var.enable_network_address_usage_metrics"]},"instance_tenancy":{"references":["var.instance_tenancy"]},"ipv4_ipam_pool_id":{"references":["var.ipv4_ipam_pool_id"]},"ipv4_netmask_length":{"references":["var.ipv4_netmask_length"]},"ipv6_cidr_block":{"references":["var.ipv6_cidr"]},"ipv6_cidr_block_network_border_group":{"references":["var.ipv6_cidr_block_network_border_group"]},"ipv6_ipam_pool_id":{"references":["var.ipv6_ipam_pool_id"]},"ipv6_netmask_length":{"references":["var.ipv6_netmask_length"]},"tags":{"references":["var.name","var.tags","var.vpc_tags"]}},"schema_version":1,"count_expression":{"references":["local.create_vpc"]}},{"address":"aws_vpc_block_public_access_exclusion.this","mode":"managed","type":"aws_vpc_block_public_access_exclusion","name":"this","provider_config_key":"aws","expressions":{"internet_gateway_exclusion_mode":{"references":["each.value.internet_gateway_exclusion_mode","each.value"]},"subnet_id":{"references":["each.value.exclude_subnet","each.value","aws_subnet.private","aws_subnet.public","aws_subnet.database","aws_subnet.redshift","aws_subnet.elasticache","aws_subnet.intra","aws_subnet.outpost","each.value.subnet_type","each.value","each.value.subnet_index","each.value"]},"tags":{"references":["var.tags","each.value.tags","each.value"]},"vpc_id":{"references":["each.value.exclude_vpc","each.value","local.vpc_id"]}},"schema_version":0,"for_each_expression":{"references":["var.vpc_block_public_access_exclusions","local.create_vpc"]}},{"address":"aws_vpc_block_public_access_options.this","mode":"managed","type":"aws_vpc_block_public_access_options","name":"this","provider_config_key":"aws","expressions":{"internet_gateway_block_mode":{"references":["var.vpc_block_public_access_options[\"internet_gateway_block_mode\"]","var.vpc_block_public_access_options"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.vpc_block_public_access_options"]}},{"address":"aws_vpc_dhcp_options.this","mode":"managed","type":"aws_vpc_dhcp_options","name":"this","provider_config_key":"aws","expressions":{"domain_name":{"references":["var.dhcp_options_domain_name"]},"domain_name_servers":{"references":["var.dhcp_options_domain_name_servers"]},"ipv6_address_preferred_lease_time":{"references":["var.dhcp_options_ipv6_address_preferred_lease_time"]},"netbios_name_servers":{"references":["var.dhcp_options_netbios_name_servers"]},"netbios_node_type":{"references":["var.dhcp_options_netbios_node_type"]},"ntp_servers":{"references":["var.dhcp_options_ntp_servers"]},"tags":{"references":["var.name","var.tags","var.dhcp_options_tags"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.enable_dhcp_options"]}},{"address":"aws_vpc_dhcp_options_association.this","mode":"managed","type":"aws_vpc_dhcp_options_association","name":"this","provider_config_key":"aws","expressions":{"dhcp_options_id":{"references":["aws_vpc_dhcp_options.this[0].id","aws_vpc_dhcp_options.this[0]","aws_vpc_dhcp_options.this"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.enable_dhcp_options"]}},{"address":"aws_vpc_ipv4_cidr_block_association.this","mode":"managed","type":"aws_vpc_ipv4_cidr_block_association","name":"this","provider_config_key":"aws","expressions":{"cidr_block":{"references":["var.secondary_cidr_blocks","count.index"]},"vpc_id":{"references":["aws_vpc.this[0].id","aws_vpc.this[0]","aws_vpc.this"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.secondary_cidr_blocks","var.secondary_cidr_blocks"]}},{"address":"aws_vpn_gateway.this","mode":"managed","type":"aws_vpn_gateway","name":"this","provider_config_key":"aws","expressions":{"amazon_side_asn":{"references":["var.amazon_side_asn"]},"availability_zone":{"references":["var.vpn_gateway_az"]},"tags":{"references":["var.name","var.tags","var.vpn_gateway_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.enable_vpn_gateway"]}},{"address":"aws_vpn_gateway_attachment.this","mode":"managed","type":"aws_vpn_gateway_attachment","name":"this","provider_config_key":"aws","expressions":{"vpc_id":{"references":["local.vpc_id"]},"vpn_gateway_id":{"references":["var.vpn_gateway_id"]}},"schema_version":0,"count_expression":{"references":["var.vpn_gateway_id"]}},{"address":"aws_vpn_gateway_route_propagation.intra","mode":"managed","type":"aws_vpn_gateway_route_propagation","name":"intra","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.intra","count.index"]},"vpn_gateway_id":{"references":["aws_vpn_gateway.this","aws_vpn_gateway_attachment.this","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.propagate_intra_route_tables_vgw","var.enable_vpn_gateway","var.vpn_gateway_id","local.len_intra_subnets"]}},{"address":"aws_vpn_gateway_route_propagation.private","mode":"managed","type":"aws_vpn_gateway_route_propagation","name":"private","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.private","count.index"]},"vpn_gateway_id":{"references":["aws_vpn_gateway.this","aws_vpn_gateway_attachment.this","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.propagate_private_route_tables_vgw","var.enable_vpn_gateway","var.vpn_gateway_id","local.len_private_subnets"]}},{"address":"aws_vpn_gateway_route_propagation.public","mode":"managed","type":"aws_vpn_gateway_route_propagation","name":"public","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.public","count.index"]},"vpn_gateway_id":{"references":["aws_vpn_gateway.this","aws_vpn_gateway_attachment.this","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.propagate_public_route_tables_vgw","var.enable_vpn_gateway","var.vpn_gateway_id"]}},{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_config_key":"aws","schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_flow_log"]}},{"address":"data.aws_iam_policy_document.flow_log_cloudwatch_assume_role","mode":"data","type":"aws_iam_policy_document","name":"flow_log_cloudwatch_assume_role","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"constant_value":["vpc-flow-logs.amazonaws.com"]},"type":{"constant_value":"Service"}}],"sid":{"constant_value":"AWSVPCFlowLogsAssumeRole"}}]},"schema_version":0,"count_expression":{"references":["local.create_flow_log_cloudwatch_iam_role"]}},{"address":"data.aws_iam_policy_document.vpc_flow_log_cloudwatch","mode":"data","type":"aws_iam_policy_document","name":"vpc_flow_log_cloudwatch","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["logs:CreateLogStream","logs:PutLogEvents","logs:DescribeLogGroups","logs:DescribeLogStreams"]},"effect":{"constant_value":"Allow"},"resources":{"references":["local.flow_log_group_arns"]},"sid":{"constant_value":"AWSVPCFlowLogsPushToCloudWatch"}}]},"schema_version":0,"count_expression":{"references":["local.create_flow_log_cloudwatch_iam_role"]}},{"address":"data.aws_partition.current","mode":"data","type":"aws_partition","name":"current","provider_config_key":"aws","schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_flow_log"]}},{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_config_key":"aws","schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_flow_log"]}}],"variables":{"amazon_side_asn":{"default":"64512","description":"The Autonomous System Number (ASN) for the Amazon side of the gateway. By default the virtual private gateway is created with the current default Amazon ASN"},"azs":{"default":[],"description":"A list of availability zones names or ids in the region"},"cidr":{"default":"10.0.0.0/16","description":"(Optional) The IPv4 CIDR block for the VPC. CIDR can be explicitly set or it can be derived from IPAM using `ipv4_netmask_length` \u0026 `ipv4_ipam_pool_id`"},"create_database_internet_gateway_route":{"default":false,"description":"Controls if an internet gateway route for public database access should be created"},"create_database_nat_gateway_route":{"default":false,"description":"Controls if a nat gateway route should be created to give internet access to the database subnets"},"create_database_subnet_group":{"default":true,"description":"Controls if database subnet group should be created (n.b. database_subnets must also be set)"},"create_database_subnet_route_table":{"default":false,"description":"Controls if separate route table for database should be created"},"create_egress_only_igw":{"default":true,"description":"Controls if an Egress Only Internet Gateway is created and its related routes"},"create_elasticache_subnet_group":{"default":true,"description":"Controls if elasticache subnet group should be created"},"create_elasticache_subnet_route_table":{"default":false,"description":"Controls if separate route table for elasticache should be created"},"create_flow_log_cloudwatch_iam_role":{"default":false,"description":"Whether to create IAM role for VPC Flow Logs"},"create_flow_log_cloudwatch_log_group":{"default":false,"description":"Whether to create CloudWatch log group for VPC Flow Logs"},"create_igw":{"default":true,"description":"Controls if an Internet Gateway is created for public subnets and the related routes that connect them"},"create_multiple_intra_route_tables":{"default":false,"description":"Indicates whether to create a separate route table for each intra subnet. Default: `false`"},"create_multiple_public_route_tables":{"default":false,"description":"Indicates whether to create a separate route table for each public subnet. Default: `false`"},"create_private_nat_gateway_route":{"default":true,"description":"Controls if a nat gateway route should be created to give internet access to the private subnets"},"create_redshift_subnet_group":{"default":true,"description":"Controls if redshift subnet group should be created"},"create_redshift_subnet_route_table":{"default":false,"description":"Controls if separate route table for redshift should be created"},"create_vpc":{"default":true,"description":"Controls if VPC should be created (it affects almost all resources)"},"customer_gateway_tags":{"default":{},"description":"Additional tags for the Customer Gateway"},"customer_gateways":{"default":{},"description":"Maps of Customer Gateway's attributes (BGP ASN and Gateway's Internet-routable external IP address)"},"customer_owned_ipv4_pool":{"default":null,"description":"The customer owned IPv4 address pool. Typically used with the `map_customer_owned_ip_on_launch` argument. The `outpost_arn` argument must be specified when configured"},"database_acl_tags":{"default":{},"description":"Additional tags for the database subnets network ACL"},"database_dedicated_network_acl":{"default":false,"description":"Whether to use dedicated network ACL (not default) and custom rules for database subnets"},"database_inbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Database subnets inbound network ACL rules"},"database_outbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Database subnets outbound network ACL rules"},"database_route_table_tags":{"default":{},"description":"Additional tags for the database route tables"},"database_subnet_assign_ipv6_address_on_creation":{"default":false,"description":"Specify true to indicate that network interfaces created in the specified subnet should be assigned an IPv6 address. Default is `false`"},"database_subnet_enable_dns64":{"default":true,"description":"Indicates whether DNS queries made to the Amazon-provided DNS Resolver in this subnet should return synthetic IPv6 addresses for IPv4-only destinations. Default: `true`"},"database_subnet_enable_resource_name_dns_a_record_on_launch":{"default":false,"description":"Indicates whether to respond to DNS queries for instance hostnames with DNS A records. Default: `false`"},"database_subnet_enable_resource_name_dns_aaaa_record_on_launch":{"default":true,"description":"Indicates whether to respond to DNS queries for instance hostnames with DNS AAAA records. Default: `true`"},"database_subnet_group_name":{"default":null,"description":"Name of database subnet group"},"database_subnet_group_tags":{"default":{},"description":"Additional tags for the database subnet group"},"database_subnet_ipv6_native":{"default":false,"description":"Indicates whether to create an IPv6-only subnet. Default: `false`"},"database_subnet_ipv6_prefixes":{"default":[],"description":"Assigns IPv6 database subnet id based on the Amazon provided /56 prefix base 10 integer (0-256). Must be of equal length to the corresponding IPv4 subnet list"},"database_subnet_names":{"default":[],"description":"Explicit values to use in the Name tag on database subnets. If empty, Name tags are generated"},"database_subnet_private_dns_hostname_type_on_launch":{"default":null,"description":"The type of hostnames to assign to instances in the subnet at launch. For IPv6-only subnets, an instance DNS name must be based on the instance ID. For dual-stack and IPv4-only subnets, you can specify whether DNS names use the instance IPv4 address or the instance ID. Valid values: `ip-name`, `resource-name`"},"database_subnet_suffix":{"default":"db","description":"Suffix to append to database subnets name"},"database_subnet_tags":{"default":{},"description":"Additional tags for the database subnets"},"database_subnets":{"default":[],"description":"A list of database subnets inside the VPC"},"default_network_acl_egress":{"default":[{"action":"allow","cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_no":"100","to_port":"0"},{"action":"allow","from_port":"0","ipv6_cidr_block":"::/0","protocol":"-1","rule_no":"101","to_port":"0"}],"description":"List of maps of egress rules to set on the Default Network ACL"},"default_network_acl_ingress":{"default":[{"action":"allow","cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_no":"100","to_port":"0"},{"action":"allow","from_port":"0","ipv6_cidr_block":"::/0","protocol":"-1","rule_no":"101","to_port":"0"}],"description":"List of maps of ingress rules to set on the Default Network ACL"},"default_network_acl_name":{"default":null,"description":"Name to be used on the Default Network ACL"},"default_network_acl_tags":{"default":{},"description":"Additional tags for the Default Network ACL"},"default_route_table_name":{"default":null,"description":"Name to be used on the default route table"},"default_route_table_propagating_vgws":{"default":[],"description":"List of virtual gateways for propagation"},"default_route_table_routes":{"default":[],"description":"Configuration block of routes. See https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/default_route_table#route"},"default_route_table_tags":{"default":{},"description":"Additional tags for the default route table"},"default_security_group_egress":{"default":[],"description":"List of maps of egress rules to set on the default security group"},"default_security_group_ingress":{"default":[],"description":"List of maps of ingress rules to set on the default security group"},"default_security_group_name":{"default":null,"description":"Name to be used on the default security group"},"default_security_group_tags":{"default":{},"description":"Additional tags for the default security group"},"default_vpc_enable_dns_hostnames":{"default":true,"description":"Should be true to enable DNS hostnames in the Default VPC"},"default_vpc_enable_dns_support":{"default":true,"description":"Should be true to enable DNS support in the Default VPC"},"default_vpc_name":{"default":null,"description":"Name to be used on the Default VPC"},"default_vpc_tags":{"default":{},"description":"Additional tags for the Default VPC"},"dhcp_options_domain_name":{"default":"","description":"Specifies DNS name for DHCP options set (requires enable_dhcp_options set to true)"},"dhcp_options_domain_name_servers":{"default":["AmazonProvidedDNS"],"description":"Specify a list of DNS server addresses for DHCP options set, default to AWS provided (requires enable_dhcp_options set to true)"},"dhcp_options_ipv6_address_preferred_lease_time":{"default":null,"description":"How frequently, in seconds, a running instance with an IPv6 assigned to it goes through DHCPv6 lease renewal (requires enable_dhcp_options set to true)"},"dhcp_options_netbios_name_servers":{"default":[],"description":"Specify a list of netbios servers for DHCP options set (requires enable_dhcp_options set to true)"},"dhcp_options_netbios_node_type":{"default":"","description":"Specify netbios node_type for DHCP options set (requires enable_dhcp_options set to true)"},"dhcp_options_ntp_servers":{"default":[],"description":"Specify a list of NTP servers for DHCP options set (requires enable_dhcp_options set to true)"},"dhcp_options_tags":{"default":{},"description":"Additional tags for the DHCP option set (requires enable_dhcp_options set to true)"},"elasticache_acl_tags":{"default":{},"description":"Additional tags for the elasticache subnets network ACL"},"elasticache_dedicated_network_acl":{"default":false,"description":"Whether to use dedicated network ACL (not default) and custom rules for elasticache subnets"},"elasticache_inbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Elasticache subnets inbound network ACL rules"},"elasticache_outbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Elasticache subnets outbound network ACL rules"},"elasticache_route_table_tags":{"default":{},"description":"Additional tags for the elasticache route tables"},"elasticache_subnet_assign_ipv6_address_on_creation":{"default":false,"description":"Specify true to indicate that network interfaces created in the specified subnet should be assigned an IPv6 address. Default is `false`"},"elasticache_subnet_enable_dns64":{"default":true,"description":"Indicates whether DNS queries made to the Amazon-provided DNS Resolver in this subnet should return synthetic IPv6 addresses for IPv4-only destinations. Default: `true`"},"elasticache_subnet_enable_resource_name_dns_a_record_on_launch":{"default":false,"description":"Indicates whether to respond to DNS queries for instance hostnames with DNS A records. Default: `false`"},"elasticache_subnet_enable_resource_name_dns_aaaa_record_on_launch":{"default":true,"description":"Indicates whether to respond to DNS queries for instance hostnames with DNS AAAA records. Default: `true`"},"elasticache_subnet_group_name":{"default":null,"description":"Name of elasticache subnet group"},"elasticache_subnet_group_tags":{"default":{},"description":"Additional tags for the elasticache subnet group"},"elasticache_subnet_ipv6_native":{"default":false,"description":"Indicates whether to create an IPv6-only subnet. Default: `false`"},"elasticache_subnet_ipv6_prefixes":{"default":[],"description":"Assigns IPv6 elasticache subnet id based on the Amazon provided /56 prefix base 10 integer (0-256). Must be of equal length to the corresponding IPv4 subnet list"},"elasticache_subnet_names":{"default":[],"description":"Explicit values to use in the Name tag on elasticache subnets. If empty, Name tags are generated"},"elasticache_subnet_private_dns_hostname_type_on_launch":{"default":null,"description":"The type of hostnames to assign to instances in the subnet at launch. For IPv6-only subnets, an instance DNS name must be based on the instance ID. For dual-stack and IPv4-only subnets, you can specify whether DNS names use the instance IPv4 address or the instance ID. Valid values: `ip-name`, `resource-name`"},"elasticache_subnet_suffix":{"default":"elasticache","description":"Suffix to append to elasticache subnets name"},"elasticache_subnet_tags":{"default":{},"description":"Additional tags for the elasticache subnets"},"elasticache_subnets":{"default":[],"description":"A list of elasticache subnets inside the VPC"},"enable_dhcp_options":{"default":false,"description":"Should be true if you want to specify a DHCP options set with a custom domain name, DNS servers, NTP servers, netbios servers, and/or netbios server type"},"enable_dns_hostnames":{"default":true,"description":"Should be true to enable DNS hostnames in the VPC"},"enable_dns_support":{"default":true,"description":"Should be true to enable DNS support in the VPC"},"enable_flow_log":{"default":false,"description":"Whether or not to enable VPC Flow Logs"},"enable_ipv6":{"default":false,"description":"Requests an Amazon-provided IPv6 CIDR block with a /56 prefix length for the VPC. You cannot specify the range of IP addresses, or the size of the CIDR block"},"enable_nat_gateway":{"default":false,"description":"Should be true if you want to provision NAT Gateways for each of your private networks"},"enable_network_address_usage_metrics":{"default":null,"description":"Determines whether network address usage metrics are enabled for the VPC"},"enable_public_redshift":{"default":false,"description":"Controls if redshift should have public routing table"},"enable_vpn_gateway":{"default":false,"description":"Should be true if you want to create a new VPN Gateway resource and attach it to the VPC"},"external_nat_ip_ids":{"default":[],"description":"List of EIP IDs to be assigned to the NAT Gateways (used in combination with reuse_nat_ips)"},"external_nat_ips":{"default":[],"description":"List of EIPs to be used for `nat_public_ips` output (used in combination with reuse_nat_ips and external_nat_ip_ids)"},"flow_log_cloudwatch_iam_role_arn":{"default":"","description":"The ARN for the IAM role that's used to post flow logs to a CloudWatch Logs log group. When flow_log_destination_arn is set to ARN of Cloudwatch Logs, this argument needs to be provided"},"flow_log_cloudwatch_iam_role_conditions":{"default":[],"description":"Additional conditions of the CloudWatch role assumption policy"},"flow_log_cloudwatch_log_group_class":{"default":null,"description":"Specified the log class of the log group. Possible values are: STANDARD or INFREQUENT_ACCESS"},"flow_log_cloudwatch_log_group_kms_key_id":{"default":null,"description":"The ARN of the KMS Key to use when encrypting log data for VPC flow logs"},"flow_log_cloudwatch_log_group_name_prefix":{"default":"/aws/vpc-flow-log/","description":"Specifies the name prefix of CloudWatch Log Group for VPC flow logs"},"flow_log_cloudwatch_log_group_name_suffix":{"default":"","description":"Specifies the name suffix of CloudWatch Log Group for VPC flow logs"},"flow_log_cloudwatch_log_group_retention_in_days":{"default":null,"description":"Specifies the number of days you want to retain log events in the specified log group for VPC flow logs"},"flow_log_cloudwatch_log_group_skip_destroy":{"default":false,"description":" Set to true if you do not wish the log group (and any logs it may contain) to be deleted at destroy time, and instead just remove the log group from the Terraform state"},"flow_log_deliver_cross_account_role":{"default":null,"description":"(Optional) ARN of the IAM role that allows Amazon EC2 to publish flow logs across accounts."},"flow_log_destination_arn":{"default":"","description":"The ARN of the CloudWatch log group or S3 bucket where VPC Flow Logs will be pushed. If this ARN is a S3 bucket the appropriate permissions need to be set on that bucket's policy. When create_flow_log_cloudwatch_log_group is set to false this argument must be provided"},"flow_log_destination_type":{"default":"cloud-watch-logs","description":"Type of flow log destination. Can be s3, kinesis-data-firehose or cloud-watch-logs"},"flow_log_file_format":{"default":null,"description":"(Optional) The format for the flow log. Valid values: `plain-text`, `parquet`"},"flow_log_hive_compatible_partitions":{"default":false,"description":"(Optional) Indicates whether to use Hive-compatible prefixes for flow logs stored in Amazon S3"},"flow_log_log_format":{"default":null,"description":"The fields to include in the flow log record, in the order in which they should appear"},"flow_log_max_aggregation_interval":{"default":600,"description":"The maximum interval of time during which a flow of packets is captured and aggregated into a flow log record. Valid Values: `60` seconds or `600` seconds"},"flow_log_per_hour_partition":{"default":false,"description":"(Optional) Indicates whether to partition the flow log per hour. This reduces the cost and response time for queries"},"flow_log_traffic_type":{"default":"ALL","description":"The type of traffic to capture. Valid values: ACCEPT, REJECT, ALL"},"igw_tags":{"default":{},"description":"Additional tags for the internet gateway"},"instance_tenancy":{"default":"default","description":"A tenancy option for instances launched into the VPC"},"intra_acl_tags":{"default":{},"description":"Additional tags for the intra subnets network ACL"},"intra_dedicated_network_acl":{"default":false,"description":"Whether to use dedicated network ACL (not default) and custom rules for intra subnets"},"intra_inbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Intra subnets inbound network ACLs"},"intra_outbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Intra subnets outbound network ACLs"},"intra_route_table_tags":{"default":{},"description":"Additional tags for the intra route tables"},"intra_subnet_assign_ipv6_address_on_creation":{"default":false,"description":"Specify true to indicate that network interfaces created in the specified subnet should be assigned an IPv6 address. Default is `false`"},"intra_subnet_enable_dns64":{"default":true,"description":"Indicates whether DNS queries made to the Amazon-provided DNS Resolver in this subnet should return synthetic IPv6 addresses for IPv4-only destinations. Default: `true`"},"intra_subnet_enable_resource_name_dns_a_record_on_launch":{"default":false,"description":"Indicates whether to respond to DNS queries for instance hostnames with DNS A records. Default: `false`"},"intra_subnet_enable_resource_name_dns_aaaa_record_on_launch":{"default":true,"description":"Indicates whether to respond to DNS queries for instance hostnames with DNS AAAA records. Default: `true`"},"intra_subnet_ipv6_native":{"default":false,"description":"Indicates whether to create an IPv6-only subnet. Default: `false`"},"intra_subnet_ipv6_prefixes":{"default":[],"description":"Assigns IPv6 intra subnet id based on the Amazon provided /56 prefix base 10 integer (0-256). Must be of equal length to the corresponding IPv4 subnet list"},"intra_subnet_names":{"default":[],"description":"Explicit values to use in the Name tag on intra subnets. If empty, Name tags are generated"},"intra_subnet_private_dns_hostname_type_on_launch":{"default":null,"description":"The type of hostnames to assign to instances in the subnet at launch. For IPv6-only subnets, an instance DNS name must be based on the instance ID. For dual-stack and IPv4-only subnets, you can specify whether DNS names use the instance IPv4 address or the instance ID. Valid values: `ip-name`, `resource-name`"},"intra_subnet_suffix":{"default":"intra","description":"Suffix to append to intra subnets name"},"intra_subnet_tags":{"default":{},"description":"Additional tags for the intra subnets"},"intra_subnets":{"default":[],"description":"A list of intra subnets inside the VPC"},"ipv4_ipam_pool_id":{"default":null,"description":"(Optional) The ID of an IPv4 IPAM pool you want to use for allocating this VPC's CIDR"},"ipv4_netmask_length":{"default":null,"description":"(Optional) The netmask length of the IPv4 CIDR you want to allocate to this VPC. Requires specifying a ipv4_ipam_pool_id"},"ipv6_cidr":{"default":null,"description":"(Optional) IPv6 CIDR block to request from an IPAM Pool. Can be set explicitly or derived from IPAM using `ipv6_netmask_length`"},"ipv6_cidr_block_network_border_group":{"default":null,"description":"By default when an IPv6 CIDR is assigned to a VPC a default ipv6_cidr_block_network_border_group will be set to the region of the VPC. This can be changed to restrict advertisement of public addresses to specific Network Border Groups such as LocalZones"},"ipv6_ipam_pool_id":{"default":null,"description":"(Optional) IPAM Pool ID for a IPv6 pool. Conflicts with `assign_generated_ipv6_cidr_block`"},"ipv6_netmask_length":{"default":null,"description":"(Optional) Netmask length to request from IPAM Pool. Conflicts with `ipv6_cidr_block`. This can be omitted if IPAM pool as a `allocation_default_netmask_length` set. Valid values: `56`"},"manage_default_network_acl":{"default":true,"description":"Should be true to adopt and manage Default Network ACL"},"manage_default_route_table":{"default":true,"description":"Should be true to manage default route table"},"manage_default_security_group":{"default":true,"description":"Should be true to adopt and manage default security group"},"manage_default_vpc":{"default":false,"description":"Should be true to adopt and manage Default VPC"},"map_customer_owned_ip_on_launch":{"default":false,"description":"Specify true to indicate that network interfaces created in the subnet should be assigned a customer owned IP address. The `customer_owned_ipv4_pool` and `outpost_arn` arguments must be specified when set to `true`. Default is `false`"},"map_public_ip_on_launch":{"default":false,"description":"Specify true to indicate that instances launched into the subnet should be assigned a public IP address. Default is `false`"},"name":{"default":"","description":"Name to be used on all the resources as identifier"},"nat_eip_tags":{"default":{},"description":"Additional tags for the NAT EIP"},"nat_gateway_destination_cidr_block":{"default":"0.0.0.0/0","description":"Used to pass a custom destination route for private NAT Gateway. If not specified, the default 0.0.0.0/0 is used as a destination route"},"nat_gateway_tags":{"default":{},"description":"Additional tags for the NAT gateways"},"one_nat_gateway_per_az":{"default":false,"description":"Should be true if you want only one NAT Gateway per availability zone. Requires `var.azs` to be set, and the number of `public_subnets` created to be greater than or equal to the number of availability zones specified in `var.azs`"},"outpost_acl_tags":{"default":{},"description":"Additional tags for the outpost subnets network ACL"},"outpost_arn":{"default":null,"description":"ARN of Outpost you want to create a subnet in"},"outpost_az":{"default":null,"description":"AZ where Outpost is anchored"},"outpost_dedicated_network_acl":{"default":false,"description":"Whether to use dedicated network ACL (not default) and custom rules for outpost subnets"},"outpost_inbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Outpost subnets inbound network ACLs"},"outpost_outbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Outpost subnets outbound network ACLs"},"outpost_subnet_assign_ipv6_address_on_creation":{"default":false,"description":"Specify true to indicate that network interfaces created in the specified subnet should be assigned an IPv6 address. Default is `false`"},"outpost_subnet_enable_dns64":{"default":true,"description":"Indicates whether DNS queries made to the Amazon-provided DNS Resolver in this subnet should return synthetic IPv6 addresses for IPv4-only destinations. Default: `true`"},"outpost_subnet_enable_resource_name_dns_a_record_on_launch":{"default":false,"description":"Indicates whether to respond to DNS queries for instance hostnames with DNS A records. Default: `false`"},"outpost_subnet_enable_resource_name_dns_aaaa_record_on_launch":{"default":true,"description":"Indicates whether to respond to DNS queries for instance hostnames with DNS AAAA records. Default: `true`"},"outpost_subnet_ipv6_native":{"default":false,"description":"Indicates whether to create an IPv6-only subnet. Default: `false`"},"outpost_subnet_ipv6_prefixes":{"default":[],"description":"Assigns IPv6 outpost subnet id based on the Amazon provided /56 prefix base 10 integer (0-256). Must be of equal length to the corresponding IPv4 subnet list"},"outpost_subnet_names":{"default":[],"description":"Explicit values to use in the Name tag on outpost subnets. If empty, Name tags are generated"},"outpost_subnet_private_dns_hostname_type_on_launch":{"default":null,"description":"The type of hostnames to assign to instances in the subnet at launch. For IPv6-only subnets, an instance DNS name must be based on the instance ID. For dual-stack and IPv4-only subnets, you can specify whether DNS names use the instance IPv4 address or the instance ID. Valid values: `ip-name`, `resource-name`"},"outpost_subnet_suffix":{"default":"outpost","description":"Suffix to append to outpost subnets name"},"outpost_subnet_tags":{"default":{},"description":"Additional tags for the outpost subnets"},"outpost_subnets":{"default":[],"description":"A list of outpost subnets inside the VPC"},"private_acl_tags":{"default":{},"description":"Additional tags for the private subnets network ACL"},"private_dedicated_network_acl":{"default":false,"description":"Whether to use dedicated network ACL (not default) and custom rules for private subnets"},"private_inbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Private subnets inbound network ACLs"},"private_outbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Private subnets outbound network ACLs"},"private_route_table_tags":{"default":{},"description":"Additional tags for the private route tables"},"private_subnet_assign_ipv6_address_on_creation":{"default":false,"description":"Specify true to indicate that network interfaces created in the specified subnet should be assigned an IPv6 address. Default is `false`"},"private_subnet_enable_dns64":{"default":true,"description":"Indicates whether DNS queries made to the Amazon-provided DNS Resolver in this subnet should return synthetic IPv6 addresses for IPv4-only destinations. Default: `true`"},"private_subnet_enable_resource_name_dns_a_record_on_launch":{"default":false,"description":"Indicates whether to respond to DNS queries for instance hostnames with DNS A records. Default: `false`"},"private_subnet_enable_resource_name_dns_aaaa_record_on_launch":{"default":true,"description":"Indicates whether to respond to DNS queries for instance hostnames with DNS AAAA records. Default: `true`"},"private_subnet_ipv6_native":{"default":false,"description":"Indicates whether to create an IPv6-only subnet. Default: `false`"},"private_subnet_ipv6_prefixes":{"default":[],"description":"Assigns IPv6 private subnet id based on the Amazon provided /56 prefix base 10 integer (0-256). Must be of equal length to the corresponding IPv4 subnet list"},"private_subnet_names":{"default":[],"description":"Explicit values to use in the Name tag on private subnets. If empty, Name tags are generated"},"private_subnet_private_dns_hostname_type_on_launch":{"default":null,"description":"The type of hostnames to assign to instances in the subnet at launch. For IPv6-only subnets, an instance DNS name must be based on the instance ID. For dual-stack and IPv4-only subnets, you can specify whether DNS names use the instance IPv4 address or the instance ID. Valid values: `ip-name`, `resource-name`"},"private_subnet_suffix":{"default":"private","description":"Suffix to append to private subnets name"},"private_subnet_tags":{"default":{},"description":"Additional tags for the private subnets"},"private_subnet_tags_per_az":{"default":{},"description":"Additional tags for the private subnets where the primary key is the AZ"},"private_subnets":{"default":[],"description":"A list of private subnets inside the VPC"},"propagate_intra_route_tables_vgw":{"default":false,"description":"Should be true if you want route table propagation"},"propagate_private_route_tables_vgw":{"default":false,"description":"Should be true if you want route table propagation"},"propagate_public_route_tables_vgw":{"default":false,"description":"Should be true if you want route table propagation"},"public_acl_tags":{"default":{},"description":"Additional tags for the public subnets network ACL"},"public_dedicated_network_acl":{"default":false,"description":"Whether to use dedicated network ACL (not default) and custom rules for public subnets"},"public_inbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Public subnets inbound network ACLs"},"public_outbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Public subnets outbound network ACLs"},"public_route_table_tags":{"default":{},"description":"Additional tags for the public route tables"},"public_subnet_assign_ipv6_address_on_creation":{"default":false,"description":"Specify true to indicate that network interfaces created in the specified subnet should be assigned an IPv6 address. Default is `false`"},"public_subnet_enable_dns64":{"default":true,"description":"Indicates whether DNS queries made to the Amazon-provided DNS Resolver in this subnet should return synthetic IPv6 addresses for IPv4-only destinations. Default: `true`"},"public_subnet_enable_resource_name_dns_a_record_on_launch":{"default":false,"description":"Indicates whether to respond to DNS queries for instance hostnames with DNS A records. Default: `false`"},"public_subnet_enable_resource_name_dns_aaaa_record_on_launch":{"default":true,"description":"Indicates whether to respond to DNS queries for instance hostnames with DNS AAAA records. Default: `true`"},"public_subnet_ipv6_native":{"default":false,"description":"Indicates whether to create an IPv6-only subnet. Default: `false`"},"public_subnet_ipv6_prefixes":{"default":[],"description":"Assigns IPv6 public subnet id based on the Amazon provided /56 prefix base 10 integer (0-256). Must be of equal length to the corresponding IPv4 subnet list"},"public_subnet_names":{"default":[],"description":"Explicit values to use in the Name tag on public subnets. If empty, Name tags are generated"},"public_subnet_private_dns_hostname_type_on_launch":{"default":null,"description":"The type of hostnames to assign to instances in the subnet at launch. For IPv6-only subnets, an instance DNS name must be based on the instance ID. For dual-stack and IPv4-only subnets, you can specify whether DNS names use the instance IPv4 address or the instance ID. Valid values: `ip-name`, `resource-name`"},"public_subnet_suffix":{"default":"public","description":"Suffix to append to public subnets name"},"public_subnet_tags":{"default":{},"description":"Additional tags for the public subnets"},"public_subnet_tags_per_az":{"default":{},"description":"Additional tags for the public subnets where the primary key is the AZ"},"public_subnets":{"default":[],"description":"A list of public subnets inside the VPC"},"putin_khuylo":{"default":true,"description":"Do you agree that Putin doesn't respect Ukrainian sovereignty and territorial integrity? More info: https://en.wikipedia.org/wiki/Putin_khuylo!"},"redshift_acl_tags":{"default":{},"description":"Additional tags for the redshift subnets network ACL"},"redshift_dedicated_network_acl":{"default":false,"description":"Whether to use dedicated network ACL (not default) and custom rules for redshift subnets"},"redshift_inbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Redshift subnets inbound network ACL rules"},"redshift_outbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Redshift subnets outbound network ACL rules"},"redshift_route_table_tags":{"default":{},"description":"Additional tags for the redshift route tables"},"redshift_subnet_assign_ipv6_address_on_creation":{"default":false,"description":"Specify true to indicate that network interfaces created in the specified subnet should be assigned an IPv6 address. Default is `false`"},"redshift_subnet_enable_dns64":{"default":true,"description":"Indicates whether DNS queries made to the Amazon-provided DNS Resolver in this subnet should return synthetic IPv6 addresses for IPv4-only destinations. Default: `true`"},"redshift_subnet_enable_resource_name_dns_a_record_on_launch":{"default":false,"description":"Indicates whether to respond to DNS queries for instance hostnames with DNS A records. Default: `false`"},"redshift_subnet_enable_resource_name_dns_aaaa_record_on_launch":{"default":true,"description":"Indicates whether to respond to DNS queries for instance hostnames with DNS AAAA records. Default: `true`"},"redshift_subnet_group_name":{"default":null,"description":"Name of redshift subnet group"},"redshift_subnet_group_tags":{"default":{},"description":"Additional tags for the redshift subnet group"},"redshift_subnet_ipv6_native":{"default":false,"description":"Indicates whether to create an IPv6-only subnet. Default: `false`"},"redshift_subnet_ipv6_prefixes":{"default":[],"description":"Assigns IPv6 redshift subnet id based on the Amazon provided /56 prefix base 10 integer (0-256). Must be of equal length to the corresponding IPv4 subnet list"},"redshift_subnet_names":{"default":[],"description":"Explicit values to use in the Name tag on redshift subnets. If empty, Name tags are generated"},"redshift_subnet_private_dns_hostname_type_on_launch":{"default":null,"description":"The type of hostnames to assign to instances in the subnet at launch. For IPv6-only subnets, an instance DNS name must be based on the instance ID. For dual-stack and IPv4-only subnets, you can specify whether DNS names use the instance IPv4 address or the instance ID. Valid values: `ip-name`, `resource-name`"},"redshift_subnet_suffix":{"default":"redshift","description":"Suffix to append to redshift subnets name"},"redshift_subnet_tags":{"default":{},"description":"Additional tags for the redshift subnets"},"redshift_subnets":{"default":[],"description":"A list of redshift subnets inside the VPC"},"reuse_nat_ips":{"default":false,"description":"Should be true if you don't want EIPs to be created for your NAT Gateways and will instead pass them in via the 'external_nat_ip_ids' variable"},"secondary_cidr_blocks":{"default":[],"description":"List of secondary CIDR blocks to associate with the VPC to extend the IP Address pool"},"single_nat_gateway":{"default":false,"description":"Should be true if you want to provision a single shared NAT Gateway across all of your private networks"},"tags":{"default":{},"description":"A map of tags to add to all resources"},"use_ipam_pool":{"default":false,"description":"Determines whether IPAM pool is used for CIDR allocation"},"vpc_block_public_access_exclusions":{"default":{},"description":"A map of VPC block public access exclusions"},"vpc_block_public_access_options":{"default":{},"description":"A map of VPC block public access options"},"vpc_flow_log_iam_policy_name":{"default":"vpc-flow-log-to-cloudwatch","description":"Name of the IAM policy"},"vpc_flow_log_iam_policy_use_name_prefix":{"default":true,"description":"Determines whether the name of the IAM policy (`vpc_flow_log_iam_policy_name`) is used as a prefix"},"vpc_flow_log_iam_role_name":{"default":"vpc-flow-log-role","description":"Name to use on the VPC Flow Log IAM role created"},"vpc_flow_log_iam_role_use_name_prefix":{"default":true,"description":"Determines whether the IAM role name (`vpc_flow_log_iam_role_name_name`) is used as a prefix"},"vpc_flow_log_permissions_boundary":{"default":null,"description":"The ARN of the Permissions Boundary for the VPC Flow Log IAM Role"},"vpc_flow_log_tags":{"default":{},"description":"Additional tags for the VPC Flow Logs"},"vpc_tags":{"default":{},"description":"Additional tags for the VPC"},"vpn_gateway_az":{"default":null,"description":"The Availability Zone for the VPN Gateway"},"vpn_gateway_id":{"default":"","description":"ID of VPN Gateway to attach to the VPC"},"vpn_gateway_tags":{"default":{},"description":"Additional tags for the VPN gateway"}}},"version_constraint":"\u003c 6.0"}},"variables":{"example_env":{"description":"Indicate which example environment to use"}}}},"heritage":{"source":"./modules/heritage","expressions":{"ami_id":{"references":["module.baseline.ami_id","module.baseline"]},"days_until_black_friday":{"references":["var.days_until_black_friday"]},"default_security_group_id":{"references":["module.baseline.default_security_group_id","module.baseline"]},"enable_memory_optimization_demo":{"references":["var.enable_memory_optimization_demo"]},"enable_message_size_breach_demo":{"references":["var.enable_message_size_breach_demo"]},"example_env":{"references":["var.example_env"]},"memory_optimization_container_count":{"references":["var.memory_optimization_container_count"]},"memory_optimization_container_memory":{"references":["var.memory_optimization_container_memory"]},"message_size_breach_batch_size":{"references":["var.message_size_breach_batch_size"]},"message_size_breach_lambda_memory":{"references":["var.message_size_breach_lambda_memory"]},"message_size_breach_lambda_timeout":{"references":["var.message_size_breach_lambda_timeout"]},"message_size_breach_max_size":{"references":["var.message_size_breach_max_size"]},"message_size_breach_retention_days":{"references":["var.message_size_breach_retention_days"]},"private_subnets":{"references":["module.baseline.private_subnets","module.baseline"]},"public_route_table_ids":{"references":["module.baseline.public_route_table_ids","module.baseline"]},"public_subnets":{"references":["module.baseline.public_subnets","module.baseline"]},"vpc_id":{"references":["module.baseline.vpc_id","module.baseline"]}},"count_expression":{"references":["local.include_scenarios"]},"module":{"outputs":{"memory_optimization_cost_analysis":{"expression":{"references":["var.enable_memory_optimization_demo","module.memory_optimization.cost_analysis","module.memory_optimization"]},"description":"Cost analysis for the memory optimization scenario"},"memory_optimization_demo_instructions":{"expression":{"references":["var.enable_memory_optimization_demo","module.memory_optimization.instructions","module.memory_optimization"]},"description":"Instructions for running the memory optimization demo"},"memory_optimization_demo_status":{"expression":{"references":["var.enable_memory_optimization_demo","module.memory_optimization.demo_status","module.memory_optimization"]},"description":"Status and analysis of the memory optimization demo"},"memory_optimization_demo_url":{"expression":{"references":["var.enable_memory_optimization_demo","module.memory_optimization.alb_url","module.memory_optimization"]},"description":"URL to access the memory optimization demo application"},"message_size_breach_demo_status":{"expression":{"references":["module.message_size_breach","module.message_size_breach[0].risk_assessment","module.message_size_breach[0]"]},"description":"Status and analysis of the message size limit breach demo"},"message_size_breach_lambda_function_name":{"expression":{"references":["module.message_size_breach","module.message_size_breach[0].lambda_function_name","module.message_size_breach[0]"]},"description":"Name of the Lambda function for the message size breach demo"},"message_size_breach_payload_analysis":{"expression":{"references":["module.message_size_breach","module.message_size_breach[0].max_message_size","module.message_size_breach[0]","module.message_size_breach[0].batch_size","module.message_size_breach[0]","module.message_size_breach[0].total_batch_size_bytes","module.message_size_breach[0]","module.message_size_breach[0].lambda_payload_limit_bytes","module.message_size_breach[0]","module.message_size_breach[0].payload_limit_exceeded","module.message_size_breach[0]"]},"description":"Analysis of payload size vs Lambda limits"},"message_size_breach_sqs_queue_url":{"expression":{"references":["module.message_size_breach","module.message_size_breach[0].sqs_queue_url","module.message_size_breach[0]"]},"description":"URL of the SQS queue for the message size breach demo"}},"resources":[{"address":"aws_autoscaling_group.my_asg","mode":"managed","type":"aws_autoscaling_group","name":"my_asg","provider_config_key":"aws","expressions":{"desired_capacity":{"constant_value":1},"health_check_grace_period":{"constant_value":300},"health_check_type":{"constant_value":"EC2"},"launch_template":[{"id":{"references":["aws_launch_template.my_launch_template.id","aws_launch_template.my_launch_template"]},"version":{"constant_value":"$Latest"}}],"max_size":{"constant_value":2},"min_size":{"constant_value":0},"name":{"references":["var.example_env"]},"target_group_arns":{"references":["aws_lb_target_group.my_target_group.arn","aws_lb_target_group.my_target_group"]},"vpc_zone_identifier":{"references":["var.public_subnets"]}},"schema_version":1},{"address":"aws_cloudfront_cache_policy.headers_based_policy","mode":"managed","type":"aws_cloudfront_cache_policy","name":"headers_based_policy","provider_config_key":"aws","expressions":{"comment":{"constant_value":"Cache policy that forwards Authorization and Accept-Language headers"},"default_ttl":{"constant_value":86400},"max_ttl":{"constant_value":31536000},"min_ttl":{"constant_value":60},"name":{"constant_value":"CacheHeadersBasedPolicy"},"parameters_in_cache_key_and_forwarded_to_origin":[{"cookies_config":[{"cookie_behavior":{"constant_value":"none"}}],"enable_accept_encoding_brotli":{"constant_value":true},"enable_accept_encoding_gzip":{"constant_value":true},"headers_config":[{"header_behavior":{"constant_value":"whitelist"},"headers":[{"items":{"constant_value":["Authorization","Accept-Language"]}}]}],"query_strings_config":[{"query_string_behavior":{"constant_value":"none"}}]}]},"schema_version":0},{"address":"aws_cloudfront_distribution.s3_distribution","mode":"managed","type":"aws_cloudfront_distribution","name":"s3_distribution","provider_config_key":"aws","expressions":{"comment":{"constant_value":"Some comment"},"default_cache_behavior":[{"allowed_methods":{"constant_value":["DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT"]},"cache_policy_id":{"references":["aws_cloudfront_cache_policy.headers_based_policy.id","aws_cloudfront_cache_policy.headers_based_policy"]},"cached_methods":{"constant_value":["GET","HEAD"]},"origin_request_policy_id":{"references":["aws_cloudfront_origin_request_policy.headers_based_policy.id","aws_cloudfront_origin_request_policy.headers_based_policy"]},"target_origin_id":{"references":["local.s3_origin_id"]},"viewer_protocol_policy":{"constant_value":"redirect-to-https"}}],"default_root_object":{"constant_value":"index.html"},"enabled":{"constant_value":true},"is_ipv6_enabled":{"constant_value":true},"ordered_cache_behavior":[{"allowed_methods":{"constant_value":["GET","HEAD","OPTIONS"]},"cached_methods":{"constant_value":["GET","HEAD","OPTIONS"]},"compress":{"constant_value":true},"forwarded_values":[{"cookies":[{"forward":{"constant_value":"none"}}],"headers":{"constant_value":["Origin"]},"query_string":{"constant_value":false}}],"path_pattern":{"constant_value":"/content/immutable/*"},"response_headers_policy_id":{"references":["aws_cloudfront_response_headers_policy.headers-policy.id","aws_cloudfront_response_headers_policy.headers-policy"]},"target_origin_id":{"references":["local.s3_origin_id"]},"viewer_protocol_policy":{"constant_value":"redirect-to-https"}},{"allowed_methods":{"constant_value":["GET","HEAD","OPTIONS"]},"cache_policy_id":{"references":["aws_cloudfront_cache_policy.headers_based_policy.id","aws_cloudfront_cache_policy.headers_based_policy"]},"cached_methods":{"constant_value":["GET","HEAD"]},"compress":{"constant_value":true},"origin_request_policy_id":{"references":["aws_cloudfront_origin_request_policy.headers_based_policy.id","aws_cloudfront_origin_request_policy.headers_based_policy"]},"path_pattern":{"constant_value":"/content/*"},"target_origin_id":{"references":["local.s3_origin_id"]},"viewer_protocol_policy":{"constant_value":"redirect-to-https"}}],"origin":[{"domain_name":{"references":["aws_s3_bucket.b.bucket_regional_domain_name","aws_s3_bucket.b"]},"origin_access_control_id":{"references":["aws_cloudfront_origin_access_control.b.id","aws_cloudfront_origin_access_control.b"]},"origin_id":{"references":["local.s3_origin_id"]}}],"price_class":{"constant_value":"PriceClass_200"},"restrictions":[{"geo_restriction":[{"locations":{"constant_value":["US","CA","GB","DE"]},"restriction_type":{"constant_value":"whitelist"}}]}],"tags":{"constant_value":{"Environment":"production"}},"viewer_certificate":[{"cloudfront_default_certificate":{"constant_value":true}}]},"schema_version":1},{"address":"aws_cloudfront_distribution.visit_counter","mode":"managed","type":"aws_cloudfront_distribution","name":"visit_counter","provider_config_key":"aws","expressions":{"default_cache_behavior":[{"allowed_methods":{"constant_value":["DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT"]},"cache_policy_id":{"references":["aws_cloudfront_cache_policy.headers_based_policy.id","aws_cloudfront_cache_policy.headers_based_policy"]},"cached_methods":{"constant_value":["GET","HEAD"]},"origin_request_policy_id":{"references":["aws_cloudfront_origin_request_policy.headers_based_policy.id","aws_cloudfront_origin_request_policy.headers_based_policy"]},"response_headers_policy_id":{"references":["aws_cloudfront_response_headers_policy.headers-policy.id","aws_cloudfront_response_headers_policy.headers-policy"]},"target_origin_id":{"constant_value":"visit-counter-ecs"},"viewer_protocol_policy":{"constant_value":"redirect-to-https"}}],"default_root_object":{"constant_value":"index.html"},"enabled":{"constant_value":true},"is_ipv6_enabled":{"constant_value":true},"origin":[{"custom_origin_config":[{"http_port":{"constant_value":80},"https_port":{"constant_value":443},"origin_protocol_policy":{"constant_value":"http-only"},"origin_ssl_protocols":{"constant_value":["TLSv1.1","TLSv1.2"]}}],"domain_name":{"references":["aws_route53_record.visit_counter.name","aws_route53_record.visit_counter"]},"origin_id":{"constant_value":"visit-counter-ecs"}}],"restrictions":[{"geo_restriction":[{"locations":{"constant_value":[]},"restriction_type":{"constant_value":"none"}}]}],"viewer_certificate":[{"cloudfront_default_certificate":{"constant_value":true}}]},"schema_version":1},{"address":"aws_cloudfront_function.example","mode":"managed","type":"aws_cloudfront_function","name":"example","provider_config_key":"aws","expressions":{"code":{"references":["path.module"]},"name":{"references":["var.example_env","random_pet.this.id","random_pet.this"]},"runtime":{"constant_value":"cloudfront-js-1.0"}},"schema_version":0},{"address":"aws_cloudfront_origin_access_control.b","mode":"managed","type":"aws_cloudfront_origin_access_control","name":"b","provider_config_key":"aws","expressions":{"description":{"constant_value":"Example Policy"},"name":{"references":["var.example_env"]},"origin_access_control_origin_type":{"constant_value":"s3"},"signing_behavior":{"constant_value":"always"},"signing_protocol":{"constant_value":"sigv4"}},"schema_version":0},{"address":"aws_cloudfront_origin_request_policy.headers_based_policy","mode":"managed","type":"aws_cloudfront_origin_request_policy","name":"headers_based_policy","provider_config_key":"aws","expressions":{"comment":{"constant_value":"This policy forwards specific headers to the origin"},"cookies_config":[{"cookie_behavior":{"constant_value":"none"}}],"headers_config":[{"header_behavior":{"constant_value":"whitelist"},"headers":[{"items":{"constant_value":["User-Agent"]}}]}],"name":{"constant_value":"OriginHeadersBasedPolicy"},"query_strings_config":[{"query_string_behavior":{"constant_value":"none"}}]},"schema_version":0},{"address":"aws_cloudfront_response_headers_policy.headers-policy","mode":"managed","type":"aws_cloudfront_response_headers_policy","name":"headers-policy","provider_config_key":"aws","expressions":{"comment":{"constant_value":"This controls which headers are cached for baseline applications. This includes headers that are safe to cache"},"cors_config":[{"access_control_allow_credentials":{"constant_value":false},"access_control_allow_headers":[{"items":{"constant_value":["Accept","Accept-Encoding","Content-Encoding","Content-Length","Content-Type"]}}],"access_control_allow_methods":[{"items":{"constant_value":["GET"]}}],"access_control_allow_origins":[{"items":{"constant_value":["storage.overmind-demo.com"]}}],"origin_override":{"constant_value":true}}],"name":{"references":["var.example_env"]}},"schema_version":0},{"address":"aws_db_subnet_group.default","mode":"managed","type":"aws_db_subnet_group","name":"default","provider_config_key":"aws","expressions":{"name":{"references":["var.example_env"]},"subnet_ids":{"references":["var.private_subnets"]},"tags":{"references":["var.example_env"]}},"schema_version":0},{"address":"aws_ecs_service.face","mode":"managed","type":"aws_ecs_service","name":"face","provider_config_key":"aws","expressions":{"capacity_provider_strategy":[{"base":{"constant_value":0},"capacity_provider":{"constant_value":"FARGATE"},"weight":{"constant_value":100}}],"cluster":{"references":["module.ecs.cluster_id","module.ecs"]},"desired_count":{"constant_value":1},"load_balancer":[{"container_name":{"constant_value":"facial-recognition"},"container_port":{"constant_value":1234},"target_group_arn":{"references":["aws_lb_target_group.face.arn","aws_lb_target_group.face"]}}],"name":{"constant_value":"facial-recognition"},"network_configuration":[{"assign_public_ip":{"constant_value":false},"security_groups":{"references":["var.default_security_group_id"]},"subnets":{"references":["var.private_subnets"]}}],"task_definition":{"references":["aws_ecs_task_definition.face.arn","aws_ecs_task_definition.face"]}},"schema_version":1},{"address":"aws_ecs_service.visit_counter","mode":"managed","type":"aws_ecs_service","name":"visit_counter","provider_config_key":"aws","expressions":{"capacity_provider_strategy":[{"base":{"constant_value":0},"capacity_provider":{"constant_value":"FARGATE"},"weight":{"constant_value":100}}],"cluster":{"references":["module.ecs.cluster_id","module.ecs"]},"desired_count":{"constant_value":1},"load_balancer":[{"container_name":{"constant_value":"visit-counter"},"container_port":{"constant_value":80},"target_group_arn":{"references":["aws_lb_target_group.visit_counter.arn","aws_lb_target_group.visit_counter"]}}],"name":{"constant_value":"visit-counter"},"network_configuration":[{"assign_public_ip":{"constant_value":false},"security_groups":{"references":["var.default_security_group_id"]},"subnets":{"references":["var.private_subnets"]}}],"task_definition":{"references":["aws_ecs_task_definition.visit_counter.arn","aws_ecs_task_definition.visit_counter"]}},"schema_version":1},{"address":"aws_ecs_task_definition.face","mode":"managed","type":"aws_ecs_task_definition","name":"face","provider_config_key":"aws","expressions":{"container_definitions":{"references":["aws_rds_cluster_instance.face_database.endpoint","aws_rds_cluster_instance.face_database"]},"cpu":{"constant_value":1024},"family":{"references":["var.example_env"]},"memory":{"constant_value":2048},"network_mode":{"constant_value":"awsvpc"},"requires_compatibilities":{"constant_value":["FARGATE"]}},"schema_version":1},{"address":"aws_ecs_task_definition.visit_counter","mode":"managed","type":"aws_ecs_task_definition","name":"visit_counter","provider_config_key":"aws","expressions":{"container_definitions":{"references":["aws_route53_record.face.name","aws_route53_record.face"]},"cpu":{"constant_value":256},"family":{"references":["var.example_env"]},"memory":{"constant_value":512},"network_mode":{"constant_value":"awsvpc"},"requires_compatibilities":{"constant_value":["FARGATE"]}},"schema_version":1},{"address":"aws_iam_role.lambda_iam_role","mode":"managed","type":"aws_iam_role","name":"lambda_iam_role","provider_config_key":"aws","expressions":{"assume_role_policy":{},"name":{"references":["var.example_env"]}},"schema_version":0},{"address":"aws_instance.app_server","mode":"managed","type":"aws_instance","name":"app_server","provider_config_key":"aws","expressions":{"ami":{"references":["data.aws_ssm_parameter.amzn2_latest.value","data.aws_ssm_parameter.amzn2_latest"]},"associate_public_ip_address":{"constant_value":true},"instance_type":{"constant_value":"t3.small"},"key_name":{"constant_value":"Demo Key Pair"},"root_block_device":[{"delete_on_termination":{"constant_value":true}}],"subnet_id":{"references":["aws_subnet.restricted-2b.id","aws_subnet.restricted-2b"]},"tags":{"constant_value":{"Environment":"dev","Name":"App Server"}},"vpc_security_group_ids":{"references":["aws_security_group.instance_sg.id","aws_security_group.instance_sg"]}},"schema_version":1},{"address":"aws_instance.webserver","mode":"managed","type":"aws_instance","name":"webserver","provider_config_key":"aws","expressions":{"ami":{"references":["data.aws_ssm_parameter.amzn2_latest.value","data.aws_ssm_parameter.amzn2_latest"]},"associate_public_ip_address":{"constant_value":true},"instance_type":{"constant_value":"t3.small"},"key_name":{"constant_value":"Demo Key Pair"},"root_block_device":[{"delete_on_termination":{"constant_value":true}}],"subnet_id":{"references":["aws_subnet.restricted-2a.id","aws_subnet.restricted-2a"]},"tags":{"constant_value":{"Environment":"dev","Name":"Webserver"}},"vpc_security_group_ids":{"references":["aws_security_group.instance_sg.id","aws_security_group.instance_sg"]}},"schema_version":1},{"address":"aws_lambda_function.example","mode":"managed","type":"aws_lambda_function","name":"example","provider_config_key":"aws","expressions":{"filename":{"references":["data.archive_file.lambda_zip.output_path","data.archive_file.lambda_zip"]},"function_name":{"references":["var.example_env"]},"handler":{"constant_value":"index.handler"},"role":{"references":["aws_iam_role.lambda_iam_role.arn","aws_iam_role.lambda_iam_role"]},"runtime":{"constant_value":"nodejs20.x"},"source_code_hash":{"references":["data.archive_file.lambda_zip.output_base64sha256","data.archive_file.lambda_zip"]}},"schema_version":0},{"address":"aws_launch_template.my_launch_template","mode":"managed","type":"aws_launch_template","name":"my_launch_template","provider_config_key":"aws","expressions":{"image_id":{"references":["var.ami_id"]},"instance_type":{"constant_value":"t3.micro"},"name_prefix":{"references":["var.example_env"]},"vpc_security_group_ids":{"references":["var.default_security_group_id"]}},"schema_version":0},{"address":"aws_lb.main","mode":"managed","type":"aws_lb","name":"main","provider_config_key":"aws","expressions":{"enable_deletion_protection":{"constant_value":false},"internal":{"constant_value":false},"load_balancer_type":{"constant_value":"application"},"name":{"references":["var.example_env"]},"subnets":{"references":["var.public_subnets"]}},"schema_version":0},{"address":"aws_lb_listener.http","mode":"managed","type":"aws_lb_listener","name":"http","provider_config_key":"aws","expressions":{"default_action":[{"fixed_response":[{"content_type":{"constant_value":"text/plain"},"message_body":{"constant_value":"Nothing here..."},"status_code":{"constant_value":"200"}}],"type":{"constant_value":"fixed-response"}}],"load_balancer_arn":{"references":["aws_lb.main.arn","aws_lb.main"]},"port":{"constant_value":"80"},"protocol":{"constant_value":"HTTP"}},"schema_version":0},{"address":"aws_lb_listener_rule.face","mode":"managed","type":"aws_lb_listener_rule","name":"face","provider_config_key":"aws","expressions":{"action":[{"target_group_arn":{"references":["aws_lb_target_group.face.arn","aws_lb_target_group.face"]},"type":{"constant_value":"forward"}}],"condition":[{"host_header":[{"values":{"references":["aws_route53_record.face.name","aws_route53_record.face"]}}]}],"listener_arn":{"references":["aws_lb_listener.http.arn","aws_lb_listener.http"]},"priority":{"constant_value":99}},"schema_version":0},{"address":"aws_lb_listener_rule.visit_counter","mode":"managed","type":"aws_lb_listener_rule","name":"visit_counter","provider_config_key":"aws","expressions":{"action":[{"target_group_arn":{"references":["aws_lb_target_group.visit_counter.arn","aws_lb_target_group.visit_counter"]},"type":{"constant_value":"forward"}}],"condition":[{"host_header":[{"values":{"references":["aws_route53_record.visit_counter.name","aws_route53_record.visit_counter"]}}]}],"listener_arn":{"references":["aws_lb_listener.http.arn","aws_lb_listener.http"]},"priority":{"constant_value":100}},"schema_version":0},{"address":"aws_lb_target_group.face","mode":"managed","type":"aws_lb_target_group","name":"face","provider_config_key":"aws","expressions":{"health_check":[{"enabled":{"constant_value":true},"healthy_threshold":{"constant_value":2},"interval":{"constant_value":40},"timeout":{"constant_value":30}}],"name":{"references":["var.example_env"]},"port":{"constant_value":1234},"protocol":{"constant_value":"HTTP"},"target_type":{"constant_value":"ip"},"vpc_id":{"references":["var.vpc_id"]}},"schema_version":0},{"address":"aws_lb_target_group.my_new_target_group","mode":"managed","type":"aws_lb_target_group","name":"my_new_target_group","provider_config_key":"aws","expressions":{"health_check":[{"path":{"constant_value":"/"}}],"name":{"references":["var.example_env"]},"port":{"constant_value":80},"protocol":{"constant_value":"HTTP"},"vpc_id":{"references":["var.vpc_id"]}},"schema_version":0},{"address":"aws_lb_target_group.my_target_group","mode":"managed","type":"aws_lb_target_group","name":"my_target_group","provider_config_key":"aws","expressions":{"health_check":[{"path":{"constant_value":"/"}}],"name":{"references":["var.example_env"]},"port":{"constant_value":80},"protocol":{"constant_value":"HTTP"},"vpc_id":{"references":["var.vpc_id"]}},"schema_version":0},{"address":"aws_lb_target_group.visit_counter","mode":"managed","type":"aws_lb_target_group","name":"visit_counter","provider_config_key":"aws","expressions":{"name":{"references":["var.example_env"]},"port":{"constant_value":80},"protocol":{"constant_value":"HTTP"},"target_type":{"constant_value":"ip"},"vpc_id":{"references":["var.vpc_id"]}},"schema_version":0},{"address":"aws_network_acl.restricted","mode":"managed","type":"aws_network_acl","name":"restricted","provider_config_key":"aws","expressions":{"subnet_ids":{"references":["aws_subnet.restricted-2a.id","aws_subnet.restricted-2a","aws_subnet.restricted-2b.id","aws_subnet.restricted-2b"]},"tags":{"constant_value":{"Name":"Restricted Example"}},"vpc_id":{"references":["var.vpc_id"]}},"schema_version":0},{"address":"aws_network_acl_rule.allow_ephemeral","mode":"managed","type":"aws_network_acl_rule","name":"allow_ephemeral","provider_config_key":"aws","expressions":{"cidr_block":{"constant_value":"0.0.0.0/0"},"from_port":{"constant_value":1024},"network_acl_id":{"references":["aws_network_acl.restricted.id","aws_network_acl.restricted"]},"protocol":{"constant_value":"tcp"},"rule_action":{"constant_value":"allow"},"rule_number":{"constant_value":300},"to_port":{"constant_value":65535}},"schema_version":0},{"address":"aws_network_acl_rule.allow_http","mode":"managed","type":"aws_network_acl_rule","name":"allow_http","provider_config_key":"aws","expressions":{"cidr_block":{"constant_value":"0.0.0.0/0"},"from_port":{"constant_value":80},"network_acl_id":{"references":["aws_network_acl.restricted.id","aws_network_acl.restricted"]},"protocol":{"constant_value":"tcp"},"rule_action":{"constant_value":"allow"},"rule_number":{"constant_value":100},"to_port":{"constant_value":80}},"schema_version":0},{"address":"aws_network_acl_rule.allow_outbound","mode":"managed","type":"aws_network_acl_rule","name":"allow_outbound","provider_config_key":"aws","expressions":{"cidr_block":{"constant_value":"0.0.0.0/0"},"egress":{"constant_value":true},"network_acl_id":{"references":["aws_network_acl.restricted.id","aws_network_acl.restricted"]},"protocol":{"constant_value":"all"},"rule_action":{"constant_value":"allow"},"rule_number":{"constant_value":100}},"schema_version":0},{"address":"aws_network_acl_rule.allow_ssh","mode":"managed","type":"aws_network_acl_rule","name":"allow_ssh","provider_config_key":"aws","expressions":{"cidr_block":{"constant_value":"0.0.0.0/0"},"from_port":{"constant_value":22},"network_acl_id":{"references":["aws_network_acl.restricted.id","aws_network_acl.restricted"]},"protocol":{"constant_value":"tcp"},"rule_action":{"constant_value":"allow"},"rule_number":{"constant_value":102},"to_port":{"constant_value":22}},"schema_version":0},{"address":"aws_network_acl_rule.deny_high_ports","mode":"managed","type":"aws_network_acl_rule","name":"deny_high_ports","provider_config_key":"aws","expressions":{"cidr_block":{"constant_value":"0.0.0.0/0"},"from_port":{"constant_value":8000},"network_acl_id":{"references":["aws_network_acl.restricted.id","aws_network_acl.restricted"]},"protocol":{"constant_value":"tcp"},"rule_action":{"constant_value":"deny"},"rule_number":{"constant_value":200},"to_port":{"constant_value":8100}},"schema_version":0},{"address":"aws_rds_cluster.face_database","mode":"managed","type":"aws_rds_cluster","name":"face_database","provider_config_key":"aws","expressions":{"cluster_identifier":{"references":["var.example_env"]},"database_name":{"constant_value":"test"},"db_subnet_group_name":{"references":["aws_db_subnet_group.default.name","aws_db_subnet_group.default"]},"engine":{"constant_value":"aurora-postgresql"},"engine_mode":{"constant_value":"provisioned"},"engine_version":{"constant_value":"16.8"},"final_snapshot_identifier":{"constant_value":"test"},"master_password":{"constant_value":"must_be_eight_characters"},"master_username":{"constant_value":"test"},"serverlessv2_scaling_configuration":[{"max_capacity":{"constant_value":1},"min_capacity":{"constant_value":0.5}}],"skip_final_snapshot":{"constant_value":true},"storage_encrypted":{"constant_value":true}},"schema_version":1},{"address":"aws_rds_cluster_instance.face_database","mode":"managed","type":"aws_rds_cluster_instance","name":"face_database","provider_config_key":"aws","expressions":{"apply_immediately":{"constant_value":true},"cluster_identifier":{"references":["aws_rds_cluster.face_database.id","aws_rds_cluster.face_database"]},"engine":{"references":["aws_rds_cluster.face_database.engine","aws_rds_cluster.face_database"]},"engine_version":{"references":["aws_rds_cluster.face_database.engine_version","aws_rds_cluster.face_database"]},"instance_class":{"constant_value":"db.serverless"}},"schema_version":0},{"address":"aws_route53_record.face","mode":"managed","type":"aws_route53_record","name":"face","provider_config_key":"aws","expressions":{"name":{"references":["var.example_env","data.aws_route53_zone.demo.name","data.aws_route53_zone.demo"]},"records":{"references":["aws_lb.main.dns_name","aws_lb.main"]},"ttl":{"constant_value":300},"type":{"constant_value":"CNAME"},"zone_id":{"references":["data.aws_route53_zone.demo.zone_id","data.aws_route53_zone.demo"]}},"schema_version":2},{"address":"aws_route53_record.visit_counter","mode":"managed","type":"aws_route53_record","name":"visit_counter","provider_config_key":"aws","expressions":{"name":{"references":["var.example_env","data.aws_route53_zone.demo.name","data.aws_route53_zone.demo"]},"records":{"references":["aws_lb.main.dns_name","aws_lb.main"]},"ttl":{"constant_value":300},"type":{"constant_value":"CNAME"},"zone_id":{"references":["data.aws_route53_zone.demo.zone_id","data.aws_route53_zone.demo"]}},"schema_version":2},{"address":"aws_route_table_association.restricted-2a","mode":"managed","type":"aws_route_table_association","name":"restricted-2a","provider_config_key":"aws","expressions":{"route_table_id":{"references":["var.public_route_table_ids[0]","var.public_route_table_ids"]},"subnet_id":{"references":["aws_subnet.restricted-2a.id","aws_subnet.restricted-2a"]}},"schema_version":0},{"address":"aws_route_table_association.restricted-2b","mode":"managed","type":"aws_route_table_association","name":"restricted-2b","provider_config_key":"aws","expressions":{"route_table_id":{"references":["var.public_route_table_ids[0]","var.public_route_table_ids"]},"subnet_id":{"references":["aws_subnet.restricted-2b.id","aws_subnet.restricted-2b"]}},"schema_version":0},{"address":"aws_s3_bucket.b","mode":"managed","type":"aws_s3_bucket","name":"b","provider_config_key":"aws","expressions":{"bucket_prefix":{"references":["random_pet.second.id","random_pet.second"]},"tags":{"constant_value":{"Name":"Second example bucket"}}},"schema_version":0},{"address":"aws_s3_bucket.my_bucket","mode":"managed","type":"aws_s3_bucket","name":"my_bucket","provider_config_key":"aws","expressions":{"acl":{"constant_value":"private"},"bucket_prefix":{"references":["var.example_env"]}},"schema_version":0},{"address":"aws_s3_bucket_acl.b_acl","mode":"managed","type":"aws_s3_bucket_acl","name":"b_acl","provider_config_key":"aws","expressions":{"acl":{"constant_value":"private"},"bucket":{"references":["aws_s3_bucket.b.id","aws_s3_bucket.b"]}},"schema_version":0,"depends_on":["aws_s3_bucket_ownership_controls.b"]},{"address":"aws_s3_bucket_notification.bucket_notification","mode":"managed","type":"aws_s3_bucket_notification","name":"bucket_notification","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.my_bucket.id","aws_s3_bucket.my_bucket"]},"queue":[{"events":{"constant_value":["s3:ObjectCreated:*"]},"queue_arn":{"references":["aws_sqs_queue.my_queue.arn","aws_sqs_queue.my_queue"]}}]},"schema_version":0},{"address":"aws_s3_bucket_ownership_controls.b","mode":"managed","type":"aws_s3_bucket_ownership_controls","name":"b","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.b.id","aws_s3_bucket.b"]},"rule":[{"object_ownership":{"constant_value":"ObjectWriter"}}]},"schema_version":0},{"address":"aws_s3_bucket_policy.bucket_policy","mode":"managed","type":"aws_s3_bucket_policy","name":"bucket_policy","provider_config_key":"aws","expressions":{"bucket":{"references":["module.s3_one.s3_bucket_id","module.s3_one"]},"policy":{"references":["data.aws_iam_policy_document.s3_policy.json","data.aws_iam_policy_document.s3_policy"]}},"schema_version":0},{"address":"aws_security_group.allow_access","mode":"managed","type":"aws_security_group","name":"allow_access","provider_config_key":"aws","expressions":{"description":{"constant_value":"Allow access security group"},"egress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":null,"to_port":0}]},"ingress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":22,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_groups":null,"self":null,"to_port":22}]},"name":{"references":["var.example_env"]},"vpc_id":{"references":["var.vpc_id"]}},"schema_version":1},{"address":"aws_security_group.instance_sg","mode":"managed","type":"aws_security_group","name":"instance_sg","provider_config_key":"aws","expressions":{"egress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":null,"to_port":0}]},"ingress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":8080,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_groups":null,"self":null,"to_port":8080},{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":22,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_groups":null,"self":null,"to_port":22}]},"vpc_id":{"references":["var.vpc_id"]}},"schema_version":1},{"address":"aws_sns_topic.example_topic","mode":"managed","type":"aws_sns_topic","name":"example_topic","provider_config_key":"aws","expressions":{"name":{"references":["var.example_env"]}},"schema_version":0},{"address":"aws_sqs_queue.my_queue","mode":"managed","type":"aws_sqs_queue","name":"my_queue","provider_config_key":"aws","expressions":{"name":{"references":["var.example_env"]}},"schema_version":0},{"address":"aws_sqs_queue_policy.my_queue_policy","mode":"managed","type":"aws_sqs_queue_policy","name":"my_queue_policy","provider_config_key":"aws","expressions":{"policy":{"references":["aws_sqs_queue.my_queue.arn","aws_sqs_queue.my_queue","aws_sqs_queue.my_queue.arn","aws_sqs_queue.my_queue","aws_s3_bucket.my_bucket.arn","aws_s3_bucket.my_bucket"]},"queue_url":{"references":["aws_sqs_queue.my_queue.id","aws_sqs_queue.my_queue"]}},"schema_version":1},{"address":"aws_subnet.restricted-2a","mode":"managed","type":"aws_subnet","name":"restricted-2a","provider_config_key":"aws","expressions":{"availability_zone":{"constant_value":"eu-west-2a"},"cidr_block":{"constant_value":"10.0.9.0/24"},"tags":{"constant_value":{"Name":"Restricted 2a"}},"vpc_id":{"references":["var.vpc_id"]}},"schema_version":1},{"address":"aws_subnet.restricted-2b","mode":"managed","type":"aws_subnet","name":"restricted-2b","provider_config_key":"aws","expressions":{"availability_zone":{"constant_value":"eu-west-2b"},"cidr_block":{"constant_value":"10.0.10.0/24"},"tags":{"constant_value":{"Name":"Restricted 2b"}},"vpc_id":{"references":["var.vpc_id"]}},"schema_version":1},{"address":"random_pet.second","mode":"managed","type":"random_pet","name":"second","provider_config_key":"module.heritage:random","expressions":{"length":{"constant_value":2}},"schema_version":0},{"address":"random_pet.this","mode":"managed","type":"random_pet","name":"this","provider_config_key":"module.heritage:random","expressions":{"length":{"constant_value":2}},"schema_version":0},{"address":"data.archive_file.lambda_zip","mode":"data","type":"archive_file","name":"lambda_zip","provider_config_key":"archive","expressions":{"output_path":{"references":["path.module"]},"source":[{"content":{"constant_value":"exports.handler = async (event) =\u003e {\n  console.log(\"Event: \", event);\n  return {\n    statusCode: 200,\n    body: JSON.stringify('Hello from Lambda!'),\n  };\n};\n"},"filename":{"constant_value":"index.js"}}],"type":{"constant_value":"zip"}},"schema_version":0},{"address":"data.aws_canonical_user_id.current","mode":"data","type":"aws_canonical_user_id","name":"current","provider_config_key":"aws","schema_version":0},{"address":"data.aws_cloudfront_log_delivery_canonical_user_id.cloudfront","mode":"data","type":"aws_cloudfront_log_delivery_canonical_user_id","name":"cloudfront","provider_config_key":"aws","schema_version":0},{"address":"data.aws_iam_policy_document.s3_policy","mode":"data","type":"aws_iam_policy_document","name":"s3_policy","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["s3:GetObject"]},"principals":[{"identifiers":{"references":["module.cloudfront.cloudfront_origin_access_identity_iam_arns","module.cloudfront"]},"type":{"constant_value":"AWS"}}],"resources":{"references":["module.s3_one.s3_bucket_arn","module.s3_one"]}},{"actions":{"constant_value":["s3:GetObject"]},"condition":[{"test":{"constant_value":"StringEquals"},"values":{"references":["module.cloudfront.cloudfront_distribution_arn","module.cloudfront"]},"variable":{"constant_value":"aws:SourceArn"}}],"principals":[{"identifiers":{"constant_value":["cloudfront.amazonaws.com"]},"type":{"constant_value":"Service"}}],"resources":{"references":["module.s3_one.s3_bucket_arn","module.s3_one"]}}]},"schema_version":0},{"address":"data.aws_route53_zone.demo","mode":"data","type":"aws_route53_zone","name":"demo","provider_config_key":"aws","expressions":{"name":{"constant_value":"overmind-terraform-example.com."}},"schema_version":0},{"address":"data.aws_ssm_parameter.amzn2_latest","mode":"data","type":"aws_ssm_parameter","name":"amzn2_latest","provider_config_key":"aws","expressions":{"name":{"constant_value":"/aws/service/ami-amazon-linux-latest/amzn2-ami-hvm-x86_64-gp2"}},"schema_version":0}],"module_calls":{"cloudfront":{"source":"terraform-aws-modules/cloudfront/aws","expressions":{"comment":{"constant_value":"My awesome CloudFront"},"create_monitoring_subscription":{"constant_value":true},"create_origin_access_control":{"constant_value":true},"create_origin_access_identity":{"constant_value":true},"custom_error_response":{"constant_value":[{"error_code":404,"response_code":404,"response_page_path":"/errors/404.html"},{"error_code":403,"response_code":403,"response_page_path":"/errors/403.html"}]},"default_cache_behavior":{"references":["aws_cloudfront_cache_policy.headers_based_policy.id","aws_cloudfront_cache_policy.headers_based_policy","aws_cloudfront_origin_request_policy.headers_based_policy.id","aws_cloudfront_origin_request_policy.headers_based_policy"]},"enabled":{"constant_value":true},"geo_restriction":{"constant_value":{"locations":["NO","UA","US","GB"],"restriction_type":"whitelist"}},"http_version":{"constant_value":"http2and3"},"is_ipv6_enabled":{"constant_value":true},"ordered_cache_behavior":{"references":["aws_cloudfront_response_headers_policy.headers-policy.id","aws_cloudfront_response_headers_policy.headers-policy","aws_cloudfront_function.example.arn","aws_cloudfront_function.example","aws_cloudfront_function.example.arn","aws_cloudfront_function.example"]},"origin":{"references":["local.domain_name","module.s3_one.s3_bucket_bucket_regional_domain_name","module.s3_one","module.s3_one.s3_bucket_bucket_regional_domain_name","module.s3_one","var.example_env"]},"origin_access_control":{"references":["var.example_env"]},"origin_access_identities":{"constant_value":{"s3_bucket_one":"My awesome CloudFront can access"}},"origin_group":{"constant_value":{"group_one":{"failover_status_codes":[403,404,500,502],"primary_member_origin_id":"appsync","secondary_member_origin_id":"s3_one"}}},"price_class":{"constant_value":"PriceClass_All"},"retain_on_delete":{"constant_value":false},"wait_for_deployment":{"constant_value":false}},"module":{"outputs":{"cloudfront_distribution_arn":{"expression":{"references":["aws_cloudfront_distribution.this[0].arn","aws_cloudfront_distribution.this[0]","aws_cloudfront_distribution.this"]},"description":"The ARN (Amazon Resource Name) for the distribution."},"cloudfront_distribution_caller_reference":{"expression":{"references":["aws_cloudfront_distribution.this[0].caller_reference","aws_cloudfront_distribution.this[0]","aws_cloudfront_distribution.this"]},"description":"Internal value used by CloudFront to allow future updates to the distribution configuration."},"cloudfront_distribution_domain_name":{"expression":{"references":["aws_cloudfront_distribution.this[0].domain_name","aws_cloudfront_distribution.this[0]","aws_cloudfront_distribution.this"]},"description":"The domain name corresponding to the distribution."},"cloudfront_distribution_etag":{"expression":{"references":["aws_cloudfront_distribution.this[0].etag","aws_cloudfront_distribution.this[0]","aws_cloudfront_distribution.this"]},"description":"The current version of the distribution's information."},"cloudfront_distribution_hosted_zone_id":{"expression":{"references":["aws_cloudfront_distribution.this[0].hosted_zone_id","aws_cloudfront_distribution.this[0]","aws_cloudfront_distribution.this"]},"description":"The CloudFront Route 53 zone ID that can be used to route an Alias Resource Record Set to."},"cloudfront_distribution_id":{"expression":{"references":["aws_cloudfront_distribution.this[0].id","aws_cloudfront_distribution.this[0]","aws_cloudfront_distribution.this"]},"description":"The identifier for the distribution."},"cloudfront_distribution_in_progress_validation_batches":{"expression":{"references":["aws_cloudfront_distribution.this[0].in_progress_validation_batches","aws_cloudfront_distribution.this[0]","aws_cloudfront_distribution.this"]},"description":"The number of invalidation batches currently in progress."},"cloudfront_distribution_last_modified_time":{"expression":{"references":["aws_cloudfront_distribution.this[0].last_modified_time","aws_cloudfront_distribution.this[0]","aws_cloudfront_distribution.this"]},"description":"The date and time the distribution was last modified."},"cloudfront_distribution_status":{"expression":{"references":["aws_cloudfront_distribution.this[0].status","aws_cloudfront_distribution.this[0]","aws_cloudfront_distribution.this"]},"description":"The current status of the distribution. Deployed if the distribution's information is fully propagated throughout the Amazon CloudFront system."},"cloudfront_distribution_tags":{"expression":{"references":["aws_cloudfront_distribution.this[0].tags_all","aws_cloudfront_distribution.this[0]","aws_cloudfront_distribution.this"]},"description":"Tags of the distribution's"},"cloudfront_distribution_trusted_signers":{"expression":{"references":["aws_cloudfront_distribution.this[0].trusted_signers","aws_cloudfront_distribution.this[0]","aws_cloudfront_distribution.this"]},"description":"List of nested attributes for active trusted signers, if the distribution is set up to serve private content with signed URLs"},"cloudfront_monitoring_subscription_id":{"expression":{"references":["aws_cloudfront_monitoring_subscription.this[0].id","aws_cloudfront_monitoring_subscription.this[0]","aws_cloudfront_monitoring_subscription.this"]},"description":" The ID of the CloudFront monitoring subscription, which corresponds to the `distribution_id`."},"cloudfront_origin_access_controls":{"expression":{"references":["local.create_origin_access_control","aws_cloudfront_origin_access_control.this"]},"description":"The origin access controls created"},"cloudfront_origin_access_controls_ids":{"expression":{"references":["local.create_origin_access_control","aws_cloudfront_origin_access_control.this"]},"description":"The IDS of the origin access identities created"},"cloudfront_origin_access_identities":{"expression":{"references":["aws_cloudfront_origin_access_identity.this","local.create_origin_access_identity"]},"description":"The origin access identities created"},"cloudfront_origin_access_identity_iam_arns":{"expression":{"references":["aws_cloudfront_origin_access_identity.this","local.create_origin_access_identity"]},"description":"The IAM arns of the origin access identities created"},"cloudfront_origin_access_identity_ids":{"expression":{"references":["aws_cloudfront_origin_access_identity.this","local.create_origin_access_identity"]},"description":"The IDS of the origin access identities created"}},"resources":[{"address":"aws_cloudfront_distribution.this","mode":"managed","type":"aws_cloudfront_distribution","name":"this","provider_config_key":"aws","expressions":{"aliases":{"references":["var.aliases"]},"comment":{"references":["var.comment"]},"continuous_deployment_policy_id":{"references":["var.continuous_deployment_policy_id"]},"default_root_object":{"references":["var.default_root_object"]},"enabled":{"references":["var.enabled"]},"http_version":{"references":["var.http_version"]},"is_ipv6_enabled":{"references":["var.is_ipv6_enabled"]},"price_class":{"references":["var.price_class"]},"restrictions":[{}],"retain_on_delete":{"references":["var.retain_on_delete"]},"staging":{"references":["var.staging"]},"tags":{"references":["var.tags"]},"viewer_certificate":[{"acm_certificate_arn":{"references":["var.viewer_certificate"]},"cloudfront_default_certificate":{"references":["var.viewer_certificate"]},"iam_certificate_id":{"references":["var.viewer_certificate"]},"minimum_protocol_version":{"references":["var.viewer_certificate"]},"ssl_support_method":{"references":["var.viewer_certificate"]}}],"wait_for_deployment":{"references":["var.wait_for_deployment"]},"web_acl_id":{"references":["var.web_acl_id"]}},"schema_version":1,"count_expression":{"references":["var.create_distribution"]}},{"address":"aws_cloudfront_monitoring_subscription.this","mode":"managed","type":"aws_cloudfront_monitoring_subscription","name":"this","provider_config_key":"aws","expressions":{"distribution_id":{"references":["aws_cloudfront_distribution.this[0].id","aws_cloudfront_distribution.this[0]","aws_cloudfront_distribution.this"]},"monitoring_subscription":[{"realtime_metrics_subscription_config":[{"realtime_metrics_subscription_status":{"references":["var.realtime_metrics_subscription_status"]}}]}]},"schema_version":0,"count_expression":{"references":["var.create_distribution","var.create_monitoring_subscription"]}},{"address":"aws_cloudfront_origin_access_control.this","mode":"managed","type":"aws_cloudfront_origin_access_control","name":"this","provider_config_key":"aws","expressions":{"description":{"references":["each.value[\"description\"]","each.value"]},"name":{"references":["each.key"]},"origin_access_control_origin_type":{"references":["each.value[\"origin_type\"]","each.value"]},"signing_behavior":{"references":["each.value[\"signing_behavior\"]","each.value"]},"signing_protocol":{"references":["each.value[\"signing_protocol\"]","each.value"]}},"schema_version":0,"for_each_expression":{"references":["local.create_origin_access_control","var.origin_access_control"]}},{"address":"aws_cloudfront_origin_access_identity.this","mode":"managed","type":"aws_cloudfront_origin_access_identity","name":"this","provider_config_key":"aws","expressions":{"comment":{"references":["each.value"]}},"schema_version":0,"for_each_expression":{"references":["local.create_origin_access_identity","var.origin_access_identities"]}},{"address":"data.aws_cloudfront_cache_policy.this","mode":"data","type":"aws_cloudfront_cache_policy","name":"this","provider_config_key":"aws","expressions":{"name":{"references":["each.key"]}},"schema_version":0,"for_each_expression":{"references":["var.default_cache_behavior","var.ordered_cache_behavior"]}},{"address":"data.aws_cloudfront_origin_request_policy.this","mode":"data","type":"aws_cloudfront_origin_request_policy","name":"this","provider_config_key":"aws","expressions":{"name":{"references":["each.key"]}},"schema_version":0,"for_each_expression":{"references":["var.default_cache_behavior","var.ordered_cache_behavior"]}},{"address":"data.aws_cloudfront_response_headers_policy.this","mode":"data","type":"aws_cloudfront_response_headers_policy","name":"this","provider_config_key":"aws","expressions":{"name":{"references":["each.key"]}},"schema_version":0,"for_each_expression":{"references":["var.default_cache_behavior","var.ordered_cache_behavior"]}}],"variables":{"aliases":{"default":null,"description":"Extra CNAMEs (alternate domain names), if any, for this distribution."},"comment":{"default":null,"description":"Any comments you want to include about the distribution."},"continuous_deployment_policy_id":{"default":null,"description":"Identifier of a continuous deployment policy. This argument should only be set on a production distribution."},"create_distribution":{"default":true,"description":"Controls if CloudFront distribution should be created"},"create_monitoring_subscription":{"default":false,"description":"If enabled, the resource for monitoring subscription will created."},"create_origin_access_control":{"default":false,"description":"Controls if CloudFront origin access control should be created"},"create_origin_access_identity":{"default":false,"description":"Controls if CloudFront origin access identity should be created"},"custom_error_response":{"default":{},"description":"One or more custom error response elements"},"default_cache_behavior":{"default":null,"description":"The default cache behavior for this distribution"},"default_root_object":{"default":null,"description":"The object that you want CloudFront to return (for example, index.html) when an end user requests the root URL."},"enabled":{"default":true,"description":"Whether the distribution is enabled to accept end user requests for content."},"geo_restriction":{"default":{},"description":"The restriction configuration for this distribution (geo_restrictions)"},"http_version":{"default":"http2","description":"The maximum HTTP version to support on the distribution. Allowed values are http1.1, http2, http2and3, and http3. The default is http2."},"is_ipv6_enabled":{"default":null,"description":"Whether the IPv6 is enabled for the distribution."},"logging_config":{"default":{},"description":"The logging configuration that controls how logs are written to your distribution (maximum one)."},"ordered_cache_behavior":{"default":[],"description":"An ordered list of cache behaviors resource for this distribution. List from top to bottom in order of precedence. The topmost cache behavior will have precedence 0."},"origin":{"default":null,"description":"One or more origins for this distribution (multiples allowed)."},"origin_access_control":{"default":{"s3":{"description":"","origin_type":"s3","signing_behavior":"always","signing_protocol":"sigv4"}},"description":"Map of CloudFront origin access control"},"origin_access_identities":{"default":{},"description":"Map of CloudFront origin access identities (value as a comment)"},"origin_group":{"default":{},"description":"One or more origin_group for this distribution (multiples allowed)."},"price_class":{"default":null,"description":"The price class for this distribution. One of PriceClass_All, PriceClass_200, PriceClass_100"},"realtime_metrics_subscription_status":{"default":"Enabled","description":"A flag that indicates whether additional CloudWatch metrics are enabled for a given CloudFront distribution. Valid values are `Enabled` and `Disabled`."},"retain_on_delete":{"default":false,"description":"Disables the distribution instead of deleting it when destroying the resource through Terraform. If this is set, the distribution needs to be deleted manually afterwards."},"staging":{"default":false,"description":"Whether the distribution is a staging distribution."},"tags":{"default":null,"description":"A map of tags to assign to the resource."},"viewer_certificate":{"default":{"cloudfront_default_certificate":true,"minimum_protocol_version":"TLSv1"},"description":"The SSL configuration for this distribution"},"wait_for_deployment":{"default":true,"description":"If enabled, the resource will wait for the distribution status to change from InProgress to Deployed. Setting this to false will skip the process."},"web_acl_id":{"default":null,"description":"If you're using AWS WAF to filter CloudFront requests, the Id of the AWS WAF web ACL that is associated with the distribution. The WAF Web ACL must exist in the WAF Global (CloudFront) region and the credentials configuring this argument must have waf:GetWebACL permissions assigned. If using WAFv2, provide the ARN of the web ACL."}}},"version_constraint":"~\u003e 3.0"},"ecs":{"source":"terraform-aws-modules/ecs/aws","expressions":{"cluster_name":{"references":["var.example_env"]},"fargate_capacity_providers":{"constant_value":{"FARGATE":{"default_capacity_provider_strategy":{"weight":100}}}}},"module":{"outputs":{"autoscaling_capacity_providers":{"expression":{"references":["module.cluster.autoscaling_capacity_providers","module.cluster"]},"description":"Map of autoscaling capacity providers created and their attributes"},"cloudwatch_log_group_arn":{"expression":{"references":["module.cluster.cloudwatch_log_group_arn","module.cluster"]},"description":"ARN of CloudWatch log group created"},"cloudwatch_log_group_name":{"expression":{"references":["module.cluster.cloudwatch_log_group_name","module.cluster"]},"description":"Name of CloudWatch log group created"},"cluster_arn":{"expression":{"references":["module.cluster.arn","module.cluster"]},"description":"ARN that identifies the cluster"},"cluster_capacity_providers":{"expression":{"references":["module.cluster.cluster_capacity_providers","module.cluster"]},"description":"Map of cluster capacity providers attributes"},"cluster_id":{"expression":{"references":["module.cluster.id","module.cluster"]},"description":"ID that identifies the cluster"},"cluster_name":{"expression":{"references":["module.cluster.name","module.cluster"]},"description":"Name that identifies the cluster"},"services":{"expression":{"references":["module.service"]},"description":"Map of services created and their attributes"},"task_exec_iam_role_arn":{"expression":{"references":["module.cluster.task_exec_iam_role_arn","module.cluster"]},"description":"Task execution IAM role ARN"},"task_exec_iam_role_name":{"expression":{"references":["module.cluster.task_exec_iam_role_name","module.cluster"]},"description":"Task execution IAM role name"},"task_exec_iam_role_unique_id":{"expression":{"references":["module.cluster.task_exec_iam_role_unique_id","module.cluster"]},"description":"Stable and unique string identifying the task execution IAM role"}},"module_calls":{"cluster":{"source":"./modules/cluster","expressions":{"autoscaling_capacity_providers":{"references":["var.autoscaling_capacity_providers"]},"cloudwatch_log_group_kms_key_id":{"references":["var.cloudwatch_log_group_kms_key_id"]},"cloudwatch_log_group_name":{"references":["var.cloudwatch_log_group_name"]},"cloudwatch_log_group_retention_in_days":{"references":["var.cloudwatch_log_group_retention_in_days"]},"cloudwatch_log_group_tags":{"references":["var.cloudwatch_log_group_tags"]},"cluster_configuration":{"references":["var.cluster_configuration"]},"cluster_name":{"references":["var.cluster_name"]},"cluster_service_connect_defaults":{"references":["var.cluster_service_connect_defaults"]},"cluster_settings":{"references":["var.cluster_settings"]},"create":{"references":["var.create"]},"create_cloudwatch_log_group":{"references":["var.create_cloudwatch_log_group"]},"create_task_exec_iam_role":{"references":["var.create_task_exec_iam_role"]},"create_task_exec_policy":{"references":["var.create_task_exec_policy"]},"default_capacity_provider_use_fargate":{"references":["var.default_capacity_provider_use_fargate"]},"fargate_capacity_providers":{"references":["var.fargate_capacity_providers"]},"tags":{"references":["var.tags","var.cluster_tags"]},"task_exec_iam_role_description":{"references":["var.task_exec_iam_role_description"]},"task_exec_iam_role_name":{"references":["var.task_exec_iam_role_name"]},"task_exec_iam_role_path":{"references":["var.task_exec_iam_role_path"]},"task_exec_iam_role_permissions_boundary":{"references":["var.task_exec_iam_role_permissions_boundary"]},"task_exec_iam_role_policies":{"references":["var.task_exec_iam_role_policies"]},"task_exec_iam_role_tags":{"references":["var.task_exec_iam_role_tags"]},"task_exec_iam_role_use_name_prefix":{"references":["var.task_exec_iam_role_use_name_prefix"]},"task_exec_iam_statements":{"references":["var.task_exec_iam_statements"]},"task_exec_secret_arns":{"references":["var.task_exec_secret_arns"]},"task_exec_ssm_param_arns":{"references":["var.task_exec_ssm_param_arns"]}},"module":{"outputs":{"arn":{"expression":{"references":["aws_ecs_cluster.this[0].arn","aws_ecs_cluster.this[0]","aws_ecs_cluster.this"]},"description":"ARN that identifies the cluster"},"autoscaling_capacity_providers":{"expression":{"references":["aws_ecs_capacity_provider.this"]},"description":"Map of autoscaling capacity providers created and their attributes"},"cloudwatch_log_group_arn":{"expression":{"references":["aws_cloudwatch_log_group.this[0].arn","aws_cloudwatch_log_group.this[0]","aws_cloudwatch_log_group.this"]},"description":"ARN of CloudWatch log group created"},"cloudwatch_log_group_name":{"expression":{"references":["aws_cloudwatch_log_group.this[0].name","aws_cloudwatch_log_group.this[0]","aws_cloudwatch_log_group.this"]},"description":"Name of CloudWatch log group created"},"cluster_capacity_providers":{"expression":{"references":["aws_ecs_cluster_capacity_providers.this"]},"description":"Map of cluster capacity providers attributes"},"id":{"expression":{"references":["aws_ecs_cluster.this[0].id","aws_ecs_cluster.this[0]","aws_ecs_cluster.this"]},"description":"ID that identifies the cluster"},"name":{"expression":{"references":["aws_ecs_cluster.this[0].name","aws_ecs_cluster.this[0]","aws_ecs_cluster.this"]},"description":"Name that identifies the cluster"},"task_exec_iam_role_arn":{"expression":{"references":["aws_iam_role.task_exec[0].arn","aws_iam_role.task_exec[0]","aws_iam_role.task_exec"]},"description":"Task execution IAM role ARN"},"task_exec_iam_role_name":{"expression":{"references":["aws_iam_role.task_exec[0].name","aws_iam_role.task_exec[0]","aws_iam_role.task_exec"]},"description":"Task execution IAM role name"},"task_exec_iam_role_unique_id":{"expression":{"references":["aws_iam_role.task_exec[0].unique_id","aws_iam_role.task_exec[0]","aws_iam_role.task_exec"]},"description":"Stable and unique string identifying the task execution IAM role"}},"resources":[{"address":"aws_cloudwatch_log_group.this","mode":"managed","type":"aws_cloudwatch_log_group","name":"this","provider_config_key":"aws","expressions":{"kms_key_id":{"references":["var.cloudwatch_log_group_kms_key_id"]},"name":{"references":["var.cloudwatch_log_group_name","var.cluster_name"]},"retention_in_days":{"references":["var.cloudwatch_log_group_retention_in_days"]},"tags":{"references":["var.tags","var.cloudwatch_log_group_tags"]}},"schema_version":0,"count_expression":{"references":["var.create","var.create_cloudwatch_log_group"]}},{"address":"aws_ecs_capacity_provider.this","mode":"managed","type":"aws_ecs_capacity_provider","name":"this","provider_config_key":"aws","expressions":{"auto_scaling_group_provider":[{"auto_scaling_group_arn":{"references":["each.value.auto_scaling_group_arn","each.value"]},"managed_termination_protection":{"references":["each.value.managed_scaling","each.value","each.value.managed_termination_protection","each.value"]}}],"name":{"references":["each.value.name","each.value","each.key"]},"tags":{"references":["var.tags","each.value.tags","each.value"]}},"schema_version":0,"for_each_expression":{"references":["var.autoscaling_capacity_providers","var.create"]}},{"address":"aws_ecs_cluster.this","mode":"managed","type":"aws_ecs_cluster","name":"this","provider_config_key":"aws","expressions":{"name":{"references":["var.cluster_name"]},"tags":{"references":["var.tags"]}},"schema_version":0,"count_expression":{"references":["var.create"]}},{"address":"aws_ecs_cluster_capacity_providers.this","mode":"managed","type":"aws_ecs_cluster_capacity_providers","name":"this","provider_config_key":"aws","expressions":{"capacity_providers":{"references":["var.fargate_capacity_providers","var.autoscaling_capacity_providers"]},"cluster_name":{"references":["aws_ecs_cluster.this[0].name","aws_ecs_cluster.this[0]","aws_ecs_cluster.this"]}},"schema_version":0,"count_expression":{"references":["var.create","var.fargate_capacity_providers","var.autoscaling_capacity_providers"]},"depends_on":["aws_ecs_capacity_provider.this"]},{"address":"aws_iam_policy.task_exec","mode":"managed","type":"aws_iam_policy","name":"task_exec","provider_config_key":"aws","expressions":{"description":{"references":["var.task_exec_iam_role_description"]},"name":{"references":["var.task_exec_iam_role_use_name_prefix","local.task_exec_iam_role_name"]},"name_prefix":{"references":["var.task_exec_iam_role_use_name_prefix","local.task_exec_iam_role_name"]},"policy":{"references":["data.aws_iam_policy_document.task_exec[0].json","data.aws_iam_policy_document.task_exec[0]","data.aws_iam_policy_document.task_exec"]},"tags":{"references":["var.tags","var.task_exec_iam_role_tags"]}},"schema_version":0,"count_expression":{"references":["local.create_task_exec_policy"]}},{"address":"aws_iam_role.task_exec","mode":"managed","type":"aws_iam_role","name":"task_exec","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.task_exec_assume[0].json","data.aws_iam_policy_document.task_exec_assume[0]","data.aws_iam_policy_document.task_exec_assume"]},"description":{"references":["var.task_exec_iam_role_description","var.cluster_name"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.task_exec_iam_role_use_name_prefix","local.task_exec_iam_role_name"]},"name_prefix":{"references":["var.task_exec_iam_role_use_name_prefix","local.task_exec_iam_role_name"]},"path":{"references":["var.task_exec_iam_role_path"]},"permissions_boundary":{"references":["var.task_exec_iam_role_permissions_boundary"]},"tags":{"references":["var.tags","var.task_exec_iam_role_tags"]}},"schema_version":0,"count_expression":{"references":["local.create_task_exec_iam_role"]}},{"address":"aws_iam_role_policy_attachment.task_exec","mode":"managed","type":"aws_iam_role_policy_attachment","name":"task_exec","provider_config_key":"aws","expressions":{"policy_arn":{"references":["aws_iam_policy.task_exec[0].arn","aws_iam_policy.task_exec[0]","aws_iam_policy.task_exec"]},"role":{"references":["aws_iam_role.task_exec[0].name","aws_iam_role.task_exec[0]","aws_iam_role.task_exec"]}},"schema_version":0,"count_expression":{"references":["local.create_task_exec_policy"]}},{"address":"aws_iam_role_policy_attachment.task_exec_additional","mode":"managed","type":"aws_iam_role_policy_attachment","name":"task_exec_additional","provider_config_key":"aws","expressions":{"policy_arn":{"references":["each.value"]},"role":{"references":["aws_iam_role.task_exec[0].name","aws_iam_role.task_exec[0]","aws_iam_role.task_exec"]}},"schema_version":0,"for_each_expression":{"references":["var.task_exec_iam_role_policies","local.create_task_exec_iam_role"]}},{"address":"data.aws_iam_policy_document.task_exec","mode":"data","type":"aws_iam_policy_document","name":"task_exec","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["logs:CreateLogStream","logs:PutLogEvents"]},"resources":{"constant_value":["*"]},"sid":{"constant_value":"Logs"}},{"actions":{"constant_value":["ecr:GetAuthorizationToken","ecr:BatchCheckLayerAvailability","ecr:GetDownloadUrlForLayer","ecr:BatchGetImage"]},"resources":{"constant_value":["*"]},"sid":{"constant_value":"ECR"}}]},"schema_version":0,"count_expression":{"references":["local.create_task_exec_policy"]}},{"address":"data.aws_iam_policy_document.task_exec_assume","mode":"data","type":"aws_iam_policy_document","name":"task_exec_assume","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"principals":[{"identifiers":{"constant_value":["ecs-tasks.amazonaws.com"]},"type":{"constant_value":"Service"}}],"sid":{"constant_value":"ECSTaskExecutionAssumeRole"}}]},"schema_version":0,"count_expression":{"references":["local.create_task_exec_iam_role"]}}],"variables":{"autoscaling_capacity_providers":{"default":{},"description":"Map of autoscaling capacity provider definitions to create for the cluster"},"cloudwatch_log_group_kms_key_id":{"default":null,"description":"If a KMS Key ARN is set, this key will be used to encrypt the corresponding log group. Please be sure that the KMS Key has an appropriate key policy (https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/encrypt-log-data-kms.html)"},"cloudwatch_log_group_name":{"default":null,"description":"Custom name of CloudWatch Log Group for ECS cluster"},"cloudwatch_log_group_retention_in_days":{"default":90,"description":"Number of days to retain log events"},"cloudwatch_log_group_tags":{"default":{},"description":"A map of additional tags to add to the log group created"},"cluster_configuration":{"default":{},"description":"The execute command configuration for the cluster"},"cluster_name":{"default":"","description":"Name of the cluster (up to 255 letters, numbers, hyphens, and underscores)"},"cluster_service_connect_defaults":{"default":{},"description":"Configures a default Service Connect namespace"},"cluster_settings":{"default":[{"name":"containerInsights","value":"enabled"}],"description":"List of configuration block(s) with cluster settings. For example, this can be used to enable CloudWatch Container Insights for a cluster"},"create":{"default":true,"description":"Determines whether resources will be created (affects all resources)"},"create_cloudwatch_log_group":{"default":true,"description":"Determines whether a log group is created by this module for the cluster logs. If not, AWS will automatically create one if logging is enabled"},"create_task_exec_iam_role":{"default":false,"description":"Determines whether the ECS task definition IAM role should be created"},"create_task_exec_policy":{"default":true,"description":"Determines whether the ECS task definition IAM policy should be created. This includes permissions included in AmazonECSTaskExecutionRolePolicy as well as access to secrets and SSM parameters"},"default_capacity_provider_use_fargate":{"default":true,"description":"Determines whether to use Fargate or autoscaling for default capacity provider strategy"},"fargate_capacity_providers":{"default":{},"description":"Map of Fargate capacity provider definitions to use for the cluster"},"tags":{"default":{},"description":"A map of tags to add to all resources"},"task_exec_iam_role_description":{"default":null,"description":"Description of the role"},"task_exec_iam_role_name":{"default":null,"description":"Name to use on IAM role created"},"task_exec_iam_role_path":{"default":null,"description":"IAM role path"},"task_exec_iam_role_permissions_boundary":{"default":null,"description":"ARN of the policy that is used to set the permissions boundary for the IAM role"},"task_exec_iam_role_policies":{"default":{},"description":"Map of IAM role policy ARNs to attach to the IAM role"},"task_exec_iam_role_tags":{"default":{},"description":"A map of additional tags to add to the IAM role created"},"task_exec_iam_role_use_name_prefix":{"default":true,"description":"Determines whether the IAM role name (`task_exec_iam_role_name`) is used as a prefix"},"task_exec_iam_statements":{"default":{},"description":"A map of IAM policy [statements](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/iam_policy_document#statement) for custom permission usage"},"task_exec_secret_arns":{"default":["arn:aws:secretsmanager:*:*:secret:*"],"description":"List of SecretsManager secret ARNs the task execution role will be permitted to get/read"},"task_exec_ssm_param_arns":{"default":["arn:aws:ssm:*:*:parameter/*"],"description":"List of SSM parameter ARNs the task execution role will be permitted to get/read"}}}},"service":{"source":"./modules/service","expressions":{"alarms":{"references":["each.value.alarms","each.value"]},"assign_public_ip":{"references":["each.value.assign_public_ip","each.value"]},"autoscaling_max_capacity":{"references":["each.value.autoscaling_max_capacity","each.value"]},"autoscaling_min_capacity":{"references":["each.value.autoscaling_min_capacity","each.value"]},"autoscaling_policies":{"references":["each.value.autoscaling_policies","each.value"]},"autoscaling_scheduled_actions":{"references":["each.value.autoscaling_scheduled_actions","each.value"]},"capacity_provider_strategy":{"references":["each.value.capacity_provider_strategy","each.value"]},"cluster_arn":{"references":["module.cluster.arn","module.cluster"]},"container_definition_defaults":{"references":["each.value.container_definition_defaults","each.value"]},"container_definitions":{"references":["each.value.container_definitions","each.value"]},"cpu":{"references":["each.value.cpu","each.value"]},"create":{"references":["each.value.create","each.value"]},"create_iam_role":{"references":["each.value.create_iam_role","each.value"]},"create_security_group":{"references":["each.value.create_security_group","each.value"]},"create_service":{"references":["each.value.create_service","each.value"]},"create_task_definition":{"references":["each.value.create_task_definition","each.value"]},"create_task_exec_iam_role":{"references":["each.value.create_task_exec_iam_role","each.value"]},"create_task_exec_policy":{"references":["each.value.create_task_exec_policy","each.value"]},"create_tasks_iam_role":{"references":["each.value.create_tasks_iam_role","each.value"]},"deployment_circuit_breaker":{"references":["each.value.deployment_circuit_breaker","each.value"]},"deployment_controller":{"references":["each.value.deployment_controller","each.value"]},"deployment_maximum_percent":{"references":["each.value.deployment_maximum_percent","each.value"]},"deployment_minimum_healthy_percent":{"references":["each.value.deployment_minimum_healthy_percent","each.value"]},"desired_count":{"references":["each.value.desired_count","each.value"]},"enable_autoscaling":{"references":["each.value.enable_autoscaling","each.value"]},"enable_ecs_managed_tags":{"references":["each.value.enable_ecs_managed_tags","each.value"]},"enable_execute_command":{"references":["each.value.enable_execute_command","each.value"]},"ephemeral_storage":{"references":["each.value.ephemeral_storage","each.value"]},"external_id":{"references":["each.value.external_id","each.value"]},"family":{"references":["each.value.family","each.value"]},"force_delete":{"references":["each.value.force_delete","each.value"]},"force_new_deployment":{"references":["each.value.force_new_deployment","each.value"]},"health_check_grace_period_seconds":{"references":["each.value.health_check_grace_period_seconds","each.value"]},"iam_role_arn":{"references":["each.value"]},"iam_role_description":{"references":["each.value.iam_role_description","each.value"]},"iam_role_name":{"references":["each.value.iam_role_name","each.value"]},"iam_role_path":{"references":["each.value.iam_role_path","each.value"]},"iam_role_permissions_boundary":{"references":["each.value.iam_role_permissions_boundary","each.value"]},"iam_role_statements":{"references":["each.value"]},"iam_role_tags":{"references":["each.value.iam_role_tags","each.value"]},"iam_role_use_name_prefix":{"references":["each.value.iam_role_use_name_prefix","each.value"]},"ignore_task_definition_changes":{"references":["each.value.ignore_task_definition_changes","each.value"]},"inference_accelerator":{"references":["each.value.inference_accelerator","each.value"]},"ipc_mode":{"references":["each.value.ipc_mode","each.value"]},"launch_type":{"references":["each.value.launch_type","each.value"]},"load_balancer":{"references":["each.value"]},"memory":{"references":["each.value.memory","each.value"]},"name":{"references":["each.value.name","each.value","each.key"]},"network_mode":{"references":["each.value.network_mode","each.value"]},"ordered_placement_strategy":{"references":["each.value.ordered_placement_strategy","each.value"]},"pid_mode":{"references":["each.value.pid_mode","each.value"]},"placement_constraints":{"references":["each.value.placement_constraints","each.value"]},"platform_version":{"references":["each.value.platform_version","each.value"]},"propagate_tags":{"references":["each.value.propagate_tags","each.value"]},"proxy_configuration":{"references":["each.value.proxy_configuration","each.value"]},"requires_compatibilities":{"references":["each.value.requires_compatibilities","each.value"]},"runtime_platform":{"references":["each.value.runtime_platform","each.value"]},"scale":{"references":["each.value.scale","each.value"]},"scheduling_strategy":{"references":["each.value.scheduling_strategy","each.value"]},"security_group_description":{"references":["each.value.security_group_description","each.value"]},"security_group_ids":{"references":["each.value"]},"security_group_name":{"references":["each.value.security_group_name","each.value"]},"security_group_rules":{"references":["each.value"]},"security_group_tags":{"references":["each.value.security_group_tags","each.value"]},"security_group_use_name_prefix":{"references":["each.value.security_group_use_name_prefix","each.value"]},"service_connect_configuration":{"references":["each.value"]},"service_registries":{"references":["each.value"]},"skip_destroy":{"references":["each.value.skip_destroy","each.value"]},"subnet_ids":{"references":["each.value"]},"tags":{"references":["var.tags","each.value.tags","each.value"]},"task_definition_arn":{"references":["each.value"]},"task_exec_iam_role_arn":{"references":["each.value"]},"task_exec_iam_role_description":{"references":["each.value.task_exec_iam_role_description","each.value"]},"task_exec_iam_role_max_session_duration":{"references":["each.value.task_exec_iam_role_max_session_duration","each.value"]},"task_exec_iam_role_name":{"references":["each.value.task_exec_iam_role_name","each.value"]},"task_exec_iam_role_path":{"references":["each.value.task_exec_iam_role_path","each.value"]},"task_exec_iam_role_permissions_boundary":{"references":["each.value.task_exec_iam_role_permissions_boundary","each.value"]},"task_exec_iam_role_policies":{"references":["each.value.task_exec_iam_role_policies","each.value"]},"task_exec_iam_role_tags":{"references":["each.value.task_exec_iam_role_tags","each.value"]},"task_exec_iam_role_use_name_prefix":{"references":["each.value.task_exec_iam_role_use_name_prefix","each.value"]},"task_exec_iam_statements":{"references":["each.value"]},"task_exec_secret_arns":{"references":["each.value"]},"task_exec_ssm_param_arns":{"references":["each.value"]},"task_tags":{"references":["each.value.task_tags","each.value"]},"tasks_iam_role_arn":{"references":["each.value"]},"tasks_iam_role_description":{"references":["each.value.tasks_iam_role_description","each.value"]},"tasks_iam_role_name":{"references":["each.value.tasks_iam_role_name","each.value"]},"tasks_iam_role_path":{"references":["each.value.tasks_iam_role_path","each.value"]},"tasks_iam_role_permissions_boundary":{"references":["each.value.tasks_iam_role_permissions_boundary","each.value"]},"tasks_iam_role_policies":{"references":["each.value"]},"tasks_iam_role_statements":{"references":["each.value"]},"tasks_iam_role_tags":{"references":["each.value.tasks_iam_role_tags","each.value"]},"tasks_iam_role_use_name_prefix":{"references":["each.value.tasks_iam_role_use_name_prefix","each.value"]},"timeouts":{"references":["each.value.timeouts","each.value"]},"triggers":{"references":["each.value.triggers","each.value"]},"volume":{"references":["each.value.volume","each.value"]},"wait_for_steady_state":{"references":["each.value.wait_for_steady_state","each.value"]},"wait_until_stable":{"references":["each.value.wait_until_stable","each.value"]},"wait_until_stable_timeout":{"references":["each.value.wait_until_stable_timeout","each.value"]}},"for_each_expression":{"references":["var.services","var.create"]},"module":{"outputs":{"autoscaling_policies":{"expression":{"references":["aws_appautoscaling_policy.this"]},"description":"Map of autoscaling policies and their attributes"},"autoscaling_scheduled_actions":{"expression":{"references":["aws_appautoscaling_scheduled_action.this"]},"description":"Map of autoscaling scheduled actions and their attributes"},"container_definitions":{"expression":{"references":["module.container_definition"]},"description":"Container definitions"},"iam_role_arn":{"expression":{"references":["aws_iam_role.service[0].arn","aws_iam_role.service[0]","aws_iam_role.service","var.iam_role_arn"]},"description":"Service IAM role ARN"},"iam_role_name":{"expression":{"references":["aws_iam_role.service[0].name","aws_iam_role.service[0]","aws_iam_role.service"]},"description":"Service IAM role name"},"iam_role_unique_id":{"expression":{"references":["aws_iam_role.service[0].unique_id","aws_iam_role.service[0]","aws_iam_role.service"]},"description":"Stable and unique string identifying the service IAM role"},"id":{"expression":{"references":["aws_ecs_service.this[0].id","aws_ecs_service.this[0]","aws_ecs_service.this","aws_ecs_service.ignore_task_definition[0].id","aws_ecs_service.ignore_task_definition[0]","aws_ecs_service.ignore_task_definition"]},"description":"ARN that identifies the service"},"name":{"expression":{"references":["aws_ecs_service.this[0].name","aws_ecs_service.this[0]","aws_ecs_service.this","aws_ecs_service.ignore_task_definition[0].name","aws_ecs_service.ignore_task_definition[0]","aws_ecs_service.ignore_task_definition"]},"description":"Name of the service"},"security_group_arn":{"expression":{"references":["aws_security_group.this[0].arn","aws_security_group.this[0]","aws_security_group.this"]},"description":"Amazon Resource Name (ARN) of the security group"},"security_group_id":{"expression":{"references":["aws_security_group.this[0].id","aws_security_group.this[0]","aws_security_group.this"]},"description":"ID of the security group"},"task_definition_arn":{"expression":{"references":["aws_ecs_task_definition.this[0].arn","aws_ecs_task_definition.this[0]","aws_ecs_task_definition.this","var.task_definition_arn"]},"description":"Full ARN of the Task Definition (including both `family` and `revision`)"},"task_definition_family":{"expression":{"references":["aws_ecs_task_definition.this[0].family","aws_ecs_task_definition.this[0]","aws_ecs_task_definition.this"]},"description":"The unique name of the task definition"},"task_definition_family_revision":{"expression":{"references":["aws_ecs_task_definition.this[0].family","aws_ecs_task_definition.this[0]","aws_ecs_task_definition.this","local.max_task_def_revision"]},"description":"The family and revision (family:revision) of the task definition"},"task_definition_revision":{"expression":{"references":["aws_ecs_task_definition.this[0].revision","aws_ecs_task_definition.this[0]","aws_ecs_task_definition.this"]},"description":"Revision of the task in a particular family"},"task_exec_iam_role_arn":{"expression":{"references":["aws_iam_role.task_exec[0].arn","aws_iam_role.task_exec[0]","aws_iam_role.task_exec","var.task_exec_iam_role_arn"]},"description":"Task execution IAM role ARN"},"task_exec_iam_role_name":{"expression":{"references":["aws_iam_role.task_exec[0].name","aws_iam_role.task_exec[0]","aws_iam_role.task_exec"]},"description":"Task execution IAM role name"},"task_exec_iam_role_unique_id":{"expression":{"references":["aws_iam_role.task_exec[0].unique_id","aws_iam_role.task_exec[0]","aws_iam_role.task_exec"]},"description":"Stable and unique string identifying the task execution IAM role"},"task_set_arn":{"expression":{"references":["aws_ecs_task_set.this[0].arn","aws_ecs_task_set.this[0]","aws_ecs_task_set.this","aws_ecs_task_set.ignore_task_definition[0].arn","aws_ecs_task_set.ignore_task_definition[0]","aws_ecs_task_set.ignore_task_definition"]},"description":"The Amazon Resource Name (ARN) that identifies the task set"},"task_set_id":{"expression":{"references":["aws_ecs_task_set.this[0].task_set_id","aws_ecs_task_set.this[0]","aws_ecs_task_set.this","aws_ecs_task_set.ignore_task_definition[0].task_set_id","aws_ecs_task_set.ignore_task_definition[0]","aws_ecs_task_set.ignore_task_definition"]},"description":"The ID of the task set"},"task_set_stability_status":{"expression":{"references":["aws_ecs_task_set.this[0].stability_status","aws_ecs_task_set.this[0]","aws_ecs_task_set.this","aws_ecs_task_set.ignore_task_definition[0].stability_status","aws_ecs_task_set.ignore_task_definition[0]","aws_ecs_task_set.ignore_task_definition"]},"description":"The stability status. This indicates whether the task set has reached a steady state"},"task_set_status":{"expression":{"references":["aws_ecs_task_set.this[0].status","aws_ecs_task_set.this[0]","aws_ecs_task_set.this","aws_ecs_task_set.ignore_task_definition[0].status","aws_ecs_task_set.ignore_task_definition[0]","aws_ecs_task_set.ignore_task_definition"]},"description":"The status of the task set"},"tasks_iam_role_arn":{"expression":{"references":["aws_iam_role.tasks[0].arn","aws_iam_role.tasks[0]","aws_iam_role.tasks","var.tasks_iam_role_arn"]},"description":"Tasks IAM role ARN"},"tasks_iam_role_name":{"expression":{"references":["aws_iam_role.tasks[0].name","aws_iam_role.tasks[0]","aws_iam_role.tasks"]},"description":"Tasks IAM role name"},"tasks_iam_role_unique_id":{"expression":{"references":["aws_iam_role.tasks[0].unique_id","aws_iam_role.tasks[0]","aws_iam_role.tasks"]},"description":"Stable and unique string identifying the tasks IAM role"}},"resources":[{"address":"aws_appautoscaling_policy.this","mode":"managed","type":"aws_appautoscaling_policy","name":"this","provider_config_key":"aws","expressions":{"name":{"references":["each.value.name","each.value","each.key"]},"policy_type":{"references":["each.value.policy_type","each.value"]},"resource_id":{"references":["aws_appautoscaling_target.this[0].resource_id","aws_appautoscaling_target.this[0]","aws_appautoscaling_target.this"]},"scalable_dimension":{"references":["aws_appautoscaling_target.this[0].scalable_dimension","aws_appautoscaling_target.this[0]","aws_appautoscaling_target.this"]},"service_namespace":{"references":["aws_appautoscaling_target.this[0].service_namespace","aws_appautoscaling_target.this[0]","aws_appautoscaling_target.this"]}},"schema_version":0,"for_each_expression":{"references":["var.autoscaling_policies","local.enable_autoscaling"]}},{"address":"aws_appautoscaling_scheduled_action.this","mode":"managed","type":"aws_appautoscaling_scheduled_action","name":"this","provider_config_key":"aws","expressions":{"end_time":{"references":["each.value.end_time","each.value"]},"name":{"references":["each.value.name","each.value","each.key"]},"resource_id":{"references":["aws_appautoscaling_target.this[0].resource_id","aws_appautoscaling_target.this[0]","aws_appautoscaling_target.this"]},"scalable_dimension":{"references":["aws_appautoscaling_target.this[0].scalable_dimension","aws_appautoscaling_target.this[0]","aws_appautoscaling_target.this"]},"scalable_target_action":[{"max_capacity":{"references":["each.value.max_capacity","each.value"]},"min_capacity":{"references":["each.value.min_capacity","each.value"]}}],"schedule":{"references":["each.value.schedule","each.value"]},"service_namespace":{"references":["aws_appautoscaling_target.this[0].service_namespace","aws_appautoscaling_target.this[0]","aws_appautoscaling_target.this"]},"start_time":{"references":["each.value.start_time","each.value"]},"timezone":{"references":["each.value.timezone","each.value"]}},"schema_version":0,"for_each_expression":{"references":["var.autoscaling_scheduled_actions","local.enable_autoscaling"]}},{"address":"aws_appautoscaling_target.this","mode":"managed","type":"aws_appautoscaling_target","name":"this","provider_config_key":"aws","expressions":{"max_capacity":{"references":["var.autoscaling_max_capacity","var.desired_count"]},"min_capacity":{"references":["var.autoscaling_min_capacity","var.desired_count"]},"resource_id":{"references":["local.cluster_name","aws_ecs_service.this[0].name","aws_ecs_service.this[0]","aws_ecs_service.this","aws_ecs_service.ignore_task_definition[0].name","aws_ecs_service.ignore_task_definition[0]","aws_ecs_service.ignore_task_definition"]},"scalable_dimension":{"constant_value":"ecs:service:DesiredCount"},"service_namespace":{"constant_value":"ecs"},"tags":{"references":["var.tags"]}},"schema_version":0,"count_expression":{"references":["local.enable_autoscaling"]}},{"address":"aws_ecs_service.ignore_task_definition","mode":"managed","type":"aws_ecs_service","name":"ignore_task_definition","provider_config_key":"aws","expressions":{"cluster":{"references":["var.cluster_arn"]},"deployment_maximum_percent":{"references":["local.is_daemon","local.is_external_deployment","var.deployment_maximum_percent"]},"deployment_minimum_healthy_percent":{"references":["local.is_daemon","local.is_external_deployment","var.deployment_minimum_healthy_percent"]},"desired_count":{"references":["local.is_daemon","local.is_external_deployment","var.desired_count"]},"enable_ecs_managed_tags":{"references":["var.enable_ecs_managed_tags"]},"enable_execute_command":{"references":["var.enable_execute_command"]},"force_new_deployment":{"references":["local.is_external_deployment","var.force_new_deployment"]},"health_check_grace_period_seconds":{"references":["var.health_check_grace_period_seconds"]},"iam_role":{"references":["local.iam_role_arn"]},"launch_type":{"references":["local.is_external_deployment","var.capacity_provider_strategy","var.launch_type"]},"name":{"references":["var.name"]},"platform_version":{"references":["local.is_fargate","local.is_external_deployment","var.platform_version"]},"propagate_tags":{"references":["var.propagate_tags"]},"scheduling_strategy":{"references":["local.is_fargate","var.scheduling_strategy"]},"tags":{"references":["var.tags","var.service_tags"]},"task_definition":{"references":["local.task_definition"]},"timeouts":{"create":{"references":["var.timeouts.create","var.timeouts"]},"delete":{"references":["var.timeouts.delete","var.timeouts"]},"update":{"references":["var.timeouts.update","var.timeouts"]}},"triggers":{"references":["var.triggers"]},"wait_for_steady_state":{"references":["var.wait_for_steady_state"]}},"schema_version":1,"count_expression":{"references":["local.create_service","var.ignore_task_definition_changes"]},"depends_on":["aws_iam_role_policy_attachment.service"]},{"address":"aws_ecs_service.this","mode":"managed","type":"aws_ecs_service","name":"this","provider_config_key":"aws","expressions":{"cluster":{"references":["var.cluster_arn"]},"deployment_maximum_percent":{"references":["local.is_daemon","local.is_external_deployment","var.deployment_maximum_percent"]},"deployment_minimum_healthy_percent":{"references":["local.is_daemon","local.is_external_deployment","var.deployment_minimum_healthy_percent"]},"desired_count":{"references":["local.is_daemon","local.is_external_deployment","var.desired_count"]},"enable_ecs_managed_tags":{"references":["var.enable_ecs_managed_tags"]},"enable_execute_command":{"references":["var.enable_execute_command"]},"force_new_deployment":{"references":["local.is_external_deployment","var.force_new_deployment"]},"health_check_grace_period_seconds":{"references":["var.health_check_grace_period_seconds"]},"iam_role":{"references":["local.iam_role_arn"]},"launch_type":{"references":["local.is_external_deployment","var.capacity_provider_strategy","var.launch_type"]},"name":{"references":["var.name"]},"platform_version":{"references":["local.is_fargate","local.is_external_deployment","var.platform_version"]},"propagate_tags":{"references":["var.propagate_tags"]},"scheduling_strategy":{"references":["local.is_fargate","var.scheduling_strategy"]},"tags":{"references":["var.tags","var.service_tags"]},"task_definition":{"references":["local.task_definition"]},"timeouts":{"create":{"references":["var.timeouts.create","var.timeouts"]},"delete":{"references":["var.timeouts.delete","var.timeouts"]},"update":{"references":["var.timeouts.update","var.timeouts"]}},"triggers":{"references":["var.triggers"]},"wait_for_steady_state":{"references":["var.wait_for_steady_state"]}},"schema_version":1,"count_expression":{"references":["local.create_service","var.ignore_task_definition_changes"]},"depends_on":["aws_iam_role_policy_attachment.service"]},{"address":"aws_ecs_task_definition.this","mode":"managed","type":"aws_ecs_task_definition","name":"this","provider_config_key":"aws","expressions":{"container_definitions":{"references":["module.container_definition"]},"cpu":{"references":["var.cpu"]},"execution_role_arn":{"references":["aws_iam_role.task_exec[0].arn","aws_iam_role.task_exec[0]","aws_iam_role.task_exec","var.task_exec_iam_role_arn"]},"family":{"references":["var.family","var.name"]},"ipc_mode":{"references":["var.ipc_mode"]},"memory":{"references":["var.memory"]},"network_mode":{"references":["var.network_mode"]},"pid_mode":{"references":["var.pid_mode"]},"requires_compatibilities":{"references":["var.requires_compatibilities"]},"skip_destroy":{"references":["var.skip_destroy"]},"tags":{"references":["var.tags","var.task_tags"]},"task_role_arn":{"references":["aws_iam_role.tasks[0].arn","aws_iam_role.tasks[0]","aws_iam_role.tasks","var.tasks_iam_role_arn"]}},"schema_version":1,"count_expression":{"references":["local.create_task_definition"]},"depends_on":["aws_iam_role_policy_attachment.tasks","aws_iam_role_policy_attachment.task_exec","aws_iam_role_policy_attachment.task_exec_additional"]},{"address":"aws_ecs_task_set.ignore_task_definition","mode":"managed","type":"aws_ecs_task_set","name":"ignore_task_definition","provider_config_key":"aws","expressions":{"cluster":{"references":["var.cluster_arn"]},"external_id":{"references":["var.external_id"]},"force_delete":{"references":["var.force_delete"]},"launch_type":{"references":["var.capacity_provider_strategy","var.launch_type"]},"platform_version":{"references":["local.is_fargate","var.platform_version"]},"service":{"references":["aws_ecs_service.this[0].id","aws_ecs_service.this[0]","aws_ecs_service.this","aws_ecs_service.ignore_task_definition[0].id","aws_ecs_service.ignore_task_definition[0]","aws_ecs_service.ignore_task_definition"]},"tags":{"references":["var.tags","var.task_tags"]},"task_definition":{"references":["local.task_definition"]},"wait_until_stable":{"references":["var.wait_until_stable"]},"wait_until_stable_timeout":{"references":["var.wait_until_stable_timeout"]}},"schema_version":0,"count_expression":{"references":["local.create_task_definition","local.is_external_deployment","var.ignore_task_definition_changes"]}},{"address":"aws_ecs_task_set.this","mode":"managed","type":"aws_ecs_task_set","name":"this","provider_config_key":"aws","expressions":{"cluster":{"references":["var.cluster_arn"]},"external_id":{"references":["var.external_id"]},"force_delete":{"references":["var.force_delete"]},"launch_type":{"references":["var.capacity_provider_strategy","var.launch_type"]},"platform_version":{"references":["local.is_fargate","var.platform_version"]},"service":{"references":["aws_ecs_service.this[0].id","aws_ecs_service.this[0]","aws_ecs_service.this","aws_ecs_service.ignore_task_definition[0].id","aws_ecs_service.ignore_task_definition[0]","aws_ecs_service.ignore_task_definition"]},"tags":{"references":["var.tags","var.task_tags"]},"task_definition":{"references":["local.task_definition"]},"wait_until_stable":{"references":["var.wait_until_stable"]},"wait_until_stable_timeout":{"references":["var.wait_until_stable_timeout"]}},"schema_version":0,"count_expression":{"references":["local.create_task_definition","local.is_external_deployment","var.ignore_task_definition_changes"]}},{"address":"aws_iam_policy.service","mode":"managed","type":"aws_iam_policy","name":"service","provider_config_key":"aws","expressions":{"description":{"references":["var.iam_role_description"]},"name":{"references":["var.iam_role_use_name_prefix","local.iam_role_name"]},"name_prefix":{"references":["var.iam_role_use_name_prefix","local.iam_role_name"]},"policy":{"references":["data.aws_iam_policy_document.service[0].json","data.aws_iam_policy_document.service[0]","data.aws_iam_policy_document.service"]},"tags":{"references":["var.tags","var.iam_role_tags"]}},"schema_version":0,"count_expression":{"references":["local.create_iam_role"]}},{"address":"aws_iam_policy.task_exec","mode":"managed","type":"aws_iam_policy","name":"task_exec","provider_config_key":"aws","expressions":{"description":{"references":["var.task_exec_iam_role_description"]},"name":{"references":["var.task_exec_iam_role_use_name_prefix","local.task_exec_iam_role_name"]},"name_prefix":{"references":["var.task_exec_iam_role_use_name_prefix","local.task_exec_iam_role_name"]},"path":{"references":["var.task_exec_iam_policy_path"]},"policy":{"references":["data.aws_iam_policy_document.task_exec[0].json","data.aws_iam_policy_document.task_exec[0]","data.aws_iam_policy_document.task_exec"]},"tags":{"references":["var.tags","var.task_exec_iam_role_tags"]}},"schema_version":0,"count_expression":{"references":["local.create_task_exec_policy"]}},{"address":"aws_iam_role.service","mode":"managed","type":"aws_iam_role","name":"service","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.service_assume[0].json","data.aws_iam_policy_document.service_assume[0]","data.aws_iam_policy_document.service_assume"]},"description":{"references":["var.iam_role_description"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.iam_role_use_name_prefix","local.iam_role_name"]},"name_prefix":{"references":["var.iam_role_use_name_prefix","local.iam_role_name"]},"path":{"references":["var.iam_role_path"]},"permissions_boundary":{"references":["var.iam_role_permissions_boundary"]},"tags":{"references":["var.tags","var.iam_role_tags"]}},"schema_version":0,"count_expression":{"references":["local.create_iam_role"]}},{"address":"aws_iam_role.task_exec","mode":"managed","type":"aws_iam_role","name":"task_exec","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.task_exec_assume[0].json","data.aws_iam_policy_document.task_exec_assume[0]","data.aws_iam_policy_document.task_exec_assume"]},"description":{"references":["var.task_exec_iam_role_description","local.task_exec_iam_role_name"]},"force_detach_policies":{"constant_value":true},"max_session_duration":{"references":["var.task_exec_iam_role_max_session_duration"]},"name":{"references":["var.task_exec_iam_role_use_name_prefix","local.task_exec_iam_role_name"]},"name_prefix":{"references":["var.task_exec_iam_role_use_name_prefix","local.task_exec_iam_role_name"]},"path":{"references":["var.task_exec_iam_role_path"]},"permissions_boundary":{"references":["var.task_exec_iam_role_permissions_boundary"]},"tags":{"references":["var.tags","var.task_exec_iam_role_tags"]}},"schema_version":0,"count_expression":{"references":["local.create_task_exec_iam_role"]}},{"address":"aws_iam_role.tasks","mode":"managed","type":"aws_iam_role","name":"tasks","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.tasks_assume[0].json","data.aws_iam_policy_document.tasks_assume[0]","data.aws_iam_policy_document.tasks_assume"]},"description":{"references":["var.tasks_iam_role_description"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.tasks_iam_role_use_name_prefix","local.tasks_iam_role_name"]},"name_prefix":{"references":["var.tasks_iam_role_use_name_prefix","local.tasks_iam_role_name"]},"path":{"references":["var.tasks_iam_role_path"]},"permissions_boundary":{"references":["var.tasks_iam_role_permissions_boundary"]},"tags":{"references":["var.tags","var.tasks_iam_role_tags"]}},"schema_version":0,"count_expression":{"references":["local.create_tasks_iam_role"]}},{"address":"aws_iam_role_policy.tasks","mode":"managed","type":"aws_iam_role_policy","name":"tasks","provider_config_key":"aws","expressions":{"name":{"references":["var.tasks_iam_role_use_name_prefix","local.tasks_iam_role_name"]},"name_prefix":{"references":["var.tasks_iam_role_use_name_prefix","local.tasks_iam_role_name"]},"policy":{"references":["data.aws_iam_policy_document.tasks[0].json","data.aws_iam_policy_document.tasks[0]","data.aws_iam_policy_document.tasks"]},"role":{"references":["aws_iam_role.tasks[0].id","aws_iam_role.tasks[0]","aws_iam_role.tasks"]}},"schema_version":0,"count_expression":{"references":["local.create_tasks_iam_role","var.tasks_iam_role_statements","var.enable_execute_command"]}},{"address":"aws_iam_role_policy_attachment.service","mode":"managed","type":"aws_iam_role_policy_attachment","name":"service","provider_config_key":"aws","expressions":{"policy_arn":{"references":["aws_iam_policy.service[0].arn","aws_iam_policy.service[0]","aws_iam_policy.service"]},"role":{"references":["aws_iam_role.service[0].name","aws_iam_role.service[0]","aws_iam_role.service"]}},"schema_version":0,"count_expression":{"references":["local.create_iam_role"]}},{"address":"aws_iam_role_policy_attachment.task_exec","mode":"managed","type":"aws_iam_role_policy_attachment","name":"task_exec","provider_config_key":"aws","expressions":{"policy_arn":{"references":["aws_iam_policy.task_exec[0].arn","aws_iam_policy.task_exec[0]","aws_iam_policy.task_exec"]},"role":{"references":["aws_iam_role.task_exec[0].name","aws_iam_role.task_exec[0]","aws_iam_role.task_exec"]}},"schema_version":0,"count_expression":{"references":["local.create_task_exec_policy"]}},{"address":"aws_iam_role_policy_attachment.task_exec_additional","mode":"managed","type":"aws_iam_role_policy_attachment","name":"task_exec_additional","provider_config_key":"aws","expressions":{"policy_arn":{"references":["each.value"]},"role":{"references":["aws_iam_role.task_exec[0].name","aws_iam_role.task_exec[0]","aws_iam_role.task_exec"]}},"schema_version":0,"for_each_expression":{"references":["var.task_exec_iam_role_policies","local.create_task_exec_iam_role"]}},{"address":"aws_iam_role_policy_attachment.tasks","mode":"managed","type":"aws_iam_role_policy_attachment","name":"tasks","provider_config_key":"aws","expressions":{"policy_arn":{"references":["each.value"]},"role":{"references":["aws_iam_role.tasks[0].name","aws_iam_role.tasks[0]","aws_iam_role.tasks"]}},"schema_version":0,"for_each_expression":{"references":["var.tasks_iam_role_policies","local.create_tasks_iam_role"]}},{"address":"aws_security_group.this","mode":"managed","type":"aws_security_group","name":"this","provider_config_key":"aws","expressions":{"description":{"references":["var.security_group_description"]},"name":{"references":["var.security_group_use_name_prefix","local.security_group_name"]},"name_prefix":{"references":["var.security_group_use_name_prefix","local.security_group_name"]},"tags":{"references":["var.tags","local.security_group_name","var.security_group_tags"]},"vpc_id":{"references":["data.aws_subnet.this[0].vpc_id","data.aws_subnet.this[0]","data.aws_subnet.this"]}},"schema_version":1,"count_expression":{"references":["local.create_security_group"]}},{"address":"aws_security_group_rule.this","mode":"managed","type":"aws_security_group_rule","name":"this","provider_config_key":"aws","expressions":{"cidr_blocks":{"references":["each.value"]},"description":{"references":["each.value"]},"from_port":{"references":["each.value.from_port","each.value"]},"ipv6_cidr_blocks":{"references":["each.value"]},"prefix_list_ids":{"references":["each.value"]},"protocol":{"references":["each.value.protocol","each.value"]},"security_group_id":{"references":["aws_security_group.this[0].id","aws_security_group.this[0]","aws_security_group.this"]},"self":{"references":["each.value"]},"source_security_group_id":{"references":["each.value"]},"to_port":{"references":["each.value.to_port","each.value"]},"type":{"references":["each.value.type","each.value"]}},"schema_version":2,"for_each_expression":{"references":["var.security_group_rules","local.create_security_group"]}},{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_config_key":"aws","schema_version":0},{"address":"data.aws_ecs_task_definition.this","mode":"data","type":"aws_ecs_task_definition","name":"this","provider_config_key":"aws","expressions":{"task_definition":{"references":["aws_ecs_task_definition.this[0].family","aws_ecs_task_definition.this[0]","aws_ecs_task_definition.this"]}},"schema_version":0,"count_expression":{"references":["local.create_task_definition"]},"depends_on":["aws_ecs_task_definition.this"]},{"address":"data.aws_iam_policy_document.service","mode":"data","type":"aws_iam_policy_document","name":"service","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["ec2:Describe*","elasticloadbalancing:DeregisterInstancesFromLoadBalancer","elasticloadbalancing:DeregisterTargets","elasticloadbalancing:Describe*","elasticloadbalancing:RegisterInstancesWithLoadBalancer","elasticloadbalancing:RegisterTargets"]},"resources":{"constant_value":["*"]},"sid":{"constant_value":"ECSService"}}]},"schema_version":0,"count_expression":{"references":["local.create_iam_role"]}},{"address":"data.aws_iam_policy_document.service_assume","mode":"data","type":"aws_iam_policy_document","name":"service_assume","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"principals":[{"identifiers":{"constant_value":["ecs.amazonaws.com"]},"type":{"constant_value":"Service"}}],"sid":{"constant_value":"ECSServiceAssumeRole"}}]},"schema_version":0,"count_expression":{"references":["local.create_iam_role"]}},{"address":"data.aws_iam_policy_document.task_exec","mode":"data","type":"aws_iam_policy_document","name":"task_exec","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["logs:CreateLogStream","logs:PutLogEvents"]},"resources":{"constant_value":["*"]},"sid":{"constant_value":"Logs"}},{"actions":{"constant_value":["ecr:GetAuthorizationToken","ecr:BatchCheckLayerAvailability","ecr:GetDownloadUrlForLayer","ecr:BatchGetImage"]},"resources":{"constant_value":["*"]},"sid":{"constant_value":"ECR"}}]},"schema_version":0,"count_expression":{"references":["local.create_task_exec_policy"]}},{"address":"data.aws_iam_policy_document.task_exec_assume","mode":"data","type":"aws_iam_policy_document","name":"task_exec_assume","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"principals":[{"identifiers":{"constant_value":["ecs-tasks.amazonaws.com"]},"type":{"constant_value":"Service"}}],"sid":{"constant_value":"ECSTaskExecutionAssumeRole"}}]},"schema_version":0,"count_expression":{"references":["local.create_task_exec_iam_role"]}},{"address":"data.aws_iam_policy_document.tasks","mode":"data","type":"aws_iam_policy_document","name":"tasks","provider_config_key":"aws","schema_version":0,"count_expression":{"references":["local.create_tasks_iam_role","var.tasks_iam_role_statements","var.enable_execute_command"]}},{"address":"data.aws_iam_policy_document.tasks_assume","mode":"data","type":"aws_iam_policy_document","name":"tasks_assume","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"condition":[{"test":{"constant_value":"ArnLike"},"values":{"references":["local.partition","local.region","local.account_id"]},"variable":{"constant_value":"aws:SourceArn"}},{"test":{"constant_value":"StringEquals"},"values":{"references":["local.account_id"]},"variable":{"constant_value":"aws:SourceAccount"}}],"principals":[{"identifiers":{"constant_value":["ecs-tasks.amazonaws.com"]},"type":{"constant_value":"Service"}}],"sid":{"constant_value":"ECSTasksAssumeRole"}}]},"schema_version":0,"count_expression":{"references":["local.create_tasks_iam_role"]}},{"address":"data.aws_partition.current","mode":"data","type":"aws_partition","name":"current","provider_config_key":"aws","schema_version":0},{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_config_key":"aws","schema_version":0},{"address":"data.aws_subnet.this","mode":"data","type":"aws_subnet","name":"this","provider_config_key":"aws","expressions":{"id":{"references":["var.subnet_ids"]}},"schema_version":0,"count_expression":{"references":["local.create_security_group"]}}],"module_calls":{"container_definition":{"source":"../container-definition","expressions":{"cloudwatch_log_group_kms_key_id":{"references":["each.value.cloudwatch_log_group_kms_key_id","each.value","var.container_definition_defaults.cloudwatch_log_group_kms_key_id","var.container_definition_defaults"]},"cloudwatch_log_group_name":{"references":["each.value.cloudwatch_log_group_name","each.value","var.container_definition_defaults.cloudwatch_log_group_name","var.container_definition_defaults"]},"cloudwatch_log_group_retention_in_days":{"references":["each.value.cloudwatch_log_group_retention_in_days","each.value","var.container_definition_defaults.cloudwatch_log_group_retention_in_days","var.container_definition_defaults"]},"cloudwatch_log_group_use_name_prefix":{"references":["each.value.cloudwatch_log_group_use_name_prefix","each.value","var.container_definition_defaults.cloudwatch_log_group_use_name_prefix","var.container_definition_defaults"]},"command":{"references":["each.value.command","each.value","var.container_definition_defaults.command","var.container_definition_defaults"]},"cpu":{"references":["each.value.cpu","each.value","var.container_definition_defaults.cpu","var.container_definition_defaults"]},"create_cloudwatch_log_group":{"references":["each.value.create_cloudwatch_log_group","each.value","var.container_definition_defaults.create_cloudwatch_log_group","var.container_definition_defaults"]},"dependencies":{"references":["each.value.dependencies","each.value","var.container_definition_defaults.dependencies","var.container_definition_defaults"]},"disable_networking":{"references":["each.value.disable_networking","each.value","var.container_definition_defaults.disable_networking","var.container_definition_defaults"]},"dns_search_domains":{"references":["each.value.dns_search_domains","each.value","var.container_definition_defaults.dns_search_domains","var.container_definition_defaults"]},"dns_servers":{"references":["each.value.dns_servers","each.value","var.container_definition_defaults.dns_servers","var.container_definition_defaults"]},"docker_labels":{"references":["each.value.docker_labels","each.value","var.container_definition_defaults.docker_labels","var.container_definition_defaults"]},"docker_security_options":{"references":["each.value.docker_security_options","each.value","var.container_definition_defaults.docker_security_options","var.container_definition_defaults"]},"enable_cloudwatch_logging":{"references":["each.value.enable_cloudwatch_logging","each.value","var.container_definition_defaults.enable_cloudwatch_logging","var.container_definition_defaults"]},"enable_execute_command":{"references":["each.value.enable_execute_command","each.value","var.container_definition_defaults.enable_execute_command","var.container_definition_defaults","var.enable_execute_command"]},"entrypoint":{"references":["each.value.entrypoint","each.value","var.container_definition_defaults.entrypoint","var.container_definition_defaults"]},"environment":{"references":["each.value.environment","each.value","var.container_definition_defaults.environment","var.container_definition_defaults"]},"environment_files":{"references":["each.value.environment_files","each.value","var.container_definition_defaults.environment_files","var.container_definition_defaults"]},"essential":{"references":["each.value.essential","each.value","var.container_definition_defaults.essential","var.container_definition_defaults"]},"extra_hosts":{"references":["each.value.extra_hosts","each.value","var.container_definition_defaults.extra_hosts","var.container_definition_defaults"]},"firelens_configuration":{"references":["each.value.firelens_configuration","each.value","var.container_definition_defaults.firelens_configuration","var.container_definition_defaults"]},"health_check":{"references":["each.value.health_check","each.value","var.container_definition_defaults.health_check","var.container_definition_defaults"]},"hostname":{"references":["each.value.hostname","each.value","var.container_definition_defaults.hostname","var.container_definition_defaults"]},"image":{"references":["each.value.image","each.value","var.container_definition_defaults.image","var.container_definition_defaults"]},"interactive":{"references":["each.value.interactive","each.value","var.container_definition_defaults.interactive","var.container_definition_defaults"]},"links":{"references":["each.value.links","each.value","var.container_definition_defaults.links","var.container_definition_defaults"]},"linux_parameters":{"references":["each.value.linux_parameters","each.value","var.container_definition_defaults.linux_parameters","var.container_definition_defaults"]},"log_configuration":{"references":["each.value.log_configuration","each.value","var.container_definition_defaults.log_configuration","var.container_definition_defaults"]},"memory":{"references":["each.value.memory","each.value","var.container_definition_defaults.memory","var.container_definition_defaults"]},"memory_reservation":{"references":["each.value.memory_reservation","each.value","var.container_definition_defaults.memory_reservation","var.container_definition_defaults"]},"mount_points":{"references":["each.value.mount_points","each.value","var.container_definition_defaults.mount_points","var.container_definition_defaults"]},"name":{"references":["each.value.name","each.value","each.key"]},"operating_system_family":{"references":["var.runtime_platform.operating_system_family","var.runtime_platform"]},"port_mappings":{"references":["each.value.port_mappings","each.value","var.container_definition_defaults.port_mappings","var.container_definition_defaults"]},"privileged":{"references":["each.value.privileged","each.value","var.container_definition_defaults.privileged","var.container_definition_defaults"]},"pseudo_terminal":{"references":["each.value.pseudo_terminal","each.value","var.container_definition_defaults.pseudo_terminal","var.container_definition_defaults"]},"readonly_root_filesystem":{"references":["each.value.readonly_root_filesystem","each.value","var.container_definition_defaults.readonly_root_filesystem","var.container_definition_defaults"]},"repository_credentials":{"references":["each.value.repository_credentials","each.value","var.container_definition_defaults.repository_credentials","var.container_definition_defaults"]},"resource_requirements":{"references":["each.value.resource_requirements","each.value","var.container_definition_defaults.resource_requirements","var.container_definition_defaults"]},"secrets":{"references":["each.value.secrets","each.value","var.container_definition_defaults.secrets","var.container_definition_defaults"]},"service":{"references":["var.name"]},"start_timeout":{"references":["each.value.start_timeout","each.value","var.container_definition_defaults.start_timeout","var.container_definition_defaults"]},"stop_timeout":{"references":["each.value.stop_timeout","each.value","var.container_definition_defaults.stop_timeout","var.container_definition_defaults"]},"system_controls":{"references":["each.value.system_controls","each.value","var.container_definition_defaults.system_controls","var.container_definition_defaults"]},"tags":{"references":["var.tags"]},"ulimits":{"references":["each.value.ulimits","each.value","var.container_definition_defaults.ulimits","var.container_definition_defaults"]},"user":{"references":["each.value.user","each.value","var.container_definition_defaults.user","var.container_definition_defaults"]},"volumes_from":{"references":["each.value.volumes_from","each.value","var.container_definition_defaults.volumes_from","var.container_definition_defaults"]},"working_directory":{"references":["each.value.working_directory","each.value","var.container_definition_defaults.working_directory","var.container_definition_defaults"]}},"for_each_expression":{"references":["var.container_definitions","local.create_task_definition"]},"module":{"outputs":{"cloudwatch_log_group_arn":{"expression":{"references":["aws_cloudwatch_log_group.this[0].arn","aws_cloudwatch_log_group.this[0]","aws_cloudwatch_log_group.this"]},"description":"ARN of CloudWatch log group created"},"cloudwatch_log_group_name":{"expression":{"references":["aws_cloudwatch_log_group.this[0].name","aws_cloudwatch_log_group.this[0]","aws_cloudwatch_log_group.this"]},"description":"Name of CloudWatch log group created"},"container_definition":{"expression":{"references":["local.container_definition"]},"description":"Container definition"}},"resources":[{"address":"aws_cloudwatch_log_group.this","mode":"managed","type":"aws_cloudwatch_log_group","name":"this","provider_config_key":"aws","expressions":{"kms_key_id":{"references":["var.cloudwatch_log_group_kms_key_id"]},"name":{"references":["var.cloudwatch_log_group_use_name_prefix","local.log_group_name"]},"name_prefix":{"references":["var.cloudwatch_log_group_use_name_prefix","local.log_group_name"]},"retention_in_days":{"references":["var.cloudwatch_log_group_retention_in_days"]},"tags":{"references":["var.tags"]}},"schema_version":0,"count_expression":{"references":["var.create_cloudwatch_log_group","var.enable_cloudwatch_logging"]}},{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_config_key":"aws","schema_version":0}],"variables":{"cloudwatch_log_group_kms_key_id":{"default":null,"description":"If a KMS Key ARN is set, this key will be used to encrypt the corresponding log group. Please be sure that the KMS Key has an appropriate key policy (https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/encrypt-log-data-kms.html)"},"cloudwatch_log_group_name":{"default":null,"description":"Custom name of CloudWatch log group for a service associated with the container definition"},"cloudwatch_log_group_retention_in_days":{"default":30,"description":"Number of days to retain log events. Default is 30 days"},"cloudwatch_log_group_use_name_prefix":{"default":false,"description":"Determines whether the log group name should be used as a prefix"},"command":{"default":[],"description":"The command that's passed to the container"},"cpu":{"default":null,"description":"The number of cpu units to reserve for the container. This is optional for tasks using Fargate launch type and the total amount of `cpu` of all containers in a task will need to be lower than the task-level cpu value"},"create_cloudwatch_log_group":{"default":true,"description":"Determines whether a log group is created by this module. If not, AWS will automatically create one if logging is enabled"},"dependencies":{"default":[],"description":"The dependencies defined for container startup and shutdown. A container can contain multiple dependencies. When a dependency is defined for container startup, for container shutdown it is reversed. The condition can be one of START, COMPLETE, SUCCESS or HEALTHY"},"disable_networking":{"default":null,"description":"When this parameter is true, networking is disabled within the container"},"dns_search_domains":{"default":[],"description":"Container DNS search domains. A list of DNS search domains that are presented to the container"},"dns_servers":{"default":[],"description":"Container DNS servers. This is a list of strings specifying the IP addresses of the DNS servers"},"docker_labels":{"default":{},"description":"A key/value map of labels to add to the container"},"docker_security_options":{"default":[],"description":"A list of strings to provide custom labels for SELinux and AppArmor multi-level security systems. This field isn't valid for containers in tasks using the Fargate launch type"},"enable_cloudwatch_logging":{"default":true,"description":"Determines whether CloudWatch logging is configured for this container definition. Set to `false` to use other logging drivers"},"enable_execute_command":{"default":false,"description":"Specifies whether to enable Amazon ECS Exec for the tasks within the service"},"entrypoint":{"default":[],"description":"The entry point that is passed to the container"},"environment":{"default":[],"description":"The environment variables to pass to the container"},"environment_files":{"default":[],"description":"A list of files containing the environment variables to pass to a container"},"essential":{"default":null,"description":"If the `essential` parameter of a container is marked as `true`, and that container fails or stops for any reason, all other containers that are part of the task are stopped"},"extra_hosts":{"default":[],"description":"A list of hostnames and IP address mappings to append to the `/etc/hosts` file on the container"},"firelens_configuration":{"default":{},"description":"The FireLens configuration for the container. This is used to specify and configure a log router for container logs. For more information, see [Custom Log Routing](https://docs.aws.amazon.com/AmazonECS/latest/developerguide/using_firelens.html) in the Amazon Elastic Container Service Developer Guide"},"health_check":{"default":{},"description":"The container health check command and associated configuration parameters for the container. See [HealthCheck](https://docs.aws.amazon.com/AmazonECS/latest/APIReference/API_HealthCheck.html)"},"hostname":{"default":null,"description":"The hostname to use for your container"},"image":{"default":null,"description":"The image used to start a container. This string is passed directly to the Docker daemon. By default, images in the Docker Hub registry are available. Other repositories are specified with either `repository-url/image:tag` or `repository-url/image@digest`"},"interactive":{"default":false,"description":"When this parameter is `true`, you can deploy containerized applications that require `stdin` or a `tty` to be allocated"},"links":{"default":[],"description":"The links parameter allows containers to communicate with each other without the need for port mappings. This parameter is only supported if the network mode of a task definition is `bridge`"},"linux_parameters":{"default":{},"description":"Linux-specific modifications that are applied to the container, such as Linux kernel capabilities. For more information see [KernelCapabilities](https://docs.aws.amazon.com/AmazonECS/latest/APIReference/API_KernelCapabilities.html)"},"log_configuration":{"default":{},"description":"The log configuration for the container. For more information see [LogConfiguration](https://docs.aws.amazon.com/AmazonECS/latest/APIReference/API_LogConfiguration.html)"},"memory":{"default":null,"description":"The amount (in MiB) of memory to present to the container. If your container attempts to exceed the memory specified here, the container is killed. The total amount of memory reserved for all containers within a task must be lower than the task `memory` value, if one is specified"},"memory_reservation":{"default":null,"description":"The soft limit (in MiB) of memory to reserve for the container. When system memory is under heavy contention, Docker attempts to keep the container memory to this soft limit. However, your container can consume more memory when it needs to, up to either the hard limit specified with the `memory` parameter (if applicable), or all of the available memory on the container instance"},"mount_points":{"default":[],"description":"The mount points for data volumes in your container"},"name":{"default":null,"description":"The name of a container. If you're linking multiple containers together in a task definition, the name of one container can be entered in the links of another container to connect the containers. Up to 255 letters (uppercase and lowercase), numbers, underscores, and hyphens are allowed"},"operating_system_family":{"default":"LINUX","description":"The OS family for task"},"port_mappings":{"default":[],"description":"The list of port mappings for the container. Port mappings allow containers to access ports on the host container instance to send or receive traffic. For task definitions that use the awsvpc network mode, only specify the containerPort. The hostPort can be left blank or it must be the same value as the containerPort"},"privileged":{"default":false,"description":"When this parameter is true, the container is given elevated privileges on the host container instance (similar to the root user)"},"pseudo_terminal":{"default":false,"description":"When this parameter is true, a `TTY` is allocated"},"readonly_root_filesystem":{"default":true,"description":"When this parameter is true, the container is given read-only access to its root file system"},"repository_credentials":{"default":{},"description":"Container repository credentials; required when using a private repo.  This map currently supports a single key; \"credentialsParameter\", which should be the ARN of a Secrets Manager's secret holding the credentials"},"resource_requirements":{"default":[],"description":"The type and amount of a resource to assign to a container. The only supported resource is a GPU"},"secrets":{"default":[],"description":"The secrets to pass to the container. For more information, see [Specifying Sensitive Data](https://docs.aws.amazon.com/AmazonECS/latest/developerguide/specifying-sensitive-data.html) in the Amazon Elastic Container Service Developer Guide"},"service":{"default":"","description":"The name of the service that the container definition is associated with"},"start_timeout":{"default":30,"description":"Time duration (in seconds) to wait before giving up on resolving dependencies for a container"},"stop_timeout":{"default":120,"description":"Time duration (in seconds) to wait before the container is forcefully killed if it doesn't exit normally on its own"},"system_controls":{"default":[],"description":"A list of namespaced kernel parameters to set in the container"},"tags":{"default":{},"description":"A map of tags to add to all resources"},"ulimits":{"default":[],"description":"A list of ulimits to set in the container. If a ulimit value is specified in a task definition, it overrides the default values set by Docker"},"user":{"default":null,"description":"The user to run as inside the container. Can be any of these formats: user, user:group, uid, uid:gid, user:gid, uid:group. The default (null) will use the container's configured `USER` directive or root if not set"},"volumes_from":{"default":[],"description":"Data volumes to mount from another container"},"working_directory":{"default":null,"description":"The working directory to run commands inside the container"}}}}},"variables":{"alarms":{"default":{},"description":"Information about the CloudWatch alarms"},"assign_public_ip":{"default":false,"description":"Assign a public IP address to the ENI (Fargate launch type only)"},"autoscaling_max_capacity":{"default":10,"description":"Maximum number of tasks to run in your service"},"autoscaling_min_capacity":{"default":1,"description":"Minimum number of tasks to run in your service"},"autoscaling_policies":{"default":{"cpu":{"policy_type":"TargetTrackingScaling","target_tracking_scaling_policy_configuration":{"predefined_metric_specification":{"predefined_metric_type":"ECSServiceAverageCPUUtilization"}}},"memory":{"policy_type":"TargetTrackingScaling","target_tracking_scaling_policy_configuration":{"predefined_metric_specification":{"predefined_metric_type":"ECSServiceAverageMemoryUtilization"}}}},"description":"Map of autoscaling policies to create for the service"},"autoscaling_scheduled_actions":{"default":{},"description":"Map of autoscaling scheduled actions to create for the service"},"capacity_provider_strategy":{"default":{},"description":"Capacity provider strategies to use for the service. Can be one or more"},"cluster_arn":{"default":"","description":"ARN of the ECS cluster where the resources will be provisioned"},"container_definition_defaults":{"default":{},"description":"A map of default values for [container definitions](http://docs.aws.amazon.com/AmazonECS/latest/APIReference/API_ContainerDefinition.html) created by `container_definitions`"},"container_definitions":{"default":{},"description":"A map of valid [container definitions](http://docs.aws.amazon.com/AmazonECS/latest/APIReference/API_ContainerDefinition.html). Please note that you should only provide values that are part of the container definition document"},"cpu":{"default":1024,"description":"Number of cpu units used by the task. If the `requires_compatibilities` is `FARGATE` this field is required"},"create":{"default":true,"description":"Determines whether resources will be created (affects all resources)"},"create_iam_role":{"default":true,"description":"Determines whether the ECS service IAM role should be created"},"create_security_group":{"default":true,"description":"Determines if a security group is created"},"create_service":{"default":true,"description":"Determines whether service resource will be created (set to `false` in case you want to create task definition only)"},"create_task_definition":{"default":true,"description":"Determines whether to create a task definition or use existing/provided"},"create_task_exec_iam_role":{"default":true,"description":"Determines whether the ECS task definition IAM role should be created"},"create_task_exec_policy":{"default":true,"description":"Determines whether the ECS task definition IAM policy should be created. This includes permissions included in AmazonECSTaskExecutionRolePolicy as well as access to secrets and SSM parameters"},"create_tasks_iam_role":{"default":true,"description":"Determines whether the ECS tasks IAM role should be created"},"deployment_circuit_breaker":{"default":{},"description":"Configuration block for deployment circuit breaker"},"deployment_controller":{"default":{},"description":"Configuration block for deployment controller configuration"},"deployment_maximum_percent":{"default":200,"description":"Upper limit (as a percentage of the service's `desired_count`) of the number of running tasks that can be running in a service during a deployment"},"deployment_minimum_healthy_percent":{"default":66,"description":"Lower limit (as a percentage of the service's `desired_count`) of the number of running tasks that must remain running and healthy in a service during a deployment"},"desired_count":{"default":1,"description":"Number of instances of the task definition to place and keep running"},"enable_autoscaling":{"default":true,"description":"Determines whether to enable autoscaling for the service"},"enable_ecs_managed_tags":{"default":true,"description":"Specifies whether to enable Amazon ECS managed tags for the tasks within the service"},"enable_execute_command":{"default":false,"description":"Specifies whether to enable Amazon ECS Exec for the tasks within the service"},"ephemeral_storage":{"default":{},"description":"The amount of ephemeral storage to allocate for the task. This parameter is used to expand the total amount of ephemeral storage available, beyond the default amount, for tasks hosted on AWS Fargate"},"external_id":{"default":null,"description":"The external ID associated with the task set"},"family":{"default":null,"description":"A unique name for your task definition"},"force_delete":{"default":null,"description":"Whether to allow deleting the task set without waiting for scaling down to 0"},"force_new_deployment":{"default":true,"description":"Enable to force a new task deployment of the service. This can be used to update tasks to use a newer Docker image with same image/tag combination, roll Fargate tasks onto a newer platform version, or immediately deploy `ordered_placement_strategy` and `placement_constraints` updates"},"health_check_grace_period_seconds":{"default":null,"description":"Seconds to ignore failing load balancer health checks on newly instantiated tasks to prevent premature shutdown, up to 2147483647. Only valid for services configured to use load balancers"},"iam_role_arn":{"default":null,"description":"Existing IAM role ARN"},"iam_role_description":{"default":null,"description":"Description of the role"},"iam_role_name":{"default":null,"description":"Name to use on IAM role created"},"iam_role_path":{"default":null,"description":"IAM role path"},"iam_role_permissions_boundary":{"default":null,"description":"ARN of the policy that is used to set the permissions boundary for the IAM role"},"iam_role_statements":{"default":{},"description":"A map of IAM policy [statements](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/iam_policy_document#statement) for custom permission usage"},"iam_role_tags":{"default":{},"description":"A map of additional tags to add to the IAM role created"},"iam_role_use_name_prefix":{"default":true,"description":"Determines whether the IAM role name (`iam_role_name`) is used as a prefix"},"ignore_task_definition_changes":{"default":false,"description":"Whether changes to service `task_definition` changes should be ignored"},"inference_accelerator":{"default":{},"description":"Configuration block(s) with Inference Accelerators settings"},"ipc_mode":{"default":null,"description":"IPC resource namespace to be used for the containers in the task The valid values are `host`, `task`, and `none`"},"launch_type":{"default":"FARGATE","description":"Launch type on which to run your service. The valid values are `EC2`, `FARGATE`, and `EXTERNAL`. Defaults to `FARGATE`"},"load_balancer":{"default":{},"description":"Configuration block for load balancers"},"memory":{"default":2048,"description":"Amount (in MiB) of memory used by the task. If the `requires_compatibilities` is `FARGATE` this field is required"},"name":{"default":null,"description":"Name of the service (up to 255 letters, numbers, hyphens, and underscores)"},"network_mode":{"default":"awsvpc","description":"Docker networking mode to use for the containers in the task. Valid values are `none`, `bridge`, `awsvpc`, and `host`"},"ordered_placement_strategy":{"default":{},"description":"Service level strategy rules that are taken into consideration during task placement. List from top to bottom in order of precedence"},"pid_mode":{"default":null,"description":"Process namespace to use for the containers in the task. The valid values are `host` and `task`"},"placement_constraints":{"default":{},"description":"Configuration block for rules that are taken into consideration during task placement (up to max of 10). This is set at the service, see `task_definition_placement_constraints` for setting at the task definition"},"platform_version":{"default":null,"description":"Platform version on which to run your service. Only applicable for `launch_type` set to `FARGATE`. Defaults to `LATEST`"},"propagate_tags":{"default":null,"description":"Specifies whether to propagate the tags from the task definition or the service to the tasks. The valid values are `SERVICE` and `TASK_DEFINITION`"},"proxy_configuration":{"default":{},"description":"Configuration block for the App Mesh proxy"},"requires_compatibilities":{"default":["FARGATE"],"description":"Set of launch types required by the task. The valid values are `EC2` and `FARGATE`"},"runtime_platform":{"default":{"cpu_architecture":"X86_64","operating_system_family":"LINUX"},"description":"Configuration block for `runtime_platform` that containers in your task may use"},"scale":{"default":{},"description":"A floating-point percentage of the desired number of tasks to place and keep running in the task set"},"scheduling_strategy":{"default":null,"description":"Scheduling strategy to use for the service. The valid values are `REPLICA` and `DAEMON`. Defaults to `REPLICA`"},"security_group_description":{"default":null,"description":"Description of the security group created"},"security_group_ids":{"default":[],"description":"List of security groups to associate with the task or service"},"security_group_name":{"default":null,"description":"Name to use on security group created"},"security_group_rules":{"default":{},"description":"Security group rules to add to the security group created"},"security_group_tags":{"default":{},"description":"A map of additional tags to add to the security group created"},"security_group_use_name_prefix":{"default":true,"description":"Determines whether the security group name (`security_group_name`) is used as a prefix"},"service_connect_configuration":{"default":{},"description":"The ECS Service Connect configuration for this service to discover and connect to services, and be discovered by, and connected from, other services within a namespace"},"service_registries":{"default":{},"description":"Service discovery registries for the service"},"service_tags":{"default":{},"description":"A map of additional tags to add to the service"},"skip_destroy":{"default":null,"description":"If true, the task is not deleted when the service is deleted"},"subnet_ids":{"default":[],"description":"List of subnets to associate with the task or service"},"tags":{"default":{},"description":"A map of tags to add to all resources"},"task_definition_arn":{"default":null,"description":"Existing task definition ARN. Required when `create_task_definition` is `false`"},"task_definition_placement_constraints":{"default":{},"description":"Configuration block for rules that are taken into consideration during task placement (up to max of 10). This is set at the task definition, see `placement_constraints` for setting at the service"},"task_exec_iam_policy_path":{"default":null,"description":"Path for the iam role"},"task_exec_iam_role_arn":{"default":null,"description":"Existing IAM role ARN"},"task_exec_iam_role_description":{"default":null,"description":"Description of the role"},"task_exec_iam_role_max_session_duration":{"default":null,"description":"Maximum session duration (in seconds) for ECS task execution role. Default is 3600."},"task_exec_iam_role_name":{"default":null,"description":"Name to use on IAM role created"},"task_exec_iam_role_path":{"default":null,"description":"IAM role path"},"task_exec_iam_role_permissions_boundary":{"default":null,"description":"ARN of the policy that is used to set the permissions boundary for the IAM role"},"task_exec_iam_role_policies":{"default":{},"description":"Map of IAM role policy ARNs to attach to the IAM role"},"task_exec_iam_role_tags":{"default":{},"description":"A map of additional tags to add to the IAM role created"},"task_exec_iam_role_use_name_prefix":{"default":true,"description":"Determines whether the IAM role name (`task_exec_iam_role_name`) is used as a prefix"},"task_exec_iam_statements":{"default":{},"description":"A map of IAM policy [statements](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/iam_policy_document#statement) for custom permission usage"},"task_exec_secret_arns":{"default":["arn:aws:secretsmanager:*:*:secret:*"],"description":"List of SecretsManager secret ARNs the task execution role will be permitted to get/read"},"task_exec_ssm_param_arns":{"default":["arn:aws:ssm:*:*:parameter/*"],"description":"List of SSM parameter ARNs the task execution role will be permitted to get/read"},"task_tags":{"default":{},"description":"A map of additional tags to add to the task definition/set created"},"tasks_iam_role_arn":{"default":null,"description":"Existing IAM role ARN"},"tasks_iam_role_description":{"default":null,"description":"Description of the role"},"tasks_iam_role_name":{"default":null,"description":"Name to use on IAM role created"},"tasks_iam_role_path":{"default":null,"description":"IAM role path"},"tasks_iam_role_permissions_boundary":{"default":null,"description":"ARN of the policy that is used to set the permissions boundary for the IAM role"},"tasks_iam_role_policies":{"default":{},"description":"Map of IAM role policy ARNs to attach to the IAM role"},"tasks_iam_role_statements":{"default":{},"description":"A map of IAM policy [statements](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/iam_policy_document#statement) for custom permission usage"},"tasks_iam_role_tags":{"default":{},"description":"A map of additional tags to add to the IAM role created"},"tasks_iam_role_use_name_prefix":{"default":true,"description":"Determines whether the IAM role name (`tasks_iam_role_name`) is used as a prefix"},"timeouts":{"default":{},"description":"Create, update, and delete timeout configurations for the service"},"triggers":{"default":{},"description":"Map of arbitrary keys and values that, when changed, will trigger an in-place update (redeployment). Useful with `timestamp()`"},"volume":{"default":{},"description":"Configuration block for volumes that containers in your task may use"},"wait_for_steady_state":{"default":null,"description":"If true, Terraform will wait for the service to reach a steady state before continuing. Default is `false`"},"wait_until_stable":{"default":null,"description":"Whether terraform should wait until the task set has reached `STEADY_STATE`"},"wait_until_stable_timeout":{"default":null,"description":"Wait timeout for task set to reach `STEADY_STATE`. Valid time units include `ns`, `us` (or s), `ms`, `s`, `m`, and `h`. Default `10m`"}}}}},"variables":{"autoscaling_capacity_providers":{"default":{},"description":"Map of autoscaling capacity provider definitions to create for the cluster"},"cloudwatch_log_group_kms_key_id":{"default":null,"description":"If a KMS Key ARN is set, this key will be used to encrypt the corresponding log group. Please be sure that the KMS Key has an appropriate key policy (https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/encrypt-log-data-kms.html)"},"cloudwatch_log_group_name":{"default":null,"description":"Custom name of CloudWatch Log Group for ECS cluster"},"cloudwatch_log_group_retention_in_days":{"default":90,"description":"Number of days to retain log events"},"cloudwatch_log_group_tags":{"default":{},"description":"A map of additional tags to add to the log group created"},"cluster_configuration":{"default":{},"description":"The execute command configuration for the cluster"},"cluster_name":{"default":"","description":"Name of the cluster (up to 255 letters, numbers, hyphens, and underscores)"},"cluster_service_connect_defaults":{"default":{},"description":"Configures a default Service Connect namespace"},"cluster_settings":{"default":[{"name":"containerInsights","value":"enabled"}],"description":"List of configuration block(s) with cluster settings. For example, this can be used to enable CloudWatch Container Insights for a cluster"},"cluster_tags":{"default":{},"description":"A map of additional tags to add to the cluster"},"create":{"default":true,"description":"Determines whether resources will be created (affects all resources)"},"create_cloudwatch_log_group":{"default":true,"description":"Determines whether a log group is created by this module for the cluster logs. If not, AWS will automatically create one if logging is enabled"},"create_task_exec_iam_role":{"default":false,"description":"Determines whether the ECS task definition IAM role should be created"},"create_task_exec_policy":{"default":true,"description":"Determines whether the ECS task definition IAM policy should be created. This includes permissions included in AmazonECSTaskExecutionRolePolicy as well as access to secrets and SSM parameters"},"default_capacity_provider_use_fargate":{"default":true,"description":"Determines whether to use Fargate or autoscaling for default capacity provider strategy"},"fargate_capacity_providers":{"default":{},"description":"Map of Fargate capacity provider definitions to use for the cluster"},"services":{"default":{},"description":"Map of service definitions to create"},"tags":{"default":{},"description":"A map of tags to add to all resources"},"task_exec_iam_role_description":{"default":null,"description":"Description of the role"},"task_exec_iam_role_name":{"default":null,"description":"Name to use on IAM role created"},"task_exec_iam_role_path":{"default":null,"description":"IAM role path"},"task_exec_iam_role_permissions_boundary":{"default":null,"description":"ARN of the policy that is used to set the permissions boundary for the IAM role"},"task_exec_iam_role_policies":{"default":{},"description":"Map of IAM role policy ARNs to attach to the IAM role"},"task_exec_iam_role_tags":{"default":{},"description":"A map of additional tags to add to the IAM role created"},"task_exec_iam_role_use_name_prefix":{"default":true,"description":"Determines whether the IAM role name (`task_exec_iam_role_name`) is used as a prefix"},"task_exec_iam_statements":{"default":{},"description":"A map of IAM policy [statements](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/iam_policy_document#statement) for custom permission usage"},"task_exec_secret_arns":{"default":["arn:aws:secretsmanager:*:*:secret:*"],"description":"List of SecretsManager secret ARNs the task execution role will be permitted to get/read"},"task_exec_ssm_param_arns":{"default":["arn:aws:ssm:*:*:parameter/*"],"description":"List of SSM parameter ARNs the task execution role will be permitted to get/read"}}},"version_constraint":"5.12.1"},"memory_optimization":{"source":"./memory-optimization","expressions":{"container_memory":{"references":["var.memory_optimization_container_memory"]},"days_since_last_memory_change":{"constant_value":423},"days_until_black_friday":{"references":["var.days_until_black_friday"]},"enabled":{"references":["var.enable_memory_optimization_demo"]},"name_prefix":{"constant_value":"scenarios-memory-demo"},"number_of_containers":{"references":["var.memory_optimization_container_count"]},"subnet_ids":{"references":["var.public_subnets"]},"use_default_vpc":{"constant_value":false},"vpc_id":{"references":["var.vpc_id"]}},"module":{"outputs":{"alb_url":{"expression":{"references":["var.enabled","aws_lb.app[0].dns_name","aws_lb.app[0]","aws_lb.app"]},"description":"URL to access the application"},"cluster_name":{"expression":{"references":["var.enabled","aws_ecs_cluster.main[0].name","aws_ecs_cluster.main[0]","aws_ecs_cluster.main"]},"description":"ECS cluster name for monitoring"},"cost_analysis":{"expression":{"references":["var.enabled","var.container_memory","var.number_of_containers","var.number_of_containers","local.monthly_savings","local.current_cost_month","local.required_memory_mb"]},"description":"Detailed cost breakdown showing the financial motivation for the risky change"},"demo_status":{"expression":{"references":["var.enabled","var.container_memory","local.required_memory_mb","var.java_heap_size_mb","local.will_it_work","local.will_it_work","var.number_of_containers","var.days_until_black_friday","var.deregistration_delay","var.deregistration_delay","var.days_until_black_friday","var.days_since_last_memory_change","var.java_heap_size_mb","var.java_heap_size_mb","var.container_memory","var.container_memory","local.required_memory_mb","var.container_memory","local.required_memory_mb","var.container_memory","local.required_memory_mb"]},"description":"Object showing current vs required memory, cost calculations, and risk assessment"},"instructions":{"expression":{"references":["var.enabled","var.container_memory","var.number_of_containers","var.container_memory","var.java_heap_size_mb","var.java_heap_size_mb","var.java_heap_size_mb","local.required_memory_mb","local.required_memory_mb","var.days_until_black_friday","var.number_of_containers","var.deregistration_delay","var.days_since_last_memory_change"]},"description":"How to break and fix the demo"},"log_group_name":{"expression":{"references":["var.enabled","aws_cloudwatch_log_group.app[0].name","aws_cloudwatch_log_group.app[0]","aws_cloudwatch_log_group.app"]},"description":"CloudWatch log group name to check for OOM errors"},"resource_tags":{"expression":{"references":["var.enabled","local.common_tags"]},"description":"Common tags applied to all resources for tracking demo context"},"service_name":{"expression":{"references":["var.enabled","aws_ecs_service.app[0].name","aws_ecs_service.app[0]","aws_ecs_service.app"]},"description":"ECS service name for monitoring"}},"resources":[{"address":"aws_cloudwatch_log_group.app","mode":"managed","type":"aws_cloudwatch_log_group","name":"app","provider_config_key":"aws","expressions":{"name":{"references":["local.name_prefix"]},"retention_in_days":{"constant_value":1},"tags":{"references":["local.common_tags","local.name_prefix"]}},"schema_version":0,"count_expression":{"references":["var.enabled"]}},{"address":"aws_cloudwatch_log_metric_filter.memory_pressure","mode":"managed","type":"aws_cloudwatch_log_metric_filter","name":"memory_pressure","provider_config_key":"aws","expressions":{"log_group_name":{"references":["aws_cloudwatch_log_group.app[0].name","aws_cloudwatch_log_group.app[0]","aws_cloudwatch_log_group.app"]},"metric_transformation":[{"name":{"constant_value":"JavaOOMErrors"},"namespace":{"constant_value":"MemoryOptimization/Demo"},"value":{"constant_value":"1"}}],"name":{"references":["local.name_prefix"]},"pattern":{"constant_value":"[timestamp, requestId, level=\"ERROR\", message=\"*OutOfMemoryError*\"]"}},"schema_version":0,"count_expression":{"references":["var.enabled"]}},{"address":"aws_cloudwatch_metric_alarm.high_cpu_utilization","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"high_cpu_utilization","provider_config_key":"aws","expressions":{"alarm_actions":{"references":["aws_sns_topic.alerts[0].arn","aws_sns_topic.alerts[0]","aws_sns_topic.alerts"]},"alarm_description":{"constant_value":"This metric monitors ECS CPU utilization - will spike when JVM struggles with insufficient memory"},"alarm_name":{"references":["local.name_prefix"]},"comparison_operator":{"constant_value":"GreaterThanThreshold"},"dimensions":{"references":["aws_ecs_service.app[0].name","aws_ecs_service.app[0]","aws_ecs_service.app","aws_ecs_cluster.main[0].name","aws_ecs_cluster.main[0]","aws_ecs_cluster.main"]},"evaluation_periods":{"constant_value":"3"},"metric_name":{"constant_value":"CPUUtilization"},"namespace":{"constant_value":"AWS/ECS"},"period":{"constant_value":"300"},"statistic":{"constant_value":"Average"},"tags":{"references":["local.common_tags","local.name_prefix"]},"threshold":{"constant_value":"80"}},"schema_version":1,"count_expression":{"references":["var.enabled"]}},{"address":"aws_cloudwatch_metric_alarm.high_memory_utilization","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"high_memory_utilization","provider_config_key":"aws","expressions":{"alarm_actions":{"references":["aws_sns_topic.alerts[0].arn","aws_sns_topic.alerts[0]","aws_sns_topic.alerts"]},"alarm_description":{"constant_value":"This metric monitors ECS memory utilization - WILL FIRE when containers run out of memory"},"alarm_name":{"references":["local.name_prefix"]},"comparison_operator":{"constant_value":"GreaterThanThreshold"},"dimensions":{"references":["aws_ecs_service.app[0].name","aws_ecs_service.app[0]","aws_ecs_service.app","aws_ecs_cluster.main[0].name","aws_ecs_cluster.main[0]","aws_ecs_cluster.main"]},"evaluation_periods":{"constant_value":"2"},"metric_name":{"constant_value":"MemoryUtilization"},"namespace":{"constant_value":"AWS/ECS"},"ok_actions":{"references":["aws_sns_topic.alerts[0].arn","aws_sns_topic.alerts[0]","aws_sns_topic.alerts"]},"period":{"constant_value":"300"},"statistic":{"constant_value":"Average"},"tags":{"references":["local.common_tags","local.name_prefix","var.java_heap_size_mb","var.container_memory","var.container_memory","var.java_heap_size_mb"]},"threshold":{"constant_value":"80"}},"schema_version":1,"count_expression":{"references":["var.enabled"]}},{"address":"aws_cloudwatch_metric_alarm.low_task_count","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"low_task_count","provider_config_key":"aws","expressions":{"alarm_actions":{"references":["aws_sns_topic.alerts[0].arn","aws_sns_topic.alerts[0]","aws_sns_topic.alerts"]},"alarm_description":{"constant_value":"This metric monitors ECS running task count - WILL FIRE when containers crash due to OOM"},"alarm_name":{"references":["local.name_prefix"]},"comparison_operator":{"constant_value":"LessThanThreshold"},"dimensions":{"references":["aws_ecs_service.app[0].name","aws_ecs_service.app[0]","aws_ecs_service.app","aws_ecs_cluster.main[0].name","aws_ecs_cluster.main[0]","aws_ecs_cluster.main"]},"evaluation_periods":{"constant_value":"2"},"metric_name":{"constant_value":"RunningTaskCount"},"namespace":{"constant_value":"AWS/ECS"},"ok_actions":{"references":["aws_sns_topic.alerts[0].arn","aws_sns_topic.alerts[0]","aws_sns_topic.alerts"]},"period":{"constant_value":"300"},"statistic":{"constant_value":"Average"},"tags":{"references":["local.common_tags","local.name_prefix","var.number_of_containers","var.number_of_containers"]},"threshold":{"references":["var.number_of_containers"]}},"schema_version":1,"count_expression":{"references":["var.enabled"]}},{"address":"aws_cloudwatch_metric_alarm.unhealthy_targets","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"unhealthy_targets","provider_config_key":"aws","expressions":{"alarm_actions":{"references":["aws_sns_topic.alerts[0].arn","aws_sns_topic.alerts[0]","aws_sns_topic.alerts"]},"alarm_description":{"constant_value":"This metric monitors ALB unhealthy targets - will fire when containers become unresponsive"},"alarm_name":{"references":["local.name_prefix"]},"comparison_operator":{"constant_value":"GreaterThanThreshold"},"dimensions":{"references":["aws_lb_target_group.app[0].arn_suffix","aws_lb_target_group.app[0]","aws_lb_target_group.app","aws_lb.app[0].arn_suffix","aws_lb.app[0]","aws_lb.app"]},"evaluation_periods":{"constant_value":"2"},"metric_name":{"constant_value":"UnHealthyHostCount"},"namespace":{"constant_value":"AWS/ApplicationELB"},"period":{"constant_value":"60"},"statistic":{"constant_value":"Average"},"tags":{"references":["local.common_tags","local.name_prefix","var.deregistration_delay"]},"threshold":{"constant_value":"0"}},"schema_version":1,"count_expression":{"references":["var.enabled"]}},{"address":"aws_cloudwatch_query_definition.oom_events","mode":"managed","type":"aws_cloudwatch_query_definition","name":"oom_events","provider_config_key":"aws","expressions":{"log_group_names":{"references":["aws_cloudwatch_log_group.app[0].name","aws_cloudwatch_log_group.app[0]","aws_cloudwatch_log_group.app"]},"name":{"references":["local.name_prefix"]},"query_string":{"constant_value":"fields @timestamp, @message\n| filter @message like /OutOfMemoryError/\n| sort @timestamp desc\n| limit 100\n"}},"schema_version":0,"count_expression":{"references":["var.enabled"]}},{"address":"aws_ecs_cluster.main","mode":"managed","type":"aws_ecs_cluster","name":"main","provider_config_key":"aws","expressions":{"name":{"references":["local.name_prefix"]},"setting":[{"name":{"constant_value":"containerInsights"},"value":{"references":["var.enable_container_insights"]}}],"tags":{"references":["local.common_tags","local.name_prefix","var.number_of_containers"]}},"schema_version":0,"count_expression":{"references":["var.enabled"]}},{"address":"aws_ecs_service.app","mode":"managed","type":"aws_ecs_service","name":"app","provider_config_key":"aws","expressions":{"cluster":{"references":["aws_ecs_cluster.main[0].id","aws_ecs_cluster.main[0]","aws_ecs_cluster.main"]},"deployment_circuit_breaker":[{"enable":{"constant_value":false},"rollback":{"constant_value":false}}],"deployment_controller":[{"type":{"constant_value":"ECS"}}],"desired_count":{"references":["var.number_of_containers"]},"launch_type":{"constant_value":"FARGATE"},"load_balancer":[{"container_name":{"constant_value":"tomcat-app"},"container_port":{"references":["var.application_port"]},"target_group_arn":{"references":["aws_lb_target_group.app[0].arn","aws_lb_target_group.app[0]","aws_lb_target_group.app"]}}],"name":{"references":["local.name_prefix"]},"network_configuration":[{"assign_public_ip":{"constant_value":true},"security_groups":{"references":["aws_security_group.ecs_tasks[0].id","aws_security_group.ecs_tasks[0]","aws_security_group.ecs_tasks"]},"subnets":{"references":["local.subnet_ids"]}}],"tags":{"references":["local.common_tags","local.name_prefix","var.number_of_containers"]},"task_definition":{"references":["aws_ecs_task_definition.app[0].arn","aws_ecs_task_definition.app[0]","aws_ecs_task_definition.app"]}},"schema_version":1,"count_expression":{"references":["var.enabled"]},"depends_on":["aws_lb_listener.app"]},{"address":"aws_ecs_task_definition.app","mode":"managed","type":"aws_ecs_task_definition","name":"app","provider_config_key":"aws","expressions":{"container_definitions":{"references":["var.java_heap_size_mb","var.java_heap_size_mb","var.application_port","var.health_check_grace_period","var.application_port","var.application_port","aws_cloudwatch_log_group.app[0].name","aws_cloudwatch_log_group.app[0]","aws_cloudwatch_log_group.app","data.aws_region.current.name","data.aws_region.current"]},"cpu":{"references":["var.cpu_units"]},"execution_role_arn":{"references":["aws_iam_role.ecs_execution_role[0].arn","aws_iam_role.ecs_execution_role[0]","aws_iam_role.ecs_execution_role"]},"family":{"references":["local.name_prefix"]},"memory":{"references":["var.container_memory"]},"network_mode":{"constant_value":"awsvpc"},"requires_compatibilities":{"constant_value":["FARGATE"]},"tags":{"references":["local.common_tags","local.name_prefix","var.java_heap_size_mb","var.java_heap_size_mb","var.container_memory"]},"task_role_arn":{"references":["aws_iam_role.ecs_task_role[0].arn","aws_iam_role.ecs_task_role[0]","aws_iam_role.ecs_task_role"]}},"schema_version":1,"count_expression":{"references":["var.enabled"]}},{"address":"aws_iam_role.ecs_execution_role","mode":"managed","type":"aws_iam_role","name":"ecs_execution_role","provider_config_key":"aws","expressions":{"assume_role_policy":{},"name":{"references":["local.name_prefix"]},"tags":{"references":["local.common_tags"]}},"schema_version":0,"count_expression":{"references":["var.enabled"]}},{"address":"aws_iam_role.ecs_task_role","mode":"managed","type":"aws_iam_role","name":"ecs_task_role","provider_config_key":"aws","expressions":{"assume_role_policy":{},"name":{"references":["local.name_prefix"]},"tags":{"references":["local.common_tags"]}},"schema_version":0,"count_expression":{"references":["var.enabled"]}},{"address":"aws_iam_role_policy_attachment.ecs_execution_role_policy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ecs_execution_role_policy","provider_config_key":"aws","expressions":{"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy"},"role":{"references":["aws_iam_role.ecs_execution_role[0].name","aws_iam_role.ecs_execution_role[0]","aws_iam_role.ecs_execution_role"]}},"schema_version":0,"count_expression":{"references":["var.enabled"]}},{"address":"aws_internet_gateway.standalone","mode":"managed","type":"aws_internet_gateway","name":"standalone","provider_config_key":"aws","expressions":{"tags":{"references":["local.common_tags","local.name_prefix"]},"vpc_id":{"references":["aws_vpc.standalone[0].id","aws_vpc.standalone[0]","aws_vpc.standalone"]}},"schema_version":0,"count_expression":{"references":["var.enabled","var.create_standalone_vpc"]}},{"address":"aws_lb.app","mode":"managed","type":"aws_lb","name":"app","provider_config_key":"aws","expressions":{"enable_deletion_protection":{"constant_value":false},"internal":{"constant_value":false},"load_balancer_type":{"constant_value":"application"},"name":{"references":["local.name_prefix"]},"security_groups":{"references":["aws_security_group.alb[0].id","aws_security_group.alb[0]","aws_security_group.alb"]},"subnets":{"references":["local.subnet_ids"]},"tags":{"references":["local.common_tags","local.name_prefix"]}},"schema_version":0,"count_expression":{"references":["var.enabled"]}},{"address":"aws_lb_listener.app","mode":"managed","type":"aws_lb_listener","name":"app","provider_config_key":"aws","expressions":{"default_action":[{"forward":[{"target_group":[{"arn":{"references":["aws_lb_target_group.app[0].arn","aws_lb_target_group.app[0]","aws_lb_target_group.app"]}}]}],"type":{"constant_value":"forward"}}],"load_balancer_arn":{"references":["aws_lb.app[0].arn","aws_lb.app[0]","aws_lb.app"]},"port":{"constant_value":"80"},"protocol":{"constant_value":"HTTP"},"tags":{"references":["local.common_tags","local.name_prefix"]}},"schema_version":0,"count_expression":{"references":["var.enabled"]}},{"address":"aws_lb_target_group.app","mode":"managed","type":"aws_lb_target_group","name":"app","provider_config_key":"aws","expressions":{"deregistration_delay":{"references":["var.deregistration_delay"]},"health_check":[{"enabled":{"constant_value":true},"healthy_threshold":{"constant_value":2},"interval":{"constant_value":30},"matcher":{"constant_value":"200"},"path":{"constant_value":"/"},"port":{"constant_value":"traffic-port"},"protocol":{"constant_value":"HTTP"},"timeout":{"constant_value":5},"unhealthy_threshold":{"constant_value":2}}],"name":{"references":["local.name_prefix"]},"port":{"references":["var.application_port"]},"protocol":{"constant_value":"HTTP"},"tags":{"references":["local.common_tags","local.name_prefix","var.deregistration_delay","var.deregistration_delay","var.days_until_black_friday"]},"target_type":{"constant_value":"ip"},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.enabled"]}},{"address":"aws_route_table.standalone","mode":"managed","type":"aws_route_table","name":"standalone","provider_config_key":"aws","expressions":{"route":{"references":["aws_internet_gateway.standalone[0].id","aws_internet_gateway.standalone[0]","aws_internet_gateway.standalone"]},"tags":{"references":["local.common_tags","local.name_prefix"]},"vpc_id":{"references":["aws_vpc.standalone[0].id","aws_vpc.standalone[0]","aws_vpc.standalone"]}},"schema_version":0,"count_expression":{"references":["var.enabled","var.create_standalone_vpc"]}},{"address":"aws_route_table_association.standalone","mode":"managed","type":"aws_route_table_association","name":"standalone","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.standalone[0].id","aws_route_table.standalone[0]","aws_route_table.standalone"]},"subnet_id":{"references":["aws_subnet.standalone","count.index"]}},"schema_version":0,"count_expression":{"references":["var.enabled","var.create_standalone_vpc"]}},{"address":"aws_security_group.alb","mode":"managed","type":"aws_security_group","name":"alb","provider_config_key":"aws","expressions":{"description":{"constant_value":"Security group for ALB - allows public HTTP access"},"egress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":"All outbound traffic","from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":null,"to_port":0}]},"ingress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":"HTTP from internet","from_port":80,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_groups":null,"self":null,"to_port":80}]},"name":{"references":["local.name_prefix"]},"tags":{"references":["local.common_tags","local.name_prefix"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":1,"count_expression":{"references":["var.enabled"]}},{"address":"aws_security_group.ecs_tasks","mode":"managed","type":"aws_security_group","name":"ecs_tasks","provider_config_key":"aws","expressions":{"description":{"constant_value":"Security group for ECS tasks - allows ALB access"},"egress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":"All outbound traffic","from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":null,"to_port":0}]},"ingress":{"references":["var.application_port","var.application_port","aws_security_group.alb[0].id","aws_security_group.alb[0]","aws_security_group.alb"]},"name":{"references":["local.name_prefix"]},"tags":{"references":["local.common_tags","local.name_prefix","var.number_of_containers"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":1,"count_expression":{"references":["var.enabled"]}},{"address":"aws_sns_topic.alerts","mode":"managed","type":"aws_sns_topic","name":"alerts","provider_config_key":"aws","expressions":{"name":{"references":["local.name_prefix"]},"tags":{"references":["local.common_tags","local.name_prefix"]}},"schema_version":0,"count_expression":{"references":["var.enabled"]}},{"address":"aws_subnet.standalone","mode":"managed","type":"aws_subnet","name":"standalone","provider_config_key":"aws","expressions":{"availability_zone":{"references":["data.aws_availability_zones.available[0].names","data.aws_availability_zones.available[0]","data.aws_availability_zones.available","count.index"]},"cidr_block":{"references":["count.index"]},"map_public_ip_on_launch":{"constant_value":true},"tags":{"references":["local.common_tags","local.name_prefix","count.index"]},"vpc_id":{"references":["aws_vpc.standalone[0].id","aws_vpc.standalone[0]","aws_vpc.standalone"]}},"schema_version":1,"count_expression":{"references":["var.enabled","var.create_standalone_vpc"]}},{"address":"aws_vpc.standalone","mode":"managed","type":"aws_vpc","name":"standalone","provider_config_key":"aws","expressions":{"cidr_block":{"constant_value":"10.0.0.0/16"},"enable_dns_hostnames":{"constant_value":true},"enable_dns_support":{"constant_value":true},"tags":{"references":["local.common_tags","local.name_prefix"]}},"schema_version":1,"count_expression":{"references":["var.enabled","var.create_standalone_vpc"]}},{"address":"random_id.suffix","mode":"managed","type":"random_id","name":"suffix","provider_config_key":"module.heritage:random","expressions":{"byte_length":{"constant_value":4}},"schema_version":0,"count_expression":{"references":["var.enabled"]}},{"address":"data.aws_availability_zones.available","mode":"data","type":"aws_availability_zones","name":"available","provider_config_key":"aws","expressions":{"state":{"constant_value":"available"}},"schema_version":0,"count_expression":{"references":["var.enabled"]}},{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_config_key":"aws","schema_version":0},{"address":"data.aws_subnets.default","mode":"data","type":"aws_subnets","name":"default","provider_config_key":"aws","expressions":{"filter":[{"name":{"constant_value":"vpc-id"},"values":{"references":["data.aws_vpc.default[0].id","data.aws_vpc.default[0]","data.aws_vpc.default"]}}]},"schema_version":0,"count_expression":{"references":["var.enabled","var.use_default_vpc"]}},{"address":"data.aws_vpc.default","mode":"data","type":"aws_vpc","name":"default","provider_config_key":"aws","expressions":{"default":{"constant_value":true}},"schema_version":0,"count_expression":{"references":["var.enabled","var.use_default_vpc"]}}],"variables":{"additional_tags":{"default":{},"description":"Additional tags to apply to all resources"},"application_port":{"default":8080,"description":"Port the Tomcat application listens on"},"container_memory":{"default":2048,"description":"Memory allocation per container in MB. Optimized based on monitoring data showing 800MB average usage with 950MB peaks."},"cpu_units":{"default":512,"description":"CPU units for ECS task (1024 = 1 vCPU)"},"create_standalone_vpc":{"default":false,"description":"Create an isolated VPC for this demo (mutually exclusive with use_default_vpc)"},"days_since_last_memory_change":{"default":423,"description":"Shows staleness - days since last memory configuration change"},"days_until_black_friday":{"default":7,"description":"Context for urgency - days until Black Friday traffic spike"},"deregistration_delay":{"default":5,"description":"ALB target deregistration delay in seconds (5 seconds = no rollback time!)"},"enable_container_insights":{"default":false,"description":"Enable CloudWatch Container Insights for the ECS cluster"},"enabled":{"default":true,"description":"Enable the ECS service and associated infrastructure"},"health_check_grace_period":{"default":120,"description":"Health check grace period in seconds (JVM needs time to start)"},"java_heap_size_mb":{"default":1536,"description":"Java heap size in MB (this is the trap - app is configured with -Xmx1536m)"},"name_prefix":{"default":"java-app","description":"Resource naming prefix for consistent identification"},"number_of_containers":{"default":15,"description":"ECS service desired count for high availability and load distribution"},"subnet_ids":{"default":[],"description":"Subnet IDs to use (only when both use_default_vpc and create_standalone_vpc are false)"},"use_default_vpc":{"default":true,"description":"Use account's default VPC (mutually exclusive with create_standalone_vpc)"},"vpc_id":{"default":null,"description":"VPC ID to use (only when both use_default_vpc and create_standalone_vpc are false)"}}}},"message_size_breach":{"source":"./message-size-breach","expressions":{"batch_size":{"references":["var.message_size_breach_batch_size"]},"example_env":{"references":["var.example_env"]},"lambda_memory":{"references":["var.message_size_breach_lambda_memory"]},"lambda_timeout":{"references":["var.message_size_breach_lambda_timeout"]},"max_message_size":{"references":["var.message_size_breach_max_size"]},"retention_days":{"references":["var.message_size_breach_retention_days"]}},"count_expression":{"references":["var.enable_message_size_breach_demo"]},"module":{"outputs":{"batch_size":{"expression":{"references":["var.batch_size"]},"description":"Batch size configured for Lambda processing"},"cloudwatch_log_group_name":{"expression":{"references":["aws_cloudwatch_log_group.lambda_logs.name","aws_cloudwatch_log_group.lambda_logs"]},"description":"Name of the CloudWatch log group for Lambda"},"dlq_arn":{"expression":{"references":["aws_sqs_queue.image_processing_dlq.arn","aws_sqs_queue.image_processing_dlq"]},"description":"ARN of the Dead Letter Queue"},"dlq_url":{"expression":{"references":["aws_sqs_queue.image_processing_dlq.url","aws_sqs_queue.image_processing_dlq"]},"description":"URL of the Dead Letter Queue"},"lambda_errors_alarm_name":{"expression":{"references":["aws_cloudwatch_metric_alarm.lambda_errors.alarm_name","aws_cloudwatch_metric_alarm.lambda_errors"]},"description":"Name of the CloudWatch alarm for Lambda errors"},"lambda_function_arn":{"expression":{"references":["aws_lambda_function.image_processor.arn","aws_lambda_function.image_processor"]},"description":"ARN of the Lambda function for image processing"},"lambda_function_name":{"expression":{"references":["aws_lambda_function.image_processor.function_name","aws_lambda_function.image_processor"]},"description":"Name of the Lambda function for image processing"},"lambda_payload_limit_bytes":{"expression":{"constant_value":262144},"description":"Lambda payload limit for SQS asynchronous invocations (256KB) per AWS Lambda Limits Documentation"},"max_message_size":{"expression":{"references":["var.max_message_size"]},"description":"Maximum message size configured for SQS queue (in bytes)"},"payload_limit_exceeded":{"expression":{"references":["var.max_message_size","var.batch_size"]},"description":"Whether the total batch size exceeds Lambda payload limit"},"risk_assessment":{"expression":{"references":["var.max_message_size","var.batch_size"]},"description":"Risk assessment based on configuration"},"sqs_queue_arn":{"expression":{"references":["aws_sqs_queue.image_processing_queue.arn","aws_sqs_queue.image_processing_queue"]},"description":"ARN of the SQS queue for image processing"},"sqs_queue_depth_alarm_name":{"expression":{"references":["aws_cloudwatch_metric_alarm.sqs_queue_depth.alarm_name","aws_cloudwatch_metric_alarm.sqs_queue_depth"]},"description":"Name of the CloudWatch alarm for SQS queue depth"},"sqs_queue_name":{"expression":{"references":["aws_sqs_queue.image_processing_queue.name","aws_sqs_queue.image_processing_queue"]},"description":"Name of the SQS queue for image processing"},"sqs_queue_url":{"expression":{"references":["aws_sqs_queue.image_processing_queue.url","aws_sqs_queue.image_processing_queue"]},"description":"URL of the SQS queue for image processing"},"total_batch_size_bytes":{"expression":{"references":["var.max_message_size","var.batch_size"]},"description":"Total batch size in bytes (max_message_size  batch_size)"}},"resources":[{"address":"aws_cloudwatch_log_group.lambda_logs","mode":"managed","type":"aws_cloudwatch_log_group","name":"lambda_logs","provider_config_key":"aws","expressions":{"name":{"references":["var.example_env"]},"retention_in_days":{"constant_value":14},"tags":{"references":["var.example_env"]}},"schema_version":0},{"address":"aws_cloudwatch_metric_alarm.lambda_errors","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"lambda_errors","provider_config_key":"aws","expressions":{"alarm_description":{"constant_value":"This alarm monitors Lambda function errors"},"alarm_name":{"references":["var.example_env"]},"comparison_operator":{"constant_value":"GreaterThanThreshold"},"dimensions":{"references":["aws_lambda_function.image_processor.function_name","aws_lambda_function.image_processor"]},"evaluation_periods":{"constant_value":"2"},"metric_name":{"constant_value":"Errors"},"namespace":{"constant_value":"AWS/Lambda"},"period":{"constant_value":"60"},"statistic":{"constant_value":"Sum"},"tags":{"references":["var.example_env"]},"threshold":{"constant_value":"5"}},"schema_version":1},{"address":"aws_cloudwatch_metric_alarm.sqs_queue_depth","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"sqs_queue_depth","provider_config_key":"aws","expressions":{"alarm_description":{"constant_value":"This alarm monitors SQS queue depth"},"alarm_name":{"references":["var.example_env"]},"comparison_operator":{"constant_value":"GreaterThanThreshold"},"dimensions":{"references":["aws_sqs_queue.image_processing_queue.name","aws_sqs_queue.image_processing_queue"]},"evaluation_periods":{"constant_value":"2"},"metric_name":{"constant_value":"ApproximateNumberOfVisibleMessages"},"namespace":{"constant_value":"AWS/SQS"},"period":{"constant_value":"60"},"statistic":{"constant_value":"Average"},"tags":{"references":["var.example_env"]},"threshold":{"constant_value":"100"}},"schema_version":1},{"address":"aws_iam_role.lambda_role","mode":"managed","type":"aws_iam_role","name":"lambda_role","provider_config_key":"aws","expressions":{"assume_role_policy":{},"name":{"references":["var.example_env"]},"tags":{"references":["var.example_env"]}},"schema_version":0},{"address":"aws_iam_role_policy.lambda_logs_policy","mode":"managed","type":"aws_iam_role_policy","name":"lambda_logs_policy","provider_config_key":"aws","expressions":{"name":{"references":["var.example_env"]},"policy":{"references":["aws_cloudwatch_log_group.lambda_logs.arn","aws_cloudwatch_log_group.lambda_logs"]},"role":{"references":["aws_iam_role.lambda_role.id","aws_iam_role.lambda_role"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.lambda_basic_execution","mode":"managed","type":"aws_iam_role_policy_attachment","name":"lambda_basic_execution","provider_config_key":"aws","expressions":{"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"},"role":{"references":["aws_iam_role.lambda_role.name","aws_iam_role.lambda_role"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.lambda_sqs_policy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"lambda_sqs_policy","provider_config_key":"aws","expressions":{"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/service-role/AWSLambdaSQSQueueExecutionRole"},"role":{"references":["aws_iam_role.lambda_role.name","aws_iam_role.lambda_role"]}},"schema_version":0},{"address":"aws_lambda_event_source_mapping.sqs_trigger","mode":"managed","type":"aws_lambda_event_source_mapping","name":"sqs_trigger","provider_config_key":"aws","expressions":{"batch_size":{"references":["var.batch_size"]},"event_source_arn":{"references":["aws_sqs_queue.image_processing_queue.arn","aws_sqs_queue.image_processing_queue"]},"function_name":{"references":["aws_lambda_function.image_processor.arn","aws_lambda_function.image_processor"]},"maximum_batching_window_in_seconds":{"constant_value":5}},"schema_version":0,"depends_on":["aws_iam_role_policy_attachment.lambda_sqs_policy"]},{"address":"aws_lambda_function.image_processor","mode":"managed","type":"aws_lambda_function","name":"image_processor","provider_config_key":"aws","expressions":{"filename":{"references":["path.module"]},"function_name":{"references":["var.example_env"]},"handler":{"constant_value":"lambda_function.lambda_handler"},"memory_size":{"constant_value":1024},"role":{"references":["aws_iam_role.lambda_role.arn","aws_iam_role.lambda_role"]},"runtime":{"constant_value":"python3.13"},"source_code_hash":{"references":["path.module"]},"tags":{"references":["var.example_env"]},"timeout":{"references":["var.lambda_timeout"]}},"schema_version":0,"depends_on":["aws_iam_role.lambda_role"]},{"address":"aws_sqs_queue.image_processing_dlq","mode":"managed","type":"aws_sqs_queue","name":"image_processing_dlq","provider_config_key":"aws","expressions":{"message_retention_seconds":{"constant_value":1209600},"name":{"references":["var.example_env"]},"tags":{"references":["var.example_env"]}},"schema_version":0},{"address":"aws_sqs_queue.image_processing_queue","mode":"managed","type":"aws_sqs_queue","name":"image_processing_queue","provider_config_key":"aws","expressions":{"max_message_size":{"references":["var.max_message_size"]},"message_retention_seconds":{"constant_value":1209600},"name":{"references":["var.example_env"]},"receive_wait_time_seconds":{"constant_value":20},"redrive_policy":{"references":["aws_sqs_queue.image_processing_dlq.arn","aws_sqs_queue.image_processing_dlq"]},"tags":{"references":["var.example_env"]},"visibility_timeout_seconds":{"constant_value":1080}},"schema_version":0}],"variables":{"batch_size":{"default":10,"description":"Number of messages to process in each Lambda batch. Combined with max_message_size, this determines total payload size"},"example_env":{"description":"Environment name for resource naming"},"lambda_memory":{"default":1024,"description":"Lambda function memory allocation in MB"},"lambda_timeout":{"default":180,"description":"Lambda function timeout in seconds"},"max_message_size":{"default":25600,"description":"Maximum message size for SQS queue in bytes. 25KB (25600) is safe, 100KB (102400) will break Lambda batch processing. Based on AWS Lambda async payload limit of 256KB."},"retention_days":{"default":14,"description":"CloudWatch log retention period in days"}}}},"s3_one":{"source":"terraform-aws-modules/s3-bucket/aws","expressions":{"bucket_prefix":{"references":["random_pet.this.id","random_pet.this"]},"force_destroy":{"constant_value":true}},"module":{"outputs":{"s3_bucket_arn":{"expression":{"references":["aws_s3_bucket.this[0].arn","aws_s3_bucket.this[0]","aws_s3_bucket.this"]},"description":"The ARN of the bucket. Will be of format arn:aws:s3:::bucketname."},"s3_bucket_bucket_domain_name":{"expression":{"references":["aws_s3_bucket.this[0].bucket_domain_name","aws_s3_bucket.this[0]","aws_s3_bucket.this"]},"description":"The bucket domain name. Will be of format bucketname.s3.amazonaws.com."},"s3_bucket_bucket_regional_domain_name":{"expression":{"references":["aws_s3_bucket.this[0].bucket_regional_domain_name","aws_s3_bucket.this[0]","aws_s3_bucket.this"]},"description":"The bucket region-specific domain name. The bucket domain name including the region name, please refer here for format. Note: The AWS CloudFront allows specifying S3 region-specific endpoint when creating S3 origin, it will prevent redirect issues from CloudFront to S3 Origin URL."},"s3_bucket_hosted_zone_id":{"expression":{"references":["aws_s3_bucket.this[0].hosted_zone_id","aws_s3_bucket.this[0]","aws_s3_bucket.this"]},"description":"The Route 53 Hosted Zone ID for this bucket's region."},"s3_bucket_id":{"expression":{"references":["aws_s3_bucket.this[0].id","aws_s3_bucket.this[0]","aws_s3_bucket.this","aws_s3_directory_bucket.this[0].bucket","aws_s3_directory_bucket.this[0]","aws_s3_directory_bucket.this"]},"description":"The name of the bucket."},"s3_bucket_lifecycle_configuration_rules":{"expression":{"references":["aws_s3_bucket_lifecycle_configuration.this[0].rule","aws_s3_bucket_lifecycle_configuration.this[0]","aws_s3_bucket_lifecycle_configuration.this"]},"description":"The lifecycle rules of the bucket, if the bucket is configured with lifecycle rules. If not, this will be an empty string."},"s3_bucket_policy":{"expression":{"references":["aws_s3_bucket_policy.this[0].policy","aws_s3_bucket_policy.this[0]","aws_s3_bucket_policy.this"]},"description":"The policy of the bucket, if the bucket is configured with a policy. If not, this will be an empty string."},"s3_bucket_region":{"expression":{"references":["aws_s3_bucket.this[0].region","aws_s3_bucket.this[0]","aws_s3_bucket.this"]},"description":"The AWS region this bucket resides in."},"s3_bucket_website_domain":{"expression":{"references":["aws_s3_bucket_website_configuration.this[0].website_domain","aws_s3_bucket_website_configuration.this[0]","aws_s3_bucket_website_configuration.this"]},"description":"The domain of the website endpoint, if the bucket is configured with a website. If not, this will be an empty string. This is used to create Route 53 alias records."},"s3_bucket_website_endpoint":{"expression":{"references":["aws_s3_bucket_website_configuration.this[0].website_endpoint","aws_s3_bucket_website_configuration.this[0]","aws_s3_bucket_website_configuration.this"]},"description":"The website endpoint, if the bucket is configured with a website. If not, this will be an empty string."},"s3_directory_bucket_arn":{"expression":{"references":["aws_s3_directory_bucket.this[0].arn","aws_s3_directory_bucket.this[0]","aws_s3_directory_bucket.this"]},"description":"ARN of the directory bucket."},"s3_directory_bucket_name":{"expression":{"references":["aws_s3_directory_bucket.this[0].bucket","aws_s3_directory_bucket.this[0]","aws_s3_directory_bucket.this"]},"description":"Name of the directory bucket."}},"resources":[{"address":"aws_s3_bucket.this","mode":"managed","type":"aws_s3_bucket","name":"this","provider_config_key":"aws","expressions":{"bucket":{"references":["var.bucket"]},"bucket_prefix":{"references":["var.bucket_prefix"]},"force_destroy":{"references":["var.force_destroy"]},"object_lock_enabled":{"references":["var.object_lock_enabled"]},"tags":{"references":["var.tags"]}},"schema_version":0,"count_expression":{"references":["local.create_bucket","var.is_directory_bucket"]}},{"address":"aws_s3_bucket_accelerate_configuration.this","mode":"managed","type":"aws_s3_bucket_accelerate_configuration","name":"this","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.this[0].id","aws_s3_bucket.this[0]","aws_s3_bucket.this"]},"expected_bucket_owner":{"references":["var.expected_bucket_owner"]},"status":{"references":["var.acceleration_status"]}},"schema_version":0,"count_expression":{"references":["local.create_bucket","var.acceleration_status","var.is_directory_bucket"]}},{"address":"aws_s3_bucket_acl.this","mode":"managed","type":"aws_s3_bucket_acl","name":"this","provider_config_key":"aws","expressions":{"acl":{"references":["var.acl","var.acl"]},"bucket":{"references":["aws_s3_bucket.this[0].id","aws_s3_bucket.this[0]","aws_s3_bucket.this"]},"expected_bucket_owner":{"references":["var.expected_bucket_owner"]}},"schema_version":0,"count_expression":{"references":["local.create_bucket","local.create_bucket_acl","var.is_directory_bucket"]},"depends_on":["aws_s3_bucket_ownership_controls.this"]},{"address":"aws_s3_bucket_analytics_configuration.this","mode":"managed","type":"aws_s3_bucket_analytics_configuration","name":"this","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.this[0].id","aws_s3_bucket.this[0]","aws_s3_bucket.this"]},"name":{"references":["each.key"]}},"schema_version":0,"for_each_expression":{"references":["var.analytics_configuration","local.create_bucket","var.is_directory_bucket"]}},{"address":"aws_s3_bucket_cors_configuration.this","mode":"managed","type":"aws_s3_bucket_cors_configuration","name":"this","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.this[0].id","aws_s3_bucket.this[0]","aws_s3_bucket.this"]},"expected_bucket_owner":{"references":["var.expected_bucket_owner"]}},"schema_version":0,"count_expression":{"references":["local.create_bucket","local.cors_rules","var.is_directory_bucket"]}},{"address":"aws_s3_bucket_intelligent_tiering_configuration.this","mode":"managed","type":"aws_s3_bucket_intelligent_tiering_configuration","name":"this","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.this[0].id","aws_s3_bucket.this[0]","aws_s3_bucket.this"]},"name":{"references":["each.key"]},"status":{"references":["each.value.status","each.value","each.value.status","each.value"]}},"schema_version":0,"for_each_expression":{"references":["local.intelligent_tiering","local.create_bucket","var.is_directory_bucket"]}},{"address":"aws_s3_bucket_inventory.this","mode":"managed","type":"aws_s3_bucket_inventory","name":"this","provider_config_key":"aws","expressions":{"bucket":{"references":["each.value.bucket","each.value","aws_s3_bucket.this[0].id","aws_s3_bucket.this[0]","aws_s3_bucket.this"]},"destination":[{"bucket":[{"account_id":{"references":["each.value.destination.account_id","each.value.destination","each.value"]},"bucket_arn":{"references":["each.value.destination.bucket_arn","each.value.destination","each.value","aws_s3_bucket.this[0].arn","aws_s3_bucket.this[0]","aws_s3_bucket.this"]},"format":{"references":["each.value.destination.format","each.value.destination","each.value"]},"prefix":{"references":["each.value.destination.prefix","each.value.destination","each.value"]}}]}],"enabled":{"references":["each.value.enabled","each.value"]},"included_object_versions":{"references":["each.value.included_object_versions","each.value"]},"name":{"references":["each.key"]},"optional_fields":{"references":["each.value.optional_fields","each.value"]},"schedule":[{"frequency":{"references":["each.value.frequency","each.value"]}}]},"schema_version":0,"for_each_expression":{"references":["var.inventory_configuration","local.create_bucket","var.is_directory_bucket"]}},{"address":"aws_s3_bucket_lifecycle_configuration.this","mode":"managed","type":"aws_s3_bucket_lifecycle_configuration","name":"this","provider_config_key":"aws","expressions":{"bucket":{"references":["var.is_directory_bucket","aws_s3_directory_bucket.this[0].bucket","aws_s3_directory_bucket.this[0]","aws_s3_directory_bucket.this","aws_s3_bucket.this[0].id","aws_s3_bucket.this[0]","aws_s3_bucket.this"]},"expected_bucket_owner":{"references":["var.expected_bucket_owner"]},"transition_default_minimum_object_size":{"references":["var.transition_default_minimum_object_size"]}},"schema_version":1,"count_expression":{"references":["local.create_bucket","local.lifecycle_rules"]},"depends_on":["aws_s3_bucket_versioning.this"]},{"address":"aws_s3_bucket_logging.this","mode":"managed","type":"aws_s3_bucket_logging","name":"this","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.this[0].id","aws_s3_bucket.this[0]","aws_s3_bucket.this"]},"target_bucket":{"references":["var.logging[\"target_bucket\"]","var.logging"]},"target_prefix":{"references":["var.logging[\"target_prefix\"]","var.logging"]}},"schema_version":0,"count_expression":{"references":["local.create_bucket","var.logging","var.is_directory_bucket"]}},{"address":"aws_s3_bucket_metric.this","mode":"managed","type":"aws_s3_bucket_metric","name":"this","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.this[0].id","aws_s3_bucket.this[0]","aws_s3_bucket.this"]},"name":{"references":["each.value.name","each.value"]}},"schema_version":0,"for_each_expression":{"references":["local.metric_configuration","local.create_bucket","var.is_directory_bucket"]}},{"address":"aws_s3_bucket_object_lock_configuration.this","mode":"managed","type":"aws_s3_bucket_object_lock_configuration","name":"this","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.this[0].id","aws_s3_bucket.this[0]","aws_s3_bucket.this"]},"expected_bucket_owner":{"references":["var.expected_bucket_owner"]},"rule":[{"default_retention":[{"days":{"references":["var.object_lock_configuration.rule.default_retention.days","var.object_lock_configuration.rule.default_retention","var.object_lock_configuration.rule","var.object_lock_configuration"]},"mode":{"references":["var.object_lock_configuration.rule.default_retention.mode","var.object_lock_configuration.rule.default_retention","var.object_lock_configuration.rule","var.object_lock_configuration"]},"years":{"references":["var.object_lock_configuration.rule.default_retention.years","var.object_lock_configuration.rule.default_retention","var.object_lock_configuration.rule","var.object_lock_configuration"]}}]}],"token":{"references":["var.object_lock_configuration.token","var.object_lock_configuration"]}},"schema_version":0,"count_expression":{"references":["local.create_bucket","var.object_lock_enabled","var.object_lock_configuration.rule.default_retention","var.object_lock_configuration.rule","var.object_lock_configuration"]}},{"address":"aws_s3_bucket_ownership_controls.this","mode":"managed","type":"aws_s3_bucket_ownership_controls","name":"this","provider_config_key":"aws","expressions":{"bucket":{"references":["local.attach_policy","aws_s3_bucket_policy.this[0].id","aws_s3_bucket_policy.this[0]","aws_s3_bucket_policy.this","aws_s3_bucket.this[0].id","aws_s3_bucket.this[0]","aws_s3_bucket.this"]},"rule":[{"object_ownership":{"references":["var.object_ownership"]}}]},"schema_version":0,"count_expression":{"references":["local.create_bucket","var.control_object_ownership","var.is_directory_bucket"]},"depends_on":["aws_s3_bucket_policy.this","aws_s3_bucket_public_access_block.this","aws_s3_bucket.this"]},{"address":"aws_s3_bucket_policy.this","mode":"managed","type":"aws_s3_bucket_policy","name":"this","provider_config_key":"aws","expressions":{"bucket":{"references":["var.is_directory_bucket","aws_s3_directory_bucket.this[0].bucket","aws_s3_directory_bucket.this[0]","aws_s3_directory_bucket.this","aws_s3_bucket.this[0].id","aws_s3_bucket.this[0]","aws_s3_bucket.this"]},"policy":{"references":["data.aws_iam_policy_document.combined[0].json","data.aws_iam_policy_document.combined[0]","data.aws_iam_policy_document.combined"]}},"schema_version":0,"count_expression":{"references":["local.create_bucket","local.attach_policy"]},"depends_on":["aws_s3_bucket_public_access_block.this"]},{"address":"aws_s3_bucket_public_access_block.this","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"this","provider_config_key":"aws","expressions":{"block_public_acls":{"references":["var.block_public_acls"]},"block_public_policy":{"references":["var.block_public_policy"]},"bucket":{"references":["aws_s3_bucket.this[0].id","aws_s3_bucket.this[0]","aws_s3_bucket.this"]},"ignore_public_acls":{"references":["var.ignore_public_acls"]},"restrict_public_buckets":{"references":["var.restrict_public_buckets"]}},"schema_version":0,"count_expression":{"references":["local.create_bucket","var.attach_public_policy","var.is_directory_bucket"]}},{"address":"aws_s3_bucket_replication_configuration.this","mode":"managed","type":"aws_s3_bucket_replication_configuration","name":"this","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.this[0].id","aws_s3_bucket.this[0]","aws_s3_bucket.this"]},"role":{"references":["var.replication_configuration[\"role\"]","var.replication_configuration"]}},"schema_version":0,"count_expression":{"references":["local.create_bucket","var.replication_configuration","var.is_directory_bucket"]},"depends_on":["aws_s3_bucket_versioning.this"]},{"address":"aws_s3_bucket_request_payment_configuration.this","mode":"managed","type":"aws_s3_bucket_request_payment_configuration","name":"this","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.this[0].id","aws_s3_bucket.this[0]","aws_s3_bucket.this"]},"expected_bucket_owner":{"references":["var.expected_bucket_owner"]},"payer":{"references":["var.request_payer"]}},"schema_version":0,"count_expression":{"references":["local.create_bucket","var.request_payer","var.is_directory_bucket"]}},{"address":"aws_s3_bucket_server_side_encryption_configuration.this","mode":"managed","type":"aws_s3_bucket_server_side_encryption_configuration","name":"this","provider_config_key":"aws","expressions":{"bucket":{"references":["var.is_directory_bucket","aws_s3_directory_bucket.this[0].bucket","aws_s3_directory_bucket.this[0]","aws_s3_directory_bucket.this","aws_s3_bucket.this[0].id","aws_s3_bucket.this[0]","aws_s3_bucket.this"]},"expected_bucket_owner":{"references":["var.expected_bucket_owner"]}},"schema_version":0,"count_expression":{"references":["local.create_bucket","var.server_side_encryption_configuration"]}},{"address":"aws_s3_bucket_versioning.this","mode":"managed","type":"aws_s3_bucket_versioning","name":"this","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.this[0].id","aws_s3_bucket.this[0]","aws_s3_bucket.this"]},"expected_bucket_owner":{"references":["var.expected_bucket_owner"]},"mfa":{"references":["var.versioning[\"mfa\"]","var.versioning"]},"versioning_configuration":[{"mfa_delete":{"references":["var.versioning[\"mfa_delete\"]","var.versioning","var.versioning[\"mfa_delete\"]","var.versioning"]},"status":{"references":["var.versioning[\"enabled\"]","var.versioning","var.versioning[\"status\"]","var.versioning","var.versioning[\"status\"]","var.versioning"]}}]},"schema_version":0,"count_expression":{"references":["local.create_bucket","var.versioning","var.is_directory_bucket"]}},{"address":"aws_s3_bucket_website_configuration.this","mode":"managed","type":"aws_s3_bucket_website_configuration","name":"this","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.this[0].id","aws_s3_bucket.this[0]","aws_s3_bucket.this"]},"expected_bucket_owner":{"references":["var.expected_bucket_owner"]}},"schema_version":0,"count_expression":{"references":["local.create_bucket","var.website","var.is_directory_bucket"]}},{"address":"aws_s3_directory_bucket.this","mode":"managed","type":"aws_s3_directory_bucket","name":"this","provider_config_key":"aws","expressions":{"bucket":{"references":["var.bucket","var.availability_zone_id"]},"data_redundancy":{"references":["var.data_redundancy"]},"force_destroy":{"references":["var.force_destroy"]},"location":[{"name":{"references":["var.availability_zone_id"]},"type":{"references":["var.location_type"]}}],"type":{"references":["var.type"]}},"schema_version":0,"count_expression":{"references":["local.create_bucket","var.is_directory_bucket"]}},{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_config_key":"aws","schema_version":0},{"address":"data.aws_canonical_user_id.this","mode":"data","type":"aws_canonical_user_id","name":"this","provider_config_key":"aws","schema_version":0,"count_expression":{"references":["local.create_bucket","local.create_bucket_acl","var.owner[\"id\"]","var.owner"]}},{"address":"data.aws_iam_policy_document.access_log_delivery","mode":"data","type":"aws_iam_policy_document","name":"access_log_delivery","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["s3:PutObject"]},"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"constant_value":["logging.s3.amazonaws.com"]},"type":{"constant_value":"Service"}}],"resources":{"references":["aws_s3_bucket.this[0].arn","aws_s3_bucket.this[0]","aws_s3_bucket.this"]},"sid":{"constant_value":"AWSAccessLogDeliveryWrite"}},{"actions":{"constant_value":["s3:GetBucketAcl"]},"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"constant_value":["logging.s3.amazonaws.com"]},"type":{"constant_value":"Service"}}],"resources":{"references":["aws_s3_bucket.this[0].arn","aws_s3_bucket.this[0]","aws_s3_bucket.this"]},"sid":{"constant_value":"AWSAccessLogDeliveryAclCheck"}}]},"schema_version":0,"count_expression":{"references":["local.create_bucket","var.attach_access_log_delivery_policy","var.is_directory_bucket"]}},{"address":"data.aws_iam_policy_document.cloudtrail_log_delivery","mode":"data","type":"aws_iam_policy_document","name":"cloudtrail_log_delivery","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["s3:GetBucketAcl"]},"principals":[{"identifiers":{"constant_value":["cloudtrail.amazonaws.com"]},"type":{"constant_value":"Service"}}],"resources":{"references":["aws_s3_bucket.this[0].arn","aws_s3_bucket.this[0]","aws_s3_bucket.this"]},"sid":{"constant_value":"AWSCloudTrailAclCheck"}},{"actions":{"constant_value":["s3:PutObject"]},"condition":[{"test":{"constant_value":"StringEquals"},"values":{"constant_value":["bucket-owner-full-control"]},"variable":{"constant_value":"s3:x-amz-acl"}}],"principals":[{"identifiers":{"constant_value":["cloudtrail.amazonaws.com"]},"type":{"constant_value":"Service"}}],"resources":{"references":["aws_s3_bucket.this[0].arn","aws_s3_bucket.this[0]","aws_s3_bucket.this"]},"sid":{"constant_value":"AWSCloudTrailWrite"}}]},"schema_version":0,"count_expression":{"references":["local.create_bucket","var.attach_cloudtrail_log_delivery_policy","var.is_directory_bucket"]}},{"address":"data.aws_iam_policy_document.combined","mode":"data","type":"aws_iam_policy_document","name":"combined","provider_config_key":"aws","expressions":{"source_policy_documents":{"references":["var.attach_elb_log_delivery_policy","data.aws_iam_policy_document.elb_log_delivery[0].json","data.aws_iam_policy_document.elb_log_delivery[0]","data.aws_iam_policy_document.elb_log_delivery","var.attach_lb_log_delivery_policy","data.aws_iam_policy_document.lb_log_delivery[0].json","data.aws_iam_policy_document.lb_log_delivery[0]","data.aws_iam_policy_document.lb_log_delivery","var.attach_access_log_delivery_policy","data.aws_iam_policy_document.access_log_delivery[0].json","data.aws_iam_policy_document.access_log_delivery[0]","data.aws_iam_policy_document.access_log_delivery","var.attach_cloudtrail_log_delivery_policy","data.aws_iam_policy_document.cloudtrail_log_delivery[0].json","data.aws_iam_policy_document.cloudtrail_log_delivery[0]","data.aws_iam_policy_document.cloudtrail_log_delivery","var.attach_require_latest_tls_policy","data.aws_iam_policy_document.require_latest_tls[0].json","data.aws_iam_policy_document.require_latest_tls[0]","data.aws_iam_policy_document.require_latest_tls","var.attach_deny_insecure_transport_policy","data.aws_iam_policy_document.deny_insecure_transport[0].json","data.aws_iam_policy_document.deny_insecure_transport[0]","data.aws_iam_policy_document.deny_insecure_transport","var.attach_deny_unencrypted_object_uploads","data.aws_iam_policy_document.deny_unencrypted_object_uploads[0].json","data.aws_iam_policy_document.deny_unencrypted_object_uploads[0]","data.aws_iam_policy_document.deny_unencrypted_object_uploads","var.attach_deny_ssec_encrypted_object_uploads","data.aws_iam_policy_document.deny_ssec_encrypted_object_uploads[0].json","data.aws_iam_policy_document.deny_ssec_encrypted_object_uploads[0]","data.aws_iam_policy_document.deny_ssec_encrypted_object_uploads","var.attach_deny_incorrect_kms_key_sse","data.aws_iam_policy_document.deny_incorrect_kms_key_sse[0].json","data.aws_iam_policy_document.deny_incorrect_kms_key_sse[0]","data.aws_iam_policy_document.deny_incorrect_kms_key_sse","var.attach_deny_incorrect_encryption_headers","data.aws_iam_policy_document.deny_incorrect_encryption_headers[0].json","data.aws_iam_policy_document.deny_incorrect_encryption_headers[0]","data.aws_iam_policy_document.deny_incorrect_encryption_headers","var.attach_inventory_destination_policy","var.attach_analytics_destination_policy","data.aws_iam_policy_document.inventory_and_analytics_destination_policy[0].json","data.aws_iam_policy_document.inventory_and_analytics_destination_policy[0]","data.aws_iam_policy_document.inventory_and_analytics_destination_policy","var.attach_policy","var.policy","var.attach_waf_log_delivery_policy","data.aws_iam_policy_document.waf_log_delivery[0].json","data.aws_iam_policy_document.waf_log_delivery[0]","data.aws_iam_policy_document.waf_log_delivery"]}},"schema_version":0,"count_expression":{"references":["local.create_bucket","local.attach_policy"]}},{"address":"data.aws_iam_policy_document.deny_incorrect_encryption_headers","mode":"data","type":"aws_iam_policy_document","name":"deny_incorrect_encryption_headers","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["s3:PutObject"]},"condition":[{"test":{"constant_value":"StringNotEquals"},"values":{"references":["var.server_side_encryption_configuration.rule.apply_server_side_encryption_by_default.sse_algorithm","var.server_side_encryption_configuration.rule.apply_server_side_encryption_by_default","var.server_side_encryption_configuration.rule","var.server_side_encryption_configuration"]},"variable":{"constant_value":"s3:x-amz-server-side-encryption"}}],"effect":{"constant_value":"Deny"},"principals":[{"identifiers":{"constant_value":["*"]},"type":{"constant_value":"*"}}],"resources":{"references":["aws_s3_bucket.this[0].arn","aws_s3_bucket.this[0]","aws_s3_bucket.this"]},"sid":{"constant_value":"denyIncorrectEncryptionHeaders"}}]},"schema_version":0,"count_expression":{"references":["local.create_bucket","var.attach_deny_incorrect_encryption_headers","var.is_directory_bucket"]}},{"address":"data.aws_iam_policy_document.deny_incorrect_kms_key_sse","mode":"data","type":"aws_iam_policy_document","name":"deny_incorrect_kms_key_sse","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["s3:PutObject"]},"condition":[{"test":{"constant_value":"StringNotEquals"},"values":{"references":["var.allowed_kms_key_arn"]},"variable":{"constant_value":"s3:x-amz-server-side-encryption-aws-kms-key-id"}}],"effect":{"constant_value":"Deny"},"principals":[{"identifiers":{"constant_value":["*"]},"type":{"constant_value":"*"}}],"resources":{"references":["aws_s3_bucket.this[0].arn","aws_s3_bucket.this[0]","aws_s3_bucket.this"]},"sid":{"constant_value":"denyIncorrectKmsKeySse"}}]},"schema_version":0,"count_expression":{"references":["local.create_bucket","var.attach_deny_incorrect_kms_key_sse","var.is_directory_bucket"]}},{"address":"data.aws_iam_policy_document.deny_insecure_transport","mode":"data","type":"aws_iam_policy_document","name":"deny_insecure_transport","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["s3:*"]},"condition":[{"test":{"constant_value":"Bool"},"values":{"constant_value":["false"]},"variable":{"constant_value":"aws:SecureTransport"}}],"effect":{"constant_value":"Deny"},"principals":[{"identifiers":{"constant_value":["*"]},"type":{"constant_value":"*"}}],"resources":{"references":["aws_s3_bucket.this[0].arn","aws_s3_bucket.this[0]","aws_s3_bucket.this","aws_s3_bucket.this[0].arn","aws_s3_bucket.this[0]","aws_s3_bucket.this"]},"sid":{"constant_value":"denyInsecureTransport"}}]},"schema_version":0,"count_expression":{"references":["local.create_bucket","var.attach_deny_insecure_transport_policy","var.is_directory_bucket"]}},{"address":"data.aws_iam_policy_document.deny_ssec_encrypted_object_uploads","mode":"data","type":"aws_iam_policy_document","name":"deny_ssec_encrypted_object_uploads","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["s3:PutObject"]},"condition":[{"test":{"constant_value":"Null"},"values":{"constant_value":[false]},"variable":{"constant_value":"s3:x-amz-server-side-encryption-customer-algorithm"}}],"effect":{"constant_value":"Deny"},"principals":[{"identifiers":{"constant_value":["*"]},"type":{"constant_value":"*"}}],"resources":{"references":["aws_s3_bucket.this[0].arn","aws_s3_bucket.this[0]","aws_s3_bucket.this"]},"sid":{"constant_value":"denySSECEncryptedObjectUploads"}}]},"schema_version":0,"count_expression":{"references":["local.create_bucket","var.attach_deny_ssec_encrypted_object_uploads","var.is_directory_bucket"]}},{"address":"data.aws_iam_policy_document.deny_unencrypted_object_uploads","mode":"data","type":"aws_iam_policy_document","name":"deny_unencrypted_object_uploads","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["s3:PutObject"]},"condition":[{"test":{"constant_value":"Null"},"values":{"constant_value":[true]},"variable":{"constant_value":"s3:x-amz-server-side-encryption"}}],"effect":{"constant_value":"Deny"},"principals":[{"identifiers":{"constant_value":["*"]},"type":{"constant_value":"*"}}],"resources":{"references":["aws_s3_bucket.this[0].arn","aws_s3_bucket.this[0]","aws_s3_bucket.this"]},"sid":{"constant_value":"denyUnencryptedObjectUploads"}}]},"schema_version":0,"count_expression":{"references":["local.create_bucket","var.attach_deny_unencrypted_object_uploads","var.is_directory_bucket"]}},{"address":"data.aws_iam_policy_document.elb_log_delivery","mode":"data","type":"aws_iam_policy_document","name":"elb_log_delivery","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["s3:PutObject"]},"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"constant_value":["logdelivery.elasticloadbalancing.amazonaws.com"]},"type":{"constant_value":"Service"}}],"resources":{"references":["aws_s3_bucket.this[0].arn","aws_s3_bucket.this[0]","aws_s3_bucket.this"]},"sid":{"constant_value":""}}]},"schema_version":0,"count_expression":{"references":["local.create_bucket","var.attach_elb_log_delivery_policy","var.is_directory_bucket"]}},{"address":"data.aws_iam_policy_document.inventory_and_analytics_destination_policy","mode":"data","type":"aws_iam_policy_document","name":"inventory_and_analytics_destination_policy","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["s3:PutObject"]},"condition":[{"test":{"constant_value":"ArnLike"},"values":{"references":["var.inventory_self_source_destination","aws_s3_bucket.this[0].arn","aws_s3_bucket.this[0]","aws_s3_bucket.this","var.inventory_source_bucket_arn","var.analytics_self_source_destination","aws_s3_bucket.this[0].arn","aws_s3_bucket.this[0]","aws_s3_bucket.this","var.analytics_source_bucket_arn"]},"variable":{"constant_value":"aws:SourceArn"}},{"test":{"constant_value":"StringEquals"},"values":{"references":["var.inventory_self_source_destination","data.aws_caller_identity.current.id","data.aws_caller_identity.current","var.inventory_source_account_id","var.analytics_self_source_destination","data.aws_caller_identity.current.id","data.aws_caller_identity.current","var.analytics_source_account_id"]},"variable":{"constant_value":"aws:SourceAccount"}},{"test":{"constant_value":"StringEquals"},"values":{"constant_value":["bucket-owner-full-control"]},"variable":{"constant_value":"s3:x-amz-acl"}}],"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"constant_value":["s3.amazonaws.com"]},"type":{"constant_value":"Service"}}],"resources":{"references":["aws_s3_bucket.this[0].arn","aws_s3_bucket.this[0]","aws_s3_bucket.this"]},"sid":{"constant_value":"destinationInventoryAndAnalyticsPolicy"}}]},"schema_version":0,"count_expression":{"references":["local.create_bucket","var.is_directory_bucket","var.attach_inventory_destination_policy","var.attach_analytics_destination_policy"]}},{"address":"data.aws_iam_policy_document.lb_log_delivery","mode":"data","type":"aws_iam_policy_document","name":"lb_log_delivery","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["s3:PutObject"]},"condition":[{"test":{"constant_value":"StringEquals"},"values":{"constant_value":["bucket-owner-full-control"]},"variable":{"constant_value":"s3:x-amz-acl"}}],"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"constant_value":["delivery.logs.amazonaws.com"]},"type":{"constant_value":"Service"}}],"resources":{"references":["aws_s3_bucket.this[0].arn","aws_s3_bucket.this[0]","aws_s3_bucket.this"]},"sid":{"constant_value":"AlbNlbLogDeliveryWrite"}},{"actions":{"constant_value":["s3:GetBucketAcl","s3:ListBucket"]},"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"constant_value":["delivery.logs.amazonaws.com"]},"type":{"constant_value":"Service"}}],"resources":{"references":["aws_s3_bucket.this[0].arn","aws_s3_bucket.this[0]","aws_s3_bucket.this"]},"sid":{"constant_value":"AlbNlbLogDeliveryAclCheck"}}]},"schema_version":0,"count_expression":{"references":["local.create_bucket","var.attach_lb_log_delivery_policy","var.is_directory_bucket"]}},{"address":"data.aws_iam_policy_document.require_latest_tls","mode":"data","type":"aws_iam_policy_document","name":"require_latest_tls","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["s3:*"]},"condition":[{"test":{"constant_value":"NumericLessThan"},"values":{"constant_value":["1.2"]},"variable":{"constant_value":"s3:TlsVersion"}}],"effect":{"constant_value":"Deny"},"principals":[{"identifiers":{"constant_value":["*"]},"type":{"constant_value":"*"}}],"resources":{"references":["aws_s3_bucket.this[0].arn","aws_s3_bucket.this[0]","aws_s3_bucket.this","aws_s3_bucket.this[0].arn","aws_s3_bucket.this[0]","aws_s3_bucket.this"]},"sid":{"constant_value":"denyOutdatedTLS"}}]},"schema_version":0,"count_expression":{"references":["local.create_bucket","var.attach_require_latest_tls_policy","var.is_directory_bucket"]}},{"address":"data.aws_iam_policy_document.waf_log_delivery","mode":"data","type":"aws_iam_policy_document","name":"waf_log_delivery","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["s3:PutObject"]},"condition":[{"test":{"constant_value":"StringEquals"},"values":{"constant_value":["bucket-owner-full-control"]},"variable":{"constant_value":"s3:x-amz-acl"}},{"test":{"constant_value":"StringEquals"},"values":{"references":["data.aws_caller_identity.current.id","data.aws_caller_identity.current"]},"variable":{"constant_value":"aws:SourceAccount"}},{"test":{"constant_value":"ArnLike"},"values":{"references":["data.aws_region.current.name","data.aws_region.current","data.aws_caller_identity.current.id","data.aws_caller_identity.current"]},"variable":{"constant_value":"aws:SourceArn"}}],"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"constant_value":["delivery.logs.amazonaws.com"]},"type":{"constant_value":"Service"}}],"resources":{"references":["aws_s3_bucket.this[0].arn","aws_s3_bucket.this[0]","aws_s3_bucket.this","data.aws_caller_identity.current.id","data.aws_caller_identity.current"]},"sid":{"constant_value":"WafLogDeliveryWrite"}},{"actions":{"constant_value":["s3:GetBucketAcl"]},"condition":[{"test":{"constant_value":"StringEquals"},"values":{"references":["data.aws_caller_identity.current.id","data.aws_caller_identity.current"]},"variable":{"constant_value":"aws:SourceAccount"}},{"test":{"constant_value":"ArnLike"},"values":{"references":["data.aws_region.current.name","data.aws_region.current","data.aws_caller_identity.current.id","data.aws_caller_identity.current"]},"variable":{"constant_value":"aws:SourceArn"}}],"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"constant_value":["delivery.logs.amazonaws.com"]},"type":{"constant_value":"Service"}}],"resources":{"references":["aws_s3_bucket.this[0].arn","aws_s3_bucket.this[0]","aws_s3_bucket.this"]},"sid":{"constant_value":"WafLogDeliveryAclCheck"}}]},"schema_version":0,"count_expression":{"references":["local.create_bucket","var.attach_waf_log_delivery_policy","var.is_directory_bucket"]}},{"address":"data.aws_partition.current","mode":"data","type":"aws_partition","name":"current","provider_config_key":"aws","schema_version":0},{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_config_key":"aws","schema_version":0}],"variables":{"acceleration_status":{"default":null,"description":"(Optional) Sets the accelerate configuration of an existing bucket. Can be Enabled or Suspended."},"access_log_delivery_policy_source_accounts":{"default":[],"description":"(Optional) List of AWS Account IDs should be allowed to deliver access logs to this bucket."},"access_log_delivery_policy_source_buckets":{"default":[],"description":"(Optional) List of S3 bucket ARNs which should be allowed to deliver access logs to this bucket."},"access_log_delivery_policy_source_organizations":{"default":[],"description":"(Optional) List of AWS Organization IDs should be allowed to deliver access logs to this bucket."},"acl":{"default":null,"description":"(Optional) The canned ACL to apply. Conflicts with `grant`"},"allowed_kms_key_arn":{"default":null,"description":"The ARN of KMS key which should be allowed in PutObject"},"analytics_configuration":{"default":{},"description":"Map containing bucket analytics configuration."},"analytics_self_source_destination":{"default":false,"description":"Whether or not the analytics source bucket is also the destination bucket."},"analytics_source_account_id":{"default":null,"description":"The analytics source account id."},"analytics_source_bucket_arn":{"default":null,"description":"The analytics source bucket ARN."},"attach_access_log_delivery_policy":{"default":false,"description":"Controls if S3 bucket should have S3 access log delivery policy attached"},"attach_analytics_destination_policy":{"default":false,"description":"Controls if S3 bucket should have bucket analytics destination policy attached."},"attach_cloudtrail_log_delivery_policy":{"default":false,"description":"Controls if S3 bucket should have CloudTrail log delivery policy attached"},"attach_deny_incorrect_encryption_headers":{"default":false,"description":"Controls if S3 bucket should deny incorrect encryption headers policy attached."},"attach_deny_incorrect_kms_key_sse":{"default":false,"description":"Controls if S3 bucket policy should deny usage of incorrect KMS key SSE."},"attach_deny_insecure_transport_policy":{"default":false,"description":"Controls if S3 bucket should have deny non-SSL transport policy attached"},"attach_deny_ssec_encrypted_object_uploads":{"default":false,"description":"Controls if S3 bucket should deny SSEC encrypted object uploads."},"attach_deny_unencrypted_object_uploads":{"default":false,"description":"Controls if S3 bucket should deny unencrypted object uploads policy attached."},"attach_elb_log_delivery_policy":{"default":false,"description":"Controls if S3 bucket should have ELB log delivery policy attached"},"attach_inventory_destination_policy":{"default":false,"description":"Controls if S3 bucket should have bucket inventory destination policy attached."},"attach_lb_log_delivery_policy":{"default":false,"description":"Controls if S3 bucket should have ALB/NLB log delivery policy attached"},"attach_policy":{"default":false,"description":"Controls if S3 bucket should have bucket policy attached (set to `true` to use value of `policy` as bucket policy)"},"attach_public_policy":{"default":true,"description":"Controls if a user defined public bucket policy will be attached (set to `false` to allow upstream to apply defaults to the bucket)"},"attach_require_latest_tls_policy":{"default":false,"description":"Controls if S3 bucket should require the latest version of TLS"},"attach_waf_log_delivery_policy":{"default":false,"description":"Controls if S3 bucket should have WAF log delivery policy attached"},"availability_zone_id":{"default":null,"description":"Availability Zone ID or Local Zone ID"},"block_public_acls":{"default":true,"description":"Whether Amazon S3 should block public ACLs for this bucket."},"block_public_policy":{"default":true,"description":"Whether Amazon S3 should block public bucket policies for this bucket."},"bucket":{"default":null,"description":"(Optional, Forces new resource) The name of the bucket. If omitted, Terraform will assign a random, unique name."},"bucket_prefix":{"default":null,"description":"(Optional, Forces new resource) Creates a unique bucket name beginning with the specified prefix. Conflicts with bucket."},"control_object_ownership":{"default":false,"description":"Whether to manage S3 Bucket Ownership Controls on this bucket."},"cors_rule":{"default":[],"description":"List of maps containing rules for Cross-Origin Resource Sharing."},"create_bucket":{"default":true,"description":"Controls if S3 bucket should be created"},"data_redundancy":{"default":null,"description":"Data redundancy. Valid values: `SingleAvailabilityZone`"},"expected_bucket_owner":{"default":null,"description":"The account ID of the expected bucket owner"},"force_destroy":{"default":false,"description":"(Optional, Default:false ) A boolean that indicates all objects should be deleted from the bucket so that the bucket can be destroyed without error. These objects are not recoverable."},"grant":{"default":[],"description":"An ACL policy grant. Conflicts with `acl`"},"ignore_public_acls":{"default":true,"description":"Whether Amazon S3 should ignore public ACLs for this bucket."},"intelligent_tiering":{"default":{},"description":"Map containing intelligent tiering configuration."},"inventory_configuration":{"default":{},"description":"Map containing S3 inventory configuration."},"inventory_self_source_destination":{"default":false,"description":"Whether or not the inventory source bucket is also the destination bucket."},"inventory_source_account_id":{"default":null,"description":"The inventory source account id."},"inventory_source_bucket_arn":{"default":null,"description":"The inventory source bucket ARN."},"is_directory_bucket":{"default":false,"description":"If the s3 bucket created is a directory bucket"},"lb_log_delivery_policy_source_organizations":{"default":[],"description":"(Optional) List of AWS Organization IDs should be allowed to deliver ALB/NLB logs to this bucket."},"lifecycle_rule":{"default":[],"description":"List of maps containing configuration of object lifecycle management."},"location_type":{"default":null,"description":"Location type. Valid values: `AvailabilityZone` or `LocalZone`"},"logging":{"default":{},"description":"Map containing access bucket logging configuration."},"metric_configuration":{"default":[],"description":"Map containing bucket metric configuration."},"object_lock_configuration":{"default":{},"description":"Map containing S3 object locking configuration."},"object_lock_enabled":{"default":false,"description":"Whether S3 bucket should have an Object Lock configuration enabled."},"object_ownership":{"default":"BucketOwnerEnforced","description":"Object ownership. Valid values: BucketOwnerEnforced, BucketOwnerPreferred or ObjectWriter. 'BucketOwnerEnforced': ACLs are disabled, and the bucket owner automatically owns and has full control over every object in the bucket. 'BucketOwnerPreferred': Objects uploaded to the bucket change ownership to the bucket owner if the objects are uploaded with the bucket-owner-full-control canned ACL. 'ObjectWriter': The uploading account will own the object if the object is uploaded with the bucket-owner-full-control canned ACL."},"owner":{"default":{},"description":"Bucket owner's display name and ID. Conflicts with `acl`"},"policy":{"default":null,"description":"(Optional) A valid bucket policy JSON document. Note that if the policy document is not specific enough (but still valid), Terraform may view the policy as constantly changing in a terraform plan. In this case, please make sure you use the verbose/specific version of the policy. For more information about building AWS IAM policy documents with Terraform, see the AWS IAM Policy Document Guide."},"putin_khuylo":{"default":true,"description":"Do you agree that Putin doesn't respect Ukrainian sovereignty and territorial integrity? More info: https://en.wikipedia.org/wiki/Putin_khuylo!"},"replication_configuration":{"default":{},"description":"Map containing cross-region replication configuration."},"request_payer":{"default":null,"description":"(Optional) Specifies who should bear the cost of Amazon S3 data transfer. Can be either BucketOwner or Requester. By default, the owner of the S3 bucket would incur the costs of any data transfer. See Requester Pays Buckets developer guide for more information."},"restrict_public_buckets":{"default":true,"description":"Whether Amazon S3 should restrict public bucket policies for this bucket."},"server_side_encryption_configuration":{"default":{},"description":"Map containing server-side encryption configuration."},"tags":{"default":{},"description":"(Optional) A mapping of tags to assign to the bucket."},"transition_default_minimum_object_size":{"default":null,"description":"The default minimum object size behavior applied to the lifecycle configuration. Valid values: all_storage_classes_128K (default), varies_by_storage_class"},"type":{"default":"Directory","description":"Bucket type. Valid values: `Directory`"},"versioning":{"default":{},"description":"Map containing versioning configuration."},"website":{"default":{},"description":"Map containing static web-site hosting or redirect configuration."}}},"version_constraint":"~\u003e 4.0"}},"variables":{"ami_id":{"description":"ID of the Amazon Linux 2 AMI"},"days_until_black_friday":{"default":7,"description":"Business context: Days remaining until Black Friday peak traffic period"},"default_security_group_id":{"description":"ID of the default security group"},"enable_memory_optimization_demo":{"default":true,"description":"Enable the Java application memory optimization in production"},"enable_message_size_breach_demo":{"default":true,"description":"Enable the message size limit breach demo scenario"},"example_env":{"default":"github","description":"Indicate which example environment to use"},"memory_optimization_container_count":{"default":3,"description":"Number of ECS service instances for load distribution"},"memory_optimization_container_memory":{"default":2048,"description":"Memory allocation per ECS container in MB. Optimized based on monitoring data showing 800MB average usage with 950MB peaks."},"message_size_breach_batch_size":{"default":10,"description":"Number of messages to process in each Lambda batch. Combined with max_message_size, this determines total payload size"},"message_size_breach_lambda_memory":{"default":1024,"description":"Lambda function memory allocation in MB"},"message_size_breach_lambda_timeout":{"default":180,"description":"Lambda function timeout in seconds"},"message_size_breach_max_size":{"default":25600,"description":"Maximum message size for SQS queue in bytes. 25KB (25600) is safe, 100KB (102400) will break Lambda batch processing. Based on AWS Lambda async payload limit of 256KB."},"message_size_breach_retention_days":{"default":14,"description":"CloudWatch log retention period in days"},"private_subnets":{"description":"IDs of the private subnets"},"public_route_table_ids":{"description":"IDs of the public route tables"},"public_subnets":{"description":"IDs of the public subnets"},"vpc_id":{"description":"ID of the VPC"}}}},"shared_security_group":{"source":"./modules/shared-security-group","expressions":{"ami_id":{"references":["module.baseline.ami_id","module.baseline"]},"enabled":{"constant_value":true},"public_subnets":{"references":["module.baseline.public_subnets","module.baseline"]},"vpc_id":{"references":["module.baseline.vpc_id","module.baseline"]}},"module":{"outputs":{"ami_id":{"expression":{"references":["var.ami_id"]},"description":"AMI ID (for manual instance creation)"},"api_server_instance_id":{"expression":{"references":["var.enabled","aws_instance.api_server[0].id","aws_instance.api_server[0]","aws_instance.api_server"]},"description":"Instance ID of the API server"},"api_server_public_ip":{"expression":{"references":["var.enabled","aws_instance.api_server[0].public_ip","aws_instance.api_server[0]","aws_instance.api_server"]},"description":"Public IP of the API server"},"manual_instance_command":{"expression":{"references":["var.enabled","var.ami_id","var.public_subnets[0]","var.public_subnets","aws_security_group.internet_access[0].id","aws_security_group.internet_access[0]","aws_security_group.internet_access","data.aws_region.current.name","data.aws_region.current"]},"description":"AWS CLI command to create the manual data-processor instance"},"security_group_id":{"expression":{"references":["var.enabled","aws_security_group.internet_access[0].id","aws_security_group.internet_access[0]","aws_security_group.internet_access"]},"description":"ID of the internet-access security group"},"security_group_name":{"expression":{"references":["var.enabled","aws_security_group.internet_access[0].name","aws_security_group.internet_access[0]","aws_security_group.internet_access"]},"description":"Name of the internet-access security group"},"subnet_id":{"expression":{"references":["var.enabled","var.public_subnets[0]","var.public_subnets"]},"description":"Subnet ID (for manual instance creation)"},"vpc_id":{"expression":{"references":["var.vpc_id"]},"description":"VPC ID (for manual instance creation)"}},"resources":[{"address":"aws_instance.api_server","mode":"managed","type":"aws_instance","name":"api_server","provider_config_key":"aws","expressions":{"ami":{"references":["var.ami_id"]},"associate_public_ip_address":{"constant_value":true},"instance_type":{"constant_value":"t3.nano"},"root_block_device":[{"delete_on_termination":{"constant_value":true},"volume_size":{"constant_value":8},"volume_type":{"constant_value":"gp3"}}],"subnet_id":{"references":["var.public_subnets[0]","var.public_subnets"]},"tags":{"references":["local.common_tags"]},"user_data":{},"vpc_security_group_ids":{"references":["aws_security_group.internet_access[0].id","aws_security_group.internet_access[0]","aws_security_group.internet_access"]}},"schema_version":1,"count_expression":{"references":["var.enabled"]}},{"address":"aws_security_group.internet_access","mode":"managed","type":"aws_security_group","name":"internet_access","provider_config_key":"aws","expressions":{"description":{"constant_value":"Allow outbound internet access"},"egress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":"Allow all outbound traffic","from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":null,"to_port":0}]},"ingress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":"SSH access","from_port":22,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_groups":null,"self":null,"to_port":22},{"cidr_blocks":["0.0.0.0/0"],"description":"HTTP access","from_port":80,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_groups":null,"self":null,"to_port":80}]},"name":{"constant_value":"internet-access"},"tags":{"references":["local.common_tags"]},"vpc_id":{"references":["var.vpc_id"]}},"schema_version":1,"count_expression":{"references":["var.enabled"]}},{"address":"random_id.suffix","mode":"managed","type":"random_id","name":"suffix","provider_config_key":"module.shared_security_group:random","expressions":{"byte_length":{"constant_value":4}},"schema_version":0,"count_expression":{"references":["var.enabled"]}},{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_config_key":"aws","schema_version":0}],"variables":{"additional_tags":{"default":{},"description":"Additional tags to apply to resources"},"ami_id":{"description":"AMI ID for the instance"},"enabled":{"default":true,"description":"Enable or disable this module"},"name_prefix":{"default":"platform","description":"Prefix for resource names"},"public_subnets":{"description":"Public subnet IDs"},"vpc_id":{"description":"VPC ID"}}}}},"variables":{"days_until_black_friday":{"default":7,"description":"Business context: Days remaining until Black Friday peak traffic period"},"enable_api_access":{"default":true,"description":"Enable the customer API access module"},"enable_memory_optimization_demo":{"default":true,"description":"Enable the Java application memory optimization in production"},"enable_message_size_breach_demo":{"default":true,"description":"Enable the message size limit breach demo scenario"},"example_env":{"default":"terraform-example","description":"Indicate which example environment to use"},"memory_optimization_container_count":{"default":3,"description":"Number of ECS service instances for load distribution"},"memory_optimization_container_memory":{"default":2048,"description":"Memory allocation per ECS container in MB. Optimized based on monitoring data showing 800MB average usage with 950MB peaks."},"message_size_breach_batch_size":{"default":10,"description":"Number of messages to process in each Lambda batch. Combined with max_message_size, this determines total payload size"},"message_size_breach_lambda_memory":{"default":1024,"description":"Lambda function memory allocation in MB"},"message_size_breach_lambda_timeout":{"default":180,"description":"Lambda function timeout in seconds"},"message_size_breach_max_size":{"default":25600,"description":"Maximum message size for SQS queue in bytes. 25KB (25600) is safe, 100KB (102400) will break Lambda batch processing. Based on AWS Lambda async payload limit of 256KB."},"message_size_breach_retention_days":{"default":14,"description":"CloudWatch log retention period in days"}}}},"relevant_attributes":[{"resource":"module.baseline.module.vpc.aws_route.private_ipv6_egress","attribute":[]},{"resource":"module.baseline.module.vpc.aws_vpc.this[0]","attribute":["enable_dns_hostnames"]},{"resource":"module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this[0]","attribute":["vpc_id"]},{"resource":"module.heritage[0].module.message_size_breach[0].aws_cloudwatch_metric_alarm.lambda_errors","attribute":["alarm_name"]},{"resource":"module.heritage[0].module.ecs.module.service.aws_ecs_service.ignore_task_definition[0]","attribute":["id"]},{"resource":"module.baseline.module.vpc.aws_route_table_association.private","attribute":[]},{"resource":"module.baseline.module.vpc.aws_subnet.intra","attribute":[]},{"resource":"module.baseline.module.vpc.aws_vpc.this[0]","attribute":["default_route_table_id"]},{"resource":"module.baseline.module.vpc.aws_route_table.public","attribute":[]},{"resource":"module.heritage[0].module.ecs.module.service.aws_ecs_task_set.ignore_task_definition[0]","attribute":["status"]},{"resource":"module.api_access[0].aws_route53_zone.api","attribute":["name_servers"]},{"resource":"module.heritage[0].module.ecs.module.service.aws_ecs_service.this[0]","attribute":["name"]},{"resource":"module.api_server.aws_instance.api_server[0]","attribute":["id"]},{"resource":"module.baseline.module.vpc.aws_internet_gateway.this[0]","attribute":["arn"]},{"resource":"module.baseline.module.vpc.aws_route_table_association.redshift_public","attribute":[]},{"resource":"module.baseline.module.vpc.aws_vpc_ipv4_cidr_block_association.this","attribute":[]},{"resource":"module.heritage[0].module.cloudfront.aws_cloudfront_distribution.this[0]","attribute":["domain_name"]},{"resource":"module.heritage[0].module.memory_optimization.aws_ecs_cluster.main[0]","attribute":["name"]},{"resource":"module.heritage[0].module.message_size_breach.aws_sqs_queue.image_processing_queue","attribute":["name"]},{"resource":"module.baseline.module.vpc.aws_egress_only_internet_gateway.this","attribute":[]},{"resource":"module.heritage[0].module.ecs.module.cluster.aws_cloudwatch_log_group.this[0]","attribute":["arn"]},{"resource":"module.heritage[0].module.ecs.module.service.aws_ecs_task_set.this[0]","attribute":["status"]},{"resource":"module.heritage[0].module.ecs.module.service.aws_appautoscaling_policy.this","attribute":[]},{"resource":"module.heritage[0].module.ecs.module.service.aws_appautoscaling_target.this[0]","attribute":["scalable_dimension"]},{"resource":"module.baseline.module.vpc.aws_route_table.intra","attribute":[]},{"resource":"module.baseline.module.vpc.aws_vpc.this[0]","attribute":["id"]},{"resource":"module.heritage[0].module.cloudfront.aws_cloudfront_distribution.this[0]","attribute":["tags_all"]},{"resource":"module.heritage[0].module.message_size_breach[0].aws_sqs_queue.image_processing_queue","attribute":["arn"]},{"resource":"module.baseline.module.vpc.aws_route.database_nat_gateway","attribute":[]},{"resource":"module.api_server.aws_sns_topic.alerts[0]","attribute":["arn"]},{"resource":"module.heritage[0].module.s3_one.aws_s3_bucket.this[0]","attribute":["arn"]},{"resource":"module.api_access[0].aws_sns_topic.alerts","attribute":["arn"]},{"resource":"module.baseline.module.vpc.aws_route_table_association.public","attribute":[]},{"resource":"module.baseline.data.aws_ami.amazon_linux","attribute":["id"]},{"resource":"module.api_access[0].aws_route53_health_check.api","attribute":["id"]},{"resource":"module.heritage[0].module.ecs.module.service.module.container_definition.aws_cloudwatch_log_group.this[0]","attribute":["arn"]},{"resource":"module.heritage[0].module.message_size_breach.aws_cloudwatch_metric_alarm.sqs_queue_depth","attribute":["alarm_name"]},{"resource":"module.api_access[0].aws_instance.api_server","attribute":["id"]},{"resource":"module.heritage[0].module.ecs.module.cluster.aws_ecs_capacity_provider.this","attribute":[]},{"resource":"module.heritage[0].module.cloudfront.aws_cloudfront_distribution.this[0]","attribute":["id"]},{"resource":"module.baseline.module.vpc.aws_eip.nat","attribute":[]},{"resource":"module.baseline.module.vpc.aws_vpc_block_public_access_exclusion.this","attribute":[]},{"resource":"module.heritage[0].module.message_size_breach[0].aws_sqs_queue.image_processing_dlq","attribute":["arn"]},{"resource":"module.heritage[0].module.message_size_breach[0].aws_sqs_queue.image_processing_dlq","attribute":["url"]},{"resource":"module.heritage[0].module.ecs.module.cluster.aws_ecs_cluster.this[0]","attribute":["name"]},{"resource":"module.heritage[0].module.cloudfront.aws_cloudfront_distribution.this[0]","attribute":["trusted_signers"]},{"resource":"module.heritage[0].module.message_size_breach[0].aws_sqs_queue.image_processing_queue","attribute":["name"]},{"resource":"module.baseline.module.vpc.aws_customer_gateway.this","attribute":[]},{"resource":"module.heritage[0].module.ecs.module.service.aws_appautoscaling_target.this[0]","attribute":["resource_id"]},{"resource":"module.heritage[0].module.s3_one.aws_s3_bucket_website_configuration.this[0]","attribute":["website_endpoint"]},{"resource":"module.shared_security_group.aws_security_group.internet_access[0]","attribute":["name"]},{"resource":"module.baseline.module.vpc.aws_internet_gateway.this[0]","attribute":["id"]},{"resource":"module.baseline.module.vpc.aws_vpc.this[0]","attribute":["ipv6_cidr_block"]},{"resource":"module.heritage[0].module.message_size_breach[0].aws_lambda_function.image_processor","attribute":["function_name"]},{"resource":"module.heritage[0].module.memory_optimization.random_id.suffix[0]","attribute":["hex"]},{"resource":"module.heritage[0].module.ecs.module.service.aws_iam_role.tasks[0]","attribute":["arn"]},{"resource":"module.heritage[0].module.ecs.module.service.aws_appautoscaling_scheduled_action.this","attribute":[]},{"resource":"module.heritage[0].module.ecs.module.service.aws_ecs_task_definition.this[0]","attribute":["family"]},{"resource":"module.heritage[0].module.s3_one.data.aws_iam_policy_document.combined[0]","attribute":["json"]},{"resource":"module.heritage[0].module.cloudfront.aws_cloudfront_distribution.this[0]","attribute":["status"]},{"resource":"module.heritage[0].module.ecs.module.service.aws_iam_role.service[0]","attribute":["unique_id"]},{"resource":"module.heritage[0].module.ecs.module.service.aws_appautoscaling_target.this[0]","attribute":["service_namespace"]},{"resource":"module.heritage[0].module.ecs.module.service.aws_iam_role.tasks[0]","attribute":["unique_id"]},{"resource":"module.baseline.module.vpc.aws_route_table_association.redshift","attribute":[]},{"resource":"module.heritage[0].module.memory_optimization.aws_cloudwatch_log_group.app[0]","attribute":["name"]},{"resource":"module.baseline.module.vpc.aws_subnet.private","attribute":[]},{"resource":"module.heritage[0].module.ecs.module.service.aws_iam_role.service[0]","attribute":["arn"]},{"resource":"module.baseline.module.vpc.aws_route_table_association.database","attribute":[]},{"resource":"module.baseline.module.vpc.aws_vpc.this[0]","attribute":["ipv6_association_id"]},{"resource":"module.heritage[0].module.ecs.module.service.aws_iam_role.tasks[0]","attribute":["name"]},{"resource":"module.heritage[0].module.ecs.module.service.data.aws_ecs_task_definition.this[0]","attribute":["revision"]},{"resource":"module.heritage[0].module.message_size_breach.aws_sqs_queue.image_processing_dlq","attribute":["url"]},{"resource":"module.shared_security_group.aws_instance.api_server[0]","attribute":["public_ip"]},{"resource":"module.api_server.aws_instance.api_server[0]","attribute":["public_ip"]},{"resource":"module.baseline.module.vpc.aws_route_table.database","attribute":[]},{"resource":"module.baseline.module.vpc.aws_subnet.outpost","attribute":[]},{"resource":"module.heritage[0].module.cloudfront.aws_cloudfront_distribution.this[0]","attribute":["etag"]},{"resource":"module.heritage[0].module.cloudfront.aws_cloudfront_distribution.this[0]","attribute":["hosted_zone_id"]},{"resource":"module.heritage[0].module.s3_one.aws_s3_bucket.this[0]","attribute":["bucket_regional_domain_name"]},{"resource":"module.heritage[0].module.s3_one.aws_s3_bucket_lifecycle_configuration.this[0]","attribute":["rule"]},{"resource":"module.heritage[0].module.ecs.module.service.aws_ecs_task_set.this[0]","attribute":["arn"]},{"resource":"module.heritage[0].module.message_size_breach.aws_cloudwatch_log_group.lambda_logs","attribute":["name"]},{"resource":"module.heritage[0].module.ecs.module.service.aws_ecs_task_definition.this[0]","attribute":["revision"]},{"resource":"module.heritage[0].module.s3_one.aws_s3_bucket.this[0]","attribute":["region"]},{"resource":"module.heritage[0].module.ecs.module.service.aws_ecs_task_definition.this[0]","attribute":["arn"]},{"resource":"module.heritage[0].module.ecs.module.service.aws_iam_role.service[0]","attribute":["name"]},{"resource":"module.api_access[0].aws_route53_zone.api","attribute":["zone_id"]},{"resource":"module.heritage[0].module.ecs.module.service.aws_ecs_task_set.ignore_task_definition[0]","attribute":["arn"]},{"resource":"module.heritage[0].module.cloudfront.aws_cloudfront_monitoring_subscription.this[0]","attribute":["id"]},{"resource":"module.heritage[0].module.cloudfront.aws_cloudfront_origin_access_control.this","attribute":[]},{"resource":"module.api_server.aws_lb.api[0]","attribute":["dns_name"]},{"resource":"module.heritage[0].module.cloudfront.aws_cloudfront_distribution.this[0]","attribute":["in_progress_validation_batches"]},{"resource":"module.heritage[0].module.s3_one.aws_s3_bucket.this[0]","attribute":["id"]},{"resource":"module.api_access[0].aws_instance.api_server","attribute":["private_ip"]},{"resource":"module.heritage[0].module.memory_optimization.aws_ecs_service.app[0]","attribute":["name"]},{"resource":"module.baseline.module.vpc.aws_route_table_association.elasticache","attribute":[]},{"resource":"module.baseline.module.vpc.aws_vpc.this[0]","attribute":["owner_id"]},{"resource":"module.heritage[0].module.ecs.module.service.aws_ecs_task_set.ignore_task_definition[0]","attribute":["stability_status"]},{"resource":"module.heritage[0].module.ecs.module.service.aws_iam_role.task_exec[0]","attribute":["unique_id"]},{"resource":"module.api_access[0].aws_security_group.customer_access","attribute":["id"]},{"resource":"module.heritage[0].module.ecs.module.service.aws_iam_role.task_exec[0]","attribute":["name"]},{"resource":"module.baseline.module.vpc.aws_route_table_association.intra","attribute":[]},{"resource":"module.heritage[0].module.ecs.module.cluster.aws_ecs_cluster.this[0]","attribute":["id"]},{"resource":"module.heritage[0].module.ecs.module.service.module.container_definition.aws_cloudwatch_log_group.this[0]","attribute":["name"]},{"resource":"module.baseline.module.vpc.aws_subnet.elasticache","attribute":[]},{"resource":"module.heritage[0].module.ecs.module.service.aws_security_group.this[0]","attribute":["arn"]},{"resource":"module.baseline.module.vpc.aws_vpc.this[0]","attribute":["main_route_table_id"]},{"resource":"module.heritage[0].module.message_size_breach[0].aws_sqs_queue.image_processing_queue","attribute":["url"]},{"resource":"module.baseline.module.vpc.aws_route.public_internet_gateway[0]","attribute":["id"]},{"resource":"module.api_access[0].aws_eip.api_server","attribute":["public_ip"]},{"resource":"module.shared_security_group.aws_instance.api_server[0]","attribute":["id"]},{"resource":"module.heritage[0].module.ecs.module.cluster.aws_ecs_cluster_capacity_providers.this","attribute":[]},{"resource":"module.heritage[0].module.message_size_breach[0].aws_cloudwatch_log_group.lambda_logs","attribute":["name"]},{"resource":"module.baseline.module.vpc.aws_iam_role.vpc_flow_log_cloudwatch[0]","attribute":["arn"]},{"resource":"module.baseline.module.vpc.aws_route.private_nat_gateway","attribute":[]},{"resource":"module.heritage[0].module.s3_one.aws_s3_bucket.this[0]","attribute":["hosted_zone_id"]},{"resource":"module.baseline.module.vpc.aws_vpc.this[0]","attribute":["arn"]},{"resource":"module.heritage[0].module.cloudfront.aws_cloudfront_distribution.this[0]","attribute":["last_modified_time"]},{"resource":"module.heritage[0].module.ecs.module.service.module.container_definition.data.aws_region.current","attribute":["name"]},{"resource":"module.baseline.module.vpc.aws_route_table.elasticache","attribute":[]},{"resource":"module.baseline.module.vpc.aws_subnet.redshift","attribute":[]},{"resource":"module.heritage[0].module.cloudfront.aws_cloudfront_distribution.this[0]","attribute":["caller_reference"]},{"resource":"module.heritage[0].module.ecs.module.service.aws_security_group.this[0]","attribute":["id"]},{"resource":"module.heritage[0].module.message_size_breach.aws_cloudwatch_metric_alarm.lambda_errors","attribute":["alarm_name"]},{"resource":"module.baseline.module.vpc.aws_vpc.this[0]","attribute":["default_network_acl_id"]},{"resource":"module.heritage[0].module.s3_one.aws_s3_bucket_policy.this[0]","attribute":["policy"]},{"resource":"module.heritage[0].module.memory_optimization.aws_lb.app[0]","attribute":["dns_name"]},{"resource":"module.heritage[0].module.message_size_breach[0].aws_cloudwatch_metric_alarm.sqs_queue_depth","attribute":["alarm_name"]},{"resource":"module.shared_security_group.aws_security_group.internet_access[0]","attribute":["id"]},{"resource":"module.heritage[0].module.s3_one.aws_s3_bucket_website_configuration.this[0]","attribute":["website_domain"]},{"resource":"module.heritage[0].module.message_size_breach.aws_lambda_function.image_processor","attribute":["arn"]},{"resource":"module.heritage[0].module.message_size_breach.aws_sqs_queue.image_processing_queue","attribute":["url"]},{"resource":"module.baseline.module.vpc.aws_cloudwatch_log_group.flow_log[0]","attribute":["arn"]},{"resource":"module.baseline.module.vpc.aws_route_table.redshift","attribute":[]},{"resource":"module.heritage[0].module.ecs.module.service.aws_iam_role.task_exec[0]","attribute":["arn"]},{"resource":"module.heritage[0].module.ecs.module.service.aws_ecs_service.ignore_task_definition[0]","attribute":["name"]},{"resource":"module.heritage[0].module.ecs.module.service.aws_ecs_task_set.this[0]","attribute":["task_set_id"]},{"resource":"module.heritage[0].module.message_size_breach[0].aws_lambda_function.image_processor","attribute":["arn"]},{"resource":"module.baseline.module.vpc.aws_nat_gateway.this","attribute":[]},{"resource":"module.baseline.module.vpc.aws_route_table.private","attribute":[]},{"resource":"module.baseline.module.vpc.aws_vpc.this[0]","attribute":["default_security_group_id"]},{"resource":"module.heritage[0].module.cloudfront.aws_cloudfront_origin_access_identity.this","attribute":[]},{"resource":"module.heritage[0].module.ecs.module.service.aws_ecs_task_set.ignore_task_definition[0]","attribute":["task_set_id"]},{"resource":"module.baseline.module.vpc.aws_subnet.database","attribute":[]},{"resource":"module.heritage[0].module.message_size_breach.aws_sqs_queue.image_processing_dlq","attribute":["arn"]},{"resource":"module.shared_security_group.data.aws_region.current","attribute":["name"]},{"resource":"module.heritage[0].module.ecs.module.cluster.aws_cloudwatch_log_group.this[0]","attribute":["name"]},{"resource":"module.heritage[0].module.ecs.module.service.aws_ecs_service.this[0]","attribute":["id"]},{"resource":"module.heritage[0].module.message_size_breach.aws_sqs_queue.image_processing_queue","attribute":["arn"]},{"resource":"module.baseline.module.vpc.aws_vpc.this[0]","attribute":["cidr_block"]},{"resource":"module.heritage[0].module.s3_one.aws_s3_directory_bucket.this[0]","attribute":["bucket"]},{"resource":"module.api_access[0].aws_security_group.internal_services","attribute":["id"]},{"resource":"module.baseline.module.vpc.aws_subnet.public","attribute":[]},{"resource":"module.heritage[0].module.s3_one.aws_s3_bucket.this[0]","attribute":["bucket_domain_name"]},{"resource":"module.baseline.module.vpc.aws_vpc.this[0]","attribute":["enable_dns_support"]},{"resource":"module.baseline.module.vpc.aws_vpc.this[0]","attribute":["instance_tenancy"]},{"resource":"module.heritage[0].module.cloudfront.aws_cloudfront_distribution.this[0]","attribute":["arn"]},{"resource":"module.heritage[0].module.ecs.module.cluster.aws_ecs_cluster.this[0]","attribute":["arn"]},{"resource":"module.heritage[0].module.ecs.module.service.aws_ecs_task_set.this[0]","attribute":["stability_status"]},{"resource":"module.heritage[0].module.message_size_breach.aws_lambda_function.image_processor","attribute":["function_name"]}],"checks":[{"address":{"kind":"var","module":"module.heritage.module.memory_optimization","name":"container_memory","to_display":"module.heritage.module.memory_optimization.var.container_memory"},"status":"pass","instances":[{"address":{"module":"module.heritage[0].module.memory_optimization","to_display":"module.heritage[0].module.memory_optimization.var.container_memory"},"status":"pass"}]},{"address":{"kind":"var","module":"module.heritage.module.memory_optimization","name":"number_of_containers","to_display":"module.heritage.module.memory_optimization.var.number_of_containers"},"status":"pass","instances":[{"address":{"module":"module.heritage[0].module.memory_optimization","to_display":"module.heritage[0].module.memory_optimization.var.number_of_containers"},"status":"pass"}]},{"address":{"kind":"var","module":"module.heritage.module.message_size_breach","name":"batch_size","to_display":"module.heritage.module.message_size_breach.var.batch_size"},"status":"pass","instances":[{"address":{"module":"module.heritage[0].module.message_size_breach[0]","to_display":"module.heritage[0].module.message_size_breach[0].var.batch_size"},"status":"pass"}]},{"address":{"kind":"var","module":"module.heritage.module.message_size_breach","name":"lambda_memory","to_display":"module.heritage.module.message_size_breach.var.lambda_memory"},"status":"pass","instances":[{"address":{"module":"module.heritage[0].module.message_size_breach[0]","to_display":"module.heritage[0].module.message_size_breach[0].var.lambda_memory"},"status":"pass"}]},{"address":{"kind":"var","module":"module.heritage.module.message_size_breach","name":"lambda_timeout","to_display":"module.heritage.module.message_size_breach.var.lambda_timeout"},"status":"pass","instances":[{"address":{"module":"module.heritage[0].module.message_size_breach[0]","to_display":"module.heritage[0].module.message_size_breach[0].var.lambda_timeout"},"status":"pass"}]},{"address":{"kind":"var","module":"module.heritage.module.message_size_breach","name":"max_message_size","to_display":"module.heritage.module.message_size_breach.var.max_message_size"},"status":"pass","instances":[{"address":{"module":"module.heritage[0].module.message_size_breach[0]","to_display":"module.heritage[0].module.message_size_breach[0].var.max_message_size"},"status":"pass"}]},{"address":{"kind":"var","module":"module.heritage.module.message_size_breach","name":"retention_days","to_display":"module.heritage.module.message_size_breach.var.retention_days"},"status":"pass","instances":[{"address":{"module":"module.heritage[0].module.message_size_breach[0]","to_display":"module.heritage[0].module.message_size_breach[0].var.retention_days"},"status":"pass"}]},{"address":{"kind":"var","module":"module.heritage","name":"memory_optimization_container_count","to_display":"module.heritage.var.memory_optimization_container_count"},"status":"pass","instances":[{"address":{"module":"module.heritage[0]","to_display":"module.heritage[0].var.memory_optimization_container_count"},"status":"pass"}]},{"address":{"kind":"var","module":"module.heritage","name":"memory_optimization_container_memory","to_display":"module.heritage.var.memory_optimization_container_memory"},"status":"pass","instances":[{"address":{"module":"module.heritage[0]","to_display":"module.heritage[0].var.memory_optimization_container_memory"},"status":"pass"}]},{"address":{"kind":"var","module":"module.heritage","name":"message_size_breach_batch_size","to_display":"module.heritage.var.message_size_breach_batch_size"},"status":"pass","instances":[{"address":{"module":"module.heritage[0]","to_display":"module.heritage[0].var.message_size_breach_batch_size"},"status":"pass"}]},{"address":{"kind":"var","module":"module.heritage","name":"message_size_breach_lambda_memory","to_display":"module.heritage.var.message_size_breach_lambda_memory"},"status":"pass","instances":[{"address":{"module":"module.heritage[0]","to_display":"module.heritage[0].var.message_size_breach_lambda_memory"},"status":"pass"}]},{"address":{"kind":"var","module":"module.heritage","name":"message_size_breach_lambda_timeout","to_display":"module.heritage.var.message_size_breach_lambda_timeout"},"status":"pass","instances":[{"address":{"module":"module.heritage[0]","to_display":"module.heritage[0].var.message_size_breach_lambda_timeout"},"status":"pass"}]},{"address":{"kind":"var","module":"module.heritage","name":"message_size_breach_max_size","to_display":"module.heritage.var.message_size_breach_max_size"},"status":"pass","instances":[{"address":{"module":"module.heritage[0]","to_display":"module.heritage[0].var.message_size_breach_max_size"},"status":"pass"}]},{"address":{"kind":"var","module":"module.heritage","name":"message_size_breach_retention_days","to_display":"module.heritage.var.message_size_breach_retention_days"},"status":"pass","instances":[{"address":{"module":"module.heritage[0]","to_display":"module.heritage[0].var.message_size_breach_retention_days"},"status":"pass"}]},{"address":{"kind":"var","name":"memory_optimization_container_count","to_display":"var.memory_optimization_container_count"},"status":"pass","instances":[{"address":{"to_display":"var.memory_optimization_container_count"},"status":"pass"}]},{"address":{"kind":"var","name":"memory_optimization_container_memory","to_display":"var.memory_optimization_container_memory"},"status":"pass","instances":[{"address":{"to_display":"var.memory_optimization_container_memory"},"status":"pass"}]},{"address":{"kind":"var","name":"message_size_breach_batch_size","to_display":"var.message_size_breach_batch_size"},"status":"pass","instances":[{"address":{"to_display":"var.message_size_breach_batch_size"},"status":"pass"}]},{"address":{"kind":"var","name":"message_size_breach_lambda_memory","to_display":"var.message_size_breach_lambda_memory"},"status":"pass","instances":[{"address":{"to_display":"var.message_size_breach_lambda_memory"},"status":"pass"}]},{"address":{"kind":"var","name":"message_size_breach_lambda_timeout","to_display":"var.message_size_breach_lambda_timeout"},"status":"pass","instances":[{"address":{"to_display":"var.message_size_breach_lambda_timeout"},"status":"pass"}]},{"address":{"kind":"var","name":"message_size_breach_max_size","to_display":"var.message_size_breach_max_size"},"status":"pass","instances":[{"address":{"to_display":"var.message_size_breach_max_size"},"status":"pass"}]},{"address":{"kind":"var","name":"message_size_breach_retention_days","to_display":"var.message_size_breach_retention_days"},"status":"pass","instances":[{"address":{"to_display":"var.message_size_breach_retention_days"},"status":"pass"}]}],"timestamp":"2025-12-11T18:01:33Z","applyable":true,"complete":true,"errored":false}
